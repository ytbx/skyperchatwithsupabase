var Zx=Object.defineProperty;var e0=(r,t,a)=>t in r?Zx(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var lt=(r,t,a)=>e0(r,typeof t!="symbol"?t+"":t,a);function Op(r,t){for(var a=0;a<t.length;a++){const o=t[a];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in r)){const i=Object.getOwnPropertyDescriptor(o,l);i&&Object.defineProperty(r,l,i.get?i:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=a(l);fetch(l.href,i)}})();var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ed(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Nd(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var a=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var l=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(a,o,l.get?l:{enumerable:!0,get:function(){return r[o]}})}),a}var vc={exports:{}},kr={},yc={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function t0(){if(c2)return tt;c2=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),S=Symbol.iterator;function A(B){return B===null||typeof B!="object"?null:(B=S&&B[S]||B["@@iterator"],typeof B=="function"?B:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,E={};function w(B,q,me){this.props=B,this.context=q,this.refs=E,this.updater=me||D}w.prototype.isReactComponent={},w.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},w.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function b(){}b.prototype=w.prototype;function k(B,q,me){this.props=B,this.context=q,this.refs=E,this.updater=me||D}var j=k.prototype=new b;j.constructor=k,y(j,w.prototype),j.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,F={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function ce(B,q,me){var he,xe={},$=null,W=null;if(q!=null)for(he in q.ref!==void 0&&(W=q.ref),q.key!==void 0&&($=""+q.key),q)O.call(q,he)&&!U.hasOwnProperty(he)&&(xe[he]=q[he]);var ie=arguments.length-2;if(ie===1)xe.children=me;else if(1<ie){for(var ye=Array(ie),pe=0;pe<ie;pe++)ye[pe]=arguments[pe+2];xe.children=ye}if(B&&B.defaultProps)for(he in ie=B.defaultProps,ie)xe[he]===void 0&&(xe[he]=ie[he]);return{$$typeof:r,type:B,key:$,ref:W,props:xe,_owner:F.current}}function de(B,q){return{$$typeof:r,type:B.type,key:q,ref:B.ref,props:B.props,_owner:B._owner}}function ke(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function Ne(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(me){return q[me]})}var ze=/\/+/g;function fe(B,q){return typeof B=="object"&&B!==null&&B.key!=null?Ne(""+B.key):q.toString(36)}function H(B,q,me,he,xe){var $=typeof B;($==="undefined"||$==="boolean")&&(B=null);var W=!1;if(B===null)W=!0;else switch($){case"string":case"number":W=!0;break;case"object":switch(B.$$typeof){case r:case t:W=!0}}if(W)return W=B,xe=xe(W),B=he===""?"."+fe(W,0):he,I(xe)?(me="",B!=null&&(me=B.replace(ze,"$&/")+"/"),H(xe,q,me,"",function(pe){return pe})):xe!=null&&(ke(xe)&&(xe=de(xe,me+(!xe.key||W&&W.key===xe.key?"":(""+xe.key).replace(ze,"$&/")+"/")+B)),q.push(xe)),1;if(W=0,he=he===""?".":he+":",I(B))for(var ie=0;ie<B.length;ie++){$=B[ie];var ye=he+fe($,ie);W+=H($,q,me,ye,xe)}else if(ye=A(B),typeof ye=="function")for(B=ye.call(B),ie=0;!($=B.next()).done;)$=$.value,ye=he+fe($,ie++),W+=H($,q,me,ye,xe);else if($==="object")throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return W}function J(B,q,me){if(B==null)return B;var he=[],xe=0;return H(B,he,"","",function($){return q.call(me,$,xe++)}),he}function re(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(me){(B._status===0||B._status===-1)&&(B._status=1,B._result=me)},function(me){(B._status===0||B._status===-1)&&(B._status=2,B._result=me)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var z={current:null},Z={transition:null},te={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:Z,ReactCurrentOwner:F};function V(){throw Error("act(...) is not supported in production builds of React.")}return tt.Children={map:J,forEach:function(B,q,me){J(B,function(){q.apply(this,arguments)},me)},count:function(B){var q=0;return J(B,function(){q++}),q},toArray:function(B){return J(B,function(q){return q})||[]},only:function(B){if(!ke(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},tt.Component=w,tt.Fragment=a,tt.Profiler=l,tt.PureComponent=k,tt.StrictMode=o,tt.Suspense=h,tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,tt.act=V,tt.cloneElement=function(B,q,me){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var he=y({},B.props),xe=B.key,$=B.ref,W=B._owner;if(q!=null){if(q.ref!==void 0&&($=q.ref,W=F.current),q.key!==void 0&&(xe=""+q.key),B.type&&B.type.defaultProps)var ie=B.type.defaultProps;for(ye in q)O.call(q,ye)&&!U.hasOwnProperty(ye)&&(he[ye]=q[ye]===void 0&&ie!==void 0?ie[ye]:q[ye])}var ye=arguments.length-2;if(ye===1)he.children=me;else if(1<ye){ie=Array(ye);for(var pe=0;pe<ye;pe++)ie[pe]=arguments[pe+2];he.children=ie}return{$$typeof:r,type:B.type,key:xe,ref:$,props:he,_owner:W}},tt.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:i,_context:B},B.Consumer=B},tt.createElement=ce,tt.createFactory=function(B){var q=ce.bind(null,B);return q.type=B,q},tt.createRef=function(){return{current:null}},tt.forwardRef=function(B){return{$$typeof:u,render:B}},tt.isValidElement=ke,tt.lazy=function(B){return{$$typeof:C,_payload:{_status:-1,_result:B},_init:re}},tt.memo=function(B,q){return{$$typeof:x,type:B,compare:q===void 0?null:q}},tt.startTransition=function(B){var q=Z.transition;Z.transition={};try{B()}finally{Z.transition=q}},tt.unstable_act=V,tt.useCallback=function(B,q){return z.current.useCallback(B,q)},tt.useContext=function(B){return z.current.useContext(B)},tt.useDebugValue=function(){},tt.useDeferredValue=function(B){return z.current.useDeferredValue(B)},tt.useEffect=function(B,q){return z.current.useEffect(B,q)},tt.useId=function(){return z.current.useId()},tt.useImperativeHandle=function(B,q,me){return z.current.useImperativeHandle(B,q,me)},tt.useInsertionEffect=function(B,q){return z.current.useInsertionEffect(B,q)},tt.useLayoutEffect=function(B,q){return z.current.useLayoutEffect(B,q)},tt.useMemo=function(B,q){return z.current.useMemo(B,q)},tt.useReducer=function(B,q,me){return z.current.useReducer(B,q,me)},tt.useRef=function(B){return z.current.useRef(B)},tt.useState=function(B){return z.current.useState(B)},tt.useSyncExternalStore=function(B,q,me){return z.current.useSyncExternalStore(B,q,me)},tt.useTransition=function(){return z.current.useTransition()},tt.version="18.3.1",tt}var d2;function kd(){return d2||(d2=1,yc.exports=t0()),yc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2;function n0(){if(m2)return kr;m2=1;var r=kd(),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,x){var C,S={},A=null,D=null;x!==void 0&&(A=""+x),h.key!==void 0&&(A=""+h.key),h.ref!==void 0&&(D=h.ref);for(C in h)o.call(h,C)&&!i.hasOwnProperty(C)&&(S[C]=h[C]);if(u&&u.defaultProps)for(C in h=u.defaultProps,h)S[C]===void 0&&(S[C]=h[C]);return{$$typeof:t,type:u,key:A,ref:D,props:S,_owner:l.current}}return kr.Fragment=a,kr.jsx=d,kr.jsxs=d,kr}var u2;function a0(){return u2||(u2=1,vc.exports=n0()),vc.exports}var m=a0(),_=kd();const Ip=Ed(_),o0=Op({__proto__:null,default:Ip},[_]);var ti={},bc={exports:{}},nn={},wc={exports:{}},Cc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function r0(){return p2||(p2=1,(function(r){function t(Z,te){var V=Z.length;Z.push(te);e:for(;0<V;){var B=V-1>>>1,q=Z[B];if(0<l(q,te))Z[B]=te,Z[V]=q,V=B;else break e}}function a(Z){return Z.length===0?null:Z[0]}function o(Z){if(Z.length===0)return null;var te=Z[0],V=Z.pop();if(V!==te){Z[0]=V;e:for(var B=0,q=Z.length,me=q>>>1;B<me;){var he=2*(B+1)-1,xe=Z[he],$=he+1,W=Z[$];if(0>l(xe,V))$<q&&0>l(W,xe)?(Z[B]=W,Z[$]=V,B=$):(Z[B]=xe,Z[he]=V,B=he);else if($<q&&0>l(W,V))Z[B]=W,Z[$]=V,B=$;else break e}}return te}function l(Z,te){var V=Z.sortIndex-te.sortIndex;return V!==0?V:Z.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var d=Date,u=d.now();r.unstable_now=function(){return d.now()-u}}var h=[],x=[],C=1,S=null,A=3,D=!1,y=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Z){for(var te=a(x);te!==null;){if(te.callback===null)o(x);else if(te.startTime<=Z)o(x),te.sortIndex=te.expirationTime,t(h,te);else break;te=a(x)}}function I(Z){if(E=!1,j(Z),!y)if(a(h)!==null)y=!0,re(O);else{var te=a(x);te!==null&&z(I,te.startTime-Z)}}function O(Z,te){y=!1,E&&(E=!1,b(ce),ce=-1),D=!0;var V=A;try{for(j(te),S=a(h);S!==null&&(!(S.expirationTime>te)||Z&&!Ne());){var B=S.callback;if(typeof B=="function"){S.callback=null,A=S.priorityLevel;var q=B(S.expirationTime<=te);te=r.unstable_now(),typeof q=="function"?S.callback=q:S===a(h)&&o(h),j(te)}else o(h);S=a(h)}if(S!==null)var me=!0;else{var he=a(x);he!==null&&z(I,he.startTime-te),me=!1}return me}finally{S=null,A=V,D=!1}}var F=!1,U=null,ce=-1,de=5,ke=-1;function Ne(){return!(r.unstable_now()-ke<de)}function ze(){if(U!==null){var Z=r.unstable_now();ke=Z;var te=!0;try{te=U(!0,Z)}finally{te?fe():(F=!1,U=null)}}else F=!1}var fe;if(typeof k=="function")fe=function(){k(ze)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,J=H.port2;H.port1.onmessage=ze,fe=function(){J.postMessage(null)}}else fe=function(){w(ze,0)};function re(Z){U=Z,F||(F=!0,fe())}function z(Z,te){ce=w(function(){Z(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){y||D||(y=!0,re(O))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return a(h)},r.unstable_next=function(Z){switch(A){case 1:case 2:case 3:var te=3;break;default:te=A}var V=A;A=te;try{return Z()}finally{A=V}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,te){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var V=A;A=Z;try{return te()}finally{A=V}},r.unstable_scheduleCallback=function(Z,te,V){var B=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?B+V:B):V=B,Z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=V+q,Z={id:C++,callback:te,priorityLevel:Z,startTime:V,expirationTime:q,sortIndex:-1},V>B?(Z.sortIndex=V,t(x,Z),a(h)===null&&Z===a(x)&&(E?(b(ce),ce=-1):E=!0,z(I,V-B))):(Z.sortIndex=q,t(h,Z),y||D||(y=!0,re(O))),Z},r.unstable_shouldYield=Ne,r.unstable_wrapCallback=function(Z){var te=A;return function(){var V=A;A=te;try{return Z.apply(this,arguments)}finally{A=V}}}})(Cc)),Cc}var h2;function s0(){return h2||(h2=1,wc.exports=r0()),wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function i0(){if(f2)return nn;f2=1;var r=kd(),t=s0();function a(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function i(e,n){d(e,n),d(e+"Capture",n)}function d(e,n){for(l[e]=n,e=0;e<n.length;e++)o.add(n[e])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},S={};function A(e){return h.call(S,e)?!0:h.call(C,e)?!1:x.test(e)?S[e]=!0:(C[e]=!0,!1)}function D(e,n,s,c){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function y(e,n,s,c){if(n===null||typeof n>"u"||D(e,n,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function E(e,n,s,c,p,g,M){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=p,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=g,this.removeEmptyString=M}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){w[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];w[n]=new E(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){w[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){w[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){w[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){w[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){w[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){w[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){w[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(b,k);w[n]=new E(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(b,k);w[n]=new E(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(b,k);w[n]=new E(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){w[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),w.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){w[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function j(e,n,s,c){var p=w.hasOwnProperty(n)?w[n]:null;(p!==null?p.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(y(n,s,p,c)&&(s=null),c||p===null?A(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):p.mustUseProperty?e[p.propertyName]=s===null?p.type===3?!1:"":s:(n=p.attributeName,c=p.attributeNamespace,s===null?e.removeAttribute(n):(p=p.type,s=p===3||p===4&&s===!0?"":""+s,c?e.setAttributeNS(c,n,s):e.setAttribute(n,s))))}var I=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),F=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),Z=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,B;function q(e){if(B===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);B=n&&n[1]||""}return`
`+B+e}var me=!1;function he(e,n){if(!e||me)return"";me=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(le){var c=le}Reflect.construct(e,[],n)}else{try{n.call()}catch(le){c=le}e.call(n.prototype)}else{try{throw Error()}catch(le){c=le}e()}}catch(le){if(le&&c&&typeof le.stack=="string"){for(var p=le.stack.split(`
`),g=c.stack.split(`
`),M=p.length-1,P=g.length-1;1<=M&&0<=P&&p[M]!==g[P];)P--;for(;1<=M&&0<=P;M--,P--)if(p[M]!==g[P]){if(M!==1||P!==1)do if(M--,P--,0>P||p[M]!==g[P]){var G=`
`+p[M].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=M&&0<=P);break}}}finally{me=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?q(e):""}function xe(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function $(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case F:return"Portal";case de:return"Profiler";case ce:return"StrictMode";case fe:return"Suspense";case H:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ne:return(e.displayName||"Context")+".Consumer";case ke:return(e._context.displayName||"Context")+".Provider";case ze:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return n=e.displayName||null,n!==null?n:$(e.type)||"Memo";case re:n=e._payload,e=e._init;try{return $(e(n))}catch{}}return null}function W(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(n);case 8:return n===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ie(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pe(e){var n=ye(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var p=s.get,g=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(M){c=""+M,g.call(this,M)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function T(e){e._valueTracker||(e._valueTracker=pe(e))}function N(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),c="";return e&&(c=ye(e)?e.checked?"true":"false":e.value),e=c,e!==s?(n.setValue(e),!0):!1}function ee(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ge(e,n){var s=n.checked;return V({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Ae(e,n){var s=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;s=ie(n.value!=null?n.value:s),e._wrapperState={initialChecked:c,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function X(e,n){n=n.checked,n!=null&&j(e,"checked",n,!1)}function we(e,n){X(e,n);var s=ie(n.value),c=n.type;if(s!=null)c==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Ve(e,n.type,s):n.hasOwnProperty("defaultValue")&&Ve(e,n.type,ie(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Me(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Ve(e,n,s){(n!=="number"||ee(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Pe=Array.isArray;function ot(e,n,s,c){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&c&&(e[s].defaultSelected=!0)}else{for(s=""+ie(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function We(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(a(91));return V({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(a(92));if(Pe(s)){if(1<s.length)throw Error(a(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:ie(s)}}function Te(e,n){var s=ie(n.value),c=ie(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),c!=null&&(e.defaultValue=""+c)}function qe(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function nt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?nt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var f,v=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,c,p){MSApp.execUnsafeLocalFunction(function(){return e(n,s,c,p)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(f=f||document.createElement("div"),f.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=f.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function L(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var Y={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},se=["Webkit","ms","Moz","O"];Object.keys(Y).forEach(function(e){se.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Y[n]=Y[e]})});function ve(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||Y.hasOwnProperty(e)&&Y[e]?(""+n).trim():n+"px"}function et(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var c=s.indexOf("--")===0,p=ve(s,n[s],c);s==="float"&&(s="cssFloat"),c?e.setProperty(s,p):e[s]=p}}var be=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Le(e,n){if(n){if(be[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(a(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(a(61))}if(n.style!=null&&typeof n.style!="object")throw Error(a(62))}}function rt(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function ft(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var at=null,pt=null,_t=null;function to(e){if(e=pr(e)){if(typeof at!="function")throw Error(a(280));var n=e.stateNode;n&&(n=xs(n),at(e.stateNode,e.type,n))}}function Wr(e){pt?_t?_t.push(e):_t=[e]:pt=e}function Gr(){if(pt){var e=pt,n=_t;if(_t=pt=null,to(e),n)for(e=0;e<n.length;e++)to(n[e])}}function Hr(e,n){return e(n)}function Kr(){}var no=!1;function Sa(e,n,s){if(no)return e(n,s);no=!0;try{return Hr(e,n,s)}finally{no=!1,(pt!==null||_t!==null)&&(Kr(),Gr())}}function Aa(e,n){var s=e.stateNode;if(s===null)return null;var c=xs(s);if(c===null)return null;s=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var ao=!1;if(u)try{var _a={};Object.defineProperty(_a,"passive",{get:function(){ao=!0}}),window.addEventListener("test",_a,_a),window.removeEventListener("test",_a,_a)}catch{ao=!1}function Bi(e,n,s,c,p,g,M,P,G){var le=Array.prototype.slice.call(arguments,3);try{n.apply(s,le)}catch(Se){this.onError(Se)}}var Ea=!1,Na=null,oo=!1,Wo=null,Ti={onError:function(e){Ea=!0,Na=e}};function Li(e,n,s,c,p,g,M,P,G){Ea=!1,Na=null,Bi.apply(Ti,arguments)}function Jn(e,n,s,c,p,g,M,P,G){if(Li.apply(this,arguments),Ea){if(Ea){var le=Na;Ea=!1,Na=null}else throw Error(a(198));oo||(oo=!0,Wo=le)}}function In(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function Go(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Yn(e){if(In(e)!==e)throw Error(a(188))}function pn(e){var n=e.alternate;if(!n){if(n=In(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,c=n;;){var p=s.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){s=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===s)return Yn(p),e;if(g===c)return Yn(p),n;g=g.sibling}throw Error(a(188))}if(s.return!==c.return)s=p,c=g;else{for(var M=!1,P=p.child;P;){if(P===s){M=!0,s=p,c=g;break}if(P===c){M=!0,c=p,s=g;break}P=P.sibling}if(!M){for(P=g.child;P;){if(P===s){M=!0,s=g,c=p;break}if(P===c){M=!0,c=g,s=p;break}P=P.sibling}if(!M)throw Error(a(189))}}if(s.alternate!==c)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function Ho(e){return e=pn(e),e!==null?Jr(e):null}function Jr(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Jr(e);if(n!==null)return n;e=e.sibling}return null}var Yr=t.unstable_scheduleCallback,Qr=t.unstable_cancelCallback,Oi=t.unstable_shouldYield,Ii=t.unstable_requestPaint,wt=t.unstable_now,Pi=t.unstable_getCurrentPriorityLevel,Ko=t.unstable_ImmediatePriority,K=t.unstable_UserBlockingPriority,ue=t.unstable_NormalPriority,De=t.unstable_LowPriority,Ye=t.unstable_IdlePriority,mt=null,ct=null;function Ue(e){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(mt,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:gf,ka=Math.log,Qn=Math.LN2;function gf(e){return e>>>=0,e===0?32:31-(ka(e)/Qn|0)|0}var Xr=64,Zr=4194304;function Jo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function es(e,n){var s=e.pendingLanes;if(s===0)return 0;var c=0,p=e.suspendedLanes,g=e.pingedLanes,M=s&268435455;if(M!==0){var P=M&~p;P!==0?c=Jo(P):(g&=M,g!==0&&(c=Jo(g)))}else M=s&~p,M!==0?c=Jo(M):g!==0&&(c=Jo(g));if(c===0)return 0;if(n!==0&&n!==c&&(n&p)===0&&(p=c&-c,g=n&-n,p>=g||p===16&&(g&4194240)!==0))return n;if((c&4)!==0&&(c|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=c;0<n;)s=31-ht(n),p=1<<s,c|=e[s],n&=~p;return c}function vf(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yf(e,n){for(var s=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,g=e.pendingLanes;0<g;){var M=31-ht(g),P=1<<M,G=p[M];G===-1?((P&s)===0||(P&c)!==0)&&(p[M]=vf(P,n)):G<=n&&(e.expiredLanes|=P),g&=~P}}function Fi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vd(){var e=Xr;return Xr<<=1,(Xr&4194240)===0&&(Xr=64),e}function Vi(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Yo(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-ht(n),e[n]=s}function bf(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<s;){var p=31-ht(s),g=1<<p;n[p]=0,c[p]=-1,e[p]=-1,s&=~g}}function Ui(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var c=31-ht(s),p=1<<c;p&n|e[c]&n&&(e[c]|=n),s&=~p}}var ut=0;function Ud(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $d,$i,qd,zd,Wd,qi=!1,ts=[],Xn=null,Zn=null,ea=null,Qo=new Map,Xo=new Map,ta=[],wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gd(e,n){switch(e){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":Qo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(n.pointerId)}}function Zo(e,n,s,c,p,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:s,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},n!==null&&(n=pr(n),n!==null&&$i(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Cf(e,n,s,c,p){switch(n){case"focusin":return Xn=Zo(Xn,e,n,s,c,p),!0;case"dragenter":return Zn=Zo(Zn,e,n,s,c,p),!0;case"mouseover":return ea=Zo(ea,e,n,s,c,p),!0;case"pointerover":var g=p.pointerId;return Qo.set(g,Zo(Qo.get(g)||null,e,n,s,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Xo.set(g,Zo(Xo.get(g)||null,e,n,s,c,p)),!0}return!1}function Hd(e){var n=Da(e.target);if(n!==null){var s=In(n);if(s!==null){if(n=s.tag,n===13){if(n=Go(s),n!==null){e.blockedOn=n,Wd(e.priority,function(){qd(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ns(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Wi(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var c=new s.constructor(s.type,s);He=c,s.target.dispatchEvent(c),He=null}else return n=pr(s),n!==null&&$i(n),e.blockedOn=s,!1;n.shift()}return!0}function Kd(e,n,s){ns(e)&&s.delete(n)}function Sf(){qi=!1,Xn!==null&&ns(Xn)&&(Xn=null),Zn!==null&&ns(Zn)&&(Zn=null),ea!==null&&ns(ea)&&(ea=null),Qo.forEach(Kd),Xo.forEach(Kd)}function er(e,n){e.blockedOn===n&&(e.blockedOn=null,qi||(qi=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Sf)))}function tr(e){function n(p){return er(p,e)}if(0<ts.length){er(ts[0],e);for(var s=1;s<ts.length;s++){var c=ts[s];c.blockedOn===e&&(c.blockedOn=null)}}for(Xn!==null&&er(Xn,e),Zn!==null&&er(Zn,e),ea!==null&&er(ea,e),Qo.forEach(n),Xo.forEach(n),s=0;s<ta.length;s++)c=ta[s],c.blockedOn===e&&(c.blockedOn=null);for(;0<ta.length&&(s=ta[0],s.blockedOn===null);)Hd(s),s.blockedOn===null&&ta.shift()}var ro=I.ReactCurrentBatchConfig,as=!0;function Af(e,n,s,c){var p=ut,g=ro.transition;ro.transition=null;try{ut=1,zi(e,n,s,c)}finally{ut=p,ro.transition=g}}function _f(e,n,s,c){var p=ut,g=ro.transition;ro.transition=null;try{ut=4,zi(e,n,s,c)}finally{ut=p,ro.transition=g}}function zi(e,n,s,c){if(as){var p=Wi(e,n,s,c);if(p===null)ll(e,n,c,os,s),Gd(e,c);else if(Cf(p,e,n,s,c))c.stopPropagation();else if(Gd(e,c),n&4&&-1<wf.indexOf(e)){for(;p!==null;){var g=pr(p);if(g!==null&&$d(g),g=Wi(e,n,s,c),g===null&&ll(e,n,c,os,s),g===p)break;p=g}p!==null&&c.stopPropagation()}else ll(e,n,c,null,s)}}var os=null;function Wi(e,n,s,c){if(os=null,e=ft(c),e=Da(e),e!==null)if(n=In(e),n===null)e=null;else if(s=n.tag,s===13){if(e=Go(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return os=e,null}function Jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pi()){case Ko:return 1;case K:return 4;case ue:case De:return 16;case Ye:return 536870912;default:return 16}default:return 16}}var na=null,Gi=null,rs=null;function Yd(){if(rs)return rs;var e,n=Gi,s=n.length,c,p="value"in na?na.value:na.textContent,g=p.length;for(e=0;e<s&&n[e]===p[e];e++);var M=s-e;for(c=1;c<=M&&n[s-c]===p[g-c];c++);return rs=p.slice(e,1<c?1-c:void 0)}function ss(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function is(){return!0}function Qd(){return!1}function on(e){function n(s,c,p,g,M){this._reactName=s,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=M,this.currentTarget=null;for(var P in e)e.hasOwnProperty(P)&&(s=e[P],this[P]=s?s(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?is:Qd,this.isPropagationStopped=Qd,this}return V(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),n}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=on(so),nr=V({},so,{view:0,detail:0}),Ef=on(nr),Ki,Ji,ar,ls=V({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&e.type==="mousemove"?(Ki=e.screenX-ar.screenX,Ji=e.screenY-ar.screenY):Ji=Ki=0,ar=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),Xd=on(ls),Nf=V({},ls,{dataTransfer:0}),kf=on(Nf),Df=V({},nr,{relatedTarget:0}),Yi=on(Df),Mf=V({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Rf=on(Mf),jf=V({},so,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bf=on(jf),Tf=V({},so,{data:0}),Zd=on(Tf),Lf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},If={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pf(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=If[e])?!!n[e]:!1}function Qi(){return Pf}var Ff=V({},nr,{key:function(e){if(e.key){var n=Lf[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qi,charCode:function(e){return e.type==="keypress"?ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vf=on(Ff),Uf=V({},ls,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=on(Uf),$f=V({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qi}),qf=on($f),zf=V({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wf=on(zf),Gf=V({},ls,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hf=on(Gf),Kf=[9,13,27,32],Xi=u&&"CompositionEvent"in window,or=null;u&&"documentMode"in document&&(or=document.documentMode);var Jf=u&&"TextEvent"in window&&!or,tm=u&&(!Xi||or&&8<or&&11>=or),nm=" ",am=!1;function om(e,n){switch(e){case"keyup":return Kf.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var io=!1;function Yf(e,n){switch(e){case"compositionend":return rm(n);case"keypress":return n.which!==32?null:(am=!0,nm);case"textInput":return e=n.data,e===nm&&am?null:e;default:return null}}function Qf(e,n){if(io)return e==="compositionend"||!Xi&&om(e,n)?(e=Yd(),rs=Gi=na=null,io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return tm&&n.locale!=="ko"?null:n.data;default:return null}}var Xf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Xf[e.type]:n==="textarea"}function im(e,n,s,c){Wr(c),n=ps(n,"onChange"),0<n.length&&(s=new Hi("onChange","change",null,s,c),e.push({event:s,listeners:n}))}var rr=null,sr=null;function Zf(e){_m(e,0)}function cs(e){var n=po(e);if(N(n))return e}function ex(e,n){if(e==="change")return n}var lm=!1;if(u){var Zi;if(u){var el="oninput"in document;if(!el){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),el=typeof cm.oninput=="function"}Zi=el}else Zi=!1;lm=Zi&&(!document.documentMode||9<document.documentMode)}function dm(){rr&&(rr.detachEvent("onpropertychange",mm),sr=rr=null)}function mm(e){if(e.propertyName==="value"&&cs(sr)){var n=[];im(n,sr,e,ft(e)),Sa(Zf,n)}}function tx(e,n,s){e==="focusin"?(dm(),rr=n,sr=s,rr.attachEvent("onpropertychange",mm)):e==="focusout"&&dm()}function nx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cs(sr)}function ax(e,n){if(e==="click")return cs(n)}function ox(e,n){if(e==="input"||e==="change")return cs(n)}function rx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Cn=typeof Object.is=="function"?Object.is:rx;function ir(e,n){if(Cn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),c=Object.keys(n);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var p=s[c];if(!h.call(n,p)||!Cn(e[p],n[p]))return!1}return!0}function um(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pm(e,n){var s=um(e);e=0;for(var c;s;){if(s.nodeType===3){if(c=e+s.textContent.length,e<=n&&c>=n)return{node:s,offset:n-e};e=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=um(s)}}function hm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?hm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function fm(){for(var e=window,n=ee();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ee(e.document)}return n}function tl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function sx(e){var n=fm(),s=e.focusedElem,c=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&hm(s.ownerDocument.documentElement,s)){if(c!==null&&tl(s)){if(n=c.start,e=c.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var p=s.textContent.length,g=Math.min(c.start,p);c=c.end===void 0?g:Math.min(c.end,p),!e.extend&&g>c&&(p=c,c=g,g=p),p=pm(s,g);var M=pm(s,c);p&&M&&(e.rangeCount!==1||e.anchorNode!==p.node||e.anchorOffset!==p.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(p.node,p.offset),e.removeAllRanges(),g>c?(e.addRange(n),e.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ix=u&&"documentMode"in document&&11>=document.documentMode,lo=null,nl=null,lr=null,al=!1;function xm(e,n,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;al||lo==null||lo!==ee(c)||(c=lo,"selectionStart"in c&&tl(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),lr&&ir(lr,c)||(lr=c,c=ps(nl,"onSelect"),0<c.length&&(n=new Hi("onSelect","select",null,n,s),e.push({event:n,listeners:c}),n.target=lo)))}function ds(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var co={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionend:ds("Transition","TransitionEnd")},ol={},gm={};u&&(gm=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function ms(e){if(ol[e])return ol[e];if(!co[e])return e;var n=co[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in gm)return ol[e]=n[s];return e}var vm=ms("animationend"),ym=ms("animationiteration"),bm=ms("animationstart"),wm=ms("transitionend"),Cm=new Map,Sm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function aa(e,n){Cm.set(e,n),i(n,[e])}for(var rl=0;rl<Sm.length;rl++){var sl=Sm[rl],lx=sl.toLowerCase(),cx=sl[0].toUpperCase()+sl.slice(1);aa(lx,"on"+cx)}aa(vm,"onAnimationEnd"),aa(ym,"onAnimationIteration"),aa(bm,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(wm,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dx=new Set("cancel close invalid load scroll toggle".split(" ").concat(cr));function Am(e,n,s){var c=e.type||"unknown-event";e.currentTarget=s,Jn(c,n,void 0,e),e.currentTarget=null}function _m(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var c=e[s],p=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var M=c.length-1;0<=M;M--){var P=c[M],G=P.instance,le=P.currentTarget;if(P=P.listener,G!==g&&p.isPropagationStopped())break e;Am(p,P,le),g=G}else for(M=0;M<c.length;M++){if(P=c[M],G=P.instance,le=P.currentTarget,P=P.listener,G!==g&&p.isPropagationStopped())break e;Am(p,P,le),g=G}}}if(oo)throw e=Wo,oo=!1,Wo=null,e}function vt(e,n){var s=n[hl];s===void 0&&(s=n[hl]=new Set);var c=e+"__bubble";s.has(c)||(Em(n,e,2,!1),s.add(c))}function il(e,n,s){var c=0;n&&(c|=4),Em(s,e,c,n)}var us="_reactListening"+Math.random().toString(36).slice(2);function dr(e){if(!e[us]){e[us]=!0,o.forEach(function(s){s!=="selectionchange"&&(dx.has(s)||il(s,!1,e),il(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[us]||(n[us]=!0,il("selectionchange",!1,n))}}function Em(e,n,s,c){switch(Jd(n)){case 1:var p=Af;break;case 4:p=_f;break;default:p=zi}s=p.bind(null,n,s,e),p=void 0,!ao||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function ll(e,n,s,c,p){var g=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var M=c.tag;if(M===3||M===4){var P=c.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(M===4)for(M=c.return;M!==null;){var G=M.tag;if((G===3||G===4)&&(G=M.stateNode.containerInfo,G===p||G.nodeType===8&&G.parentNode===p))return;M=M.return}for(;P!==null;){if(M=Da(P),M===null)return;if(G=M.tag,G===5||G===6){c=g=M;continue e}P=P.parentNode}}c=c.return}Sa(function(){var le=g,Se=ft(s),_e=[];e:{var Ce=Cm.get(e);if(Ce!==void 0){var je=Hi,Oe=e;switch(e){case"keypress":if(ss(s)===0)break e;case"keydown":case"keyup":je=Vf;break;case"focusin":Oe="focus",je=Yi;break;case"focusout":Oe="blur",je=Yi;break;case"beforeblur":case"afterblur":je=Yi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=qf;break;case vm:case ym:case bm:je=Rf;break;case wm:je=Wf;break;case"scroll":je=Ef;break;case"wheel":je=Hf;break;case"copy":case"cut":case"paste":je=Bf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=em}var Ie=(n&4)!==0,Nt=!Ie&&e==="scroll",ae=Ie?Ce!==null?Ce+"Capture":null:Ce;Ie=[];for(var Q=le,oe;Q!==null;){oe=Q;var Ee=oe.stateNode;if(oe.tag===5&&Ee!==null&&(oe=Ee,ae!==null&&(Ee=Aa(Q,ae),Ee!=null&&Ie.push(mr(Q,Ee,oe)))),Nt)break;Q=Q.return}0<Ie.length&&(Ce=new je(Ce,Oe,null,s,Se),_e.push({event:Ce,listeners:Ie}))}}if((n&7)===0){e:{if(Ce=e==="mouseover"||e==="pointerover",je=e==="mouseout"||e==="pointerout",Ce&&s!==He&&(Oe=s.relatedTarget||s.fromElement)&&(Da(Oe)||Oe[Pn]))break e;if((je||Ce)&&(Ce=Se.window===Se?Se:(Ce=Se.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,je?(Oe=s.relatedTarget||s.toElement,je=le,Oe=Oe?Da(Oe):null,Oe!==null&&(Nt=In(Oe),Oe!==Nt||Oe.tag!==5&&Oe.tag!==6)&&(Oe=null)):(je=null,Oe=le),je!==Oe)){if(Ie=Xd,Ee="onMouseLeave",ae="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=em,Ee="onPointerLeave",ae="onPointerEnter",Q="pointer"),Nt=je==null?Ce:po(je),oe=Oe==null?Ce:po(Oe),Ce=new Ie(Ee,Q+"leave",je,s,Se),Ce.target=Nt,Ce.relatedTarget=oe,Ee=null,Da(Se)===le&&(Ie=new Ie(ae,Q+"enter",Oe,s,Se),Ie.target=oe,Ie.relatedTarget=Nt,Ee=Ie),Nt=Ee,je&&Oe)t:{for(Ie=je,ae=Oe,Q=0,oe=Ie;oe;oe=mo(oe))Q++;for(oe=0,Ee=ae;Ee;Ee=mo(Ee))oe++;for(;0<Q-oe;)Ie=mo(Ie),Q--;for(;0<oe-Q;)ae=mo(ae),oe--;for(;Q--;){if(Ie===ae||ae!==null&&Ie===ae.alternate)break t;Ie=mo(Ie),ae=mo(ae)}Ie=null}else Ie=null;je!==null&&Nm(_e,Ce,je,Ie,!1),Oe!==null&&Nt!==null&&Nm(_e,Nt,Oe,Ie,!0)}}e:{if(Ce=le?po(le):window,je=Ce.nodeName&&Ce.nodeName.toLowerCase(),je==="select"||je==="input"&&Ce.type==="file")var $e=ex;else if(sm(Ce))if(lm)$e=ox;else{$e=nx;var Ke=tx}else(je=Ce.nodeName)&&je.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&($e=ax);if($e&&($e=$e(e,le))){im(_e,$e,s,Se);break e}Ke&&Ke(e,Ce,le),e==="focusout"&&(Ke=Ce._wrapperState)&&Ke.controlled&&Ce.type==="number"&&Ve(Ce,"number",Ce.value)}switch(Ke=le?po(le):window,e){case"focusin":(sm(Ke)||Ke.contentEditable==="true")&&(lo=Ke,nl=le,lr=null);break;case"focusout":lr=nl=lo=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,xm(_e,s,Se);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":xm(_e,s,Se)}var Je;if(Xi)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else io?om(e,s)&&(Xe="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Xe="onCompositionStart");Xe&&(tm&&s.locale!=="ko"&&(io||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&io&&(Je=Yd()):(na=Se,Gi="value"in na?na.value:na.textContent,io=!0)),Ke=ps(le,Xe),0<Ke.length&&(Xe=new Zd(Xe,e,null,s,Se),_e.push({event:Xe,listeners:Ke}),Je?Xe.data=Je:(Je=rm(s),Je!==null&&(Xe.data=Je)))),(Je=Jf?Yf(e,s):Qf(e,s))&&(le=ps(le,"onBeforeInput"),0<le.length&&(Se=new Zd("onBeforeInput","beforeinput",null,s,Se),_e.push({event:Se,listeners:le}),Se.data=Je))}_m(_e,n)})}function mr(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ps(e,n){for(var s=n+"Capture",c=[];e!==null;){var p=e,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=Aa(e,s),g!=null&&c.unshift(mr(e,g,p)),g=Aa(e,n),g!=null&&c.push(mr(e,g,p))),e=e.return}return c}function mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nm(e,n,s,c,p){for(var g=n._reactName,M=[];s!==null&&s!==c;){var P=s,G=P.alternate,le=P.stateNode;if(G!==null&&G===c)break;P.tag===5&&le!==null&&(P=le,p?(G=Aa(s,g),G!=null&&M.unshift(mr(s,G,P))):p||(G=Aa(s,g),G!=null&&M.push(mr(s,G,P)))),s=s.return}M.length!==0&&e.push({event:n,listeners:M})}var mx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function km(e){return(typeof e=="string"?e:""+e).replace(mx,`
`).replace(ux,"")}function hs(e,n,s){if(n=km(n),km(e)!==n&&s)throw Error(a(425))}function fs(){}var cl=null,dl=null;function ml(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ul=typeof setTimeout=="function"?setTimeout:void 0,px=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(e){return Dm.resolve(null).then(e).catch(fx)}:ul;function fx(e){setTimeout(function(){throw e})}function pl(e,n){var s=n,c=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"){if(c===0){e.removeChild(p),tr(n);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=p}while(s);tr(n)}function oa(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Mm(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+uo,ur="__reactProps$"+uo,Pn="__reactContainer$"+uo,hl="__reactEvents$"+uo,xx="__reactListeners$"+uo,gx="__reactHandles$"+uo;function Da(e){var n=e[Bn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Pn]||s[Bn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Mm(e);e!==null;){if(s=e[Bn])return s;e=Mm(e)}return n}e=s,s=e.parentNode}return null}function pr(e){return e=e[Bn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function po(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function xs(e){return e[ur]||null}var fl=[],ho=-1;function ra(e){return{current:e}}function yt(e){0>ho||(e.current=fl[ho],fl[ho]=null,ho--)}function xt(e,n){ho++,fl[ho]=e.current,e.current=n}var sa={},$t=ra(sa),Qt=ra(!1),Ma=sa;function fo(e,n){var s=e.type.contextTypes;if(!s)return sa;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in s)p[g]=n[g];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=p),p}function Xt(e){return e=e.childContextTypes,e!=null}function gs(){yt(Qt),yt($t)}function Rm(e,n,s){if($t.current!==sa)throw Error(a(168));xt($t,n),xt(Qt,s)}function jm(e,n,s){var c=e.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var p in c)if(!(p in n))throw Error(a(108,W(e)||"Unknown",p));return V({},s,c)}function vs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sa,Ma=$t.current,xt($t,e),xt(Qt,Qt.current),!0}function Bm(e,n,s){var c=e.stateNode;if(!c)throw Error(a(169));s?(e=jm(e,n,Ma),c.__reactInternalMemoizedMergedChildContext=e,yt(Qt),yt($t),xt($t,e)):yt(Qt),xt(Qt,s)}var Fn=null,ys=!1,xl=!1;function Tm(e){Fn===null?Fn=[e]:Fn.push(e)}function vx(e){ys=!0,Tm(e)}function ia(){if(!xl&&Fn!==null){xl=!0;var e=0,n=ut;try{var s=Fn;for(ut=1;e<s.length;e++){var c=s[e];do c=c(!0);while(c!==null)}Fn=null,ys=!1}catch(p){throw Fn!==null&&(Fn=Fn.slice(e+1)),Yr(Ko,ia),p}finally{ut=n,xl=!1}}return null}var xo=[],go=0,bs=null,ws=0,hn=[],fn=0,Ra=null,Vn=1,Un="";function ja(e,n){xo[go++]=ws,xo[go++]=bs,bs=e,ws=n}function Lm(e,n,s){hn[fn++]=Vn,hn[fn++]=Un,hn[fn++]=Ra,Ra=e;var c=Vn;e=Un;var p=32-ht(c)-1;c&=~(1<<p),s+=1;var g=32-ht(n)+p;if(30<g){var M=p-p%5;g=(c&(1<<M)-1).toString(32),c>>=M,p-=M,Vn=1<<32-ht(n)+p|s<<p|c,Un=g+e}else Vn=1<<g|s<<p|c,Un=e}function gl(e){e.return!==null&&(ja(e,1),Lm(e,1,0))}function vl(e){for(;e===bs;)bs=xo[--go],xo[go]=null,ws=xo[--go],xo[go]=null;for(;e===Ra;)Ra=hn[--fn],hn[fn]=null,Un=hn[--fn],hn[fn]=null,Vn=hn[--fn],hn[fn]=null}var rn=null,sn=null,bt=!1,Sn=null;function Om(e,n){var s=yn(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function Im(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,rn=e,sn=oa(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,rn=e,sn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Ra!==null?{id:Vn,overflow:Un}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=yn(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,rn=e,sn=null,!0):!1;default:return!1}}function yl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(bt){var n=sn;if(n){var s=n;if(!Im(e,n)){if(yl(e))throw Error(a(418));n=oa(s.nextSibling);var c=rn;n&&Im(e,n)?Om(c,s):(e.flags=e.flags&-4097|2,bt=!1,rn=e)}}else{if(yl(e))throw Error(a(418));e.flags=e.flags&-4097|2,bt=!1,rn=e}}}function Pm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function Cs(e){if(e!==rn)return!1;if(!bt)return Pm(e),bt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ml(e.type,e.memoizedProps)),n&&(n=sn)){if(yl(e))throw Fm(),Error(a(418));for(;n;)Om(e,n),n=oa(n.nextSibling)}if(Pm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){sn=oa(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}sn=null}}else sn=rn?oa(e.stateNode.nextSibling):null;return!0}function Fm(){for(var e=sn;e;)e=oa(e.nextSibling)}function vo(){sn=rn=null,bt=!1}function wl(e){Sn===null?Sn=[e]:Sn.push(e)}var yx=I.ReactCurrentBatchConfig;function hr(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(a(309));var c=s.stateNode}if(!c)throw Error(a(147,e));var p=c,g=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===g?n.ref:(n=function(M){var P=p.refs;M===null?delete P[g]:P[g]=M},n._stringRef=g,n)}if(typeof e!="string")throw Error(a(284));if(!s._owner)throw Error(a(290,e))}return e}function Ss(e,n){throw e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Vm(e){var n=e._init;return n(e._payload)}function Um(e){function n(ae,Q){if(e){var oe=ae.deletions;oe===null?(ae.deletions=[Q],ae.flags|=16):oe.push(Q)}}function s(ae,Q){if(!e)return null;for(;Q!==null;)n(ae,Q),Q=Q.sibling;return null}function c(ae,Q){for(ae=new Map;Q!==null;)Q.key!==null?ae.set(Q.key,Q):ae.set(Q.index,Q),Q=Q.sibling;return ae}function p(ae,Q){return ae=fa(ae,Q),ae.index=0,ae.sibling=null,ae}function g(ae,Q,oe){return ae.index=oe,e?(oe=ae.alternate,oe!==null?(oe=oe.index,oe<Q?(ae.flags|=2,Q):oe):(ae.flags|=2,Q)):(ae.flags|=1048576,Q)}function M(ae){return e&&ae.alternate===null&&(ae.flags|=2),ae}function P(ae,Q,oe,Ee){return Q===null||Q.tag!==6?(Q=uc(oe,ae.mode,Ee),Q.return=ae,Q):(Q=p(Q,oe),Q.return=ae,Q)}function G(ae,Q,oe,Ee){var $e=oe.type;return $e===U?Se(ae,Q,oe.props.children,Ee,oe.key):Q!==null&&(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===re&&Vm($e)===Q.type)?(Ee=p(Q,oe.props),Ee.ref=hr(ae,Q,oe),Ee.return=ae,Ee):(Ee=Hs(oe.type,oe.key,oe.props,null,ae.mode,Ee),Ee.ref=hr(ae,Q,oe),Ee.return=ae,Ee)}function le(ae,Q,oe,Ee){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=pc(oe,ae.mode,Ee),Q.return=ae,Q):(Q=p(Q,oe.children||[]),Q.return=ae,Q)}function Se(ae,Q,oe,Ee,$e){return Q===null||Q.tag!==7?(Q=Va(oe,ae.mode,Ee,$e),Q.return=ae,Q):(Q=p(Q,oe),Q.return=ae,Q)}function _e(ae,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=uc(""+Q,ae.mode,oe),Q.return=ae,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return oe=Hs(Q.type,Q.key,Q.props,null,ae.mode,oe),oe.ref=hr(ae,null,Q),oe.return=ae,oe;case F:return Q=pc(Q,ae.mode,oe),Q.return=ae,Q;case re:var Ee=Q._init;return _e(ae,Ee(Q._payload),oe)}if(Pe(Q)||te(Q))return Q=Va(Q,ae.mode,oe,null),Q.return=ae,Q;Ss(ae,Q)}return null}function Ce(ae,Q,oe,Ee){var $e=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $e!==null?null:P(ae,Q,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return oe.key===$e?G(ae,Q,oe,Ee):null;case F:return oe.key===$e?le(ae,Q,oe,Ee):null;case re:return $e=oe._init,Ce(ae,Q,$e(oe._payload),Ee)}if(Pe(oe)||te(oe))return $e!==null?null:Se(ae,Q,oe,Ee,null);Ss(ae,oe)}return null}function je(ae,Q,oe,Ee,$e){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ae=ae.get(oe)||null,P(Q,ae,""+Ee,$e);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case O:return ae=ae.get(Ee.key===null?oe:Ee.key)||null,G(Q,ae,Ee,$e);case F:return ae=ae.get(Ee.key===null?oe:Ee.key)||null,le(Q,ae,Ee,$e);case re:var Ke=Ee._init;return je(ae,Q,oe,Ke(Ee._payload),$e)}if(Pe(Ee)||te(Ee))return ae=ae.get(oe)||null,Se(Q,ae,Ee,$e,null);Ss(Q,Ee)}return null}function Oe(ae,Q,oe,Ee){for(var $e=null,Ke=null,Je=Q,Xe=Q=0,It=null;Je!==null&&Xe<oe.length;Xe++){Je.index>Xe?(It=Je,Je=null):It=Je.sibling;var it=Ce(ae,Je,oe[Xe],Ee);if(it===null){Je===null&&(Je=It);break}e&&Je&&it.alternate===null&&n(ae,Je),Q=g(it,Q,Xe),Ke===null?$e=it:Ke.sibling=it,Ke=it,Je=It}if(Xe===oe.length)return s(ae,Je),bt&&ja(ae,Xe),$e;if(Je===null){for(;Xe<oe.length;Xe++)Je=_e(ae,oe[Xe],Ee),Je!==null&&(Q=g(Je,Q,Xe),Ke===null?$e=Je:Ke.sibling=Je,Ke=Je);return bt&&ja(ae,Xe),$e}for(Je=c(ae,Je);Xe<oe.length;Xe++)It=je(Je,ae,Xe,oe[Xe],Ee),It!==null&&(e&&It.alternate!==null&&Je.delete(It.key===null?Xe:It.key),Q=g(It,Q,Xe),Ke===null?$e=It:Ke.sibling=It,Ke=It);return e&&Je.forEach(function(xa){return n(ae,xa)}),bt&&ja(ae,Xe),$e}function Ie(ae,Q,oe,Ee){var $e=te(oe);if(typeof $e!="function")throw Error(a(150));if(oe=$e.call(oe),oe==null)throw Error(a(151));for(var Ke=$e=null,Je=Q,Xe=Q=0,It=null,it=oe.next();Je!==null&&!it.done;Xe++,it=oe.next()){Je.index>Xe?(It=Je,Je=null):It=Je.sibling;var xa=Ce(ae,Je,it.value,Ee);if(xa===null){Je===null&&(Je=It);break}e&&Je&&xa.alternate===null&&n(ae,Je),Q=g(xa,Q,Xe),Ke===null?$e=xa:Ke.sibling=xa,Ke=xa,Je=It}if(it.done)return s(ae,Je),bt&&ja(ae,Xe),$e;if(Je===null){for(;!it.done;Xe++,it=oe.next())it=_e(ae,it.value,Ee),it!==null&&(Q=g(it,Q,Xe),Ke===null?$e=it:Ke.sibling=it,Ke=it);return bt&&ja(ae,Xe),$e}for(Je=c(ae,Je);!it.done;Xe++,it=oe.next())it=je(Je,ae,Xe,it.value,Ee),it!==null&&(e&&it.alternate!==null&&Je.delete(it.key===null?Xe:it.key),Q=g(it,Q,Xe),Ke===null?$e=it:Ke.sibling=it,Ke=it);return e&&Je.forEach(function(Xx){return n(ae,Xx)}),bt&&ja(ae,Xe),$e}function Nt(ae,Q,oe,Ee){if(typeof oe=="object"&&oe!==null&&oe.type===U&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:e:{for(var $e=oe.key,Ke=Q;Ke!==null;){if(Ke.key===$e){if($e=oe.type,$e===U){if(Ke.tag===7){s(ae,Ke.sibling),Q=p(Ke,oe.props.children),Q.return=ae,ae=Q;break e}}else if(Ke.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===re&&Vm($e)===Ke.type){s(ae,Ke.sibling),Q=p(Ke,oe.props),Q.ref=hr(ae,Ke,oe),Q.return=ae,ae=Q;break e}s(ae,Ke);break}else n(ae,Ke);Ke=Ke.sibling}oe.type===U?(Q=Va(oe.props.children,ae.mode,Ee,oe.key),Q.return=ae,ae=Q):(Ee=Hs(oe.type,oe.key,oe.props,null,ae.mode,Ee),Ee.ref=hr(ae,Q,oe),Ee.return=ae,ae=Ee)}return M(ae);case F:e:{for(Ke=oe.key;Q!==null;){if(Q.key===Ke)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){s(ae,Q.sibling),Q=p(Q,oe.children||[]),Q.return=ae,ae=Q;break e}else{s(ae,Q);break}else n(ae,Q);Q=Q.sibling}Q=pc(oe,ae.mode,Ee),Q.return=ae,ae=Q}return M(ae);case re:return Ke=oe._init,Nt(ae,Q,Ke(oe._payload),Ee)}if(Pe(oe))return Oe(ae,Q,oe,Ee);if(te(oe))return Ie(ae,Q,oe,Ee);Ss(ae,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(s(ae,Q.sibling),Q=p(Q,oe),Q.return=ae,ae=Q):(s(ae,Q),Q=uc(oe,ae.mode,Ee),Q.return=ae,ae=Q),M(ae)):s(ae,Q)}return Nt}var yo=Um(!0),$m=Um(!1),As=ra(null),_s=null,bo=null,Cl=null;function Sl(){Cl=bo=_s=null}function Al(e){var n=As.current;yt(As),e._currentValue=n}function _l(e,n,s){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===s)break;e=e.return}}function wo(e,n){_s=e,Cl=bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(Zt=!0),e.firstContext=null)}function xn(e){var n=e._currentValue;if(Cl!==e)if(e={context:e,memoizedValue:n,next:null},bo===null){if(_s===null)throw Error(a(308));bo=e,_s.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return n}var Ba=null;function El(e){Ba===null?Ba=[e]:Ba.push(e)}function qm(e,n,s,c){var p=n.interleaved;return p===null?(s.next=s,El(n)):(s.next=p.next,p.next=s),n.interleaved=s,$n(e,c)}function $n(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var la=!1;function Nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ca(e,n,s){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(st&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,$n(e,s)}return p=c.interleaved,p===null?(n.next=n,El(c)):(n.next=p.next,p.next=n),c.interleaved=n,$n(e,s)}function Es(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,Ui(e,s)}}function Wm(e,n){var s=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var p=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var M={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?p=g=M:g=g.next=M,s=s.next}while(s!==null);g===null?p=g=n:g=g.next=n}else p=g=n;s={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,effects:c.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function Ns(e,n,s,c){var p=e.updateQueue;la=!1;var g=p.firstBaseUpdate,M=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var G=P,le=G.next;G.next=null,M===null?g=le:M.next=le,M=G;var Se=e.alternate;Se!==null&&(Se=Se.updateQueue,P=Se.lastBaseUpdate,P!==M&&(P===null?Se.firstBaseUpdate=le:P.next=le,Se.lastBaseUpdate=G))}if(g!==null){var _e=p.baseState;M=0,Se=le=G=null,P=g;do{var Ce=P.lane,je=P.eventTime;if((c&Ce)===Ce){Se!==null&&(Se=Se.next={eventTime:je,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Oe=e,Ie=P;switch(Ce=n,je=s,Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){_e=Oe.call(je,_e,Ce);break e}_e=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,Ce=typeof Oe=="function"?Oe.call(je,_e,Ce):Oe,Ce==null)break e;_e=V({},_e,Ce);break e;case 2:la=!0}}P.callback!==null&&P.lane!==0&&(e.flags|=64,Ce=p.effects,Ce===null?p.effects=[P]:Ce.push(P))}else je={eventTime:je,lane:Ce,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Se===null?(le=Se=je,G=_e):Se=Se.next=je,M|=Ce;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;Ce=P,P=Ce.next,Ce.next=null,p.lastBaseUpdate=Ce,p.shared.pending=null}}while(!0);if(Se===null&&(G=_e),p.baseState=G,p.firstBaseUpdate=le,p.lastBaseUpdate=Se,n=p.shared.interleaved,n!==null){p=n;do M|=p.lane,p=p.next;while(p!==n)}else g===null&&(p.shared.lanes=0);Oa|=M,e.lanes=M,e.memoizedState=_e}}function Gm(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var c=e[n],p=c.callback;if(p!==null){if(c.callback=null,c=s,typeof p!="function")throw Error(a(191,p));p.call(c)}}}var fr={},Tn=ra(fr),xr=ra(fr),gr=ra(fr);function Ta(e){if(e===fr)throw Error(a(174));return e}function kl(e,n){switch(xt(gr,n),xt(xr,e),xt(Tn,fr),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:R(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=R(n,e)}yt(Tn),xt(Tn,n)}function Co(){yt(Tn),yt(xr),yt(gr)}function Hm(e){Ta(gr.current);var n=Ta(Tn.current),s=R(n,e.type);n!==s&&(xt(xr,e),xt(Tn,s))}function Dl(e){xr.current===e&&(yt(Tn),yt(xr))}var Ct=ra(0);function ks(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ml=[];function Rl(){for(var e=0;e<Ml.length;e++)Ml[e]._workInProgressVersionPrimary=null;Ml.length=0}var Ds=I.ReactCurrentDispatcher,jl=I.ReactCurrentBatchConfig,La=0,St=null,Mt=null,Lt=null,Ms=!1,vr=!1,yr=0,bx=0;function qt(){throw Error(a(321))}function Bl(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Cn(e[s],n[s]))return!1;return!0}function Tl(e,n,s,c,p,g){if(La=g,St=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ds.current=e===null||e.memoizedState===null?Ax:_x,e=s(c,p),vr){g=0;do{if(vr=!1,yr=0,25<=g)throw Error(a(301));g+=1,Lt=Mt=null,n.updateQueue=null,Ds.current=Ex,e=s(c,p)}while(vr)}if(Ds.current=Bs,n=Mt!==null&&Mt.next!==null,La=0,Lt=Mt=St=null,Ms=!1,n)throw Error(a(300));return e}function Ll(){var e=yr!==0;return yr=0,e}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?St.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function gn(){if(Mt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var n=Lt===null?St.memoizedState:Lt.next;if(n!==null)Lt=n,Mt=e;else{if(e===null)throw Error(a(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Lt===null?St.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function br(e,n){return typeof n=="function"?n(e):n}function Ol(e){var n=gn(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var c=Mt,p=c.baseQueue,g=s.pending;if(g!==null){if(p!==null){var M=p.next;p.next=g.next,g.next=M}c.baseQueue=p=g,s.pending=null}if(p!==null){g=p.next,c=c.baseState;var P=M=null,G=null,le=g;do{var Se=le.lane;if((La&Se)===Se)G!==null&&(G=G.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),c=le.hasEagerState?le.eagerState:e(c,le.action);else{var _e={lane:Se,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};G===null?(P=G=_e,M=c):G=G.next=_e,St.lanes|=Se,Oa|=Se}le=le.next}while(le!==null&&le!==g);G===null?M=c:G.next=P,Cn(c,n.memoizedState)||(Zt=!0),n.memoizedState=c,n.baseState=M,n.baseQueue=G,s.lastRenderedState=c}if(e=s.interleaved,e!==null){p=e;do g=p.lane,St.lanes|=g,Oa|=g,p=p.next;while(p!==e)}else p===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function Il(e){var n=gn(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var c=s.dispatch,p=s.pending,g=n.memoizedState;if(p!==null){s.pending=null;var M=p=p.next;do g=e(g,M.action),M=M.next;while(M!==p);Cn(g,n.memoizedState)||(Zt=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),s.lastRenderedState=g}return[g,c]}function Km(){}function Jm(e,n){var s=St,c=gn(),p=n(),g=!Cn(c.memoizedState,p);if(g&&(c.memoizedState=p,Zt=!0),c=c.queue,Pl(Xm.bind(null,s,c,e),[e]),c.getSnapshot!==n||g||Lt!==null&&Lt.memoizedState.tag&1){if(s.flags|=2048,wr(9,Qm.bind(null,s,c,p,n),void 0,null),Ot===null)throw Error(a(349));(La&30)!==0||Ym(s,n,p)}return p}function Ym(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=St.updateQueue,n===null?(n={lastEffect:null,stores:null},St.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Qm(e,n,s,c){n.value=s,n.getSnapshot=c,Zm(n)&&eu(e)}function Xm(e,n,s){return s(function(){Zm(n)&&eu(e)})}function Zm(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Cn(e,s)}catch{return!0}}function eu(e){var n=$n(e,1);n!==null&&Nn(n,e,1,-1)}function tu(e){var n=Ln();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},n.queue=e,e=e.dispatch=Sx.bind(null,St,e),[n.memoizedState,e]}function wr(e,n,s,c){return e={tag:e,create:n,destroy:s,deps:c,next:null},n=St.updateQueue,n===null?(n={lastEffect:null,stores:null},St.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(c=s.next,s.next=e,e.next=c,n.lastEffect=e)),e}function nu(){return gn().memoizedState}function Rs(e,n,s,c){var p=Ln();St.flags|=e,p.memoizedState=wr(1|n,s,void 0,c===void 0?null:c)}function js(e,n,s,c){var p=gn();c=c===void 0?null:c;var g=void 0;if(Mt!==null){var M=Mt.memoizedState;if(g=M.destroy,c!==null&&Bl(c,M.deps)){p.memoizedState=wr(n,s,g,c);return}}St.flags|=e,p.memoizedState=wr(1|n,s,g,c)}function au(e,n){return Rs(8390656,8,e,n)}function Pl(e,n){return js(2048,8,e,n)}function ou(e,n){return js(4,2,e,n)}function ru(e,n){return js(4,4,e,n)}function su(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function iu(e,n,s){return s=s!=null?s.concat([e]):null,js(4,4,su.bind(null,n,e),s)}function Fl(){}function lu(e,n){var s=gn();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&Bl(n,c[1])?c[0]:(s.memoizedState=[e,n],e)}function cu(e,n){var s=gn();n=n===void 0?null:n;var c=s.memoizedState;return c!==null&&n!==null&&Bl(n,c[1])?c[0]:(e=e(),s.memoizedState=[e,n],e)}function du(e,n,s){return(La&21)===0?(e.baseState&&(e.baseState=!1,Zt=!0),e.memoizedState=s):(Cn(s,n)||(s=Vd(),St.lanes|=s,Oa|=s,e.baseState=!0),n)}function wx(e,n){var s=ut;ut=s!==0&&4>s?s:4,e(!0);var c=jl.transition;jl.transition={};try{e(!1),n()}finally{ut=s,jl.transition=c}}function mu(){return gn().memoizedState}function Cx(e,n,s){var c=pa(e);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},uu(e))pu(n,s);else if(s=qm(e,n,s,c),s!==null){var p=Kt();Nn(s,e,c,p),hu(s,n,c)}}function Sx(e,n,s){var c=pa(e),p={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(uu(e))pu(n,p);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var M=n.lastRenderedState,P=g(M,s);if(p.hasEagerState=!0,p.eagerState=P,Cn(P,M)){var G=n.interleaved;G===null?(p.next=p,El(n)):(p.next=G.next,G.next=p),n.interleaved=p;return}}catch{}finally{}s=qm(e,n,p,c),s!==null&&(p=Kt(),Nn(s,e,c,p),hu(s,n,c))}}function uu(e){var n=e.alternate;return e===St||n!==null&&n===St}function pu(e,n){vr=Ms=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function hu(e,n,s){if((s&4194240)!==0){var c=n.lanes;c&=e.pendingLanes,s|=c,n.lanes=s,Ui(e,s)}}var Bs={readContext:xn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Ax={readContext:xn,useCallback:function(e,n){return Ln().memoizedState=[e,n===void 0?null:n],e},useContext:xn,useEffect:au,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Rs(4194308,4,su.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Rs(4194308,4,e,n)},useInsertionEffect:function(e,n){return Rs(4,2,e,n)},useMemo:function(e,n){var s=Ln();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var c=Ln();return n=s!==void 0?s(n):n,c.memoizedState=c.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},c.queue=e,e=e.dispatch=Cx.bind(null,St,e),[c.memoizedState,e]},useRef:function(e){var n=Ln();return e={current:e},n.memoizedState=e},useState:tu,useDebugValue:Fl,useDeferredValue:function(e){return Ln().memoizedState=e},useTransition:function(){var e=tu(!1),n=e[0];return e=wx.bind(null,e[1]),Ln().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var c=St,p=Ln();if(bt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),Ot===null)throw Error(a(349));(La&30)!==0||Ym(c,n,s)}p.memoizedState=s;var g={value:s,getSnapshot:n};return p.queue=g,au(Xm.bind(null,c,g,e),[e]),c.flags|=2048,wr(9,Qm.bind(null,c,g,s,n),void 0,null),s},useId:function(){var e=Ln(),n=Ot.identifierPrefix;if(bt){var s=Un,c=Vn;s=(c&~(1<<32-ht(c)-1)).toString(32)+s,n=":"+n+"R"+s,s=yr++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=bx++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},_x={readContext:xn,useCallback:lu,useContext:xn,useEffect:Pl,useImperativeHandle:iu,useInsertionEffect:ou,useLayoutEffect:ru,useMemo:cu,useReducer:Ol,useRef:nu,useState:function(){return Ol(br)},useDebugValue:Fl,useDeferredValue:function(e){var n=gn();return du(n,Mt.memoizedState,e)},useTransition:function(){var e=Ol(br)[0],n=gn().memoizedState;return[e,n]},useMutableSource:Km,useSyncExternalStore:Jm,useId:mu,unstable_isNewReconciler:!1},Ex={readContext:xn,useCallback:lu,useContext:xn,useEffect:Pl,useImperativeHandle:iu,useInsertionEffect:ou,useLayoutEffect:ru,useMemo:cu,useReducer:Il,useRef:nu,useState:function(){return Il(br)},useDebugValue:Fl,useDeferredValue:function(e){var n=gn();return Mt===null?n.memoizedState=e:du(n,Mt.memoizedState,e)},useTransition:function(){var e=Il(br)[0],n=gn().memoizedState;return[e,n]},useMutableSource:Km,useSyncExternalStore:Jm,useId:mu,unstable_isNewReconciler:!1};function An(e,n){if(e&&e.defaultProps){n=V({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function Vl(e,n,s,c){n=e.memoizedState,s=s(c,n),s=s==null?n:V({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ts={isMounted:function(e){return(e=e._reactInternals)?In(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var c=Kt(),p=pa(e),g=qn(c,p);g.payload=n,s!=null&&(g.callback=s),n=ca(e,g,p),n!==null&&(Nn(n,e,p,c),Es(n,e,p))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var c=Kt(),p=pa(e),g=qn(c,p);g.tag=1,g.payload=n,s!=null&&(g.callback=s),n=ca(e,g,p),n!==null&&(Nn(n,e,p,c),Es(n,e,p))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Kt(),c=pa(e),p=qn(s,c);p.tag=2,n!=null&&(p.callback=n),n=ca(e,p,c),n!==null&&(Nn(n,e,c,s),Es(n,e,c))}};function fu(e,n,s,c,p,g,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,M):n.prototype&&n.prototype.isPureReactComponent?!ir(s,c)||!ir(p,g):!0}function xu(e,n,s){var c=!1,p=sa,g=n.contextType;return typeof g=="object"&&g!==null?g=xn(g):(p=Xt(n)?Ma:$t.current,c=n.contextTypes,g=(c=c!=null)?fo(e,p):sa),n=new n(s,g),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ts,e.stateNode=n,n._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=p,e.__reactInternalMemoizedMaskedChildContext=g),n}function gu(e,n,s,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,c),n.state!==e&&Ts.enqueueReplaceState(n,n.state,null)}function Ul(e,n,s,c){var p=e.stateNode;p.props=s,p.state=e.memoizedState,p.refs={},Nl(e);var g=n.contextType;typeof g=="object"&&g!==null?p.context=xn(g):(g=Xt(n)?Ma:$t.current,p.context=fo(e,g)),p.state=e.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(Vl(e,n,g,s),p.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(n=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),n!==p.state&&Ts.enqueueReplaceState(p,p.state,null),Ns(e,s,p,c),p.state=e.memoizedState),typeof p.componentDidMount=="function"&&(e.flags|=4194308)}function So(e,n){try{var s="",c=n;do s+=xe(c),c=c.return;while(c);var p=s}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:n,stack:p,digest:null}}function $l(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function ql(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Nx=typeof WeakMap=="function"?WeakMap:Map;function vu(e,n,s){s=qn(-1,s),s.tag=3,s.payload={element:null};var c=n.value;return s.callback=function(){Us||(Us=!0,oc=c),ql(e,n)},s}function yu(e,n,s){s=qn(-1,s),s.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var p=n.value;s.payload=function(){return c(p)},s.callback=function(){ql(e,n)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){ql(e,n),typeof c!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var M=n.stack;this.componentDidCatch(n.value,{componentStack:M!==null?M:""})}),s}function bu(e,n,s){var c=e.pingCache;if(c===null){c=e.pingCache=new Nx;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(s)||(p.add(s),e=Ux.bind(null,e,n,s),n.then(e,e))}function wu(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Cu(e,n,s,c,p){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=qn(-1,1),n.tag=2,ca(s,n,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=p,e)}var kx=I.ReactCurrentOwner,Zt=!1;function Ht(e,n,s,c){n.child=e===null?$m(n,null,s,c):yo(n,e.child,s,c)}function Su(e,n,s,c,p){s=s.render;var g=n.ref;return wo(n,p),c=Tl(e,n,s,c,g,p),s=Ll(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,zn(e,n,p)):(bt&&s&&gl(n),n.flags|=1,Ht(e,n,c,p),n.child)}function Au(e,n,s,c,p){if(e===null){var g=s.type;return typeof g=="function"&&!mc(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=g,_u(e,n,g,c,p)):(e=Hs(s.type,null,c,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,(e.lanes&p)===0){var M=g.memoizedProps;if(s=s.compare,s=s!==null?s:ir,s(M,c)&&e.ref===n.ref)return zn(e,n,p)}return n.flags|=1,e=fa(g,c),e.ref=n.ref,e.return=n,n.child=e}function _u(e,n,s,c,p){if(e!==null){var g=e.memoizedProps;if(ir(g,c)&&e.ref===n.ref)if(Zt=!1,n.pendingProps=c=g,(e.lanes&p)!==0)(e.flags&131072)!==0&&(Zt=!0);else return n.lanes=e.lanes,zn(e,n,p)}return zl(e,n,s,c,p)}function Eu(e,n,s){var c=n.pendingProps,p=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(_o,ln),ln|=s;else{if((s&1073741824)===0)return e=g!==null?g.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,xt(_o,ln),ln|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:s,xt(_o,ln),ln|=c}else g!==null?(c=g.baseLanes|s,n.memoizedState=null):c=s,xt(_o,ln),ln|=c;return Ht(e,n,p,s),n.child}function Nu(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function zl(e,n,s,c,p){var g=Xt(s)?Ma:$t.current;return g=fo(n,g),wo(n,p),s=Tl(e,n,s,c,g,p),c=Ll(),e!==null&&!Zt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~p,zn(e,n,p)):(bt&&c&&gl(n),n.flags|=1,Ht(e,n,s,p),n.child)}function ku(e,n,s,c,p){if(Xt(s)){var g=!0;vs(n)}else g=!1;if(wo(n,p),n.stateNode===null)Os(e,n),xu(n,s,c),Ul(n,s,c,p),c=!0;else if(e===null){var M=n.stateNode,P=n.memoizedProps;M.props=P;var G=M.context,le=s.contextType;typeof le=="object"&&le!==null?le=xn(le):(le=Xt(s)?Ma:$t.current,le=fo(n,le));var Se=s.getDerivedStateFromProps,_e=typeof Se=="function"||typeof M.getSnapshotBeforeUpdate=="function";_e||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(P!==c||G!==le)&&gu(n,M,c,le),la=!1;var Ce=n.memoizedState;M.state=Ce,Ns(n,c,M,p),G=n.memoizedState,P!==c||Ce!==G||Qt.current||la?(typeof Se=="function"&&(Vl(n,s,Se,c),G=n.memoizedState),(P=la||fu(n,s,P,c,Ce,G,le))?(_e||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(n.flags|=4194308)):(typeof M.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=G),M.props=c,M.state=G,M.context=le,c=P):(typeof M.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{M=n.stateNode,zm(e,n),P=n.memoizedProps,le=n.type===n.elementType?P:An(n.type,P),M.props=le,_e=n.pendingProps,Ce=M.context,G=s.contextType,typeof G=="object"&&G!==null?G=xn(G):(G=Xt(s)?Ma:$t.current,G=fo(n,G));var je=s.getDerivedStateFromProps;(Se=typeof je=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(P!==_e||Ce!==G)&&gu(n,M,c,G),la=!1,Ce=n.memoizedState,M.state=Ce,Ns(n,c,M,p);var Oe=n.memoizedState;P!==_e||Ce!==Oe||Qt.current||la?(typeof je=="function"&&(Vl(n,s,je,c),Oe=n.memoizedState),(le=la||fu(n,s,le,c,Ce,Oe,G)||!1)?(Se||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(c,Oe,G),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(c,Oe,G)),typeof M.componentDidUpdate=="function"&&(n.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof M.componentDidUpdate!="function"||P===e.memoizedProps&&Ce===e.memoizedState||(n.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Ce===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=Oe),M.props=c,M.state=Oe,M.context=G,c=le):(typeof M.componentDidUpdate!="function"||P===e.memoizedProps&&Ce===e.memoizedState||(n.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Ce===e.memoizedState||(n.flags|=1024),c=!1)}return Wl(e,n,s,c,g,p)}function Wl(e,n,s,c,p,g){Nu(e,n);var M=(n.flags&128)!==0;if(!c&&!M)return p&&Bm(n,s,!1),zn(e,n,g);c=n.stateNode,kx.current=n;var P=M&&typeof s.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,e!==null&&M?(n.child=yo(n,e.child,null,g),n.child=yo(n,null,P,g)):Ht(e,n,P,g),n.memoizedState=c.state,p&&Bm(n,s,!0),n.child}function Du(e){var n=e.stateNode;n.pendingContext?Rm(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Rm(e,n.context,!1),kl(e,n.containerInfo)}function Mu(e,n,s,c,p){return vo(),wl(p),n.flags|=256,Ht(e,n,s,c),n.child}var Gl={dehydrated:null,treeContext:null,retryLane:0};function Hl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ru(e,n,s){var c=n.pendingProps,p=Ct.current,g=!1,M=(n.flags&128)!==0,P;if((P=M)||(P=e!==null&&e.memoizedState===null?!1:(p&2)!==0),P?(g=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(p|=1),xt(Ct,p&1),e===null)return bl(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(M=c.children,e=c.fallback,g?(c=n.mode,g=n.child,M={mode:"hidden",children:M},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=M):g=Ks(M,c,0,null),e=Va(e,c,s,null),g.return=n,e.return=n,g.sibling=e,n.child=g,n.child.memoizedState=Hl(s),n.memoizedState=Gl,e):Kl(n,M));if(p=e.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return Dx(e,n,M,c,P,p,s);if(g){g=c.fallback,M=n.mode,p=e.child,P=p.sibling;var G={mode:"hidden",children:c.children};return(M&1)===0&&n.child!==p?(c=n.child,c.childLanes=0,c.pendingProps=G,n.deletions=null):(c=fa(p,G),c.subtreeFlags=p.subtreeFlags&14680064),P!==null?g=fa(P,g):(g=Va(g,M,s,null),g.flags|=2),g.return=n,c.return=n,c.sibling=g,n.child=c,c=g,g=n.child,M=e.child.memoizedState,M=M===null?Hl(s):{baseLanes:M.baseLanes|s,cachePool:null,transitions:M.transitions},g.memoizedState=M,g.childLanes=e.childLanes&~s,n.memoizedState=Gl,c}return g=e.child,e=g.sibling,c=fa(g,{mode:"visible",children:c.children}),(n.mode&1)===0&&(c.lanes=s),c.return=n,c.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=c,n.memoizedState=null,c}function Kl(e,n){return n=Ks({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ls(e,n,s,c){return c!==null&&wl(c),yo(n,e.child,null,s),e=Kl(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Dx(e,n,s,c,p,g,M){if(s)return n.flags&256?(n.flags&=-257,c=$l(Error(a(422))),Ls(e,n,M,c)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(g=c.fallback,p=n.mode,c=Ks({mode:"visible",children:c.children},p,0,null),g=Va(g,p,M,null),g.flags|=2,c.return=n,g.return=n,c.sibling=g,n.child=c,(n.mode&1)!==0&&yo(n,e.child,null,M),n.child.memoizedState=Hl(M),n.memoizedState=Gl,g);if((n.mode&1)===0)return Ls(e,n,M,null);if(p.data==="$!"){if(c=p.nextSibling&&p.nextSibling.dataset,c)var P=c.dgst;return c=P,g=Error(a(419)),c=$l(g,c,void 0),Ls(e,n,M,c)}if(P=(M&e.childLanes)!==0,Zt||P){if(c=Ot,c!==null){switch(M&-M){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(c.suspendedLanes|M))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,$n(e,p),Nn(c,e,p,-1))}return dc(),c=$l(Error(a(421))),Ls(e,n,M,c)}return p.data==="$?"?(n.flags|=128,n.child=e.child,n=$x.bind(null,e),p._reactRetry=n,null):(e=g.treeContext,sn=oa(p.nextSibling),rn=n,bt=!0,Sn=null,e!==null&&(hn[fn++]=Vn,hn[fn++]=Un,hn[fn++]=Ra,Vn=e.id,Un=e.overflow,Ra=n),n=Kl(n,c.children),n.flags|=4096,n)}function ju(e,n,s){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),_l(e.return,n,s)}function Jl(e,n,s,c,p){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:p}:(g.isBackwards=n,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=s,g.tailMode=p)}function Bu(e,n,s){var c=n.pendingProps,p=c.revealOrder,g=c.tail;if(Ht(e,n,c.children,s),c=Ct.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ju(e,s,n);else if(e.tag===19)ju(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(xt(Ct,c),(n.mode&1)===0)n.memoizedState=null;else switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&ks(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),Jl(n,!1,p,s,g);break;case"backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&ks(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}Jl(n,!0,s,null,g);break;case"together":Jl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Os(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function zn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),Oa|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=fa(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=fa(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Mx(e,n,s){switch(n.tag){case 3:Du(n),vo();break;case 5:Hm(n);break;case 1:Xt(n.type)&&vs(n);break;case 4:kl(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,p=n.memoizedProps.value;xt(As,c._currentValue),c._currentValue=p;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(xt(Ct,Ct.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?Ru(e,n,s):(xt(Ct,Ct.current&1),e=zn(e,n,s),e!==null?e.sibling:null);xt(Ct,Ct.current&1);break;case 19:if(c=(s&n.childLanes)!==0,(e.flags&128)!==0){if(c)return Bu(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xt(Ct,Ct.current),c)break;return null;case 22:case 23:return n.lanes=0,Eu(e,n,s)}return zn(e,n,s)}var Tu,Yl,Lu,Ou;Tu=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Yl=function(){},Lu=function(e,n,s,c){var p=e.memoizedProps;if(p!==c){e=n.stateNode,Ta(Tn.current);var g=null;switch(s){case"input":p=ge(e,p),c=ge(e,c),g=[];break;case"select":p=V({},p,{value:void 0}),c=V({},c,{value:void 0}),g=[];break;case"textarea":p=We(e,p),c=We(e,c),g=[];break;default:typeof p.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=fs)}Le(s,c);var M;s=null;for(le in p)if(!c.hasOwnProperty(le)&&p.hasOwnProperty(le)&&p[le]!=null)if(le==="style"){var P=p[le];for(M in P)P.hasOwnProperty(M)&&(s||(s={}),s[M]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(l.hasOwnProperty(le)?g||(g=[]):(g=g||[]).push(le,null));for(le in c){var G=c[le];if(P=p!=null?p[le]:void 0,c.hasOwnProperty(le)&&G!==P&&(G!=null||P!=null))if(le==="style")if(P){for(M in P)!P.hasOwnProperty(M)||G&&G.hasOwnProperty(M)||(s||(s={}),s[M]="");for(M in G)G.hasOwnProperty(M)&&P[M]!==G[M]&&(s||(s={}),s[M]=G[M])}else s||(g||(g=[]),g.push(le,s)),s=G;else le==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,P=P?P.__html:void 0,G!=null&&P!==G&&(g=g||[]).push(le,G)):le==="children"?typeof G!="string"&&typeof G!="number"||(g=g||[]).push(le,""+G):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(l.hasOwnProperty(le)?(G!=null&&le==="onScroll"&&vt("scroll",e),g||P===G||(g=[])):(g=g||[]).push(le,G))}s&&(g=g||[]).push("style",s);var le=g;(n.updateQueue=le)&&(n.flags|=4)}},Ou=function(e,n,s,c){s!==c&&(n.flags|=4)};function Cr(e,n){if(!bt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function zt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,c=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags&14680064,c|=p.flags&14680064,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=s,n}function Rx(e,n,s){var c=n.pendingProps;switch(vl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(n),null;case 1:return Xt(n.type)&&gs(),zt(n),null;case 3:return c=n.stateNode,Co(),yt(Qt),yt($t),Rl(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Cs(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Sn!==null&&(ic(Sn),Sn=null))),Yl(e,n),zt(n),null;case 5:Dl(n);var p=Ta(gr.current);if(s=n.type,e!==null&&n.stateNode!=null)Lu(e,n,s,c,p),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(a(166));return zt(n),null}if(e=Ta(Tn.current),Cs(n)){c=n.stateNode,s=n.type;var g=n.memoizedProps;switch(c[Bn]=n,c[ur]=g,e=(n.mode&1)!==0,s){case"dialog":vt("cancel",c),vt("close",c);break;case"iframe":case"object":case"embed":vt("load",c);break;case"video":case"audio":for(p=0;p<cr.length;p++)vt(cr[p],c);break;case"source":vt("error",c);break;case"img":case"image":case"link":vt("error",c),vt("load",c);break;case"details":vt("toggle",c);break;case"input":Ae(c,g),vt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},vt("invalid",c);break;case"textarea":Re(c,g),vt("invalid",c)}Le(s,g),p=null;for(var M in g)if(g.hasOwnProperty(M)){var P=g[M];M==="children"?typeof P=="string"?c.textContent!==P&&(g.suppressHydrationWarning!==!0&&hs(c.textContent,P,e),p=["children",P]):typeof P=="number"&&c.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&hs(c.textContent,P,e),p=["children",""+P]):l.hasOwnProperty(M)&&P!=null&&M==="onScroll"&&vt("scroll",c)}switch(s){case"input":T(c),Me(c,g,!0);break;case"textarea":T(c),qe(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=fs)}c=p,n.updateQueue=c,c!==null&&(n.flags|=4)}else{M=p.nodeType===9?p:p.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nt(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=M.createElement(s,{is:c.is}):(e=M.createElement(s),s==="select"&&(M=e,c.multiple?M.multiple=!0:c.size&&(M.size=c.size))):e=M.createElementNS(e,s),e[Bn]=n,e[ur]=c,Tu(e,n,!1,!1),n.stateNode=e;e:{switch(M=rt(s,c),s){case"dialog":vt("cancel",e),vt("close",e),p=c;break;case"iframe":case"object":case"embed":vt("load",e),p=c;break;case"video":case"audio":for(p=0;p<cr.length;p++)vt(cr[p],e);p=c;break;case"source":vt("error",e),p=c;break;case"img":case"image":case"link":vt("error",e),vt("load",e),p=c;break;case"details":vt("toggle",e),p=c;break;case"input":Ae(e,c),p=ge(e,c),vt("invalid",e);break;case"option":p=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},p=V({},c,{value:void 0}),vt("invalid",e);break;case"textarea":Re(e,c),p=We(e,c),vt("invalid",e);break;default:p=c}Le(s,p),P=p;for(g in P)if(P.hasOwnProperty(g)){var G=P[g];g==="style"?et(e,G):g==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&v(e,G)):g==="children"?typeof G=="string"?(s!=="textarea"||G!=="")&&L(e,G):typeof G=="number"&&L(e,""+G):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(l.hasOwnProperty(g)?G!=null&&g==="onScroll"&&vt("scroll",e):G!=null&&j(e,g,G,M))}switch(s){case"input":T(e),Me(e,c,!1);break;case"textarea":T(e),qe(e);break;case"option":c.value!=null&&e.setAttribute("value",""+ie(c.value));break;case"select":e.multiple=!!c.multiple,g=c.value,g!=null?ot(e,!!c.multiple,g,!1):c.defaultValue!=null&&ot(e,!!c.multiple,c.defaultValue,!0);break;default:typeof p.onClick=="function"&&(e.onclick=fs)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return zt(n),null;case 6:if(e&&n.stateNode!=null)Ou(e,n,e.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(a(166));if(s=Ta(gr.current),Ta(Tn.current),Cs(n)){if(c=n.stateNode,s=n.memoizedProps,c[Bn]=n,(g=c.nodeValue!==s)&&(e=rn,e!==null))switch(e.tag){case 3:hs(c.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hs(c.nodeValue,s,(e.mode&1)!==0)}g&&(n.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Bn]=n,n.stateNode=c}return zt(n),null;case 13:if(yt(Ct),c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bt&&sn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Fm(),vo(),n.flags|=98560,g=!1;else if(g=Cs(n),c!==null&&c.dehydrated!==null){if(e===null){if(!g)throw Error(a(318));if(g=n.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[Bn]=n}else vo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;zt(n),g=!1}else Sn!==null&&(ic(Sn),Sn=null),g=!0;if(!g)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=s,n):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Ct.current&1)!==0?Rt===0&&(Rt=3):dc())),n.updateQueue!==null&&(n.flags|=4),zt(n),null);case 4:return Co(),Yl(e,n),e===null&&dr(n.stateNode.containerInfo),zt(n),null;case 10:return Al(n.type._context),zt(n),null;case 17:return Xt(n.type)&&gs(),zt(n),null;case 19:if(yt(Ct),g=n.memoizedState,g===null)return zt(n),null;if(c=(n.flags&128)!==0,M=g.rendering,M===null)if(c)Cr(g,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(M=ks(e),M!==null){for(n.flags|=128,Cr(g,!1),c=M.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=s,s=n.child;s!==null;)g=s,e=c,g.flags&=14680066,M=g.alternate,M===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=M.childLanes,g.lanes=M.lanes,g.child=M.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=M.memoizedProps,g.memoizedState=M.memoizedState,g.updateQueue=M.updateQueue,g.type=M.type,e=M.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return xt(Ct,Ct.current&1|2),n.child}e=e.sibling}g.tail!==null&&wt()>Eo&&(n.flags|=128,c=!0,Cr(g,!1),n.lanes=4194304)}else{if(!c)if(e=ks(M),e!==null){if(n.flags|=128,c=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),Cr(g,!0),g.tail===null&&g.tailMode==="hidden"&&!M.alternate&&!bt)return zt(n),null}else 2*wt()-g.renderingStartTime>Eo&&s!==1073741824&&(n.flags|=128,c=!0,Cr(g,!1),n.lanes=4194304);g.isBackwards?(M.sibling=n.child,n.child=M):(s=g.last,s!==null?s.sibling=M:n.child=M,g.last=M)}return g.tail!==null?(n=g.tail,g.rendering=n,g.tail=n.sibling,g.renderingStartTime=wt(),n.sibling=null,s=Ct.current,xt(Ct,c?s&1|2:s&1),n):(zt(n),null);case 22:case 23:return cc(),c=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(n.flags|=8192),c&&(n.mode&1)!==0?(ln&1073741824)!==0&&(zt(n),n.subtreeFlags&6&&(n.flags|=8192)):zt(n),null;case 24:return null;case 25:return null}throw Error(a(156,n.tag))}function jx(e,n){switch(vl(n),n.tag){case 1:return Xt(n.type)&&gs(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Co(),yt(Qt),yt($t),Rl(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Dl(n),null;case 13:if(yt(Ct),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));vo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return yt(Ct),null;case 4:return Co(),null;case 10:return Al(n.type._context),null;case 22:case 23:return cc(),null;case 24:return null;default:return null}}var Is=!1,Wt=!1,Bx=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Ao(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Et(e,n,c)}else s.current=null}function Ql(e,n,s){try{s()}catch(c){Et(e,n,c)}}var Iu=!1;function Tx(e,n){if(cl=as,e=fm(),tl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var M=0,P=-1,G=-1,le=0,Se=0,_e=e,Ce=null;t:for(;;){for(var je;_e!==s||p!==0&&_e.nodeType!==3||(P=M+p),_e!==g||c!==0&&_e.nodeType!==3||(G=M+c),_e.nodeType===3&&(M+=_e.nodeValue.length),(je=_e.firstChild)!==null;)Ce=_e,_e=je;for(;;){if(_e===e)break t;if(Ce===s&&++le===p&&(P=M),Ce===g&&++Se===c&&(G=M),(je=_e.nextSibling)!==null)break;_e=Ce,Ce=_e.parentNode}_e=je}s=P===-1||G===-1?null:{start:P,end:G}}else s=null}s=s||{start:0,end:0}}else s=null;for(dl={focusedElem:e,selectionRange:s},as=!1,Be=n;Be!==null;)if(n=Be,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Be=e;else for(;Be!==null;){n=Be;try{var Oe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Oe!==null){var Ie=Oe.memoizedProps,Nt=Oe.memoizedState,ae=n.stateNode,Q=ae.getSnapshotBeforeUpdate(n.elementType===n.type?Ie:An(n.type,Ie),Nt);ae.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=n.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ee){Et(n,n.return,Ee)}if(e=n.sibling,e!==null){e.return=n.return,Be=e;break}Be=n.return}return Oe=Iu,Iu=!1,Oe}function Sr(e,n,s){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var p=c=c.next;do{if((p.tag&e)===e){var g=p.destroy;p.destroy=void 0,g!==void 0&&Ql(n,s,g)}p=p.next}while(p!==c)}}function Ps(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var c=s.create;s.destroy=c()}s=s.next}while(s!==n)}}function Xl(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function Pu(e){var n=e.alternate;n!==null&&(e.alternate=null,Pu(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Bn],delete n[ur],delete n[hl],delete n[xx],delete n[gx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fu(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zl(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=fs));else if(c!==4&&(e=e.child,e!==null))for(Zl(e,n,s),e=e.sibling;e!==null;)Zl(e,n,s),e=e.sibling}function ec(e,n,s){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(ec(e,n,s),e=e.sibling;e!==null;)ec(e,n,s),e=e.sibling}var Ft=null,_n=!1;function da(e,n,s){for(s=s.child;s!==null;)Uu(e,n,s),s=s.sibling}function Uu(e,n,s){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(mt,s)}catch{}switch(s.tag){case 5:Wt||Ao(s,n);case 6:var c=Ft,p=_n;Ft=null,da(e,n,s),Ft=c,_n=p,Ft!==null&&(_n?(e=Ft,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ft.removeChild(s.stateNode));break;case 18:Ft!==null&&(_n?(e=Ft,s=s.stateNode,e.nodeType===8?pl(e.parentNode,s):e.nodeType===1&&pl(e,s),tr(e)):pl(Ft,s.stateNode));break;case 4:c=Ft,p=_n,Ft=s.stateNode.containerInfo,_n=!0,da(e,n,s),Ft=c,_n=p;break;case 0:case 11:case 14:case 15:if(!Wt&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){p=c=c.next;do{var g=p,M=g.destroy;g=g.tag,M!==void 0&&((g&2)!==0||(g&4)!==0)&&Ql(s,n,M),p=p.next}while(p!==c)}da(e,n,s);break;case 1:if(!Wt&&(Ao(s,n),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(P){Et(s,n,P)}da(e,n,s);break;case 21:da(e,n,s);break;case 22:s.mode&1?(Wt=(c=Wt)||s.memoizedState!==null,da(e,n,s),Wt=c):da(e,n,s);break;default:da(e,n,s)}}function $u(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Bx),n.forEach(function(c){var p=qx.bind(null,e,c);s.has(c)||(s.add(c),c.then(p,p))})}}function En(e,n){var s=n.deletions;if(s!==null)for(var c=0;c<s.length;c++){var p=s[c];try{var g=e,M=n,P=M;e:for(;P!==null;){switch(P.tag){case 5:Ft=P.stateNode,_n=!1;break e;case 3:Ft=P.stateNode.containerInfo,_n=!0;break e;case 4:Ft=P.stateNode.containerInfo,_n=!0;break e}P=P.return}if(Ft===null)throw Error(a(160));Uu(g,M,p),Ft=null,_n=!1;var G=p.alternate;G!==null&&(G.return=null),p.return=null}catch(le){Et(p,n,le)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)qu(n,e),n=n.sibling}function qu(e,n){var s=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(En(n,e),On(e),c&4){try{Sr(3,e,e.return),Ps(3,e)}catch(Ie){Et(e,e.return,Ie)}try{Sr(5,e,e.return)}catch(Ie){Et(e,e.return,Ie)}}break;case 1:En(n,e),On(e),c&512&&s!==null&&Ao(s,s.return);break;case 5:if(En(n,e),On(e),c&512&&s!==null&&Ao(s,s.return),e.flags&32){var p=e.stateNode;try{L(p,"")}catch(Ie){Et(e,e.return,Ie)}}if(c&4&&(p=e.stateNode,p!=null)){var g=e.memoizedProps,M=s!==null?s.memoizedProps:g,P=e.type,G=e.updateQueue;if(e.updateQueue=null,G!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&X(p,g),rt(P,M);var le=rt(P,g);for(M=0;M<G.length;M+=2){var Se=G[M],_e=G[M+1];Se==="style"?et(p,_e):Se==="dangerouslySetInnerHTML"?v(p,_e):Se==="children"?L(p,_e):j(p,Se,_e,le)}switch(P){case"input":we(p,g);break;case"textarea":Te(p,g);break;case"select":var Ce=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var je=g.value;je!=null?ot(p,!!g.multiple,je,!1):Ce!==!!g.multiple&&(g.defaultValue!=null?ot(p,!!g.multiple,g.defaultValue,!0):ot(p,!!g.multiple,g.multiple?[]:"",!1))}p[ur]=g}catch(Ie){Et(e,e.return,Ie)}}break;case 6:if(En(n,e),On(e),c&4){if(e.stateNode===null)throw Error(a(162));p=e.stateNode,g=e.memoizedProps;try{p.nodeValue=g}catch(Ie){Et(e,e.return,Ie)}}break;case 3:if(En(n,e),On(e),c&4&&s!==null&&s.memoizedState.isDehydrated)try{tr(n.containerInfo)}catch(Ie){Et(e,e.return,Ie)}break;case 4:En(n,e),On(e);break;case 13:En(n,e),On(e),p=e.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||(ac=wt())),c&4&&$u(e);break;case 22:if(Se=s!==null&&s.memoizedState!==null,e.mode&1?(Wt=(le=Wt)||Se,En(n,e),Wt=le):En(n,e),On(e),c&8192){if(le=e.memoizedState!==null,(e.stateNode.isHidden=le)&&!Se&&(e.mode&1)!==0)for(Be=e,Se=e.child;Se!==null;){for(_e=Be=Se;Be!==null;){switch(Ce=Be,je=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:Sr(4,Ce,Ce.return);break;case 1:Ao(Ce,Ce.return);var Oe=Ce.stateNode;if(typeof Oe.componentWillUnmount=="function"){c=Ce,s=Ce.return;try{n=c,Oe.props=n.memoizedProps,Oe.state=n.memoizedState,Oe.componentWillUnmount()}catch(Ie){Et(c,s,Ie)}}break;case 5:Ao(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){Gu(_e);continue}}je!==null?(je.return=Ce,Be=je):Gu(_e)}Se=Se.sibling}e:for(Se=null,_e=e;;){if(_e.tag===5){if(Se===null){Se=_e;try{p=_e.stateNode,le?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=_e.stateNode,G=_e.memoizedProps.style,M=G!=null&&G.hasOwnProperty("display")?G.display:null,P.style.display=ve("display",M))}catch(Ie){Et(e,e.return,Ie)}}}else if(_e.tag===6){if(Se===null)try{_e.stateNode.nodeValue=le?"":_e.memoizedProps}catch(Ie){Et(e,e.return,Ie)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===e)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)break e;Se===_e&&(Se=null),_e=_e.return}Se===_e&&(Se=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:En(n,e),On(e),c&4&&$u(e);break;case 21:break;default:En(n,e),On(e)}}function On(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Fu(s)){var c=s;break e}s=s.return}throw Error(a(160))}switch(c.tag){case 5:var p=c.stateNode;c.flags&32&&(L(p,""),c.flags&=-33);var g=Vu(e);ec(e,g,p);break;case 3:case 4:var M=c.stateNode.containerInfo,P=Vu(e);Zl(e,P,M);break;default:throw Error(a(161))}}catch(G){Et(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Lx(e,n,s){Be=e,zu(e)}function zu(e,n,s){for(var c=(e.mode&1)!==0;Be!==null;){var p=Be,g=p.child;if(p.tag===22&&c){var M=p.memoizedState!==null||Is;if(!M){var P=p.alternate,G=P!==null&&P.memoizedState!==null||Wt;P=Is;var le=Wt;if(Is=M,(Wt=G)&&!le)for(Be=p;Be!==null;)M=Be,G=M.child,M.tag===22&&M.memoizedState!==null?Hu(p):G!==null?(G.return=M,Be=G):Hu(p);for(;g!==null;)Be=g,zu(g),g=g.sibling;Be=p,Is=P,Wt=le}Wu(e)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,Be=g):Wu(e)}}function Wu(e){for(;Be!==null;){var n=Be;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Wt||Ps(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!Wt)if(s===null)c.componentDidMount();else{var p=n.elementType===n.type?s.memoizedProps:An(n.type,s.memoizedProps);c.componentDidUpdate(p,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=n.updateQueue;g!==null&&Gm(n,g,c);break;case 3:var M=n.updateQueue;if(M!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Gm(n,M,s)}break;case 5:var P=n.stateNode;if(s===null&&n.flags&4){s=P;var G=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&s.focus();break;case"img":G.src&&(s.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var le=n.alternate;if(le!==null){var Se=le.memoizedState;if(Se!==null){var _e=Se.dehydrated;_e!==null&&tr(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}Wt||n.flags&512&&Xl(n)}catch(Ce){Et(n,n.return,Ce)}}if(n===e){Be=null;break}if(s=n.sibling,s!==null){s.return=n.return,Be=s;break}Be=n.return}}function Gu(e){for(;Be!==null;){var n=Be;if(n===e){Be=null;break}var s=n.sibling;if(s!==null){s.return=n.return,Be=s;break}Be=n.return}}function Hu(e){for(;Be!==null;){var n=Be;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ps(4,n)}catch(G){Et(n,s,G)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var p=n.return;try{c.componentDidMount()}catch(G){Et(n,p,G)}}var g=n.return;try{Xl(n)}catch(G){Et(n,g,G)}break;case 5:var M=n.return;try{Xl(n)}catch(G){Et(n,M,G)}}}catch(G){Et(n,n.return,G)}if(n===e){Be=null;break}var P=n.sibling;if(P!==null){P.return=n.return,Be=P;break}Be=n.return}}var Ox=Math.ceil,Fs=I.ReactCurrentDispatcher,tc=I.ReactCurrentOwner,vn=I.ReactCurrentBatchConfig,st=0,Ot=null,kt=null,Vt=0,ln=0,_o=ra(0),Rt=0,Ar=null,Oa=0,Vs=0,nc=0,_r=null,en=null,ac=0,Eo=1/0,Wn=null,Us=!1,oc=null,ma=null,$s=!1,ua=null,qs=0,Er=0,rc=null,zs=-1,Ws=0;function Kt(){return(st&6)!==0?wt():zs!==-1?zs:zs=wt()}function pa(e){return(e.mode&1)===0?1:(st&2)!==0&&Vt!==0?Vt&-Vt:yx.transition!==null?(Ws===0&&(Ws=Vd()),Ws):(e=ut,e!==0||(e=window.event,e=e===void 0?16:Jd(e.type)),e)}function Nn(e,n,s,c){if(50<Er)throw Er=0,rc=null,Error(a(185));Yo(e,s,c),((st&2)===0||e!==Ot)&&(e===Ot&&((st&2)===0&&(Vs|=s),Rt===4&&ha(e,Vt)),tn(e,c),s===1&&st===0&&(n.mode&1)===0&&(Eo=wt()+500,ys&&ia()))}function tn(e,n){var s=e.callbackNode;yf(e,n);var c=es(e,e===Ot?Vt:0);if(c===0)s!==null&&Qr(s),e.callbackNode=null,e.callbackPriority=0;else if(n=c&-c,e.callbackPriority!==n){if(s!=null&&Qr(s),n===1)e.tag===0?vx(Ju.bind(null,e)):Tm(Ju.bind(null,e)),hx(function(){(st&6)===0&&ia()}),s=null;else{switch(Ud(c)){case 1:s=Ko;break;case 4:s=K;break;case 16:s=ue;break;case 536870912:s=Ye;break;default:s=ue}s=a2(s,Ku.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Ku(e,n){if(zs=-1,Ws=0,(st&6)!==0)throw Error(a(327));var s=e.callbackNode;if(No()&&e.callbackNode!==s)return null;var c=es(e,e===Ot?Vt:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||n)n=Gs(e,c);else{n=c;var p=st;st|=2;var g=Qu();(Ot!==e||Vt!==n)&&(Wn=null,Eo=wt()+500,Pa(e,n));do try{Fx();break}catch(P){Yu(e,P)}while(!0);Sl(),Fs.current=g,st=p,kt!==null?n=0:(Ot=null,Vt=0,n=Rt)}if(n!==0){if(n===2&&(p=Fi(e),p!==0&&(c=p,n=sc(e,p))),n===1)throw s=Ar,Pa(e,0),ha(e,c),tn(e,wt()),s;if(n===6)ha(e,c);else{if(p=e.current.alternate,(c&30)===0&&!Ix(p)&&(n=Gs(e,c),n===2&&(g=Fi(e),g!==0&&(c=g,n=sc(e,g))),n===1))throw s=Ar,Pa(e,0),ha(e,c),tn(e,wt()),s;switch(e.finishedWork=p,e.finishedLanes=c,n){case 0:case 1:throw Error(a(345));case 2:Fa(e,en,Wn);break;case 3:if(ha(e,c),(c&130023424)===c&&(n=ac+500-wt(),10<n)){if(es(e,0)!==0)break;if(p=e.suspendedLanes,(p&c)!==c){Kt(),e.pingedLanes|=e.suspendedLanes&p;break}e.timeoutHandle=ul(Fa.bind(null,e,en,Wn),n);break}Fa(e,en,Wn);break;case 4:if(ha(e,c),(c&4194240)===c)break;for(n=e.eventTimes,p=-1;0<c;){var M=31-ht(c);g=1<<M,M=n[M],M>p&&(p=M),c&=~g}if(c=p,c=wt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Ox(c/1960))-c,10<c){e.timeoutHandle=ul(Fa.bind(null,e,en,Wn),c);break}Fa(e,en,Wn);break;case 5:Fa(e,en,Wn);break;default:throw Error(a(329))}}}return tn(e,wt()),e.callbackNode===s?Ku.bind(null,e):null}function sc(e,n){var s=_r;return e.current.memoizedState.isDehydrated&&(Pa(e,n).flags|=256),e=Gs(e,n),e!==2&&(n=en,en=s,n!==null&&ic(n)),e}function ic(e){en===null?en=e:en.push.apply(en,e)}function Ix(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var p=s[c],g=p.getSnapshot;p=p.value;try{if(!Cn(g(),p))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ha(e,n){for(n&=~nc,n&=~Vs,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-ht(n),c=1<<s;e[s]=-1,n&=~c}}function Ju(e){if((st&6)!==0)throw Error(a(327));No();var n=es(e,0);if((n&1)===0)return tn(e,wt()),null;var s=Gs(e,n);if(e.tag!==0&&s===2){var c=Fi(e);c!==0&&(n=c,s=sc(e,c))}if(s===1)throw s=Ar,Pa(e,0),ha(e,n),tn(e,wt()),s;if(s===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Fa(e,en,Wn),tn(e,wt()),null}function lc(e,n){var s=st;st|=1;try{return e(n)}finally{st=s,st===0&&(Eo=wt()+500,ys&&ia())}}function Ia(e){ua!==null&&ua.tag===0&&(st&6)===0&&No();var n=st;st|=1;var s=vn.transition,c=ut;try{if(vn.transition=null,ut=1,e)return e()}finally{ut=c,vn.transition=s,st=n,(st&6)===0&&ia()}}function cc(){ln=_o.current,yt(_o)}function Pa(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,px(s)),kt!==null)for(s=kt.return;s!==null;){var c=s;switch(vl(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&gs();break;case 3:Co(),yt(Qt),yt($t),Rl();break;case 5:Dl(c);break;case 4:Co();break;case 13:yt(Ct);break;case 19:yt(Ct);break;case 10:Al(c.type._context);break;case 22:case 23:cc()}s=s.return}if(Ot=e,kt=e=fa(e.current,null),Vt=ln=n,Rt=0,Ar=null,nc=Vs=Oa=0,en=_r=null,Ba!==null){for(n=0;n<Ba.length;n++)if(s=Ba[n],c=s.interleaved,c!==null){s.interleaved=null;var p=c.next,g=s.pending;if(g!==null){var M=g.next;g.next=p,c.next=M}s.pending=c}Ba=null}return e}function Yu(e,n){do{var s=kt;try{if(Sl(),Ds.current=Bs,Ms){for(var c=St.memoizedState;c!==null;){var p=c.queue;p!==null&&(p.pending=null),c=c.next}Ms=!1}if(La=0,Lt=Mt=St=null,vr=!1,yr=0,tc.current=null,s===null||s.return===null){Rt=1,Ar=n,kt=null;break}e:{var g=e,M=s.return,P=s,G=n;if(n=Vt,P.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var le=G,Se=P,_e=Se.tag;if((Se.mode&1)===0&&(_e===0||_e===11||_e===15)){var Ce=Se.alternate;Ce?(Se.updateQueue=Ce.updateQueue,Se.memoizedState=Ce.memoizedState,Se.lanes=Ce.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var je=wu(M);if(je!==null){je.flags&=-257,Cu(je,M,P,g,n),je.mode&1&&bu(g,le,n),n=je,G=le;var Oe=n.updateQueue;if(Oe===null){var Ie=new Set;Ie.add(G),n.updateQueue=Ie}else Oe.add(G);break e}else{if((n&1)===0){bu(g,le,n),dc();break e}G=Error(a(426))}}else if(bt&&P.mode&1){var Nt=wu(M);if(Nt!==null){(Nt.flags&65536)===0&&(Nt.flags|=256),Cu(Nt,M,P,g,n),wl(So(G,P));break e}}g=G=So(G,P),Rt!==4&&(Rt=2),_r===null?_r=[g]:_r.push(g),g=M;do{switch(g.tag){case 3:g.flags|=65536,n&=-n,g.lanes|=n;var ae=vu(g,G,n);Wm(g,ae);break e;case 1:P=G;var Q=g.type,oe=g.stateNode;if((g.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(ma===null||!ma.has(oe)))){g.flags|=65536,n&=-n,g.lanes|=n;var Ee=yu(g,P,n);Wm(g,Ee);break e}}g=g.return}while(g!==null)}Zu(s)}catch($e){n=$e,kt===s&&s!==null&&(kt=s=s.return);continue}break}while(!0)}function Qu(){var e=Fs.current;return Fs.current=Bs,e===null?Bs:e}function dc(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ot===null||(Oa&268435455)===0&&(Vs&268435455)===0||ha(Ot,Vt)}function Gs(e,n){var s=st;st|=2;var c=Qu();(Ot!==e||Vt!==n)&&(Wn=null,Pa(e,n));do try{Px();break}catch(p){Yu(e,p)}while(!0);if(Sl(),st=s,Fs.current=c,kt!==null)throw Error(a(261));return Ot=null,Vt=0,Rt}function Px(){for(;kt!==null;)Xu(kt)}function Fx(){for(;kt!==null&&!Oi();)Xu(kt)}function Xu(e){var n=n2(e.alternate,e,ln);e.memoizedProps=e.pendingProps,n===null?Zu(e):kt=n,tc.current=null}function Zu(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=Rx(s,n,ln),s!==null){kt=s;return}}else{if(s=jx(s,n),s!==null){s.flags&=32767,kt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,kt=null;return}}if(n=n.sibling,n!==null){kt=n;return}kt=n=e}while(n!==null);Rt===0&&(Rt=5)}function Fa(e,n,s){var c=ut,p=vn.transition;try{vn.transition=null,ut=1,Vx(e,n,s,c)}finally{vn.transition=p,ut=c}return null}function Vx(e,n,s,c){do No();while(ua!==null);if((st&6)!==0)throw Error(a(327));s=e.finishedWork;var p=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var g=s.lanes|s.childLanes;if(bf(e,g),e===Ot&&(kt=Ot=null,Vt=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||$s||($s=!0,a2(ue,function(){return No(),null})),g=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||g){g=vn.transition,vn.transition=null;var M=ut;ut=1;var P=st;st|=4,tc.current=null,Tx(e,s),qu(s,e),sx(dl),as=!!cl,dl=cl=null,e.current=s,Lx(s),Ii(),st=P,ut=M,vn.transition=g}else e.current=s;if($s&&($s=!1,ua=e,qs=p),g=e.pendingLanes,g===0&&(ma=null),Ue(s.stateNode),tn(e,wt()),n!==null)for(c=e.onRecoverableError,s=0;s<n.length;s++)p=n[s],c(p.value,{componentStack:p.stack,digest:p.digest});if(Us)throw Us=!1,e=oc,oc=null,e;return(qs&1)!==0&&e.tag!==0&&No(),g=e.pendingLanes,(g&1)!==0?e===rc?Er++:(Er=0,rc=e):Er=0,ia(),null}function No(){if(ua!==null){var e=Ud(qs),n=vn.transition,s=ut;try{if(vn.transition=null,ut=16>e?16:e,ua===null)var c=!1;else{if(e=ua,ua=null,qs=0,(st&6)!==0)throw Error(a(331));var p=st;for(st|=4,Be=e.current;Be!==null;){var g=Be,M=g.child;if((Be.flags&16)!==0){var P=g.deletions;if(P!==null){for(var G=0;G<P.length;G++){var le=P[G];for(Be=le;Be!==null;){var Se=Be;switch(Se.tag){case 0:case 11:case 15:Sr(8,Se,g)}var _e=Se.child;if(_e!==null)_e.return=Se,Be=_e;else for(;Be!==null;){Se=Be;var Ce=Se.sibling,je=Se.return;if(Pu(Se),Se===le){Be=null;break}if(Ce!==null){Ce.return=je,Be=Ce;break}Be=je}}}var Oe=g.alternate;if(Oe!==null){var Ie=Oe.child;if(Ie!==null){Oe.child=null;do{var Nt=Ie.sibling;Ie.sibling=null,Ie=Nt}while(Ie!==null)}}Be=g}}if((g.subtreeFlags&2064)!==0&&M!==null)M.return=g,Be=M;else e:for(;Be!==null;){if(g=Be,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Sr(9,g,g.return)}var ae=g.sibling;if(ae!==null){ae.return=g.return,Be=ae;break e}Be=g.return}}var Q=e.current;for(Be=Q;Be!==null;){M=Be;var oe=M.child;if((M.subtreeFlags&2064)!==0&&oe!==null)oe.return=M,Be=oe;else e:for(M=Q;Be!==null;){if(P=Be,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Ps(9,P)}}catch($e){Et(P,P.return,$e)}if(P===M){Be=null;break e}var Ee=P.sibling;if(Ee!==null){Ee.return=P.return,Be=Ee;break e}Be=P.return}}if(st=p,ia(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(mt,e)}catch{}c=!0}return c}finally{ut=s,vn.transition=n}}return!1}function e2(e,n,s){n=So(s,n),n=vu(e,n,1),e=ca(e,n,1),n=Kt(),e!==null&&(Yo(e,1,n),tn(e,n))}function Et(e,n,s){if(e.tag===3)e2(e,e,s);else for(;n!==null;){if(n.tag===3){e2(n,e,s);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ma===null||!ma.has(c))){e=So(s,e),e=yu(n,e,1),n=ca(n,e,1),e=Kt(),n!==null&&(Yo(n,1,e),tn(n,e));break}}n=n.return}}function Ux(e,n,s){var c=e.pingCache;c!==null&&c.delete(n),n=Kt(),e.pingedLanes|=e.suspendedLanes&s,Ot===e&&(Vt&s)===s&&(Rt===4||Rt===3&&(Vt&130023424)===Vt&&500>wt()-ac?Pa(e,0):nc|=s),tn(e,n)}function t2(e,n){n===0&&((e.mode&1)===0?n=1:(n=Zr,Zr<<=1,(Zr&130023424)===0&&(Zr=4194304)));var s=Kt();e=$n(e,n),e!==null&&(Yo(e,n,s),tn(e,s))}function $x(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),t2(e,s)}function qx(e,n){var s=0;switch(e.tag){case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(a(314))}c!==null&&c.delete(n),t2(e,s)}var n2;n2=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||Qt.current)Zt=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return Zt=!1,Mx(e,n,s);Zt=(e.flags&131072)!==0}else Zt=!1,bt&&(n.flags&1048576)!==0&&Lm(n,ws,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;Os(e,n),e=n.pendingProps;var p=fo(n,$t.current);wo(n,s),p=Tl(null,n,c,e,p,s);var g=Ll();return n.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Xt(c)?(g=!0,vs(n)):g=!1,n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,Nl(n),p.updater=Ts,n.stateNode=p,p._reactInternals=n,Ul(n,c,e,s),n=Wl(null,n,c,!0,g,s)):(n.tag=0,bt&&g&&gl(n),Ht(null,n,p,s),n=n.child),n;case 16:c=n.elementType;e:{switch(Os(e,n),e=n.pendingProps,p=c._init,c=p(c._payload),n.type=c,p=n.tag=Wx(c),e=An(c,e),p){case 0:n=zl(null,n,c,e,s);break e;case 1:n=ku(null,n,c,e,s);break e;case 11:n=Su(null,n,c,e,s);break e;case 14:n=Au(null,n,c,An(c.type,e),s);break e}throw Error(a(306,c,""))}return n;case 0:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:An(c,p),zl(e,n,c,p,s);case 1:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:An(c,p),ku(e,n,c,p,s);case 3:e:{if(Du(n),e===null)throw Error(a(387));c=n.pendingProps,g=n.memoizedState,p=g.element,zm(e,n),Ns(n,c,null,s);var M=n.memoizedState;if(c=M.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){p=So(Error(a(423)),n),n=Mu(e,n,c,s,p);break e}else if(c!==p){p=So(Error(a(424)),n),n=Mu(e,n,c,s,p);break e}else for(sn=oa(n.stateNode.containerInfo.firstChild),rn=n,bt=!0,Sn=null,s=$m(n,null,c,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(vo(),c===p){n=zn(e,n,s);break e}Ht(e,n,c,s)}n=n.child}return n;case 5:return Hm(n),e===null&&bl(n),c=n.type,p=n.pendingProps,g=e!==null?e.memoizedProps:null,M=p.children,ml(c,p)?M=null:g!==null&&ml(c,g)&&(n.flags|=32),Nu(e,n),Ht(e,n,M,s),n.child;case 6:return e===null&&bl(n),null;case 13:return Ru(e,n,s);case 4:return kl(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=yo(n,null,c,s):Ht(e,n,c,s),n.child;case 11:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:An(c,p),Su(e,n,c,p,s);case 7:return Ht(e,n,n.pendingProps,s),n.child;case 8:return Ht(e,n,n.pendingProps.children,s),n.child;case 12:return Ht(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(c=n.type._context,p=n.pendingProps,g=n.memoizedProps,M=p.value,xt(As,c._currentValue),c._currentValue=M,g!==null)if(Cn(g.value,M)){if(g.children===p.children&&!Qt.current){n=zn(e,n,s);break e}}else for(g=n.child,g!==null&&(g.return=n);g!==null;){var P=g.dependencies;if(P!==null){M=g.child;for(var G=P.firstContext;G!==null;){if(G.context===c){if(g.tag===1){G=qn(-1,s&-s),G.tag=2;var le=g.updateQueue;if(le!==null){le=le.shared;var Se=le.pending;Se===null?G.next=G:(G.next=Se.next,Se.next=G),le.pending=G}}g.lanes|=s,G=g.alternate,G!==null&&(G.lanes|=s),_l(g.return,s,n),P.lanes|=s;break}G=G.next}}else if(g.tag===10)M=g.type===n.type?null:g.child;else if(g.tag===18){if(M=g.return,M===null)throw Error(a(341));M.lanes|=s,P=M.alternate,P!==null&&(P.lanes|=s),_l(M,s,n),M=g.sibling}else M=g.child;if(M!==null)M.return=g;else for(M=g;M!==null;){if(M===n){M=null;break}if(g=M.sibling,g!==null){g.return=M.return,M=g;break}M=M.return}g=M}Ht(e,n,p.children,s),n=n.child}return n;case 9:return p=n.type,c=n.pendingProps.children,wo(n,s),p=xn(p),c=c(p),n.flags|=1,Ht(e,n,c,s),n.child;case 14:return c=n.type,p=An(c,n.pendingProps),p=An(c.type,p),Au(e,n,c,p,s);case 15:return _u(e,n,n.type,n.pendingProps,s);case 17:return c=n.type,p=n.pendingProps,p=n.elementType===c?p:An(c,p),Os(e,n),n.tag=1,Xt(c)?(e=!0,vs(n)):e=!1,wo(n,s),xu(n,c,p),Ul(n,c,p,s),Wl(null,n,c,!0,e,s);case 19:return Bu(e,n,s);case 22:return Eu(e,n,s)}throw Error(a(156,n.tag))};function a2(e,n){return Yr(e,n)}function zx(e,n,s,c){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,n,s,c){return new zx(e,n,s,c)}function mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wx(e){if(typeof e=="function")return mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ze)return 11;if(e===J)return 14}return 2}function fa(e,n){var s=e.alternate;return s===null?(s=yn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Hs(e,n,s,c,p,g){var M=2;if(c=e,typeof e=="function")mc(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case U:return Va(s.children,p,g,n);case ce:M=8,p|=8;break;case de:return e=yn(12,s,n,p|2),e.elementType=de,e.lanes=g,e;case fe:return e=yn(13,s,n,p),e.elementType=fe,e.lanes=g,e;case H:return e=yn(19,s,n,p),e.elementType=H,e.lanes=g,e;case z:return Ks(s,p,g,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ke:M=10;break e;case Ne:M=9;break e;case ze:M=11;break e;case J:M=14;break e;case re:M=16,c=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return n=yn(M,s,n,p),n.elementType=e,n.type=c,n.lanes=g,n}function Va(e,n,s,c){return e=yn(7,e,c,n),e.lanes=s,e}function Ks(e,n,s,c){return e=yn(22,e,c,n),e.elementType=z,e.lanes=s,e.stateNode={isHidden:!1},e}function uc(e,n,s){return e=yn(6,e,null,n),e.lanes=s,e}function pc(e,n,s){return n=yn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Gx(e,n,s,c,p){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vi(0),this.expirationTimes=Vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.identifierPrefix=c,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function hc(e,n,s,c,p,g,M,P,G){return e=new Gx(e,n,s,P,G),n===1?(n=1,g===!0&&(n|=8)):n=0,g=yn(3,null,null,n),e.current=g,g.stateNode=e,g.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nl(g),e}function Hx(e,n,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:c==null?null:""+c,children:e,containerInfo:n,implementation:s}}function o2(e){if(!e)return sa;e=e._reactInternals;e:{if(In(e)!==e||e.tag!==1)throw Error(a(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Xt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(a(171))}if(e.tag===1){var s=e.type;if(Xt(s))return jm(e,s,n)}return n}function r2(e,n,s,c,p,g,M,P,G){return e=hc(s,c,!0,e,p,g,M,P,G),e.context=o2(null),s=e.current,c=Kt(),p=pa(s),g=qn(c,p),g.callback=n??null,ca(s,g,p),e.current.lanes=p,Yo(e,p,c),tn(e,c),e}function Js(e,n,s,c){var p=n.current,g=Kt(),M=pa(p);return s=o2(s),n.context===null?n.context=s:n.pendingContext=s,n=qn(g,M),n.payload={element:e},c=c===void 0?null:c,c!==null&&(n.callback=c),e=ca(p,n,M),e!==null&&(Nn(e,p,M,g),Es(e,p,M)),M}function Ys(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function s2(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function fc(e,n){s2(e,n),(e=e.alternate)&&s2(e,n)}function Kx(){return null}var i2=typeof reportError=="function"?reportError:function(e){console.error(e)};function xc(e){this._internalRoot=e}Qs.prototype.render=xc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));Js(e,n,null,null)},Qs.prototype.unmount=xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ia(function(){Js(null,e,null,null)}),n[Pn]=null}};function Qs(e){this._internalRoot=e}Qs.prototype.unstable_scheduleHydration=function(e){if(e){var n=zd();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ta.length&&n!==0&&n<ta[s].priority;s++);ta.splice(s,0,e),s===0&&Hd(e)}};function gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function l2(){}function Jx(e,n,s,c,p){if(p){if(typeof c=="function"){var g=c;c=function(){var le=Ys(M);g.call(le)}}var M=r2(n,c,e,0,null,!1,!1,"",l2);return e._reactRootContainer=M,e[Pn]=M.current,dr(e.nodeType===8?e.parentNode:e),Ia(),M}for(;p=e.lastChild;)e.removeChild(p);if(typeof c=="function"){var P=c;c=function(){var le=Ys(G);P.call(le)}}var G=hc(e,0,!1,null,null,!1,!1,"",l2);return e._reactRootContainer=G,e[Pn]=G.current,dr(e.nodeType===8?e.parentNode:e),Ia(function(){Js(n,G,s,c)}),G}function Zs(e,n,s,c,p){var g=s._reactRootContainer;if(g){var M=g;if(typeof p=="function"){var P=p;p=function(){var G=Ys(M);P.call(G)}}Js(n,M,e,p)}else M=Jx(s,n,e,p,c);return Ys(M)}$d=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=Jo(n.pendingLanes);s!==0&&(Ui(n,s|1),tn(n,wt()),(st&6)===0&&(Eo=wt()+500,ia()))}break;case 13:Ia(function(){var c=$n(e,1);if(c!==null){var p=Kt();Nn(c,e,1,p)}}),fc(e,1)}},$i=function(e){if(e.tag===13){var n=$n(e,134217728);if(n!==null){var s=Kt();Nn(n,e,134217728,s)}fc(e,134217728)}},qd=function(e){if(e.tag===13){var n=pa(e),s=$n(e,n);if(s!==null){var c=Kt();Nn(s,e,n,c)}fc(e,n)}},zd=function(){return ut},Wd=function(e,n){var s=ut;try{return ut=e,n()}finally{ut=s}},at=function(e,n,s){switch(n){case"input":if(we(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var c=s[n];if(c!==e&&c.form===e.form){var p=xs(c);if(!p)throw Error(a(90));N(c),we(c,p)}}}break;case"textarea":Te(e,s);break;case"select":n=s.value,n!=null&&ot(e,!!s.multiple,n,!1)}},Hr=lc,Kr=Ia;var Yx={usingClientEntryPoint:!1,Events:[pr,po,xs,Wr,Gr,lc]},Nr={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ho(e),e===null?null:e.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||Kx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ei=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ei.isDisabled&&ei.supportsFiber)try{mt=ei.inject(Qx),ct=ei}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yx,nn.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gc(n))throw Error(a(200));return Hx(e,n,null,s)},nn.createRoot=function(e,n){if(!gc(e))throw Error(a(299));var s=!1,c="",p=i2;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=hc(e,1,!1,null,null,s,!1,c,p),e[Pn]=n.current,dr(e.nodeType===8?e.parentNode:e),new xc(n)},nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=Ho(n),e=e===null?null:e.stateNode,e},nn.flushSync=function(e){return Ia(e)},nn.hydrate=function(e,n,s){if(!Xs(n))throw Error(a(200));return Zs(null,e,n,!0,s)},nn.hydrateRoot=function(e,n,s){if(!gc(e))throw Error(a(405));var c=s!=null&&s.hydratedSources||null,p=!1,g="",M=i2;if(s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(M=s.onRecoverableError)),n=r2(n,null,e,1,s??null,p,!1,g,M),e[Pn]=n.current,dr(e),c)for(e=0;e<c.length;e++)s=c[e],p=s._getVersion,p=p(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,p]:n.mutableSourceEagerHydrationData.push(s,p);return new Qs(n)},nn.render=function(e,n,s){if(!Xs(n))throw Error(a(200));return Zs(null,e,n,!1,s)},nn.unmountComponentAtNode=function(e){if(!Xs(e))throw Error(a(40));return e._reactRootContainer?(Ia(function(){Zs(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1},nn.unstable_batchedUpdates=lc,nn.unstable_renderSubtreeIntoContainer=function(e,n,s,c){if(!Xs(s))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Zs(e,n,s,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var x2;function Pp(){if(x2)return bc.exports;x2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),bc.exports=i0(),bc.exports}var g2;function l0(){if(g2)return ti;g2=1;var r=Pp();return ti.createRoot=r.createRoot,ti.hydrateRoot=r.hydrateRoot,ti}var c0=l0();Pp();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lr(){return Lr=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},Lr.apply(this,arguments)}var ya;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(ya||(ya={}));const v2="popstate";function d0(r){r===void 0&&(r={});function t(o,l){let{pathname:i,search:d,hash:u}=o.location;return sd("",{pathname:i,search:d,hash:u},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(o,l){return typeof l=="string"?l:Vp(l)}return u0(t,a,null,r)}function Bt(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Fp(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function m0(){return Math.random().toString(36).substr(2,8)}function y2(r,t){return{usr:r.state,key:r.key,idx:t}}function sd(r,t,a,o){return a===void 0&&(a=null),Lr({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?Vo(t):t,{state:a,key:t&&t.key||o||m0()})}function Vp(r){let{pathname:t="/",search:a="",hash:o=""}=r;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Vo(r){let t={};if(r){let a=r.indexOf("#");a>=0&&(t.hash=r.substr(a),r=r.substr(0,a));let o=r.indexOf("?");o>=0&&(t.search=r.substr(o),r=r.substr(0,o)),r&&(t.pathname=r)}return t}function u0(r,t,a,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:i=!1}=o,d=l.history,u=ya.Pop,h=null,x=C();x==null&&(x=0,d.replaceState(Lr({},d.state,{idx:x}),""));function C(){return(d.state||{idx:null}).idx}function S(){u=ya.Pop;let w=C(),b=w==null?null:w-x;x=w,h&&h({action:u,location:E.location,delta:b})}function A(w,b){u=ya.Push;let k=sd(E.location,w,b);x=C()+1;let j=y2(k,x),I=E.createHref(k);try{d.pushState(j,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;l.location.assign(I)}i&&h&&h({action:u,location:E.location,delta:1})}function D(w,b){u=ya.Replace;let k=sd(E.location,w,b);x=C();let j=y2(k,x),I=E.createHref(k);d.replaceState(j,"",I),i&&h&&h({action:u,location:E.location,delta:0})}function y(w){let b=l.location.origin!=="null"?l.location.origin:l.location.href,k=typeof w=="string"?w:Vp(w);return k=k.replace(/ $/,"%20"),Bt(b,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,b)}let E={get action(){return u},get location(){return r(l,d)},listen(w){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(v2,S),h=w,()=>{l.removeEventListener(v2,S),h=null}},createHref(w){return t(l,w)},createURL:y,encodeLocation(w){let b=y(w);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:A,replace:D,go(w){return d.go(w)}};return E}var b2;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(b2||(b2={}));function p0(r,t,a){return a===void 0&&(a="/"),h0(r,t,a)}function h0(r,t,a,o){let l=typeof t=="string"?Vo(t):t,i=qp(l.pathname||"/",a);if(i==null)return null;let d=Up(r);f0(d);let u=null;for(let h=0;u==null&&h<d.length;++h){let x=N0(i);u=A0(d[h],x)}return u}function Up(r,t,a,o){t===void 0&&(t=[]),a===void 0&&(a=[]),o===void 0&&(o="");let l=(i,d,u)=>{let h={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:d,route:i};h.relativePath.startsWith("/")&&(Bt(h.relativePath.startsWith(o),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(o.length));let x=Ya([o,h.relativePath]),C=a.concat(h);i.children&&i.children.length>0&&(Bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Up(i.children,t,C,x)),!(i.path==null&&!i.index)&&t.push({path:x,score:C0(x,i.index),routesMeta:C})};return r.forEach((i,d)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))l(i,d);else for(let h of $p(i.path))l(i,d,h)}),t}function $p(r){let t=r.split("/");if(t.length===0)return[];let[a,...o]=t,l=a.endsWith("?"),i=a.replace(/\?$/,"");if(o.length===0)return l?[i,""]:[i];let d=$p(o.join("/")),u=[];return u.push(...d.map(h=>h===""?i:[i,h].join("/"))),l&&u.push(...d),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function f0(r){r.sort((t,a)=>t.score!==a.score?a.score-t.score:S0(t.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const x0=/^:[\w-]+$/,g0=3,v0=2,y0=1,b0=10,w0=-2,w2=r=>r==="*";function C0(r,t){let a=r.split("/"),o=a.length;return a.some(w2)&&(o+=w0),t&&(o+=v0),a.filter(l=>!w2(l)).reduce((l,i)=>l+(x0.test(i)?g0:i===""?y0:b0),o)}function S0(r,t){return r.length===t.length&&r.slice(0,-1).every((o,l)=>o===t[l])?r[r.length-1]-t[t.length-1]:0}function A0(r,t,a){let{routesMeta:o}=r,l={},i="/",d=[];for(let u=0;u<o.length;++u){let h=o[u],x=u===o.length-1,C=i==="/"?t:t.slice(i.length)||"/",S=_0({path:h.relativePath,caseSensitive:h.caseSensitive,end:x},C),A=h.route;if(!S)return null;Object.assign(l,S.params),d.push({params:l,pathname:Ya([i,S.pathname]),pathnameBase:B0(Ya([i,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(i=Ya([i,S.pathnameBase]))}return d}function _0(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[a,o]=E0(r.path,r.caseSensitive,r.end),l=t.match(a);if(!l)return null;let i=l[0],d=i.replace(/(.)\/+$/,"$1"),u=l.slice(1);return{params:o.reduce((x,C,S)=>{let{paramName:A,isOptional:D}=C;if(A==="*"){let E=u[S]||"";d=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const y=u[S];return D&&!y?x[A]=void 0:x[A]=(y||"").replace(/%2F/g,"/"),x},{}),pathname:i,pathnameBase:d,pattern:r}}function E0(r,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),Fp(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let o=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,h)=>(o.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(o.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),o]}function N0(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Fp(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function qp(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,o=r.charAt(a);return o&&o!=="/"?null:r.slice(a)||"/"}function k0(r,t){t===void 0&&(t="/");let{pathname:a,search:o="",hash:l=""}=typeof r=="string"?Vo(r):r;return{pathname:a?a.startsWith("/")?a:D0(a,t):t,search:T0(o),hash:L0(l)}}function D0(r,t){let a=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function Sc(r,t,a,o){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M0(r){return r.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function R0(r,t){let a=M0(r);return t?a.map((o,l)=>l===a.length-1?o.pathname:o.pathnameBase):a.map(o=>o.pathnameBase)}function j0(r,t,a,o){o===void 0&&(o=!1);let l;typeof r=="string"?l=Vo(r):(l=Lr({},r),Bt(!l.pathname||!l.pathname.includes("?"),Sc("?","pathname","search",l)),Bt(!l.pathname||!l.pathname.includes("#"),Sc("#","pathname","hash",l)),Bt(!l.search||!l.search.includes("#"),Sc("#","search","hash",l)));let i=r===""||l.pathname==="",d=i?"/":l.pathname,u;if(d==null)u=a;else{let S=t.length-1;if(!o&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),S-=1;l.pathname=A.join("/")}u=S>=0?t[S]:"/"}let h=k0(l,u),x=d&&d!=="/"&&d.endsWith("/"),C=(i||d===".")&&a.endsWith("/");return!h.pathname.endsWith("/")&&(x||C)&&(h.pathname+="/"),h}const Ya=r=>r.join("/").replace(/\/\/+/g,"/"),B0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),T0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,L0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function O0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const zp=["post","put","patch","delete"];new Set(zp);const I0=["get",...zp];new Set(I0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Or(){return Or=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},Or.apply(this,arguments)}const Dd=_.createContext(null),P0=_.createContext(null),Ni=_.createContext(null),ki=_.createContext(null),Za=_.createContext({outlet:null,matches:[],isDataRoute:!1}),Wp=_.createContext(null);function Di(){return _.useContext(ki)!=null}function Gp(){return Di()||Bt(!1),_.useContext(ki).location}function Hp(r){_.useContext(Ni).static||_.useLayoutEffect(r)}function Kp(){let{isDataRoute:r}=_.useContext(Za);return r?X0():F0()}function F0(){Di()||Bt(!1);let r=_.useContext(Dd),{basename:t,future:a,navigator:o}=_.useContext(Ni),{matches:l}=_.useContext(Za),{pathname:i}=Gp(),d=JSON.stringify(R0(l,a.v7_relativeSplatPath)),u=_.useRef(!1);return Hp(()=>{u.current=!0}),_.useCallback(function(x,C){if(C===void 0&&(C={}),!u.current)return;if(typeof x=="number"){o.go(x);return}let S=j0(x,JSON.parse(d),i,C.relative==="path");r==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:Ya([t,S.pathname])),(C.replace?o.replace:o.push)(S,C.state,C)},[t,o,d,i,r])}function V0(){let{matches:r}=_.useContext(Za),t=r[r.length-1];return t?t.params:{}}function U0(r,t){return $0(r,t)}function $0(r,t,a,o){Di()||Bt(!1);let{navigator:l}=_.useContext(Ni),{matches:i}=_.useContext(Za),d=i[i.length-1],u=d?d.params:{};d&&d.pathname;let h=d?d.pathnameBase:"/";d&&d.route;let x=Gp(),C;if(t){var S;let w=typeof t=="string"?Vo(t):t;h==="/"||(S=w.pathname)!=null&&S.startsWith(h)||Bt(!1),C=w}else C=x;let A=C.pathname||"/",D=A;if(h!=="/"){let w=h.replace(/^\//,"").split("/");D="/"+A.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=p0(r,{pathname:D}),E=H0(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Ya([h,l.encodeLocation?l.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:Ya([h,l.encodeLocation?l.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,a,o);return t&&E?_.createElement(ki.Provider,{value:{location:Or({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:ya.Pop}},E):E}function q0(){let r=Q0(),t=O0(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),a=r instanceof Error?r.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),a?_.createElement("pre",{style:l},a):null,null)}const z0=_.createElement(q0,null);class W0 extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?_.createElement(Za.Provider,{value:this.props.routeContext},_.createElement(Wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G0(r){let{routeContext:t,match:a,children:o}=r,l=_.useContext(Dd);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),_.createElement(Za.Provider,{value:t},o)}function H0(r,t,a,o){var l;if(t===void 0&&(t=[]),a===void 0&&(a=null),o===void 0&&(o=null),r==null){var i;if(!a)return null;if(a.errors)r=a.matches;else if((i=o)!=null&&i.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)r=a.matches;else return null}let d=r,u=(l=a)==null?void 0:l.errors;if(u!=null){let C=d.findIndex(S=>S.route.id&&(u==null?void 0:u[S.route.id])!==void 0);C>=0||Bt(!1),d=d.slice(0,Math.min(d.length,C+1))}let h=!1,x=-1;if(a&&o&&o.v7_partialHydration)for(let C=0;C<d.length;C++){let S=d[C];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(x=C),S.route.id){let{loaderData:A,errors:D}=a,y=S.route.loader&&A[S.route.id]===void 0&&(!D||D[S.route.id]===void 0);if(S.route.lazy||y){h=!0,x>=0?d=d.slice(0,x+1):d=[d[0]];break}}}return d.reduceRight((C,S,A)=>{let D,y=!1,E=null,w=null;a&&(D=u&&S.route.id?u[S.route.id]:void 0,E=S.route.errorElement||z0,h&&(x<0&&A===0?(Z0("route-fallback"),y=!0,w=null):x===A&&(y=!0,w=S.route.hydrateFallbackElement||null)));let b=t.concat(d.slice(0,A+1)),k=()=>{let j;return D?j=E:y?j=w:S.route.Component?j=_.createElement(S.route.Component,null):S.route.element?j=S.route.element:j=C,_.createElement(G0,{match:S,routeContext:{outlet:C,matches:b,isDataRoute:a!=null},children:j})};return a&&(S.route.ErrorBoundary||S.route.errorElement||A===0)?_.createElement(W0,{location:a.location,revalidation:a.revalidation,component:E,error:D,children:k(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):k()},null)}var Jp=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(Jp||{}),Yp=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(Yp||{});function K0(r){let t=_.useContext(Dd);return t||Bt(!1),t}function J0(r){let t=_.useContext(P0);return t||Bt(!1),t}function Y0(r){let t=_.useContext(Za);return t||Bt(!1),t}function Qp(r){let t=Y0(),a=t.matches[t.matches.length-1];return a.route.id||Bt(!1),a.route.id}function Q0(){var r;let t=_.useContext(Wp),a=J0(),o=Qp();return t!==void 0?t:(r=a.errors)==null?void 0:r[o]}function X0(){let{router:r}=K0(Jp.UseNavigateStable),t=Qp(Yp.UseNavigateStable),a=_.useRef(!1);return Hp(()=>{a.current=!0}),_.useCallback(function(l,i){i===void 0&&(i={}),a.current&&(typeof l=="number"?r.navigate(l):r.navigate(l,Or({fromRouteId:t},i)))},[r,t])}const C2={};function Z0(r,t,a){C2[r]||(C2[r]=!0)}function eg(r,t){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function id(r){Bt(!1)}function tg(r){let{basename:t="/",children:a=null,location:o,navigationType:l=ya.Pop,navigator:i,static:d=!1,future:u}=r;Di()&&Bt(!1);let h=t.replace(/^\/*/,"/"),x=_.useMemo(()=>({basename:h,navigator:i,static:d,future:Or({v7_relativeSplatPath:!1},u)}),[h,u,i,d]);typeof o=="string"&&(o=Vo(o));let{pathname:C="/",search:S="",hash:A="",state:D=null,key:y="default"}=o,E=_.useMemo(()=>{let w=qp(C,h);return w==null?null:{location:{pathname:w,search:S,hash:A,state:D,key:y},navigationType:l}},[h,C,S,A,D,y,l]);return E==null?null:_.createElement(Ni.Provider,{value:x},_.createElement(ki.Provider,{children:a,value:E}))}function ng(r){let{children:t,location:a}=r;return U0(ld(t),a)}new Promise(()=>{});function ld(r,t){t===void 0&&(t=[]);let a=[];return _.Children.forEach(r,(o,l)=>{if(!_.isValidElement(o))return;let i=[...t,l];if(o.type===_.Fragment){a.push.apply(a,ld(o.props.children,i));return}o.type!==id&&Bt(!1),!o.props.index||!o.props.children||Bt(!1);let d={id:o.props.id||i.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=ld(o.props.children,i)),a.push(d)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ag="6";try{window.__reactRouterVersion=ag}catch{}const og="startTransition",S2=o0[og];function rg(r){let{basename:t,children:a,future:o,window:l}=r,i=_.useRef();i.current==null&&(i.current=d0({window:l,v5Compat:!0}));let d=i.current,[u,h]=_.useState({action:d.action,location:d.location}),{v7_startTransition:x}=o||{},C=_.useCallback(S=>{x&&S2?S2(()=>h(S)):h(S)},[h,x]);return _.useLayoutEffect(()=>d.listen(C),[d,C]),_.useEffect(()=>eg(o),[o]),_.createElement(tg,{basename:t,children:a,location:u.location,navigationType:u.action,navigator:d,future:o})}var A2;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(A2||(A2={}));var _2;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(_2||(_2={}));var cd=function(r,t){return cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},cd(r,t)};function Xp(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cd(r,t);function a(){this.constructor=r}r.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var vi=function(){return vi=Object.assign||function(t){for(var a,o=1,l=arguments.length;o<l;o++){a=arguments[o];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},vi.apply(this,arguments)};function Uo(r,t){var a={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&t.indexOf(o)<0&&(a[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(r);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(r,o[l])&&(a[o[l]]=r[o[l]]);return a}function Zp(r,t,a,o){var l=arguments.length,i=l<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,a):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,a,o);else for(var u=r.length-1;u>=0;u--)(d=r[u])&&(i=(l<3?d(i):l>3?d(t,a,i):d(t,a))||i);return l>3&&i&&Object.defineProperty(t,a,i),i}function eh(r,t){return function(a,o){t(a,o,r)}}function th(r,t,a,o,l,i){function d(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var u=o.kind,h=u==="getter"?"get":u==="setter"?"set":"value",x=!t&&r?o.static?r:r.prototype:null,C=t||(x?Object.getOwnPropertyDescriptor(x,o.name):{}),S,A=!1,D=a.length-1;D>=0;D--){var y={};for(var E in o)y[E]=E==="access"?{}:o[E];for(var E in o.access)y.access[E]=o.access[E];y.addInitializer=function(b){if(A)throw new TypeError("Cannot add initializers after decoration has completed");i.push(d(b||null))};var w=(0,a[D])(u==="accessor"?{get:C.get,set:C.set}:C[h],y);if(u==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(S=d(w.get))&&(C.get=S),(S=d(w.set))&&(C.set=S),(S=d(w.init))&&l.unshift(S)}else(S=d(w))&&(u==="field"?l.unshift(S):C[h]=S)}x&&Object.defineProperty(x,o.name,C),A=!0}function nh(r,t,a){for(var o=arguments.length>2,l=0;l<t.length;l++)a=o?t[l].call(r,a):t[l].call(r);return o?a:void 0}function ah(r){return typeof r=="symbol"?r:"".concat(r)}function oh(r,t,a){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:a?"".concat(a," ",t):t})}function rh(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function Fe(r,t,a,o){function l(i){return i instanceof a?i:new a(function(d){d(i)})}return new(a||(a=Promise))(function(i,d){function u(C){try{x(o.next(C))}catch(S){d(S)}}function h(C){try{x(o.throw(C))}catch(S){d(S)}}function x(C){C.done?i(C.value):l(C.value).then(u,h)}x((o=o.apply(r,t||[])).next())})}function sh(r,t){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,l,i,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=u(0),d.throw=u(1),d.return=u(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(x){return function(C){return h([x,C])}}function h(x){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(a=0)),a;)try{if(o=1,l&&(i=x[0]&2?l.return:x[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,x[1])).done)return i;switch(l=0,i&&(x=[x[0]&2,i.value]),x[0]){case 0:case 1:i=x;break;case 4:return a.label++,{value:x[1],done:!1};case 5:a.label++,l=x[1],x=[0];continue;case 7:x=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(x[0]===6||x[0]===2)){a=0;continue}if(x[0]===3&&(!i||x[1]>i[0]&&x[1]<i[3])){a.label=x[1];break}if(x[0]===6&&a.label<i[1]){a.label=i[1],i=x;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(x);break}i[2]&&a.ops.pop(),a.trys.pop();continue}x=t.call(r,a)}catch(C){x=[6,C],l=0}finally{o=i=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var Mi=Object.create?(function(r,t,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(t,a);(!l||("get"in l?!t.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(r,o,l)}):(function(r,t,a,o){o===void 0&&(o=a),r[o]=t[a]});function ih(r,t){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(t,a)&&Mi(t,r,a)}function yi(r){var t=typeof Symbol=="function"&&Symbol.iterator,a=t&&r[t],o=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Md(r,t){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var o=a.call(r),l,i=[],d;try{for(;(t===void 0||t-- >0)&&!(l=o.next()).done;)i.push(l.value)}catch(u){d={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(d)throw d.error}}return i}function lh(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Md(arguments[t]));return r}function ch(){for(var r=0,t=0,a=arguments.length;t<a;t++)r+=arguments[t].length;for(var o=Array(r),l=0,t=0;t<a;t++)for(var i=arguments[t],d=0,u=i.length;d<u;d++,l++)o[l]=i[d];return o}function dh(r,t,a){if(a||arguments.length===2)for(var o=0,l=t.length,i;o<l;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return r.concat(i||Array.prototype.slice.call(t))}function Oo(r){return this instanceof Oo?(this.v=r,this):new Oo(r)}function mh(r,t,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(r,t||[]),l,i=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(D){return function(y){return Promise.resolve(y).then(D,S)}}function u(D,y){o[D]&&(l[D]=function(E){return new Promise(function(w,b){i.push([D,E,w,b])>1||h(D,E)})},y&&(l[D]=y(l[D])))}function h(D,y){try{x(o[D](y))}catch(E){A(i[0][3],E)}}function x(D){D.value instanceof Oo?Promise.resolve(D.value.v).then(C,S):A(i[0][2],D)}function C(D){h("next",D)}function S(D){h("throw",D)}function A(D,y){D(y),i.shift(),i.length&&h(i[0][0],i[0][1])}}function uh(r){var t,a;return t={},o("next"),o("throw",function(l){throw l}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(l,i){t[l]=r[l]?function(d){return(a=!a)?{value:Oo(r[l](d)),done:!1}:i?i(d):d}:i}}function ph(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],a;return t?t.call(r):(r=typeof yi=="function"?yi(r):r[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(i){a[i]=r[i]&&function(d){return new Promise(function(u,h){d=r[i](d),l(u,h,d.done,d.value)})}}function l(i,d,u,h){Promise.resolve(h).then(function(x){i({value:x,done:u})},d)}}function hh(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var sg=Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t},dd=function(r){return dd=Object.getOwnPropertyNames||function(t){var a=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[a.length]=o);return a},dd(r)};function fh(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var a=dd(r),o=0;o<a.length;o++)a[o]!=="default"&&Mi(t,r,a[o]);return sg(t,r),t}function xh(r){return r&&r.__esModule?r:{default:r}}function gh(r,t,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!o:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(r):o?o.value:t.get(r)}function vh(r,t,a,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!l:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(r,a):l?l.value=a:t.set(r,a),a}function yh(r,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?t===r:r.has(t)}function bh(r,t,a){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var o,l;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=t[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=t[Symbol.dispose],a&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(i){return Promise.reject(i)}}),r.stack.push({value:t,dispose:o,async:a})}else a&&r.stack.push({async:!0});return t}var ig=typeof SuppressedError=="function"?SuppressedError:function(r,t,a){var o=new Error(a);return o.name="SuppressedError",o.error=r,o.suppressed=t,o};function wh(r){function t(i){r.error=r.hasError?new ig(i,r.error,"An error was suppressed during disposal."):i,r.hasError=!0}var a,o=0;function l(){for(;a=r.stack.pop();)try{if(!a.async&&o===1)return o=0,r.stack.push(a),Promise.resolve().then(l);if(a.dispose){var i=a.dispose.call(a.value);if(a.async)return o|=2,Promise.resolve(i).then(l,function(d){return t(d),l()})}else o|=1}catch(d){t(d)}if(o===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return l()}function Ch(r,t){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,o,l,i,d){return o?t?".jsx":".js":l&&(!i||!d)?a:l+i+"."+d.toLowerCase()+"js"}):r}const lg={__extends:Xp,__assign:vi,__rest:Uo,__decorate:Zp,__param:eh,__esDecorate:th,__runInitializers:nh,__propKey:ah,__setFunctionName:oh,__metadata:rh,__awaiter:Fe,__generator:sh,__createBinding:Mi,__exportStar:ih,__values:yi,__read:Md,__spread:lh,__spreadArrays:ch,__spreadArray:dh,__await:Oo,__asyncGenerator:mh,__asyncDelegator:uh,__asyncValues:ph,__makeTemplateObject:hh,__importStar:fh,__importDefault:xh,__classPrivateFieldGet:gh,__classPrivateFieldSet:vh,__classPrivateFieldIn:yh,__addDisposableResource:bh,__disposeResources:wh,__rewriteRelativeImportExtension:Ch},cg=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:bh,get __assign(){return vi},__asyncDelegator:uh,__asyncGenerator:mh,__asyncValues:ph,__await:Oo,__awaiter:Fe,__classPrivateFieldGet:gh,__classPrivateFieldIn:yh,__classPrivateFieldSet:vh,__createBinding:Mi,__decorate:Zp,__disposeResources:wh,__esDecorate:th,__exportStar:ih,__extends:Xp,__generator:sh,__importDefault:xh,__importStar:fh,__makeTemplateObject:hh,__metadata:rh,__param:eh,__propKey:ah,__read:Md,__rest:Uo,__rewriteRelativeImportExtension:Ch,__runInitializers:nh,__setFunctionName:oh,__spread:lh,__spreadArray:dh,__spreadArrays:ch,__values:yi,default:lg},Symbol.toStringTag,{value:"Module"})),dg="modulepreload",mg=function(r){return"/"+r},E2={},$o=function(t,a,o){let l=Promise.resolve();if(a&&a.length>0){let d=function(x){return Promise.all(x.map(C=>Promise.resolve(C).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=d(a.map(x=>{if(x=mg(x),x in E2)return;E2[x]=!0;const C=x.endsWith(".css"),S=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${S}`))return;const A=document.createElement("link");if(A.rel=C?"stylesheet":dg,C||(A.as="script"),A.crossOrigin="",A.href=x,h&&A.setAttribute("nonce",h),document.head.appendChild(A),C)return new Promise((D,y)=>{A.addEventListener("load",D),A.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${x}`)))})}))}function i(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return l.then(d=>{for(const u of d||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},ug=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...a)=>$o(async()=>{const{default:o}=await Promise.resolve().then(()=>eo);return{default:o}},void 0).then(({default:o})=>o(...a)):t=fetch,(...a)=>t(...a)};class Rd extends Error{constructor(t,a="FunctionsError",o){super(t),this.name=a,this.context=o}}class N2 extends Rd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class k2 extends Rd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class D2 extends Rd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var md;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(md||(md={}));class pg{constructor(t,{headers:a={},customFetch:o,region:l=md.Any}={}){this.url=t,this.headers=a,this.region=l,this.fetch=ug(o)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fe(this,arguments,void 0,function*(a,o={}){var l;try{const{headers:i,method:d,body:u,signal:h}=o;let x={},{region:C}=o;C||(C=this.region);const S=new URL(`${this.url}/${a}`);C&&C!=="any"&&(x["x-region"]=C,S.searchParams.set("forceFunctionRegion",C));let A;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",A=u):typeof u=="string"?(x["Content-Type"]="text/plain",A=u):typeof FormData<"u"&&u instanceof FormData?A=u:(x["Content-Type"]="application/json",A=JSON.stringify(u)):A=u;const D=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),i),body:A,signal:h}).catch(b=>{throw b.name==="AbortError"?b:new N2(b)}),y=D.headers.get("x-relay-error");if(y&&y==="true")throw new k2(D);if(!D.ok)throw new D2(D);let E=((l=D.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),w;return E==="application/json"?w=yield D.json():E==="application/octet-stream"||E==="application/pdf"?w=yield D.blob():E==="text/event-stream"?w=D:E==="multipart/form-data"?w=yield D.formData():w=yield D.text(),{data:w,error:null,response:D}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new N2(i)}:{data:null,error:i,response:i instanceof D2||i instanceof k2?i.context:void 0}}})}}var Gt={};const qo=Nd(cg);var ni={},ai={},oi={},ri={},si={},hg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Io=hg();const fg=Io.fetch,Sh=Io.fetch.bind(Io),Ah=Io.Headers,xg=Io.Request,gg=Io.Response,eo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ah,Request:xg,Response:gg,default:Sh,fetch:fg},Symbol.toStringTag,{value:"Module"})),vg=Nd(eo);var ii={},M2;function _h(){if(M2)return ii;M2=1,Object.defineProperty(ii,"__esModule",{value:!0});class r extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return ii.default=r,ii}var R2;function Eh(){if(R2)return si;R2=1,Object.defineProperty(si,"__esModule",{value:!0});const r=qo,t=r.__importDefault(vg),a=r.__importDefault(_h());class o{constructor(i){var d,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(d=i.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,d){return this.headers=new Headers(this.headers),this.headers.set(i,d),this}then(i,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var C,S,A,D;let y=null,E=null,w=null,b=x.status,k=x.statusText;if(x.ok){if(this.method!=="HEAD"){const F=await x.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((C=this.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?E=F:E=JSON.parse(F))}const I=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),O=(A=x.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");I&&O&&O.length>1&&(w=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(y={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,w=null,b=406,k="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const I=await x.text();try{y=JSON.parse(I),Array.isArray(y)&&x.status===404&&(E=[],y=null,b=200,k="OK")}catch{x.status===404&&I===""?(b=204,k="No Content"):y={message:I}}if(y&&this.isMaybeSingle&&(!((D=y==null?void 0:y.details)===null||D===void 0)&&D.includes("0 rows"))&&(y=null,b=200,k="OK"),y&&this.shouldThrowOnError)throw new a.default(y)}return{error:y,data:E,count:w,status:b,statusText:k}});return this.shouldThrowOnError||(h=h.catch(x=>{var C,S,A;return{error:{message:`${(C=x==null?void 0:x.name)!==null&&C!==void 0?C:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(S=x==null?void 0:x.stack)!==null&&S!==void 0?S:""}`,hint:"",code:`${(A=x==null?void 0:x.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),h.then(i,d)}returns(){return this}overrideTypes(){return this}}return si.default=o,si}var j2;function Nh(){if(j2)return ri;j2=1,Object.defineProperty(ri,"__esModule",{value:!0});const t=qo.__importDefault(Eh());class a extends t.default{select(l){let i=!1;const d=(l??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:i=!0,nullsFirst:d,foreignTable:u,referencedTable:h=u}={}){const x=h?`${h}.order`:"order",C=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${C?`${C},`:""}${l}.${i?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:i,referencedTable:d=i}={}){const u=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(u,`${l}`),this}range(l,i,{foreignTable:d,referencedTable:u=d}={}){const h=typeof u>"u"?"offset":`${u}.offset`,x=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this.url.searchParams.set(x,`${i-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:i=!1,settings:d=!1,buffers:u=!1,wal:h=!1,format:x="text"}={}){var C;const S=[l?"analyze":null,i?"verbose":null,d?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),A=(C=this.headers.get("Accept"))!==null&&C!==void 0?C:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${A}"; options=${S};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return ri.default=a,ri}var B2;function jd(){if(B2)return oi;B2=1,Object.defineProperty(oi,"__esModule",{value:!0});const t=qo.__importDefault(Nh()),a=new RegExp("[,()]");class o extends t.default{eq(i,d){return this.url.searchParams.append(i,`eq.${d}`),this}neq(i,d){return this.url.searchParams.append(i,`neq.${d}`),this}gt(i,d){return this.url.searchParams.append(i,`gt.${d}`),this}gte(i,d){return this.url.searchParams.append(i,`gte.${d}`),this}lt(i,d){return this.url.searchParams.append(i,`lt.${d}`),this}lte(i,d){return this.url.searchParams.append(i,`lte.${d}`),this}like(i,d){return this.url.searchParams.append(i,`like.${d}`),this}likeAllOf(i,d){return this.url.searchParams.append(i,`like(all).{${d.join(",")}}`),this}likeAnyOf(i,d){return this.url.searchParams.append(i,`like(any).{${d.join(",")}}`),this}ilike(i,d){return this.url.searchParams.append(i,`ilike.${d}`),this}ilikeAllOf(i,d){return this.url.searchParams.append(i,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(i,d){return this.url.searchParams.append(i,`ilike(any).{${d.join(",")}}`),this}is(i,d){return this.url.searchParams.append(i,`is.${d}`),this}in(i,d){const u=Array.from(new Set(d)).map(h=>typeof h=="string"&&a.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(i,`in.(${u})`),this}contains(i,d){return typeof d=="string"?this.url.searchParams.append(i,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(i,`cs.{${d.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(d)}`),this}containedBy(i,d){return typeof d=="string"?this.url.searchParams.append(i,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(i,`cd.{${d.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(d)}`),this}rangeGt(i,d){return this.url.searchParams.append(i,`sr.${d}`),this}rangeGte(i,d){return this.url.searchParams.append(i,`nxl.${d}`),this}rangeLt(i,d){return this.url.searchParams.append(i,`sl.${d}`),this}rangeLte(i,d){return this.url.searchParams.append(i,`nxr.${d}`),this}rangeAdjacent(i,d){return this.url.searchParams.append(i,`adj.${d}`),this}overlaps(i,d){return typeof d=="string"?this.url.searchParams.append(i,`ov.${d}`):this.url.searchParams.append(i,`ov.{${d.join(",")}}`),this}textSearch(i,d,{config:u,type:h}={}){let x="";h==="plain"?x="pl":h==="phrase"?x="ph":h==="websearch"&&(x="w");const C=u===void 0?"":`(${u})`;return this.url.searchParams.append(i,`${x}fts${C}.${d}`),this}match(i){return Object.entries(i).forEach(([d,u])=>{this.url.searchParams.append(d,`eq.${u}`)}),this}not(i,d,u){return this.url.searchParams.append(i,`not.${d}.${u}`),this}or(i,{foreignTable:d,referencedTable:u=d}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${i})`),this}filter(i,d,u){return this.url.searchParams.append(i,`${d}.${u}`),this}}return oi.default=o,oi}var T2;function kh(){if(T2)return ai;T2=1,Object.defineProperty(ai,"__esModule",{value:!0});const t=qo.__importDefault(jd());class a{constructor(l,{headers:i={},schema:d,fetch:u}){this.url=l,this.headers=new Headers(i),this.schema=d,this.fetch=u}select(l,i){const{head:d=!1,count:u}=i??{},h=d?"HEAD":"GET";let x=!1;const C=(l??"*").split("").map(S=>/\s/.test(S)&&!x?"":(S==='"'&&(x=!x),S)).join("");return this.url.searchParams.set("select",C),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:i,defaultToNull:d=!0}={}){var u;const h="POST";if(i&&this.headers.append("Prefer",`count=${i}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((C,S)=>C.concat(Object.keys(S)),[]);if(x.length>0){const C=[...new Set(x)].map(S=>`"${S}"`);this.url.searchParams.set("columns",C.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(l,{onConflict:i,ignoreDuplicates:d=!1,count:u,defaultToNull:h=!0}={}){var x;const C="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const S=l.reduce((A,D)=>A.concat(Object.keys(D)),[]);if(S.length>0){const A=[...new Set(S)].map(D=>`"${D}"`);this.url.searchParams.set("columns",A.join(","))}}return new t.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(l,{count:i}={}){var d;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var i;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return ai.default=a,ai}var L2;function yg(){if(L2)return ni;L2=1,Object.defineProperty(ni,"__esModule",{value:!0});const r=qo,t=r.__importDefault(kh()),a=r.__importDefault(jd());class o{constructor(i,{headers:d={},schema:u,fetch:h}={}){this.url=i,this.headers=new Headers(d),this.schemaName=u,this.fetch=h}from(i){const d=new URL(`${this.url}/${i}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new o(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,d={},{head:u=!1,get:h=!1,count:x}={}){var C;let S;const A=new URL(`${this.url}/rpc/${i}`);let D;u||h?(S=u?"HEAD":"GET",Object.entries(d).filter(([E,w])=>w!==void 0).map(([E,w])=>[E,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([E,w])=>{A.searchParams.append(E,w)})):(S="POST",D=d);const y=new Headers(this.headers);return x&&y.set("Prefer",`count=${x}`),new a.default({method:S,url:A,headers:y,schema:this.schemaName,body:D,fetch:(C=this.fetch)!==null&&C!==void 0?C:fetch})}}return ni.default=o,ni}var O2;function bg(){if(O2)return Gt;O2=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.PostgrestError=Gt.PostgrestBuilder=Gt.PostgrestTransformBuilder=Gt.PostgrestFilterBuilder=Gt.PostgrestQueryBuilder=Gt.PostgrestClient=void 0;const r=qo,t=r.__importDefault(yg());Gt.PostgrestClient=t.default;const a=r.__importDefault(kh());Gt.PostgrestQueryBuilder=a.default;const o=r.__importDefault(jd());Gt.PostgrestFilterBuilder=o.default;const l=r.__importDefault(Nh());Gt.PostgrestTransformBuilder=l.default;const i=r.__importDefault(Eh());Gt.PostgrestBuilder=i.default;const d=r.__importDefault(_h());return Gt.PostgrestError=d.default,Gt.default={PostgrestClient:t.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:i.default,PostgrestError:d.default},Gt}var Dh=bg();const Mh=Ed(Dh),wg=Op({__proto__:null,default:Mh},[Dh]),{PostgrestClient:Cg,PostgrestQueryBuilder:sw,PostgrestFilterBuilder:iw,PostgrestTransformBuilder:lw,PostgrestBuilder:cw,PostgrestError:dw}=Mh||wg;class Sg{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const o=a.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const o=this.getWebSocketConstructor();return new o(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ag="2.78.0",_g=`realtime-js/${Ag}`,Eg="1.0.0",ud=1e4,Ng=1e3,kg=100;var Rr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Rr||(Rr={}));var jt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(jt||(jt={}));var Rn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Rn||(Rn={}));var pd;(function(r){r.websocket="websocket"})(pd||(pd={}));var za;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(za||(za={}));class Dg{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),o=new TextDecoder;return this._decodeBroadcast(t,a,o)}_decodeBroadcast(t,a,o){const l=a.getUint8(1),i=a.getUint8(2);let d=this.HEADER_LENGTH+2;const u=o.decode(t.slice(d,d+l));d=d+l;const h=o.decode(t.slice(d,d+i));d=d+i;const x=JSON.parse(o.decode(t.slice(d,t.byteLength)));return{ref:null,topic:u,event:h,payload:x}}}class Rh{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(gt||(gt={}));const I2=(r,t,a={})=>{var o;const l=(o=a.skipTypes)!==null&&o!==void 0?o:[];return t?Object.keys(t).reduce((i,d)=>(i[d]=Mg(d,r,t,l),i),{}):{}},Mg=(r,t,a,o)=>{const l=t.find(u=>u.name===r),i=l==null?void 0:l.type,d=a[r];return i&&!o.includes(i)?jh(i,d):hd(d)},jh=(r,t)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return Tg(t,a)}switch(r){case gt.bool:return Rg(t);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return jg(t);case gt.json:case gt.jsonb:return Bg(t);case gt.timestamp:return Lg(t);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return hd(t);default:return hd(t)}},hd=r=>r,Rg=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},jg=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},Bg=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},Tg=(r,t)=>{if(typeof r!="string")return r;const a=r.length-1,o=r[a];if(r[0]==="{"&&o==="}"){let i;const d=r.slice(1,a);try{i=JSON.parse("["+d+"]")}catch{i=d?d.split(","):[]}return i.map(u=>jh(t,u))}return r},Lg=r=>typeof r=="string"?r.replace(" ","T"):r,Bh=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ac{constructor(t,a,o={},l=ud){this.channel=t,this.event=a,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var o;return this._hasReceived(t)&&a((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(o=>o.status===t).forEach(o=>o.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var P2;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(P2||(P2={}));class jr{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:i,onLeave:d,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,l,i,d),this.pendingDiffs.forEach(h=>{this.state=jr.syncDiff(this.state,h,i,d)}),this.pendingDiffs=[],u()}),this.channel._on(o.diff,{},l=>{const{onJoin:i,onLeave:d,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=jr.syncDiff(this.state,l,i,d),u())}),this.onJoin((l,i,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:i,newPresences:d})}),this.onLeave((l,i,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:i,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,o,l){const i=this.cloneDeep(t),d=this.transformState(a),u={},h={};return this.map(i,(x,C)=>{d[x]||(h[x]=C)}),this.map(d,(x,C)=>{const S=i[x];if(S){const A=C.map(w=>w.presence_ref),D=S.map(w=>w.presence_ref),y=C.filter(w=>D.indexOf(w.presence_ref)<0),E=S.filter(w=>A.indexOf(w.presence_ref)<0);y.length>0&&(u[x]=y),E.length>0&&(h[x]=E)}else u[x]=C}),this.syncDiff(i,{joins:u,leaves:h},o,l)}static syncDiff(t,a,o,l){const{joins:i,leaves:d}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(i,(u,h)=>{var x;const C=(x=t[u])!==null&&x!==void 0?x:[];if(t[u]=this.cloneDeep(h),C.length>0){const S=t[u].map(D=>D.presence_ref),A=C.filter(D=>S.indexOf(D.presence_ref)<0);t[u].unshift(...A)}o(u,C,h)}),this.map(d,(u,h)=>{let x=t[u];if(!x)return;const C=h.map(S=>S.presence_ref);x=x.filter(S=>C.indexOf(S.presence_ref)<0),t[u]=x,l(u,x,h),x.length===0&&delete t[u]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(o=>a(o,t[o]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,o)=>{const l=t[o];return"metas"in l?a[o]=l.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):a[o]=l,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var F2;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(F2||(F2={}));var Br;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Br||(Br={}));var Gn;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class Bd{constructor(t,a={config:{}},o){var l,i;if(this.topic=t,this.params=a,this.socket=o,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Ac(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new jr(this),this.broadcastEndpointURL=Bh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var o,l,i;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:d,presence:u,private:h}}=this.params,x=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(D=>D.filter))!==null&&l!==void 0?l:[],C=!!this.bindings[Br.PRESENCE]&&this.bindings[Br.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,S={},A={broadcast:d,presence:Object.assign(Object.assign({},u),{enabled:C}),postgres_changes:x,private:h};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(D=>t==null?void 0:t(Gn.CHANNEL_ERROR,D)),this._onClose(()=>t==null?void 0:t(Gn.CLOSED)),this.updateJoinPayload(Object.assign({config:A},S)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:D})=>{var y;if(this.socket.setAuth(),D===void 0){t==null||t(Gn.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,w=(y=E==null?void 0:E.length)!==null&&y!==void 0?y:0,b=[];for(let k=0;k<w;k++){const j=E[k],{filter:{event:I,schema:O,table:F,filter:U}}=j,ce=D&&D[k];if(ce&&ce.event===I&&ce.schema===O&&ce.table===F&&ce.filter===U)b.push(Object.assign(Object.assign({},j),{id:ce.id}));else{this.unsubscribe(),this.state=jt.errored,t==null||t(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Gn.SUBSCRIBED);return}}).receive("error",D=>{this.state=jt.errored,t==null||t(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(D).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,o){return this.state===jt.joined&&t===Br.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,a,o)}async httpSend(t,a,o={}){var l;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:a,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(u.status===202)return{success:!0};let h=u.statusText;try{const x=await u.json();h=x.error||x.message||h}catch{}return Promise.reject(new Error(h))}async send(t,a={}){var o,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:d}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:d,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=x.body)===null||l===void 0?void 0:l.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var d,u,h;const x=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(u=(d=this.params)===null||d===void 0?void 0:d.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&i("ok"),x.receive("ok",()=>i("ok")),x.receive("error",()=>i("error")),x.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new Ac(this,Rn.leave,{},t),o.receive("ok",()=>{a(),l("ok")}).receive("timeout",()=>{a(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(t,a,o){const l=new AbortController,i=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:l.signal}));return clearTimeout(i),d}_push(t,a,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Ac(this,t,a,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>kg){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,o){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,o){var l,i;const d=t.toLocaleLowerCase(),{close:u,error:h,leave:x,join:C}=Rn;if(o&&[u,h,x,C].indexOf(d)>=0&&o!==this._joinRef())return;let A=this._onMessage(d,a,o);if(a&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(D=>{var y,E,w;return((y=D.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(E=D.filter)===null||E===void 0?void 0:E.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===d}).map(D=>D.callback(A,o)):(i=this.bindings[d])===null||i===void 0||i.filter(D=>{var y,E,w,b,k,j;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in D){const I=D.id,O=(y=D.filter)===null||y===void 0?void 0:y.event;return I&&((E=a.ids)===null||E===void 0?void 0:E.includes(I))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((w=a.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const I=(k=(b=D==null?void 0:D.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return I==="*"||I===((j=a==null?void 0:a.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return D.type.toLocaleLowerCase()===d}).map(D=>{if(typeof A=="object"&&"ids"in A){const y=A.data,{schema:E,table:w,commit_timestamp:b,type:k,errors:j}=y;A=Object.assign(Object.assign({},{schema:E,table:w,commit_timestamp:b,eventType:k,new:{},old:{},errors:j}),this._getPayloadRecords(y))}D.callback(A,o)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,o){const l=t.toLocaleLowerCase(),i={type:l,filter:a,callback:o};return this.bindings[l]?this.bindings[l].push(i):this.bindings[l]=[i],this}_off(t,a){const o=t.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var i;return!(((i=l.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===o&&Bd.isEqual(l.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const o in t)if(t[o]!==a[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rn.close,{},t)}_onError(t){this._on(Rn.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=I2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=I2(t.columns,t.old_record)),a}}const _c=()=>{},li={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Og=[1e3,2e3,5e3,1e4],Ig=1e4,Pg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fg{constructor(t,a){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ud,this.transport=null,this.heartbeatIntervalMs=li.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_c,this.ref=0,this.reconnectTimer=null,this.logger=_c,this.conn=null,this.sendBuffer=[],this.serializer=new Dg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let i;return l?i=l:typeof fetch>"u"?i=(...d)=>$o(async()=>{const{default:u}=await Promise.resolve().then(()=>eo);return{default:u}},void 0).then(({default:u})=>u(...d)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...d)=>i(...d)},!(!((o=a==null?void 0:a.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${pd.websocket}`,this.httpEndpoint=Bh(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Eg}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},t?this.conn.close(t,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,o){this.logger(t,a,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Rr.connecting:return za.Connecting;case Rr.open:return za.Open;case Rr.closing:return za.Closing;default:return za.Closed}}isConnected(){return this.connectionState()===za.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const o=`realtime:${t}`,l=this.getChannels().find(i=>i.topic===o);if(l)return l;{const i=new Bd(`realtime:${t}`,a,this);return this.channels.push(i),i}}push(t){const{topic:a,event:o,payload:l,ref:i}=t,d=()=>{this.encode(t,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${a} ${o} (${i})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ng,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},li.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(o=>o.topic===t&&(o._isJoined()||o._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:i,ref:d}=a,u=d?`(${d})`:"",h=i.status||"";this.log("receive",`${h} ${o} ${l} ${u}`.trim(),i),this.channels.filter(x=>x._isMember(o)).forEach(x=>x._trigger(l,i,d)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rn.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const o=t.match(/\?/)?"&":"?",l=new URLSearchParams(a);return`${t}${o}${l}`}_workerObjectUrl(t){let a;if(t)a=t;else{const o=new Blob([Pg],{type:"application/javascript"});a=URL.createObjectURL(o)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(t=null){let a;t?a=t:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const l={access_token:a,version:_g};a&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Rn.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(o=>{try{o(a)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(o){this.log("error",`error triggering ${t} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Rh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},li.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var a,o,l,i,d,u,h,x,C;if(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(o=t==null?void 0:t.timeout)!==null&&o!==void 0?o:ud,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:li.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(d=t==null?void 0:t.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:_c,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(S=>Og[S-1]||Ig),this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:((S,A)=>A(JSON.stringify(S))),this.decode=(C=t==null?void 0:t.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Td extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function At(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Vg extends Td{constructor(t,a,o){super(t),this.name="StorageApiError",this.status=a,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fd extends Td{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}const Ld=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...a)=>$o(async()=>{const{default:o}=await Promise.resolve().then(()=>eo);return{default:o}},void 0).then(({default:o})=>o(...a)):t=fetch,(...a)=>t(...a)},Ug=()=>Fe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $o(()=>Promise.resolve().then(()=>eo),void 0)).Response:Response}),xd=r=>{if(Array.isArray(r))return r.map(a=>xd(a));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([a,o])=>{const l=a.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[l]=xd(o)}),t},$g=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ec=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},qg=(r,t,a)=>Fe(void 0,void 0,void 0,function*(){const o=yield Ug();r instanceof o&&!(a!=null&&a.noResolveJson)?r.json().then(l=>{const i=r.status||500,d=(l==null?void 0:l.statusCode)||i+"";t(new Vg(Ec(l),i,d))}).catch(l=>{t(new fd(Ec(l),l))}):t(new fd(Ec(r),r))}),zg=(r,t,a,o)=>{const l={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!o?l:($g(o)?(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(o)):l.body=o,t!=null&&t.duplex&&(l.duplex=t.duplex),Object.assign(Object.assign({},l),a))};function Ur(r,t,a,o,l,i){return Fe(this,void 0,void 0,function*(){return new Promise((d,u)=>{r(a,zg(t,o,l,i)).then(h=>{if(!h.ok)throw h;return o!=null&&o.noResolveJson?h:h.json()}).then(h=>d(h)).catch(h=>qg(h,u,o))})})}function Ir(r,t,a,o){return Fe(this,void 0,void 0,function*(){return Ur(r,"GET",t,a,o)})}function Mn(r,t,a,o,l){return Fe(this,void 0,void 0,function*(){return Ur(r,"POST",t,o,l,a)})}function gd(r,t,a,o,l){return Fe(this,void 0,void 0,function*(){return Ur(r,"PUT",t,o,l,a)})}function Wg(r,t,a,o){return Fe(this,void 0,void 0,function*(){return Ur(r,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),o)})}function Od(r,t,a,o,l){return Fe(this,void 0,void 0,function*(){return Ur(r,"DELETE",t,o,l,a)})}class Gg{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a}then(t,a){return this.execute().then(t,a)}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(At(t))return{data:null,error:t};throw t}})}}var Th;class Hg{constructor(t,a){this.downloadFn=t,this.shouldThrowOnError=a,this[Th]="BlobDownloadBuilder",this.promise=null}asStream(){return new Gg(this.downloadFn,this.shouldThrowOnError)}then(t,a){return this.getPromise().then(t,a)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(At(t))return{data:null,error:t};throw t}})}}Th=Symbol.toStringTag;const Kg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jg{constructor(t,a={},o,l){this.shouldThrowOnError=!1,this.url=t,this.headers=a,this.bucketId=o,this.fetch=Ld(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,a,o,l){return Fe(this,void 0,void 0,function*(){try{let i;const d=Object.assign(Object.assign({},V2),l);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const h=d.metadata;typeof Blob<"u"&&o instanceof Blob?(i=new FormData,i.append("cacheControl",d.cacheControl),h&&i.append("metadata",this.encodeMetadata(h)),i.append("",o)):typeof FormData<"u"&&o instanceof FormData?(i=o,i.append("cacheControl",d.cacheControl),h&&i.append("metadata",this.encodeMetadata(h))):(i=o,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),l!=null&&l.headers&&(u=Object.assign(Object.assign({},u),l.headers));const x=this._removeEmptyFolders(a),C=this._getFinalPath(x),S=yield(t=="PUT"?gd:Mn)(this.fetch,`${this.url}/object/${C}`,i,Object.assign({headers:u},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:x,id:S.Id,fullPath:S.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}upload(t,a,o){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,o)})}uploadToSignedUrl(t,a,o,l){return Fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),d=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${d}`);u.searchParams.set("token",a);try{let h;const x=Object.assign({upsert:V2.upsert},l),C=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&o instanceof Blob?(h=new FormData,h.append("cacheControl",x.cacheControl),h.append("",o)):typeof FormData<"u"&&o instanceof FormData?(h=o,h.append("cacheControl",x.cacheControl)):(h=o,C["cache-control"]=`max-age=${x.cacheControl}`,C["content-type"]=x.contentType);const S=yield gd(this.fetch,u.toString(),h,{headers:C});return{data:{path:i,fullPath:S.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(At(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,a){return Fe(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t);const l=Object.assign({},this.headers);a!=null&&a.upsert&&(l["x-upsert"]="true");const i=yield Mn(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+i.url),u=d.searchParams.get("token");if(!u)throw new Td("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:u},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}update(t,a,o){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,o)})}move(t,a,o){return Fe(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}copy(t,a,o){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}createSignedUrl(t,a,o){return Fe(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t),i=yield Mn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:a},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${d}`)},{data:i,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}createSignedUrls(t,a,o){return Fe(this,void 0,void 0,function*(){try{const l=yield Mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),i=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${i}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}download(t,a){const l=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),d=i?`?${i}`:"",u=this._getFinalPath(t),h=()=>Ir(this.fetch,`${this.url}/${l}/${u}${d}`,{headers:this.headers,noResolveJson:!0});return new Hg(h,this.shouldThrowOnError)}info(t){return Fe(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const o=yield Ir(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:xd(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}exists(t){return Fe(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield Wg(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o)&&o instanceof fd){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}})}getPublicUrl(t,a){const o=this._getFinalPath(t),l=[],i=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";i!==""&&l.push(i);const u=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});h!==""&&l.push(h);let x=l.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${o}${x}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}list(t,a,o){return Fe(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},Kg),a),{prefix:t||""});return{data:yield Mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}listV2(t,a){return Fe(this,void 0,void 0,function*(){try{const o=Object.assign({},t);return{data:yield Mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const Lh="2.78.0",Oh={"X-Client-Info":`storage-js/${Lh}`};class Yg{constructor(t,a={},o,l){this.shouldThrowOnError=!1;const i=new URL(t);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oh),a),this.fetch=Ld(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(t);return{data:yield Ir(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ir(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}createBucket(t){return Fe(this,arguments,void 0,function*(a,o={public:!1}){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}})}updateBucket(t,a){return Fe(this,void 0,void 0,function*(){try{return{data:yield gd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}emptyBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(t){const a={};return t&&("limit"in t&&(a.limit=String(t.limit)),"offset"in t&&(a.offset=String(t.offset)),t.search&&(a.search=t.search),t.sortColumn&&(a.sortColumn=t.sortColumn),t.sortOrder&&(a.sortOrder=t.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}class Qg{constructor(t,a={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Oh),a),this.fetch=Ld(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}listBuckets(t){return Fe(this,void 0,void 0,function*(){try{const a=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&a.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&a.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&a.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&a.set("sortOrder",t.sortOrder),t!=null&&t.search&&a.set("search",t.search);const o=a.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Ir(this.fetch,l,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}}const Id={"X-Client-Info":`storage-js/${Lh}`,"Content-Type":"application/json"};class Ih extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function dn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Nc extends Ih{constructor(t,a,o){super(t),this.name="StorageVectorsApiError",this.status=a,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xg extends Ih{constructor(t,a){super(t),this.name="StorageVectorsUnknownError",this.originalError=a}}var U2;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(U2||(U2={}));const Pd=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...a)=>$o(async()=>{const{default:o}=await Promise.resolve().then(()=>eo);return{default:o}},void 0).then(({default:o})=>o(...a)):t=fetch,(...a)=>t(...a)},Zg=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},$2=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ev=(r,t,a)=>Fe(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(a!=null&&a.noResolveJson)){const l=r.status||500,i=r;if(typeof i.json=="function")i.json().then(d=>{const u=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||l+"";t(new Nc($2(d),l,u))}).catch(()=>{const d=l+"",u=i.statusText||`HTTP ${l} error`;t(new Nc(u,l,d))});else{const d=l+"",u=i.statusText||`HTTP ${l} error`;t(new Nc(u,l,d))}}else t(new Xg($2(r),r))}),tv=(r,t,a,o)=>{const l={method:r,headers:(t==null?void 0:t.headers)||{}};return o?(Zg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),a)):l};function nv(r,t,a,o,l,i){return Fe(this,void 0,void 0,function*(){return new Promise((d,u)=>{r(a,tv(t,o,l,i)).then(h=>{if(!h.ok)throw h;if(o!=null&&o.noResolveJson)return h;const x=h.headers.get("content-type");return!x||!x.includes("application/json")?{}:h.json()}).then(h=>d(h)).catch(h=>ev(h,u,o))})})}function mn(r,t,a,o,l){return Fe(this,void 0,void 0,function*(){return nv(r,"POST",t,o,l,a)})}class av{constructor(t,a={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Id),a),this.fetch=Pd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}getIndex(t,a){return Fe(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:a},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}listIndexes(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}deleteIndex(t,a){return Fe(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:a},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(dn(o))return{data:null,error:o};throw o}})}}class ov{constructor(t,a={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Id),a),this.fetch=Pd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield mn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}getVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}listVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield mn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}queryVectors(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}deleteVectors(t){return Fe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield mn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}}class rv{constructor(t,a={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Id),a),this.fetch=Pd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}getBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}listBuckets(){return Fe(this,arguments,void 0,function*(t={}){try{return{data:yield mn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Fe(this,void 0,void 0,function*(){try{return{data:(yield mn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(dn(a))return{data:null,error:a};throw a}})}}class sv extends rv{constructor(t,a={}){super(t,a.headers||{},a.fetch)}from(t){return new iv(this.url,this.headers,t,this.fetch)}}class iv extends av{constructor(t,a,o,l){super(t,a,l),this.vectorBucketName=o}createIndex(t){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Fe(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Fe(this,arguments,void 0,function*(a={}){return t.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Fe(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Fe(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new lv(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class lv extends ov{constructor(t,a,o,l,i){super(t,a,i),this.vectorBucketName=o,this.indexName=l}putVectors(t){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Fe(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Fe(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Fe(this,arguments,void 0,function*(a={}){return t.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Fe(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Fe(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class cv extends Yg{constructor(t,a={},o,l){super(t,a,o,l)}from(t){return new Jg(this.url,this.headers,t,this.fetch)}get vectors(){return new sv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Qg(this.url+"/iceberg",this.headers,this.fetch)}}const dv="2.78.0";let Mr="";typeof Deno<"u"?Mr="deno":typeof document<"u"?Mr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mr="react-native":Mr="node";const mv={"X-Client-Info":`supabase-js-${Mr}/${dv}`},uv={headers:mv},pv={schema:"public"},hv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fv={},xv=r=>{let t;return r?t=r:typeof fetch>"u"?t=Sh:t=fetch,(...a)=>t(...a)},gv=()=>typeof Headers>"u"?Ah:Headers,vv=(r,t,a)=>{const o=xv(a),l=gv();return async(i,d)=>{var u;const h=(u=await t())!==null&&u!==void 0?u:r;let x=new l(d==null?void 0:d.headers);return x.has("apikey")||x.set("apikey",r),x.has("Authorization")||x.set("Authorization",`Bearer ${h}`),o(i,Object.assign(Object.assign({},d),{headers:x}))}};function yv(r){return r.endsWith("/")?r:r+"/"}function bv(r,t){var a,o;const{db:l,auth:i,realtime:d,global:u}=r,{db:h,auth:x,realtime:C,global:S}=t,A={db:Object.assign(Object.assign({},h),l),auth:Object.assign(Object.assign({},x),i),realtime:Object.assign(Object.assign({},C),d),storage:{},global:Object.assign(Object.assign(Object.assign({},S),u),{headers:Object.assign(Object.assign({},(a=S==null?void 0:S.headers)!==null&&a!==void 0?a:{}),(o=u==null?void 0:u.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return r.accessToken?A.accessToken=r.accessToken:delete A.accessToken,A}function wv(r){const t=r==null?void 0:r.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ph="2.78.0",Bo=30*1e3,vd=3,kc=vd*Bo,Cv="http://localhost:9999",Sv="supabase.auth.token",Av={"X-Client-Info":`gotrue-js/${Ph}`},yd="X-Supabase-Api-Version",Fh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_v=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ev=600*1e3;class Pr extends Error{constructor(t,a,o){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=o}}function Ge(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Nv extends Pr{constructor(t,a,o){super(t,a,o),this.name="AuthApiError",this.status=a,this.code=o}}function kv(r){return Ge(r)&&r.name==="AuthApiError"}class Wa extends Pr{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class Ca extends Pr{constructor(t,a,o,l){super(t,o,l),this.name=a,this.status=o}}class kn extends Ca{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dv(r){return Ge(r)&&r.name==="AuthSessionMissingError"}class ko extends Ca{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ci extends Ca{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class di extends Ca{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mv(r){return Ge(r)&&r.name==="AuthImplicitGrantRedirectError"}class q2 extends Ca{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bd extends Ca{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Dc(r){return Ge(r)&&r.name==="AuthRetryableFetchError"}class z2 extends Ca{constructor(t,a,o){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=o}}class wd extends Ca{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),W2=` 	
\r=`.split(""),Rv=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<W2.length;t+=1)r[W2[t].charCodeAt(0)]=-2;for(let t=0;t<bi.length;t+=1)r[bi[t].charCodeAt(0)]=t;return r})();function G2(r,t,a){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;a(bi[o]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;a(bi[o]),t.queuedBits-=6}}function Vh(r,t,a){const o=Rv[r];if(o>-1)for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function H2(r){const t=[],a=d=>{t.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},i=d=>{Tv(d,o,a)};for(let d=0;d<r.length;d+=1)Vh(r.charCodeAt(d),l,i);return t.join("")}function jv(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Bv(r,t){for(let a=0;a<r.length;a+=1){let o=r.charCodeAt(a);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(r.charCodeAt(a+1)-56320&65535|l)+65536,a+=1}jv(o,t)}}function Tv(r,t,a){if(t.utf8seq===0){if(r<=127){a(r);return}for(let o=1;o<6;o+=1)if((r>>7-o&1)===0){t.utf8seq=o;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function Lo(r){const t=[],a={queue:0,queuedBits:0},o=l=>{t.push(l)};for(let l=0;l<r.length;l+=1)Vh(r.charCodeAt(l),a,o);return new Uint8Array(t)}function Lv(r){const t=[];return Bv(r,a=>t.push(a)),new Uint8Array(t)}function Ja(r){const t=[],a={queue:0,queuedBits:0},o=l=>{t.push(l)};return r.forEach(l=>G2(l,a,o)),G2(null,a,o),t.join("")}function Ov(r){return Math.round(Date.now()/1e3)+r}function Iv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const t=Math.random()*16|0;return(r=="x"?t:t&3|8).toString(16)})}const Jt=()=>typeof window<"u"&&typeof document<"u",Ua={tested:!1,writable:!1},Uh=()=>{if(!Jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ua.tested)return Ua.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ua.tested=!0,Ua.writable=!0}catch{Ua.tested=!0,Ua.writable=!1}return Ua.writable};function Pv(r){const t={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((l,i)=>{t[i]=l})}catch{}return a.searchParams.forEach((o,l)=>{t[l]=o}),t}const $h=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...a)=>$o(async()=>{const{default:o}=await Promise.resolve().then(()=>eo);return{default:o}},void 0).then(({default:o})=>o(...a)):t=fetch,(...a)=>t(...a)},Fv=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",To=async(r,t,a)=>{await r.setItem(t,JSON.stringify(a))},$a=async(r,t)=>{const a=await r.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},ga=async(r,t)=>{await r.removeItem(t)};class Ri{constructor(){this.promise=new Ri.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}Ri.promiseConstructor=Promise;function Mc(r){const t=r.split(".");if(t.length!==3)throw new wd("Invalid JWT structure");for(let o=0;o<t.length;o++)if(!_v.test(t[o]))throw new wd("JWT not in base64url format");return{header:JSON.parse(H2(t[0])),payload:JSON.parse(H2(t[1])),signature:Lo(t[2]),raw:{header:t[0],payload:t[1]}}}async function Vv(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function Uv(r,t){return new Promise((o,l)=>{(async()=>{for(let i=0;i<1/0;i++)try{const d=await r(i);if(!t(i,null,d)){o(d);return}}catch(d){if(!t(i,d)){l(d);return}}})()})}function $v(r){return("0"+r.toString(16)).substr(-2)}function qv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=a.length;let l="";for(let i=0;i<56;i++)l+=a.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(t),Array.from(t,$v).join("")}async function zv(r){const a=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",a),l=new Uint8Array(o);return Array.from(l).map(i=>String.fromCharCode(i)).join("")}async function Wv(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=await zv(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Do(r,t,a=!1){const o=qv();let l=o;a&&(l+="/PASSWORD_RECOVERY"),await To(r,`${t}-code-verifier`,l);const i=await Wv(o);return[i,o===i?"plain":"s256"]}const Gv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hv(r){const t=r.headers.get(yd);if(!t||!t.match(Gv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kv(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function Jv(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Yv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(r){if(!Yv.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rc(){const r={};return new Proxy(r,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const o=a.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qv(r,t){return new Proxy(r,{get:(a,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const i=o.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,o,l)}return!t.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(a,o,l)}})}function K2(r){return JSON.parse(JSON.stringify(r))}const qa=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Xv=[502,503,504];async function J2(r){var t;if(!Fv(r))throw new bd(qa(r),0);if(Xv.includes(r.status))throw new bd(qa(r),r.status);let a;try{a=await r.json()}catch(i){throw new Wa(qa(i),i)}let o;const l=Hv(r);if(l&&l.getTime()>=Fh["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?o=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(o=a.error_code),o){if(o==="weak_password")throw new z2(qa(a),r.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(o==="session_not_found")throw new kn}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((i,d)=>i&&typeof d=="string",!0))throw new z2(qa(a),r.status,a.weak_password.reasons);throw new Nv(qa(a),r.status||500,o)}const Zv=(r,t,a,o)=>{const l={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),a))};async function Qe(r,t,a,o){var l;const i=Object.assign({},o==null?void 0:o.headers);i[yd]||(i[yd]=Fh["2024-01-01"].name),o!=null&&o.jwt&&(i.Authorization=`Bearer ${o.jwt}`);const d=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const u=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",h=await ey(r,t,a+u,{headers:i,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(h):{data:Object.assign({},h),error:null}}async function ey(r,t,a,o,l,i){const d=Zv(t,o,l,i);let u;try{u=await r(a,Object.assign({},d))}catch(h){throw console.error(h),new bd(qa(h),0)}if(u.ok||await J2(u),o!=null&&o.noResolveJson)return u;try{return await u.json()}catch(h){await J2(h)}}function Dn(r){var t;let a=null;ay(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=Ov(r.expires_in)));const o=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:a,user:o},error:null}}function Y2(r){const t=Dn(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0)&&(t.data.weak_password=r.weak_password),t}function va(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function ty(r){return{data:r,error:null}}function ny(r){const{action_link:t,email_otp:a,hashed_token:o,redirect_to:l,verification_type:i}=r,d=Uo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:a,hashed_token:o,redirect_to:l,verification_type:i},h=Object.assign({},d);return{data:{properties:u,user:h},error:null}}function Q2(r){return r}function ay(r){return r.access_token&&r.refresh_token&&r.expires_in}const jc=["global","local","others"];class oy{constructor({url:t="",headers:a={},fetch:o}){this.url=t,this.headers=a,this.fetch=$h(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,a=jc[0]){if(jc.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jc.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async inviteUserByEmail(t,a={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async generateLink(t){try{const{options:a}=t,o=Uo(t,["options"]),l=Object.assign(Object.assign({},o),a);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:ny,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Ge(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:va})}catch(a){if(Ge(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,o,l,i,d,u,h;try{const x={nextPage:null,lastPage:0,total:0},C=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(i=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:""},xform:Q2});if(C.error)throw C.error;const S=await C.json(),A=(d=C.headers.get("x-total-count"))!==null&&d!==void 0?d:0,D=(h=(u=C.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return D.length>0&&(D.forEach(y=>{const E=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);x[`${w}Page`]=E}),x.total=parseInt(A)),{data:Object.assign(Object.assign({},S),x),error:null}}catch(x){if(Ge(x))return{data:{users:[]},error:x};throw x}}async getUserById(t){Mo(t);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:va})}catch(a){if(Ge(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){Mo(t);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async deleteUser(t,a=!1){Mo(t);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:va})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async _listFactors(t){Mo(t.userId);try{const{data:a,error:o}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:a,error:o}}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _deleteFactor(t){Mo(t.userId),Mo(t.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _listOAuthClients(t){var a,o,l,i,d,u,h;try{const x={nextPage:null,lastPage:0,total:0},C=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(i=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:""},xform:Q2});if(C.error)throw C.error;const S=await C.json(),A=(d=C.headers.get("x-total-count"))!==null&&d!==void 0?d:0,D=(h=(u=C.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return D.length>0&&(D.forEach(y=>{const E=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);x[`${w}Page`]=E}),x.total=parseInt(A)),{data:Object.assign(Object.assign({},S),x),error:null}}catch(x){if(Ge(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _getOAuthClient(t){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _updateOAuthClient(t,a){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:a,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(t){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(t){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}}function X2(r={}){return{getItem:t=>r[t]||null,setItem:(t,a)=>{r[t]=a},removeItem:t=>{delete r[t]}}}const Ro={debug:!!(globalThis&&Uh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ry extends qh{}async function sy(r,t,a){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,l.name);try{return await a()}finally{Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,l.name)}}else{if(t===0)throw Ro.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ry(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ro.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function iy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zh(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function ly(r){return parseInt(r,16)}function cy(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,o=>o.toString(16).padStart(2,"0")).join("")}function dy(r){var t;const{chainId:a,domain:o,expirationTime:l,issuedAt:i=new Date,nonce:d,notBefore:u,requestId:h,resources:x,scheme:C,uri:S,version:A}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(A!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${A}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const D=zh(r.address),y=C?`${C}://${o}`:o,E=r.statement?`${r.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${D}

${E}`;let b=`URI: ${S}
Version: ${A}
Chain ID: ${a}${d?`
Nonce: ${d}`:""}
Issued At: ${i.toISOString()}`;if(l&&(b+=`
Expiration Time: ${l.toISOString()}`),u&&(b+=`
Not Before: ${u.toISOString()}`),h&&(b+=`
Request ID: ${h}`),x){let k=`
Resources:`;for(const j of x){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);k+=`
- ${j}`}b+=k}return`${w}
${b}`}class Dt extends Error{constructor({message:t,code:a,cause:o,name:l}){var i;super(t,{cause:o}),this.__isWebAuthnError=!0,this.name=(i=l??(o instanceof Error?o.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=a}}class wi extends Dt{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function my({error:r,options:t}){var a,o,l;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((o=i.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((l=i.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Dt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const d=window.location.hostname;if(Wh(d)){if(i.rp.id!==d)return new Dt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function uy({error:r,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Dt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(Wh(o)){if(a.rpId!==o)return new Dt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class py{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const hy=new py;function fy(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:a,excludeCredentials:o}=r,l=Uo(r,["challenge","user","excludeCredentials"]),i=Lo(t).buffer,d=Object.assign(Object.assign({},a),{id:Lo(a.id).buffer}),u=Object.assign(Object.assign({},l),{challenge:i,user:d});if(o&&o.length>0){u.excludeCredentials=new Array(o.length);for(let h=0;h<o.length;h++){const x=o[h];u.excludeCredentials[h]=Object.assign(Object.assign({},x),{id:Lo(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return u}function xy(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:a}=r,o=Uo(r,["challenge","allowCredentials"]),l=Lo(t).buffer,i=Object.assign(Object.assign({},o),{challenge:l});if(a&&a.length>0){i.allowCredentials=new Array(a.length);for(let d=0;d<a.length;d++){const u=a[d];i.allowCredentials[d]=Object.assign(Object.assign({},u),{id:Lo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function gy(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:Ja(new Uint8Array(r.response.attestationObject)),clientDataJSON:Ja(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function vy(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,o=r.getClientExtensionResults(),l=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Ja(new Uint8Array(l.authenticatorData)),clientDataJSON:Ja(new Uint8Array(l.clientDataJSON)),signature:Ja(new Uint8Array(l.signature)),userHandle:l.userHandle?Ja(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Wh(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Z2(){var r,t;return!!(Jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function yy(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wi("Browser returned unexpected credential type",t)}:{data:null,error:new wi("Empty credential response",t)}}catch(t){return{data:null,error:my({error:t,options:r})}}}async function by(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wi("Browser returned unexpected credential type",t)}:{data:null,error:new wi("Empty credential response",t)}}catch(t){return{data:null,error:uy({error:t,options:r})}}}const wy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Cy={userVerification:"preferred",hints:["security-key"]};function Ci(...r){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),a=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of r)if(l)for(const i in l){const d=l[i];if(d!==void 0)if(Array.isArray(d))o[i]=d;else if(a(d))o[i]=d;else if(t(d)){const u=o[i];t(u)?o[i]=Ci(u,d):o[i]=Ci(d)}else o[i]=d}return o}function Sy(r,t){return Ci(wy,r,t||{})}function Ay(r,t){return Ci(Cy,r,t||{})}class _y{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:a,friendlyName:o,signal:l},i){try{const{data:d,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:a});if(!d)return{data:null,error:u};const h=l??hy.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:x}=d.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${o}`),x.displayName||(x.displayName=x.name)}switch(d.webauthn.type){case"create":{const x=Sy(d.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:C,error:S}=await yy({publicKey:x,signal:h});return C?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:C}},error:null}:{data:null,error:S}}case"request":{const x=Ay(d.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:C,error:S}=await by(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:x,signal:h}));return C?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:C}},error:null}:{data:null,error:S}}}}catch(d){return Ge(d)?{data:null,error:d}:{data:null,error:new Wa("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:a,webauthn:o}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:o})}async _authenticate({factorId:t,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}},i){if(!a)return{data:null,error:new Pr("rpId is required for WebAuthn authentication")};try{if(!Z2())return{data:null,error:new Wa("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:o},signal:l},{request:i});if(!d)return{data:null,error:u};const{webauthn:h}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:h.type,rpId:a,rpOrigins:o,credential_response:h.credential_response}})}catch(d){return Ge(d)?{data:null,error:d}:{data:null,error:new Wa("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l},i){if(!a)return{data:null,error:new Pr("rpId is required for WebAuthn registration")};try{if(!Z2())return{data:null,error:new Wa("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(C=>{var S;return(S=C.data)===null||S===void 0?void 0:S.all.find(A=>A.factor_type==="webauthn"&&A.friendly_name===t&&A.status!=="unverified")}).then(C=>C?this.client.mfa.unenroll({factorId:C==null?void 0:C.id}):void 0),{data:null,error:u};const{data:h,error:x}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:a,rpOrigins:o},signal:l},{create:i});return h?this._verify({factorId:d.id,challengeId:h.challengeId,webauthn:{rpId:a,rpOrigins:o,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:x}}catch(d){return Ge(d)?{data:null,error:d}:{data:null,error:new Wa("Unexpected error in register",d)}}}}iy();const Ey={url:Cv,storageKey:Sv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Av,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ep(r,t,a){return await a()}const jo={};class Fr{get jwks(){var t,a;return(a=(t=jo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=jo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jo[this.storageKey]=Object.assign(Object.assign({},jo[this.storageKey]),{cachedAt:t})}constructor(t){var a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fr.nextInstanceID,Fr.nextInstanceID+=1,this.instanceID>0&&Jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},Ey),t);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new oy({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=$h(l.fetch),this.lock=l.lock||ep,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:Jt()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=sy:this.lock=ep,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _y(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Uh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=X2(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=X2(this.memoryStorage)),Jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ph}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=Pv(window.location.href);let o="none";if(this._isImplicitGrantCallback(a)?o="implicit":await this._isPKCECallback(a)&&(o="pkce"),Jt()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:i}=await this._getSessionFromURL(a,o);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Mv(i)){const h=(t=i.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:d,redirectType:u}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",u),await this._saveSession(d),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Ge(a)?{error:a}:{error:new Wa("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,o,l;try{const i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:Dn}),{data:d,error:u}=i;if(u||!d)return{data:{user:null,session:null},error:u};const h=d.session,x=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:x,session:h},error:null}}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var a,o,l;try{let i;if("email"in t){const{email:C,password:S,options:A}=t;let D=null,y=null;this.flowType==="pkce"&&([D,y]=await Do(this.storage,this.storageKey)),i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:C,password:S,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:D,code_challenge_method:y},xform:Dn})}else if("phone"in t){const{phone:C,password:S,options:A}=t;i=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:C,password:S,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},channel:(l=A==null?void 0:A.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:Dn})}else throw new ci("You must provide either an email or phone number and a password");const{data:d,error:u}=i;if(u||!d)return{data:{user:null,session:null},error:u};const h=d.session,x=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:x,session:h},error:null}}catch(i){if(Ge(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let a;if("email"in t){const{email:i,password:d,options:u}=t;a=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Y2})}else if("phone"in t){const{phone:i,password:d,options:u}=t;a=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Y2})}else throw new ci("You must provide either an email or phone number and a password");const{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ko}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,o,l,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;switch(a){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(t){var a,o,l,i,d,u,h,x,C,S,A;let D,y;if("message"in t)D=t.message,y=t.signature;else{const{chain:E,wallet:w,statement:b,options:k}=t;let j;if(Jt())if(typeof w=="object")j=w;else{const de=window;if("ethereum"in de&&typeof de.ethereum=="object"&&"request"in de.ethereum&&typeof de.ethereum.request=="function")j=de.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const I=new URL((a=k==null?void 0:k.url)!==null&&a!==void 0?a:window.location.href),O=await j.request({method:"eth_requestAccounts"}).then(de=>de).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=zh(O[0]);let U=(o=k==null?void 0:k.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!U){const de=await j.request({method:"eth_chainId"});U=ly(de)}const ce={domain:I.host,address:F,statement:b,uri:I.href,version:"1",chainId:U,nonce:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=k==null?void 0:k.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(x=k==null?void 0:k.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(C=k==null?void 0:k.signInWithEthereum)===null||C===void 0?void 0:C.resources};D=dy(ce),y=await j.request({method:"personal_sign",params:[cy(D),F]})}try{const{data:E,error:w}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:D,signature:y},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(A=t.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Dn});if(w)throw w;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new ko}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:w})}catch(E){if(Ge(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(t){var a,o,l,i,d,u,h,x,C,S,A,D;let y,E;if("message"in t)y=t.message,E=t.signature;else{const{chain:w,wallet:b,statement:k,options:j}=t;let I;if(Jt())if(typeof b=="object")I=b;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))I=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=b}const O=new URL((a=j==null?void 0:j.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in I&&I.signIn){const F=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),k?{statement:k}:null));let U;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")U=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)U=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)y=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),E=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${O.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(l=(o=j==null?void 0:j.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((h=j==null?void 0:j.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((x=j==null?void 0:j.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((S=(C=j==null?void 0:j.signInWithSolana)===null||C===void 0?void 0:C.resources)===null||S===void 0)&&S.length?["Resources",...j.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const F=await I.signMessage(new TextEncoder().encode(y),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:w,error:b}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ja(E)},!((A=t.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(D=t.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:Dn});if(b)throw b;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ko}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:b})}catch(w){if(Ge(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const a=await $a(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(a??"").split("/");try{const{data:i,error:d}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:o},xform:Dn});if(await ga(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ko}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:l??null}),error:d})}catch(i){if(Ge(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:a,provider:o,token:l,access_token:i,nonce:d}=t,u=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:i,nonce:d,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Dn}),{data:h,error:x}=u;return x?{data:{user:null,session:null},error:x}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ko}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:x})}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,o,l,i,d;try{if("email"in t){const{email:u,options:h}=t;let x=null,C=null;this.flowType==="pkce"&&([x,C]=await Do(this.storage,this.storageKey));const{error:S}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:x,code_challenge_method:C},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:S}}if("phone"in t){const{phone:u,options:h}=t,{data:x,error:C}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(d=h==null?void 0:h.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:C}}throw new ci("You must provide either an email or phone number.")}catch(u){if(Ge(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var a,o;try{let l,i;"options"in t&&(l=(a=t.options)===null||a===void 0?void 0:a.redirectTo,i=(o=t.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:u}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:l,xform:Dn});if(u)throw u;if(!d)throw new Error("An error occurred on token verification.");const h=d.session,x=d.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:x,session:h},error:null}}catch(l){if(Ge(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(t){var a,o,l;try{let i=null,d=null;return this.flowType==="pkce"&&([i,d]=await Do(this.storage,this.storageKey)),await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(o=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:d}),headers:this.headers,xform:ty})}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:o}=t;if(o)throw o;if(!a)throw new kn;const{error:l}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:l}})}catch(t){if(Ge(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:o,type:l,options:i}=t,{error:d}=await Qe(this.fetch,"POST",a,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:o,type:l,options:i}=t,{data:d,error:u}=await Qe(this.fetch,"POST",a,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ci("You must provide either an email or phone number and a type")}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await a()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=a();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await $a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const o=t.expires_at?t.expires_at*1e3-Date.now()<kc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",t.expires_at),!o){if(this.userStorage){const d=await $a(this.userStorage,this.storageKey+"-user");d!=null&&d.user?t.user=d.user:t.user=Rc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=Qv(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:va}):await this._useSession(async a=>{var o,l,i;const{data:d,error:u}=a;if(u)throw u;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kn}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&i!==void 0?i:void 0,xform:va})})}catch(a){if(Ge(a))return Dv(a)&&(await this._removeSession(),await ga(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async o=>{const{data:l,error:i}=o;if(i)throw i;if(!l.session)throw new kn;const d=l.session;let u=null,h=null;this.flowType==="pkce"&&t.email!=null&&([u,h]=await Do(this.storage,this.storageKey));const{data:x,error:C}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:h}),jwt:d.access_token,xform:va});if(C)throw C;return d.user=x.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(Ge(o))return{data:{user:null},error:o};throw o}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kn;const a=Date.now()/1e3;let o=a,l=!0,i=null;const{payload:d}=Mc(t.access_token);if(d.exp&&(o=d.exp,l=o<=a),l){const{data:u,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:h}=await this._getUser(t.access_token);if(h)throw h;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:o-a,expires_at:o},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(a){if(Ge(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var o;if(!t){const{data:d,error:u}=a;if(u)throw u;t=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(t!=null&&t.refresh_token))throw new kn;const{data:l,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Ge(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!Jt())throw new di("No browser detected.");if(t.error||t.error_description||t.error_code)throw new di(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new q2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new di("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new q2("No code detected.");const{data:k,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:i,refresh_token:d,expires_in:u,expires_at:h,token_type:x}=t;if(!i||!u||!d||!x)throw new di("No session defined in URL");const C=Math.round(Date.now()/1e3),S=parseInt(u);let A=C+S;h&&(A=parseInt(h));const D=A-C;D*1e3<=Bo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${D}s, should have been closer to ${S}s`);const y=A-S;C-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,A,C):C-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,A,C);const{data:E,error:w}=await this._getUser(i);if(w)throw w;const b={provider_token:o,provider_refresh_token:l,access_token:i,expires_in:S,expires_at:A,refresh_token:d,token_type:x,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(o){if(Ge(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await $a(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var o;const{data:l,error:i}=a;if(i)return{error:i};const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:u}=await this.admin.signOut(d,t);if(u&&!(kv(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await ga(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=Iv(),o={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:o}}}async _emitInitialSession(t){return await this._useSession(async a=>{var o,l;try{const{data:{session:i},error:d}=a;if(d)throw d;await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,a={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Do(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(i){if(Ge(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:a,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var a;try{const{data:o,error:l}=await this._useSession(async i=>{var d,u,h,x,C;const{data:S,error:A}=i;if(A)throw A;const D=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",D,{headers:this.headers,jwt:(C=(x=S.session)===null||x===void 0?void 0:x.access_token)!==null&&C!==void 0?C:void 0})});if(l)throw l;return Jt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),{data:{provider:t.provider,url:o==null?void 0:o.url},error:null}}catch(o){if(Ge(o))return{data:{provider:t.provider,url:null},error:o};throw o}}async linkIdentityIdToken(t){return await this._useSession(async a=>{var o;try{const{error:l,data:{session:i}}=a;if(l)throw l;const{options:d,provider:u,token:h,access_token:x,nonce:C}=t,S=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=i==null?void 0:i.access_token)!==null&&o!==void 0?o:void 0,body:{provider:u,id_token:h,access_token:x,nonce:C,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Dn}),{data:A,error:D}=S;return D?{data:{user:null,session:null},error:D}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new ko}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("USER_UPDATED",A.session)),{data:A,error:D})}catch(l){if(Ge(l))return{data:{user:null,session:null},error:l};throw l}})}async unlinkIdentity(t){try{return await this._useSession(async a=>{var o,l;const{data:i,error:d}=a;if(d)throw d;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const o=Date.now();return await Uv(async l=>(l>0&&await Vv(200*Math.pow(2,l-1)),this._debug(a,"refreshing attempt",l),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Dn})),(l,i)=>{const d=200*Math.pow(2,l);return i&&Dc(i)&&Date.now()+d-o<Bo})}catch(o){if(this._debug(a,"error",o),Ge(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const o=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",o),Jt()&&!a.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}}async _recoverAndRefresh(){var t,a;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await $a(this.storage,this.storageKey);if(l&&this.userStorage){let d=await $a(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await To(this.userStorage,this.storageKey+"-user",d)),l.user=(t=d==null?void 0:d.user)!==null&&t!==void 0?t:Rc()}else if(l&&!l.user&&!l.user){const d=await $a(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(l.user=d.user,await ga(this.storage,this.storageKey+"-user"),await To(this.storage,this.storageKey,l)):l.user=Rc()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const i=((a=l.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<kc;if(this._debug(o,`session has${i?"":" not"} expired with margin of ${kc}s`),i){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Dc(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:u}=await this._getUser(l.access_token);!u&&(d!=null&&d.user)?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(t){var a,o;if(!t)throw new kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Ri;const{data:i,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!i.session)throw new kn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(l,"error",i),Ge(i)){const d={data:null,error:i};return Dc(i)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(i),i}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,a,o=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",a,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:t,session:a});const i=[],d=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,a)}catch(h){i.push(h)}});if(await Promise.all(d),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),o=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&a.user&&await To(this.userStorage,this.storageKey+"-user",{user:a.user});const l=Object.assign({},a);delete l.user;const i=K2(l);await To(this.storage,this.storageKey,i)}else{const l=K2(a);await To(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await ga(this.storage,this.storageKey),await ga(this.storage,this.storageKey+"-code-verifier"),await ga(this.storage,this.storageKey+"-user"),this.userStorage&&await ga(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Bo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:o}}=a;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-t)/Bo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Bo}ms, refresh threshold is ${vd} ticks`),l<=vd&&await this._callRefreshToken(o.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof qh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,o){const l=[`provider=${encodeURIComponent(a)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[i,d]=await Do(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(u.toString())}if(o!=null&&o.queryParams){const i=new URLSearchParams(o.queryParams);l.push(i.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var o;const{data:l,error:i}=a;return i?{data:null,error:i}:await Qe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var o,l;const{data:i,error:d}=a;if(d)return{data:null,error:d};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:x}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(o=i==null?void 0:i.session)===null||o===void 0?void 0:o.access_token});return x?{data:null,error:x}:(t.factorType==="totp"&&h.type==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:l,error:i}=a;if(i)return{data:null,error:i};const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?gy(t.webauthn.credential_response):vy(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:h}=await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:l,error:i}=a;if(i)return{data:null,error:i};const d=await Qe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:u}=d;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:fy(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:xy(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:o}=await this._challenge({factorId:t.factorId});return o?{data:null,error:o}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){var t;const{data:{user:a},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])l.all.push(i),i.status==="verified"&&l[i.factor_type].push(i);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var t,a;const{data:{session:o},error:l}=await this.getSession();if(l)return{data:null,error:l};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Mc(o.access_token);let d=null;i.aal&&(d=i.aal);let u=d;((a=(t=o.user.factors)===null||t===void 0?void 0:t.filter(C=>C.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(u="aal2");const x=i.amr||[];return{data:{currentLevel:d,nextLevel:u,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async a=>{const{data:{session:o},error:l}=a;return l?{data:null,error:l}:o?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:o.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new kn}})}catch(a){if(Ge(a))return{data:null,error:a};throw a}}async _approveAuthorization(t,a){try{return await this._useSession(async o=>{const{data:{session:l},error:i}=o;if(i)return{data:null,error:i};if(!l)return{data:null,error:new kn};const d=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Jt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async _denyAuthorization(t,a){try{return await this._useSession(async o=>{const{data:{session:l},error:i}=o;if(i)return{data:null,error:i};if(!l)return{data:null,error:new kn};const d=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Jt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(Ge(o))return{data:null,error:o};throw o}}async fetchJwk(t,a={keys:[]}){let o=a.keys.find(u=>u.kid===t);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(u=>u.kid===t),o&&this.jwks_cached_at+Ev>l)return o;const{data:i,error:d}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=l,o=i.keys.find(u=>u.kid===t),!o)?null:o}async getClaims(t,a={}){try{let o=t;if(!o){const{data:D,error:y}=await this.getSession();if(y||!D.session)return{data:null,error:y};o=D.session.access_token}const{header:l,payload:i,signature:d,raw:{header:u,payload:h}}=Mc(o);a!=null&&a.allowExpired||Kv(i.exp);const x=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!x){const{error:D}=await this.getUser(o);if(D)throw D;return{data:{claims:i,header:l,signature:d},error:null}}const C=Jv(l.alg),S=await crypto.subtle.importKey("jwk",x,C,!0,["verify"]);if(!await crypto.subtle.verify(C,S,d,Lv(`${u}.${h}`)))throw new wd("Invalid JWT signature");return{data:{claims:i,header:l,signature:d},error:null}}catch(o){if(Ge(o))return{data:null,error:o};throw o}}}Fr.nextInstanceID=0;const Ny=Fr;class ky extends Ny{constructor(t){super(t)}}class Dy{constructor(t,a,o){var l,i,d;this.supabaseUrl=t,this.supabaseKey=a;const u=wv(t);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,x={db:pv,realtime:fv,auth:Object.assign(Object.assign({},hv),{storageKey:h}),global:uv},C=bv(o??{},x);this.storageKey=(l=C.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(i=C.global.headers)!==null&&i!==void 0?i:{},C.accessToken?(this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(S,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=C.auth)!==null&&d!==void 0?d:{},this.headers,C.global.fetch),this.fetch=vv(a,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.rest=new Cg(new URL("rest/v1",u).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch}),this.storage=new cv(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new pg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,a,o)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,a;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(a=(t=o.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:o,storage:l,userStorage:i,storageKey:d,flowType:u,lock:h,debug:x},C,S){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ky({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),C),storageKey:d,autoRefreshToken:t,persistSession:a,detectSessionInUrl:o,storage:l,userStorage:i,flowType:u,lock:h,debug:x,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(D=>D.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Fg(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,o)=>{this._handleTokenChanged(a,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(t,a,o){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const My=(r,t,a)=>new Dy(r,t,a);function Ry(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ry()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jy="https://ukxddlrmmvpegamjvbfm.supabase.co",By="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVreGRkbHJtbXZwZWdhbWp2YmZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NjgyOTgsImV4cCI6MjA3NzM0NDI5OH0.Pjj3SY7hzob68WLr2k6J6gdPZOCGKN1ixjJsNHRbwGg",ne=My(jy,By,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),Gh=_.createContext(void 0);function Ty({children:r}){const[t,a]=_.useState(null),[o,l]=_.useState(null),[i,d]=_.useState(!0);_.useEffect(()=>{async function A(){d(!0);try{const{data:{user:y}}=await ne.auth.getUser();a(y),y&&await u(y.id)}finally{d(!1)}}A();const{data:{subscription:D}}=ne.auth.onAuthStateChange((y,E)=>{a((E==null?void 0:E.user)||null),E!=null&&E.user?u(E.user.id):l(null)});return()=>D.unsubscribe()},[]);async function u(A){const{data:D,error:y}=await ne.from("profiles").select("*").eq("id",A).maybeSingle();!y&&D&&l(D)}async function h(A,D){const{error:y}=await ne.auth.signInWithPassword({email:A,password:D});return{error:y}}async function x(A,D,y){const{data:E,error:w}=await ne.auth.signUp({email:A,password:D,options:{data:{username:y}}});return!w&&E.user&&await ne.from("profiles").insert({id:E.user.id,username:y,email:A}),{error:w}}async function C(){await ne.auth.signOut(),l(null)}async function S(){t&&await u(t.id)}return m.jsx(Gh.Provider,{value:{user:t,profile:o,loading:i,signIn:h,signUp:x,signOut:C,refreshProfile:S},"data-matrix-id":"src/contexts/AuthContext.tsx:104:4","data-matrix-name":"AuthContext.Provider","data-component-path":"src/contexts/AuthContext.tsx","data-component-line":"104","data-component-file":"AuthContext.tsx","data-component-name":"AuthContext.Provider","data-component-content":"%7B%22value%22%3A%7B%22user%22%3A%22%5Bvar%3Auser%5D%22%2C%22profile%22%3A%22%5Bvar%3Aprofile%5D%22%2C%22loading%22%3A%22%5Bvar%3Aloading%5D%22%2C%22signIn%22%3A%22%5Bvar%3AsignIn%5D%22%2C%22signUp%22%3A%22%5Bvar%3AsignUp%5D%22%2C%22signOut%22%3A%22%5Bvar%3AsignOut%5D%22%2C%22refreshProfile%22%3A%22%5Bvar%3ArefreshProfile%5D%22%7D%7D",children:r})}function Tt(){const r=_.useContext(Gh);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ly={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(r,t)=>{const a=_.forwardRef(({color:o="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:u="",children:h,...x},C)=>_.createElement("svg",{ref:C,...Ly,width:l,height:l,stroke:o,strokeWidth:d?Number(i)*24/Number(l):i,className:["lucide",`lucide-${Oy(r)}`,u].join(" "),...x},[...t.map(([S,A])=>_.createElement(S,A)),...Array.isArray(h)?h:[h]]));return a.displayName=`${r}`,a};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ze("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Ze("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=Ze("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=Ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Ze("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ze("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ze("MonitorOff",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Ze("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=Ze("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Ze("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ze("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ze("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Ze("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=Ze("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=Ze("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ze("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=Ze("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ze("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ze("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=Ze("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Xy({onToggle:r}){const[t,a]=_.useState(""),[o,l]=_.useState(""),[i,d]=_.useState(!1),[u,h]=_.useState(""),{signIn:x}=Tt();async function C(S){S.preventDefault(),d(!0),h("");const{error:A}=await x(t,o);A&&h(A.message),d(!1)}return m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4","data-matrix-id":"src/components/auth/LoginForm.tsx:25:4","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"25","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gray-900%20flex%20items-center%20justify-center%20p-4%22%7D",children:m.jsxs("div",{className:"w-full max-w-md bg-gray-700 rounded-lg p-8 shadow-card","data-matrix-id":"src/components/auth/LoginForm.tsx:26:6","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"26","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20max-w-md%20bg-gray-700%20rounded-lg%20p-8%20shadow-card%22%7D",children:[m.jsxs("div",{className:"text-center mb-8","data-matrix-id":"src/components/auth/LoginForm.tsx:27:8","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"27","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-8%22%7D",children:[m.jsx("h1",{className:"text-3xl font-bold text-white mb-2","data-matrix-id":"src/components/auth/LoginForm.tsx:28:10","data-matrix-name":"h1","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"28","data-component-file":"LoginForm.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20text-white%20mb-2%22%7D",children:"SkyperChat"}),m.jsx("p",{className:"text-neutral-600","data-matrix-id":"src/components/auth/LoginForm.tsx:29:10","data-matrix-name":"p","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"29","data-component-file":"LoginForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%22%7D",children:"Tekrar ho geldin!"})]}),u&&m.jsx("div",{className:"bg-error/10 border border-error rounded p-3 mb-4","data-matrix-id":"src/components/auth/LoginForm.tsx:33:10","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"33","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-error%2F10%20border%20border-error%20rounded%20p-3%20mb-4%22%7D",children:m.jsx("p",{className:"text-error text-sm","data-matrix-id":"src/components/auth/LoginForm.tsx:34:12","data-matrix-name":"p","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"34","data-component-file":"LoginForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-error%20text-sm%22%7D",children:u})}),m.jsxs("form",{onSubmit:C,className:"space-y-4","data-matrix-id":"src/components/auth/LoginForm.tsx:38:8","data-matrix-name":"form","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"38","data-component-file":"LoginForm.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/auth/LoginForm.tsx:39:10","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"39","data-component-file":"LoginForm.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/auth/LoginForm.tsx:40:12","data-matrix-name":"label","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"40","data-component-file":"LoginForm.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"E-posta"}),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/auth/LoginForm.tsx:43:12","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"43","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(Jh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/components/auth/LoginForm.tsx:44:14","data-matrix-name":"Mail","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"44","data-component-file":"LoginForm.tsx","data-component-name":"Mail","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),m.jsx("input",{type:"email",value:t,onChange:S=>a(S.target.value),className:"w-full bg-gray-800 border border-transparent rounded pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all duration-fast",placeholder:"ornek@email.com",required:!0,"data-matrix-id":"src/components/auth/LoginForm.tsx:45:14","data-matrix-name":"input","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"45","data-component-file":"LoginForm.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22email%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20pl-10%20pr-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20duration-fast%22%2C%22placeholder%22%3A%22ornek%40email.com%22%2C%22required%22%3Atrue%7D"})]})]}),m.jsxs("div",{"data-matrix-id":"src/components/auth/LoginForm.tsx:56:10","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"56","data-component-file":"LoginForm.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/auth/LoginForm.tsx:57:12","data-matrix-name":"label","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"57","data-component-file":"LoginForm.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"ifre"}),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/auth/LoginForm.tsx:60:12","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"60","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(Kh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/components/auth/LoginForm.tsx:61:14","data-matrix-name":"Lock","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"61","data-component-file":"LoginForm.tsx","data-component-name":"Lock","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),m.jsx("input",{type:"password",value:o,onChange:S=>l(S.target.value),className:"w-full bg-gray-800 border border-transparent rounded pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all duration-fast",placeholder:"",required:!0,"data-matrix-id":"src/components/auth/LoginForm.tsx:62:14","data-matrix-name":"input","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"62","data-component-file":"LoginForm.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22password%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20pl-10%20pr-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20duration-fast%22%2C%22placeholder%22%3A%22%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%22%2C%22required%22%3Atrue%7D"})]})]}),m.jsx("button",{type:"submit",disabled:i,className:"w-full bg-primary-500 text-white rounded py-3 font-medium hover:bg-primary-700 hover:shadow-glow transition-all duration-normal disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/auth/LoginForm.tsx:73:10","data-matrix-name":"button","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"73","data-component-file":"LoginForm.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20bg-primary-500%20text-white%20rounded%20py-3%20font-medium%20hover%3Abg-primary-700%20hover%3Ashadow-glow%20transition-all%20duration-normal%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:i?m.jsx("span",{"data-matrix-id":"src/components/auth/LoginForm.tsx:79:14","data-matrix-name":"span","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"79","data-component-file":"LoginForm.tsx","data-component-name":"span",children:"Giri yaplyor..."}):m.jsxs(m.Fragment,{children:[m.jsx(qy,{className:"w-5 h-5","data-matrix-id":"src/components/auth/LoginForm.tsx:82:16","data-matrix-name":"LogIn","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"82","data-component-file":"LoginForm.tsx","data-component-name":"LogIn","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Giri Yap"]})})]}),m.jsx("div",{className:"mt-6 text-center","data-matrix-id":"src/components/auth/LoginForm.tsx:89:8","data-matrix-name":"div","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"89","data-component-file":"LoginForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-6%20text-center%22%7D",children:m.jsxs("p",{className:"text-neutral-600 text-sm","data-matrix-id":"src/components/auth/LoginForm.tsx:90:10","data-matrix-name":"p","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"90","data-component-file":"LoginForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20text-sm%22%7D",children:["Hesabn yok mu?"," ",m.jsx("button",{onClick:r,className:"text-primary-500 hover:text-primary-700 font-medium transition-colors","data-matrix-id":"src/components/auth/LoginForm.tsx:92:12","data-matrix-name":"button","data-component-path":"src/components/auth/LoginForm.tsx","data-component-line":"92","data-component-file":"LoginForm.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-primary-500%20hover%3Atext-primary-700%20font-medium%20transition-colors%22%7D",children:"Kayt Ol"})]})})]})})}function Zy({onToggle:r}){const[t,a]=_.useState(""),[o,l]=_.useState(""),[i,d]=_.useState(""),[u,h]=_.useState(!1),[x,C]=_.useState(""),[S,A]=_.useState(!1),{signUp:D}=Tt();async function y(E){if(E.preventDefault(),h(!0),C(""),A(!1),o.length<6){C("ifre en az 6 karakter olmaldr"),h(!1);return}const{error:w}=await D(t,o,i);w?C(w.message):A(!0),h(!1)}return m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4","data-matrix-id":"src/components/auth/SignUpForm.tsx:36:4","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"36","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gray-900%20flex%20items-center%20justify-center%20p-4%22%7D",children:m.jsxs("div",{className:"w-full max-w-md bg-gray-700 rounded-lg p-8 shadow-card","data-matrix-id":"src/components/auth/SignUpForm.tsx:37:6","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"37","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20max-w-md%20bg-gray-700%20rounded-lg%20p-8%20shadow-card%22%7D",children:[m.jsxs("div",{className:"text-center mb-8","data-matrix-id":"src/components/auth/SignUpForm.tsx:38:8","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"38","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-8%22%7D",children:[m.jsx("h1",{className:"text-3xl font-bold text-white mb-2","data-matrix-id":"src/components/auth/SignUpForm.tsx:39:10","data-matrix-name":"h1","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"39","data-component-file":"SignUpForm.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20text-white%20mb-2%22%7D",children:"SkyperChat"}),m.jsx("p",{className:"text-neutral-600","data-matrix-id":"src/components/auth/SignUpForm.tsx:40:10","data-matrix-name":"p","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"40","data-component-file":"SignUpForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%22%7D",children:"Hesap olutur"})]}),x&&m.jsx("div",{className:"bg-error/10 border border-error rounded p-3 mb-4","data-matrix-id":"src/components/auth/SignUpForm.tsx:44:10","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"44","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-error%2F10%20border%20border-error%20rounded%20p-3%20mb-4%22%7D",children:m.jsx("p",{className:"text-error text-sm","data-matrix-id":"src/components/auth/SignUpForm.tsx:45:12","data-matrix-name":"p","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"45","data-component-file":"SignUpForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-error%20text-sm%22%7D",children:x})}),S&&m.jsx("div",{className:"bg-success/10 border border-success rounded p-3 mb-4","data-matrix-id":"src/components/auth/SignUpForm.tsx:50:10","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"50","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-success%2F10%20border%20border-success%20rounded%20p-3%20mb-4%22%7D",children:m.jsx("p",{className:"text-success text-sm","data-matrix-id":"src/components/auth/SignUpForm.tsx:51:12","data-matrix-name":"p","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"51","data-component-file":"SignUpForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-success%20text-sm%22%7D",children:"Hesap oluturuldu! Giri yapabilirsiniz."})}),m.jsxs("form",{onSubmit:y,className:"space-y-4","data-matrix-id":"src/components/auth/SignUpForm.tsx:55:8","data-matrix-name":"form","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"55","data-component-file":"SignUpForm.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/auth/SignUpForm.tsx:56:10","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"56","data-component-file":"SignUpForm.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/auth/SignUpForm.tsx:57:12","data-matrix-name":"label","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"57","data-component-file":"SignUpForm.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"Kullanc Ad"}),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/auth/SignUpForm.tsx:60:12","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"60","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(wa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/components/auth/SignUpForm.tsx:61:14","data-matrix-name":"User","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"61","data-component-file":"SignUpForm.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),m.jsx("input",{type:"text",value:i,onChange:E=>d(E.target.value),className:"w-full bg-gray-800 border border-transparent rounded pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all duration-fast",placeholder:"kullaniciadi",required:!0,"data-matrix-id":"src/components/auth/SignUpForm.tsx:62:14","data-matrix-name":"input","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"62","data-component-file":"SignUpForm.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20pl-10%20pr-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20duration-fast%22%2C%22placeholder%22%3A%22kullaniciadi%22%2C%22required%22%3Atrue%7D"})]})]}),m.jsxs("div",{"data-matrix-id":"src/components/auth/SignUpForm.tsx:73:10","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"73","data-component-file":"SignUpForm.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/auth/SignUpForm.tsx:74:12","data-matrix-name":"label","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"74","data-component-file":"SignUpForm.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"E-posta"}),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/auth/SignUpForm.tsx:77:12","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"77","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(Jh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/components/auth/SignUpForm.tsx:78:14","data-matrix-name":"Mail","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"78","data-component-file":"SignUpForm.tsx","data-component-name":"Mail","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),m.jsx("input",{type:"email",value:t,onChange:E=>a(E.target.value),className:"w-full bg-gray-800 border border-transparent rounded pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all duration-fast",placeholder:"ornek@email.com",required:!0,"data-matrix-id":"src/components/auth/SignUpForm.tsx:79:14","data-matrix-name":"input","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"79","data-component-file":"SignUpForm.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22email%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20pl-10%20pr-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20duration-fast%22%2C%22placeholder%22%3A%22ornek%40email.com%22%2C%22required%22%3Atrue%7D"})]})]}),m.jsxs("div",{"data-matrix-id":"src/components/auth/SignUpForm.tsx:90:10","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"90","data-component-file":"SignUpForm.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/auth/SignUpForm.tsx:91:12","data-matrix-name":"label","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"91","data-component-file":"SignUpForm.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"ifre"}),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/auth/SignUpForm.tsx:94:12","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"94","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(Kh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400","data-matrix-id":"src/components/auth/SignUpForm.tsx:95:14","data-matrix-name":"Lock","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"95","data-component-file":"SignUpForm.tsx","data-component-name":"Lock","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-5%20h-5%20text-neutral-400%22%7D"}),m.jsx("input",{type:"password",value:o,onChange:E=>l(E.target.value),className:"w-full bg-gray-800 border border-transparent rounded pl-10 pr-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all duration-fast",placeholder:"",required:!0,"data-matrix-id":"src/components/auth/SignUpForm.tsx:96:14","data-matrix-name":"input","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"96","data-component-file":"SignUpForm.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22password%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20pl-10%20pr-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20duration-fast%22%2C%22placeholder%22%3A%22%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%22%2C%22required%22%3Atrue%7D"})]}),m.jsx("p",{className:"text-xs text-neutral-400 mt-1","data-matrix-id":"src/components/auth/SignUpForm.tsx:105:12","data-matrix-name":"p","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"105","data-component-file":"SignUpForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-neutral-400%20mt-1%22%7D",children:"En az 6 karakter"})]}),m.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-500 text-white rounded py-3 font-medium hover:bg-primary-700 hover:shadow-glow transition-all duration-normal disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/auth/SignUpForm.tsx:108:10","data-matrix-name":"button","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"108","data-component-file":"SignUpForm.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20bg-primary-500%20text-white%20rounded%20py-3%20font-medium%20hover%3Abg-primary-700%20hover%3Ashadow-glow%20transition-all%20duration-normal%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:u?m.jsx("span",{"data-matrix-id":"src/components/auth/SignUpForm.tsx:114:14","data-matrix-name":"span","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"114","data-component-file":"SignUpForm.tsx","data-component-name":"span",children:"Hesap oluturuluyor..."}):m.jsxs(m.Fragment,{children:[m.jsx(Qa,{className:"w-5 h-5","data-matrix-id":"src/components/auth/SignUpForm.tsx:117:16","data-matrix-name":"UserPlus","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"117","data-component-file":"SignUpForm.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Kayt Ol"]})})]}),m.jsx("div",{className:"mt-6 text-center","data-matrix-id":"src/components/auth/SignUpForm.tsx:124:8","data-matrix-name":"div","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"124","data-component-file":"SignUpForm.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-6%20text-center%22%7D",children:m.jsxs("p",{className:"text-neutral-600 text-sm","data-matrix-id":"src/components/auth/SignUpForm.tsx:125:10","data-matrix-name":"p","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"125","data-component-file":"SignUpForm.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20text-sm%22%7D",children:["Zaten hesabn var m?"," ",m.jsx("button",{onClick:r,className:"text-primary-500 hover:text-primary-700 font-medium transition-colors","data-matrix-id":"src/components/auth/SignUpForm.tsx:127:12","data-matrix-name":"button","data-component-path":"src/components/auth/SignUpForm.tsx","data-component-line":"127","data-component-file":"SignUpForm.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-primary-500%20hover%3Atext-primary-700%20font-medium%20transition-colors%22%7D",children:"Giri Yap"})]})})]})})}function eb({selectedServerId:r,currentView:t,onSelectServer:a,onViewChange:o,onAddAction:l,onSettings:i,onSearch:d}){const[u,h]=_.useState([]),{user:x}=Tt();_.useEffect(()=>{if(!x)return;C();const S=ne.channel("server_changes").on("postgres_changes",{event:"*",schema:"public",table:"servers"},()=>{C()}).subscribe();return()=>{S.unsubscribe()}},[x]);async function C(){if(!x)return;const{data:S}=await ne.from("server_users").select("server_id").eq("user_id",x.id);if(S&&S.length>0){const A=S.map(y=>y.server_id),{data:D}=await ne.from("servers").select("*").in("id",A).order("created_at",{ascending:!0});D&&h(D)}}return m.jsxs("div",{className:"w-20 bg-gray-900 flex flex-col items-center py-3 gap-2 border-r border-gray-800","data-matrix-id":"src/components/layout/ServerList.tsx:71:4","data-matrix-name":"div","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"71","data-component-file":"ServerList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-20%20bg-gray-900%20flex%20flex-col%20items-center%20py-3%20gap-2%20border-r%20border-gray-800%22%7D",children:[m.jsx("button",{onClick:()=>o("friends"),className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-normal hover:rounded-lg hover:bg-primary-500 hover:shadow-glow ${t==="friends"?"bg-primary-500 rounded-lg shadow-glow-sm":"bg-gray-800"}`,title:"Arkadalar","data-matrix-id":"src/components/layout/ServerList.tsx:73:6","data-matrix-name":"button","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"73","data-component-file":"ServerList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22title%22%3A%22Arkada%C5%9Flar%22%7D",children:m.jsx(Po,{className:`w-6 h-6 ${t==="friends"?"text-white":"text-neutral-600"}`,"data-matrix-id":"src/components/layout/ServerList.tsx:82:8","data-matrix-name":"Users","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"82","data-component-file":"ServerList.tsx","data-component-name":"Users","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"})}),m.jsx("div",{className:"w-8 h-px bg-gray-700 my-1","data-matrix-id":"src/components/layout/ServerList.tsx:85:6","data-matrix-name":"div","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"85","data-component-file":"ServerList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-px%20bg-gray-700%20my-1%22%7D"}),u.map(S=>m.jsx("button",{onClick:()=>a(S.id),className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-normal hover:rounded-lg ${r===S.id&&t==="servers"?"bg-primary-500 rounded-lg shadow-glow-sm":"bg-gray-800 hover:bg-gray-700"}`,title:S.name,"data-matrix-id":"src/components/layout/ServerList.tsx:89:8","data-matrix-name":"button","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"89","data-component-file":"ServerList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22title%22%3A%22%5BMemberExpression%5D%22%7D",children:S.server_image_url?m.jsx("img",{src:S.server_image_url,alt:S.name,className:"w-full h-full rounded-full object-cover","data-matrix-id":"src/components/layout/ServerList.tsx:100:12","data-matrix-name":"img","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"100","data-component-file":"ServerList.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-full%20h-full%20rounded-full%20object-cover%22%7D"}):m.jsx("span",{className:"text-lg font-bold text-white","data-matrix-id":"src/components/layout/ServerList.tsx:106:12","data-matrix-name":"span","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"106","data-component-file":"ServerList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-lg%20font-bold%20text-white%22%7D",children:S.name.charAt(0).toUpperCase()})},S.id)),m.jsx("button",{onClick:l,className:"w-14 h-14 rounded-full border-2 border-dashed border-neutral-400 flex items-center justify-center transition-all duration-normal hover:border-primary-500 hover:text-primary-500 hover:shadow-glow-sm",title:"Sunucu Ekle","data-matrix-id":"src/components/layout/ServerList.tsx:114:6","data-matrix-name":"button","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"114","data-component-file":"ServerList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-14%20h-14%20rounded-full%20border-2%20border-dashed%20border-neutral-400%20flex%20items-center%20justify-center%20transition-all%20duration-normal%20hover%3Aborder-primary-500%20hover%3Atext-primary-500%20hover%3Ashadow-glow-sm%22%2C%22title%22%3A%22Sunucu%20Ekle%22%7D",children:m.jsx(Xa,{className:"w-6 h-6 text-neutral-400 hover:text-primary-500","data-matrix-id":"src/components/layout/ServerList.tsx:119:8","data-matrix-name":"Plus","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"119","data-component-file":"ServerList.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-neutral-400%20hover%3Atext-primary-500%22%7D"})}),m.jsx("div",{className:"flex-1","data-matrix-id":"src/components/layout/ServerList.tsx:122:6","data-matrix-name":"div","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"122","data-component-file":"ServerList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D"}),m.jsx("button",{onClick:d,className:"w-14 h-14 rounded-full bg-gray-800 flex items-center justify-center transition-all duration-normal hover:bg-primary-500 hover:shadow-glow-sm group",title:"Arama","data-matrix-id":"src/components/layout/ServerList.tsx:125:6","data-matrix-name":"button","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"125","data-component-file":"ServerList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-14%20h-14%20rounded-full%20bg-gray-800%20flex%20items-center%20justify-center%20transition-all%20duration-normal%20hover%3Abg-primary-500%20hover%3Ashadow-glow-sm%20group%22%2C%22title%22%3A%22Arama%22%7D",children:m.jsx(wn,{className:"w-5 h-5 text-gray-400 group-hover:text-white","data-matrix-id":"src/components/layout/ServerList.tsx:130:8","data-matrix-name":"Search","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"130","data-component-file":"ServerList.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%20group-hover%3Atext-white%22%7D"})}),m.jsx("button",{onClick:i,className:"w-14 h-14 rounded-full bg-gray-800 flex items-center justify-center transition-all duration-normal hover:bg-gray-700 hover:shadow-glow-sm group",title:"Ayarlar","data-matrix-id":"src/components/layout/ServerList.tsx:134:6","data-matrix-name":"button","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"134","data-component-file":"ServerList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-14%20h-14%20rounded-full%20bg-gray-800%20flex%20items-center%20justify-center%20transition-all%20duration-normal%20hover%3Abg-gray-700%20hover%3Ashadow-glow-sm%20group%22%2C%22title%22%3A%22Ayarlar%22%7D",children:m.jsx(tf,{className:"w-5 h-5 text-gray-400 group-hover:text-white","data-matrix-id":"src/components/layout/ServerList.tsx:139:8","data-matrix-name":"Settings","data-component-path":"src/components/layout/ServerList.tsx","data-component-line":"139","data-component-file":"ServerList.tsx","data-component-name":"Settings","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%20group-hover%3Atext-white%22%7D"})})]})}function tb({serverId:r,selectedChannelId:t,onSelectChannel:a,onCreateChannel:o,onInvite:l,onManageRoles:i}){var fe;const[d,u]=_.useState(null),[h,x]=_.useState([]),[C,S]=_.useState(!0),[A,D]=_.useState(!0),[y,E]=_.useState({}),[w,b]=_.useState(!1),[k,j]=_.useState(""),[I,O]=_.useState({channels:[],members:[]}),{user:F,profile:U}=Tt();_.useEffect(()=>{if(!r){u(null),x([]),E({});return}de(),ke();const H=ne.channel(`channels_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"channels",filter:`server_id=eq.${r}`},()=>{de()}).subscribe(),J=ne.channel(`voice_members_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"voice_channel_users"},re=>{console.log("[ChannelList] Voice channel users changed:",re),ke()}).subscribe();return()=>{H.unsubscribe(),J.unsubscribe()}},[r]),_.useEffect(()=>{k.trim()&&r?ce(k):O({channels:[],members:[]})},[k,r]);async function ce(H){if(!r)return;const{data:J}=await ne.from("channels").select("*").eq("server_id",r).ilike("name",`%${H}%`).limit(5),{data:re}=await ne.from("server_users").select("user_id").eq("server_id",r);if(re){const z=re.map(te=>te.user_id),{data:Z}=await ne.from("profiles").select("*").in("id",z).ilike("username",`%${H}%`).limit(5);O({channels:J||[],members:Z||[]})}}async function de(){if(!r)return;const{data:H}=await ne.from("servers").select("*").eq("id",r).maybeSingle();H&&u(H);const{data:J}=await ne.from("channels").select("*").eq("server_id",r).order("name",{ascending:!0});J&&x(J)}async function ke(){if(!r)return;const{data:H}=await ne.from("channels").select("id").eq("server_id",r).eq("is_voice",!0);if(!H)return;const J={};for(const re of H){let{data:z}=await ne.from("voice_channel_users").select("*, profile:profiles(*)").eq("channel_id",re.id).eq("is_active",!0);if(!z||z.length===0){const{data:Z}=await ne.from("voice_channel_members").select("*, profile:profiles(*)").eq("channel_id",re.id);z=Z||[]}z&&(J[re.id]=z)}E(J)}const Ne=h.filter(H=>!H.is_voice),ze=h.filter(H=>H.is_voice);return r?m.jsxs("div",{className:"hidden md:flex md:w-60 bg-gray-900 flex-col border-r border-gray-800 shadow-lg","data-matrix-id":"src/components/layout/ChannelList.tsx:186:4","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"186","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22hidden%20md%3Aflex%20md%3Aw-60%20bg-gray-900%20flex-col%20border-r%20border-gray-800%20shadow-lg%22%7D",children:[m.jsxs("div",{className:"h-12 px-4 flex items-center justify-between border-b border-gray-800 shadow-sm hover:bg-gray-800 transition-colors cursor-pointer","data-matrix-id":"src/components/layout/ChannelList.tsx:188:6","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"188","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-12%20px-4%20flex%20items-center%20justify-between%20border-b%20border-gray-800%20shadow-sm%20hover%3Abg-gray-800%20transition-colors%20cursor-pointer%22%7D",children:[m.jsx("h2",{className:"text-base font-semibold text-white truncate","data-matrix-id":"src/components/layout/ChannelList.tsx:189:8","data-matrix-name":"h2","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"189","data-component-file":"ChannelList.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-base%20font-semibold%20text-white%20truncate%22%7D",children:(d==null?void 0:d.name)||"Sunucu"}),m.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/layout/ChannelList.tsx:190:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"190","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[m.jsx("button",{onClick:()=>b(!w),className:"p-1.5 hover:bg-gray-700 rounded transition-all duration-150 hover:scale-105",title:"Ara","data-matrix-id":"src/components/layout/ChannelList.tsx:191:10","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"191","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1.5%20hover%3Abg-gray-700%20rounded%20transition-all%20duration-150%20hover%3Ascale-105%22%2C%22title%22%3A%22Ara%22%7D",children:m.jsx(wn,{className:"w-4 h-4 text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/layout/ChannelList.tsx:196:12","data-matrix-name":"Search","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"196","data-component-file":"ChannelList.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-gray-400%20hover%3Atext-white%20transition-colors%22%7D"})}),l&&m.jsx("button",{onClick:l,className:"p-1.5 hover:bg-gray-700 rounded transition-all duration-150 hover:scale-105",title:"Sunucuya Davet Et","data-matrix-id":"src/components/layout/ChannelList.tsx:199:12","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"199","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1.5%20hover%3Abg-gray-700%20rounded%20transition-all%20duration-150%20hover%3Ascale-105%22%2C%22title%22%3A%22Sunucuya%20Davet%20Et%22%7D",children:m.jsx(Qa,{className:"w-4 h-4 text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/layout/ChannelList.tsx:204:14","data-matrix-name":"UserPlus","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"204","data-component-file":"ChannelList.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-gray-400%20hover%3Atext-white%20transition-colors%22%7D"})}),(d==null?void 0:d.owner_id)===(F==null?void 0:F.id)&&i&&m.jsx("button",{onClick:i,className:"p-1.5 hover:bg-gray-700 rounded transition-all duration-150 hover:scale-105",title:"Roller ve yeler","data-matrix-id":"src/components/layout/ChannelList.tsx:208:12","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"208","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1.5%20hover%3Abg-gray-700%20rounded%20transition-all%20duration-150%20hover%3Ascale-105%22%2C%22title%22%3A%22Roller%20ve%20%C3%9Cyeler%22%7D",children:m.jsx(gi,{className:"w-4 h-4 text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/layout/ChannelList.tsx:213:14","data-matrix-name":"Shield","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"213","data-component-file":"ChannelList.tsx","data-component-name":"Shield","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-gray-400%20hover%3Atext-white%20transition-colors%22%7D"})})]})]}),w&&m.jsxs("div",{className:"p-3 border-b border-gray-800 animate-slide-down","data-matrix-id":"src/components/layout/ChannelList.tsx:221:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"221","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20border-b%20border-gray-800%20animate-slide-down%22%7D",children:[m.jsxs("div",{className:"relative","data-matrix-id":"src/components/layout/ChannelList.tsx:222:10","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"222","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(wn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500","data-matrix-id":"src/components/layout/ChannelList.tsx:223:12","data-matrix-name":"Search","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"223","data-component-file":"ChannelList.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20-translate-y-1%2F2%20w-4%20h-4%20text-gray-500%22%7D"}),m.jsx("input",{type:"text",value:k,onChange:H=>j(H.target.value),placeholder:"Ara...",className:"w-full pl-9 pr-9 py-2 text-sm bg-gray-900 border border-gray-800 rounded text-white placeholder:text-gray-500 focus:outline-none focus:border-primary-500 transition-colors",autoFocus:!0,"data-matrix-id":"src/components/layout/ChannelList.tsx:224:12","data-matrix-name":"input","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"224","data-component-file":"ChannelList.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22Ara...%22%2C%22className%22%3A%22w-full%20pl-9%20pr-9%20py-2%20text-sm%20bg-gray-900%20border%20border-gray-800%20rounded%20text-white%20placeholder%3Atext-gray-500%20focus%3Aoutline-none%20focus%3Aborder-primary-500%20transition-colors%22%2C%22autoFocus%22%3Atrue%7D"}),k&&m.jsx("button",{onClick:()=>j(""),className:"absolute right-3 top-1/2 -translate-y-1/2 hover:bg-gray-700 p-0.5 rounded","data-matrix-id":"src/components/layout/ChannelList.tsx:233:14","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"233","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22absolute%20right-3%20top-1%2F2%20-translate-y-1%2F2%20hover%3Abg-gray-700%20p-0.5%20rounded%22%7D",children:m.jsx(Yt,{className:"w-4 h-4 text-gray-400 hover:text-white","data-matrix-id":"src/components/layout/ChannelList.tsx:237:16","data-matrix-name":"X","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"237","data-component-file":"ChannelList.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-gray-400%20hover%3Atext-white%22%7D"})})]}),k&&m.jsxs("div",{className:"mt-2 max-h-60 overflow-y-auto custom-scrollbar","data-matrix-id":"src/components/layout/ChannelList.tsx:243:12","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"243","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-2%20max-h-60%20overflow-y-auto%20custom-scrollbar%22%7D",children:[I.channels.length>0&&m.jsxs("div",{className:"mb-2","data-matrix-id":"src/components/layout/ChannelList.tsx:245:16","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"245","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-2%22%7D",children:[m.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 py-1","data-matrix-id":"src/components/layout/ChannelList.tsx:246:18","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"246","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-500%20uppercase%20px-2%20py-1%22%7D",children:"Kanallar"}),I.channels.map(H=>m.jsxs("button",{onClick:()=>{a(H.id),j(""),b(!1)},className:"w-full px-2 py-1.5 flex items-center gap-2 text-gray-300 hover:bg-gray-800 rounded transition-colors text-sm","data-matrix-id":"src/components/layout/ChannelList.tsx:248:20","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"248","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-2%20py-1.5%20flex%20items-center%20gap-2%20text-gray-300%20hover%3Abg-gray-800%20rounded%20transition-colors%20text-sm%22%7D",children:[H.is_voice?m.jsx(Vr,{className:"w-4 h-4","data-matrix-id":"src/components/layout/ChannelList.tsx:257:42","data-matrix-name":"Volume2","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"257","data-component-file":"ChannelList.tsx","data-component-name":"Volume2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}):m.jsx(jn,{className:"w-4 h-4","data-matrix-id":"src/components/layout/ChannelList.tsx:257:76","data-matrix-name":"Hash","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"257","data-component-file":"ChannelList.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),H.name]},H.id))]}),I.members.length>0&&m.jsxs("div",{"data-matrix-id":"src/components/layout/ChannelList.tsx:265:16","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"265","data-component-file":"ChannelList.tsx","data-component-name":"div",children:[m.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-2 py-1","data-matrix-id":"src/components/layout/ChannelList.tsx:266:18","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"266","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-500%20uppercase%20px-2%20py-1%22%7D",children:"yeler"}),I.members.map(H=>{var J;return m.jsxs("div",{className:"px-2 py-1.5 flex items-center gap-2 text-gray-300 rounded text-sm","data-matrix-id":"src/components/layout/ChannelList.tsx:268:20","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"268","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-2%20py-1.5%20flex%20items-center%20gap-2%20text-gray-300%20rounded%20text-sm%22%7D",children:[m.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-500 flex items-center justify-center text-xs text-white","data-matrix-id":"src/components/layout/ChannelList.tsx:272:22","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"272","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20rounded-full%20bg-primary-500%20flex%20items-center%20justify-center%20text-xs%20text-white%22%7D",children:(J=H.username)==null?void 0:J.charAt(0).toUpperCase()}),H.username]},H.id)})]}),I.channels.length===0&&I.members.length===0&&m.jsx("div",{className:"text-center py-4 text-sm text-gray-500","data-matrix-id":"src/components/layout/ChannelList.tsx:282:16","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"282","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-4%20text-sm%20text-gray-500%22%7D",children:"Sonu bulunamad"})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto py-2 custom-scrollbar","data-matrix-id":"src/components/layout/ChannelList.tsx:292:6","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"292","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20py-2%20custom-scrollbar%22%7D",children:[m.jsxs("div",{className:"mb-1","data-matrix-id":"src/components/layout/ChannelList.tsx:294:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"294","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-1%22%7D",children:[m.jsxs("button",{onClick:()=>S(!C),className:"w-full px-2 py-1.5 flex items-center gap-1 text-xs font-semibold text-gray-400 uppercase hover:text-gray-300 transition-colors group","data-matrix-id":"src/components/layout/ChannelList.tsx:295:10","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"295","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-2%20py-1.5%20flex%20items-center%20gap-1%20text-xs%20font-semibold%20text-gray-400%20uppercase%20hover%3Atext-gray-300%20transition-colors%20group%22%7D",children:[m.jsx(tp,{className:`w-3 h-3 transition-transform duration-200 ${C?"":"-rotate-90"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:299:12","data-matrix-name":"ChevronDown","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"299","data-component-file":"ChannelList.tsx","data-component-name":"ChevronDown","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"}),m.jsx("span",{"data-matrix-id":"src/components/layout/ChannelList.tsx:300:12","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"300","data-component-file":"ChannelList.tsx","data-component-name":"span",children:"Metin Kanallar"})]}),C&&m.jsxs("div",{className:"mt-0.5 space-y-0.5","data-matrix-id":"src/components/layout/ChannelList.tsx:303:12","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"303","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-0.5%20space-y-0.5%22%7D",children:[Ne.map(H=>m.jsxs("button",{onClick:()=>a(H.id),className:`w-full px-2 py-1.5 mx-2 flex items-center gap-2 rounded transition-all duration-150 group ${t===H.id?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-300"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:305:16","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"305","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(jn,{className:`w-4 h-4 flex-shrink-0 ${t===H.id?"text-white":"text-gray-500"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:314:18","data-matrix-name":"Hash","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"314","data-component-file":"ChannelList.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"}),m.jsx("span",{className:"text-sm truncate font-medium","data-matrix-id":"src/components/layout/ChannelList.tsx:315:18","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"315","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20truncate%20font-medium%22%7D",children:H.name})]},H.id)),o&&(d==null?void 0:d.owner_id)===(F==null?void 0:F.id)&&m.jsxs("button",{onClick:o,className:"w-full px-2 py-1.5 mx-2 flex items-center gap-2 text-gray-400 hover:text-gray-300 hover:bg-gray-800 rounded transition-all duration-150","data-matrix-id":"src/components/layout/ChannelList.tsx:319:16","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"319","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20px-2%20py-1.5%20mx-2%20flex%20items-center%20gap-2%20text-gray-400%20hover%3Atext-gray-300%20hover%3Abg-gray-800%20rounded%20transition-all%20duration-150%22%7D",children:[m.jsx(Xa,{className:"w-4 h-4","data-matrix-id":"src/components/layout/ChannelList.tsx:323:18","data-matrix-name":"Plus","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"323","data-component-file":"ChannelList.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),m.jsx("span",{className:"text-sm font-medium","data-matrix-id":"src/components/layout/ChannelList.tsx:324:18","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"324","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%22%7D",children:"Kanal Ekle"})]})]})]}),m.jsxs("div",{className:"mt-4","data-matrix-id":"src/components/layout/ChannelList.tsx:332:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"332","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-4%22%7D",children:[m.jsxs("button",{onClick:()=>D(!A),className:"w-full px-2 py-1.5 flex items-center gap-1 text-xs font-semibold text-gray-400 uppercase hover:text-gray-300 transition-colors group","data-matrix-id":"src/components/layout/ChannelList.tsx:333:10","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"333","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-2%20py-1.5%20flex%20items-center%20gap-1%20text-xs%20font-semibold%20text-gray-400%20uppercase%20hover%3Atext-gray-300%20transition-colors%20group%22%7D",children:[m.jsx(tp,{className:`w-3 h-3 transition-transform duration-200 ${A?"":"-rotate-90"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:337:12","data-matrix-name":"ChevronDown","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"337","data-component-file":"ChannelList.tsx","data-component-name":"ChevronDown","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"}),m.jsx("span",{"data-matrix-id":"src/components/layout/ChannelList.tsx:338:12","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"338","data-component-file":"ChannelList.tsx","data-component-name":"span",children:"Ses Kanallar"})]}),A&&m.jsx("div",{className:"mt-0.5 space-y-0.5","data-matrix-id":"src/components/layout/ChannelList.tsx:341:12","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"341","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-0.5%20space-y-0.5%22%7D",children:ze.map(H=>{const J=y[H.id]||[];return m.jsxs("div",{"data-matrix-id":"src/components/layout/ChannelList.tsx:345:18","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"345","data-component-file":"ChannelList.tsx","data-component-name":"div",children:[m.jsxs("button",{onClick:()=>a(H.id),className:`w-full px-2 py-1.5 mx-2 flex items-center gap-2 rounded transition-all duration-150 group ${t===H.id?"bg-gray-700 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-300"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:346:20","data-matrix-name":"button","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"346","data-component-file":"ChannelList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(Vr,{className:`w-4 h-4 flex-shrink-0 ${t===H.id?"text-white":"text-gray-500"}`,"data-matrix-id":"src/components/layout/ChannelList.tsx:354:22","data-matrix-name":"Volume2","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"354","data-component-file":"ChannelList.tsx","data-component-name":"Volume2","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"}),m.jsx("span",{className:"text-sm truncate font-medium","data-matrix-id":"src/components/layout/ChannelList.tsx:355:22","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"355","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20truncate%20font-medium%22%7D",children:H.name})]}),J.length>0&&m.jsx("div",{className:"ml-8 mt-1 mb-2 space-y-1","data-matrix-id":"src/components/layout/ChannelList.tsx:359:22","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"359","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22ml-8%20mt-1%20mb-2%20space-y-1%22%7D",children:J.map(re=>{var z,Z,te;return m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-gray-400 hover:bg-gray-800 hover:text-gray-300 rounded transition-colors cursor-pointer","data-matrix-id":"src/components/layout/ChannelList.tsx:361:26","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"361","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20px-2%20py-1%20text-gray-400%20hover%3Abg-gray-800%20hover%3Atext-gray-300%20rounded%20transition-colors%20cursor-pointer%22%7D",children:[m.jsx("div",{className:"relative","data-matrix-id":"src/components/layout/ChannelList.tsx:365:28","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"365","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:m.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-500 flex items-center justify-center overflow-hidden","data-matrix-id":"src/components/layout/ChannelList.tsx:366:30","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"366","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20rounded-full%20bg-primary-500%20flex%20items-center%20justify-center%20overflow-hidden%22%7D",children:m.jsx("span",{className:"text-xs text-white font-medium","data-matrix-id":"src/components/layout/ChannelList.tsx:367:32","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"367","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-white%20font-medium%22%7D",children:((Z=(z=re.profile)==null?void 0:z.username)==null?void 0:Z.charAt(0).toUpperCase())||"U"})})}),m.jsx("span",{className:"text-xs truncate font-medium","data-matrix-id":"src/components/layout/ChannelList.tsx:372:28","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"372","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20truncate%20font-medium%22%7D",children:((te=re.profile)==null?void 0:te.username)||"User"})]},re.id)})})]},H.id)})})]})]}),m.jsxs("div",{className:"h-14 px-2 flex items-center gap-2 bg-gray-900 border-t border-gray-800","data-matrix-id":"src/components/layout/ChannelList.tsx:386:6","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"386","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-14%20px-2%20flex%20items-center%20gap-2%20bg-gray-900%20border-t%20border-gray-800%22%7D",children:[m.jsxs("div",{className:"relative","data-matrix-id":"src/components/layout/ChannelList.tsx:387:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"387","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500 flex items-center justify-center overflow-hidden","data-matrix-id":"src/components/layout/ChannelList.tsx:388:10","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"388","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20rounded-full%20bg-primary-500%20flex%20items-center%20justify-center%20overflow-hidden%22%7D",children:U!=null&&U.profile_image_url?m.jsx("img",{src:U.profile_image_url,alt:"",className:"w-full h-full object-cover","data-matrix-id":"src/components/layout/ChannelList.tsx:390:14","data-matrix-name":"img","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"390","data-component-file":"ChannelList.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%22%2C%22className%22%3A%22w-full%20h-full%20object-cover%22%7D"}):m.jsx("span",{className:"text-sm font-semibold text-white","data-matrix-id":"src/components/layout/ChannelList.tsx:392:14","data-matrix-name":"span","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"392","data-component-file":"ChannelList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-white%22%7D",children:((fe=U==null?void 0:U.username)==null?void 0:fe.charAt(0).toUpperCase())||"U"})}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full bg-green-500 border-2 border-gray-900","data-matrix-id":"src/components/layout/ChannelList.tsx:397:10","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"397","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20-bottom-0.5%20-right-0.5%20w-3%20h-3%20rounded-full%20bg-green-500%20border-2%20border-gray-900%22%7D"})]}),m.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/layout/ChannelList.tsx:399:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"399","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[m.jsx("div",{className:"text-sm font-semibold text-white truncate","data-matrix-id":"src/components/layout/ChannelList.tsx:400:10","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"400","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-white%20truncate%22%7D",children:(U==null?void 0:U.username)||"Kullanc"}),m.jsx("div",{className:"text-xs text-gray-400","data-matrix-id":"src/components/layout/ChannelList.tsx:403:10","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"403","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:"evrimii"})]})]}),m.jsx("style",{"data-matrix-id":"src/components/layout/ChannelList.tsx:409:6","data-matrix-name":"style","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"409","data-component-file":"ChannelList.tsx","data-component-name":"style",children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #1f2937;
          border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #374151;
        }
        @keyframes slide-down {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-slide-down {
          animation: slide-down 0.2s ease-out;
        }
      `})]}):m.jsx("div",{className:"w-60 bg-gray-900 flex flex-col border-r border-gray-800","data-matrix-id":"src/components/layout/ChannelList.tsx:177:6","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"177","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-60%20bg-gray-900%20flex%20flex-col%20border-r%20border-gray-800%22%7D",children:m.jsx("div",{className:"h-12 px-4 flex items-center border-b border-gray-900 shadow-sm","data-matrix-id":"src/components/layout/ChannelList.tsx:178:8","data-matrix-name":"div","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"178","data-component-file":"ChannelList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-12%20px-4%20flex%20items-center%20border-b%20border-gray-900%20shadow-sm%22%7D",children:m.jsx("h2",{className:"text-base font-semibold text-white","data-matrix-id":"src/components/layout/ChannelList.tsx:179:10","data-matrix-name":"h2","data-component-path":"src/components/layout/ChannelList.tsx","data-component-line":"179","data-component-file":"ChannelList.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-base%20font-semibold%20text-white%22%7D",children:"Direkt Mesajlar"})})})}function nb({channelId:r}){const[t,a]=_.useState(null),[o,l]=_.useState([]),[i,d]=_.useState(""),[u,h]=_.useState(!1),[x,C]=_.useState(!1),S=_.useRef(null),A=_.useRef(null),{user:D}=Tt();function y(O){return new Date(O).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}function E(O){const F=[];let U=null;return O.forEach(ce=>{var de;if(!U||((de=U.sender)==null?void 0:de.id)!==ce.sender_id)U&&F.push(U),U={sender:ce.sender,messages:[ce]};else{const ke=U.messages[U.messages.length-1];new Date(ce.created_at).getTime()-new Date(ke.created_at).getTime()<300*1e3?U.messages.push(ce):(F.push(U),U={sender:ce.sender,messages:[ce]})}}),U&&F.push(U),F}_.useEffect(()=>{if(!r){a(null),l([]);return}w();const O=ne.channel(`messages_${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"channel_messages",filter:`channel_id=eq.${r}`},async F=>{const U=F.new,{data:ce}=await ne.from("profiles").select("*").eq("id",U.sender_id).maybeSingle();U.sender=ce||void 0,l(de=>[...de,U])}).subscribe();return()=>{O.unsubscribe()}},[r]),_.useEffect(()=>{b()},[o]);async function w(){if(!r)return;const{data:O}=await ne.from("channels").select("*").eq("id",r).maybeSingle();O&&a(O);const{data:F}=await ne.from("channel_messages").select("*").eq("channel_id",r).order("created_at",{ascending:!0}).limit(100);if(F){const U=[...new Set(F.map(ke=>ke.sender_id))],{data:ce}=await ne.from("profiles").select("*").in("id",U),de=F.map(ke=>({...ke,sender:ce==null?void 0:ce.find(Ne=>Ne.id===ke.sender_id)}));l(de)}}function b(){var O;(O=S.current)==null||O.scrollIntoView({behavior:"smooth"})}async function k(O){var U;if(O.preventDefault(),!i.trim()||!r||!D||u)return;h(!0);const{error:F}=await ne.from("channel_messages").insert({message:i.trim(),sender_id:D.id,channel_id:r,is_image:!1});F||(d(""),(U=A.current)==null||U.focus()),h(!1)}function j(O){O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),k(O))}if(!r)return m.jsx("div",{className:"flex-1 bg-gray-800 flex items-center justify-center","data-matrix-id":"src/components/layout/MessageArea.tsx:196:6","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"196","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20bg-gray-800%20flex%20items-center%20justify-center%22%7D",children:m.jsxs("div",{className:"text-center animate-fade-in","data-matrix-id":"src/components/layout/MessageArea.tsx:197:8","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"197","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20animate-fade-in%22%7D",children:[m.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/components/layout/MessageArea.tsx:198:10","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"198","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-20%20h-20%20bg-gray-700%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:m.jsx(jn,{className:"w-10 h-10 text-gray-500","data-matrix-id":"src/components/layout/MessageArea.tsx:199:12","data-matrix-name":"Hash","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"199","data-component-file":"MessageArea.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20text-gray-500%22%7D"})}),m.jsx("h3",{className:"text-xl font-semibold text-white mb-2","data-matrix-id":"src/components/layout/MessageArea.tsx:201:10","data-matrix-name":"h3","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"201","data-component-file":"MessageArea.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%20mb-2%22%7D",children:"Bir Kanal Sein"}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/layout/MessageArea.tsx:204:10","data-matrix-name":"p","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"204","data-component-file":"MessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Sohbete balamak iin sol panelden bir metin kanal sein"})]})});const I=E(o);return m.jsxs("div",{className:"flex-1 bg-gray-800 flex flex-col","data-matrix-id":"src/components/layout/MessageArea.tsx:215:4","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"215","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20bg-gray-800%20flex%20flex-col%22%7D",children:[m.jsx("div",{className:"h-12 px-4 flex items-center justify-between border-b border-gray-900/50 shadow-sm bg-gray-800","data-matrix-id":"src/components/layout/MessageArea.tsx:217:6","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"217","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-12%20px-4%20flex%20items-center%20justify-between%20border-b%20border-gray-900%2F50%20shadow-sm%20bg-gray-800%22%7D",children:m.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/layout/MessageArea.tsx:218:8","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"218","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[m.jsx(jn,{className:"w-5 h-5 text-gray-400","data-matrix-id":"src/components/layout/MessageArea.tsx:219:10","data-matrix-name":"Hash","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"219","data-component-file":"MessageArea.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%22%7D"}),m.jsx("h2",{className:"text-base font-semibold text-white","data-matrix-id":"src/components/layout/MessageArea.tsx:220:10","data-matrix-name":"h2","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"220","data-component-file":"MessageArea.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-base%20font-semibold%20text-white%22%7D",children:(t==null?void 0:t.name)||"kanal"}),(t==null?void 0:t.name)&&m.jsx("div",{className:"h-6 w-px bg-gray-600 mx-2","data-matrix-id":"src/components/layout/MessageArea.tsx:222:12","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"222","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-6%20w-px%20bg-gray-600%20mx-2%22%7D"}),m.jsx("p",{className:"text-sm text-gray-400","data-matrix-id":"src/components/layout/MessageArea.tsx:224:10","data-matrix-name":"p","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"224","data-component-file":"MessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%22%7D",children:(t==null?void 0:t.name)&&`${t.name} kanal`})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-1 custom-scrollbar","data-matrix-id":"src/components/layout/MessageArea.tsx:231:6","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"231","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20px-4%20py-4%20space-y-1%20custom-scrollbar%22%7D",children:o.length===0?m.jsxs("div",{className:"h-full flex flex-col items-center justify-center animate-fade-in","data-matrix-id":"src/components/layout/MessageArea.tsx:233:10","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"233","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-full%20flex%20flex-col%20items-center%20justify-center%20animate-fade-in%22%7D",children:[m.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4","data-matrix-id":"src/components/layout/MessageArea.tsx:234:12","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"234","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20bg-gray-700%20rounded-full%20flex%20items-center%20justify-center%20mb-4%22%7D",children:m.jsx(jn,{className:"w-8 h-8 text-gray-500","data-matrix-id":"src/components/layout/MessageArea.tsx:235:14","data-matrix-name":"Hash","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"235","data-component-file":"MessageArea.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-gray-500%22%7D"})}),m.jsxs("h3",{className:"text-xl font-bold text-white mb-2","data-matrix-id":"src/components/layout/MessageArea.tsx:237:12","data-matrix-name":"h3","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"237","data-component-file":"MessageArea.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-white%20mb-2%22%7D",children:["#",t==null?void 0:t.name," kanalna ho geldin!"]}),m.jsxs("p",{className:"text-gray-400 text-sm text-center max-w-md","data-matrix-id":"src/components/layout/MessageArea.tsx:240:12","data-matrix-name":"p","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"240","data-component-file":"MessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%20text-center%20max-w-md%22%7D",children:["Bu kanal #",t==null?void 0:t.name," konumalarnn balangc. lk mesaj gndererek konumay balat!"]})]}):m.jsxs(m.Fragment,{children:[I.map((O,F)=>{var U,ce,de,ke;return m.jsx("div",{className:"message-group hover:bg-gray-900/20 transition-colors duration-150 rounded px-2 py-0.5 -mx-2","data-matrix-id":"src/components/layout/MessageArea.tsx:247:14","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"247","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22message-group%20hover%3Abg-gray-900%2F20%20transition-colors%20duration-150%20rounded%20px-2%20py-0.5%20-mx-2%22%7D",children:m.jsxs("div",{className:"flex gap-3 pt-1","data-matrix-id":"src/components/layout/MessageArea.tsx:249:16","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"249","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%20pt-1%22%7D",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-500 flex-shrink-0 flex items-center justify-center overflow-hidden transition-transform duration-200 hover:scale-105","data-matrix-id":"src/components/layout/MessageArea.tsx:250:18","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"250","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20rounded-full%20bg-primary-500%20flex-shrink-0%20flex%20items-center%20justify-center%20overflow-hidden%20transition-transform%20duration-200%20hover%3Ascale-105%22%7D",children:(U=O.sender)!=null&&U.profile_image_url?m.jsx("img",{src:O.sender.profile_image_url,alt:"",className:"w-full h-full object-cover","data-matrix-id":"src/components/layout/MessageArea.tsx:252:22","data-matrix-name":"img","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"252","data-component-file":"MessageArea.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%22%2C%22className%22%3A%22w-full%20h-full%20object-cover%22%7D"}):m.jsx("span",{className:"text-sm font-semibold text-white","data-matrix-id":"src/components/layout/MessageArea.tsx:258:22","data-matrix-name":"span","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"258","data-component-file":"MessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-white%22%7D",children:((de=(ce=O.sender)==null?void 0:ce.username)==null?void 0:de.charAt(0).toUpperCase())||"U"})}),m.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/layout/MessageArea.tsx:263:18","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"263","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1","data-matrix-id":"src/components/layout/MessageArea.tsx:264:20","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"264","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20mb-1%22%7D",children:[m.jsx("span",{className:"font-semibold text-white hover:underline cursor-pointer text-sm","data-matrix-id":"src/components/layout/MessageArea.tsx:265:22","data-matrix-name":"span","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"265","data-component-file":"MessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-white%20hover%3Aunderline%20cursor-pointer%20text-sm%22%7D",children:((ke=O.sender)==null?void 0:ke.username)||"Kullanc"}),m.jsx("span",{className:"text-xs text-gray-500 font-medium","data-matrix-id":"src/components/layout/MessageArea.tsx:268:22","data-matrix-name":"span","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"268","data-component-file":"MessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%20font-medium%22%7D",children:y(O.messages[0].created_at)})]}),O.messages.map((Ne,ze)=>m.jsx("div",{className:ze>0?"mt-0.5":"","data-matrix-id":"src/components/layout/MessageArea.tsx:273:22","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"273","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BConditionalExpression%5D%22%7D",children:m.jsx("div",{className:"text-gray-100 text-sm leading-relaxed break-words","data-matrix-id":"src/components/layout/MessageArea.tsx:274:24","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"274","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-gray-100%20text-sm%20leading-relaxed%20break-words%22%7D",children:Ne.message})},Ne.id))]})]})},F)}),m.jsx("div",{ref:S,"data-matrix-id":"src/components/layout/MessageArea.tsx:283:12","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"283","data-component-file":"MessageArea.tsx","data-component-name":"div"})]})}),m.jsxs("div",{className:"px-4 pb-6 pt-2","data-matrix-id":"src/components/layout/MessageArea.tsx:289:6","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"289","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20pb-6%20pt-2%22%7D",children:[m.jsx("form",{onSubmit:k,className:"relative","data-matrix-id":"src/components/layout/MessageArea.tsx:290:8","data-matrix-name":"form","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"290","data-component-file":"MessageArea.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22relative%22%7D",children:m.jsx("div",{className:"bg-gray-700 rounded-lg shadow-lg transition-all duration-200 focus-within:bg-gray-650","data-matrix-id":"src/components/layout/MessageArea.tsx:291:10","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"291","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-700%20rounded-lg%20shadow-lg%20transition-all%20duration-200%20focus-within%3Abg-gray-650%22%7D",children:m.jsxs("div",{className:"flex items-center px-4 py-3","data-matrix-id":"src/components/layout/MessageArea.tsx:292:12","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"292","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20px-4%20py-3%22%7D",children:[m.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-300 transition-colors p-1 rounded hover:bg-gray-600",title:"Dosya ekle","data-matrix-id":"src/components/layout/MessageArea.tsx:293:14","data-matrix-name":"button","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"293","data-component-file":"MessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-gray-300%20transition-colors%20p-1%20rounded%20hover%3Abg-gray-600%22%2C%22title%22%3A%22Dosya%20ekle%22%7D",children:m.jsx(Xa,{className:"w-5 h-5","data-matrix-id":"src/components/layout/MessageArea.tsx:298:16","data-matrix-name":"Plus","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"298","data-component-file":"MessageArea.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),m.jsx("input",{ref:A,type:"text",value:i,onChange:O=>d(O.target.value),onKeyDown:j,placeholder:`#${(t==null?void 0:t.name)||"kanal"} kanalna mesaj gnder`,className:"flex-1 mx-2 bg-transparent text-white placeholder:text-gray-500 focus:outline-none text-sm",disabled:u,"data-matrix-id":"src/components/layout/MessageArea.tsx:301:14","data-matrix-name":"input","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"301","data-component-file":"MessageArea.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onKeyDown%22%3A%22%5BIdentifier%5D%22%2C%22placeholder%22%3A%22%5BTemplateLiteral%5D%22%2C%22className%22%3A%22flex-1%20mx-2%20bg-transparent%20text-white%20placeholder%3Atext-gray-500%20focus%3Aoutline-none%20text-sm%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D"}),m.jsx("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/layout/MessageArea.tsx:312:14","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"312","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:m.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-300 transition-colors p-1 rounded hover:bg-gray-600",title:"Emoji","data-matrix-id":"src/components/layout/MessageArea.tsx:313:16","data-matrix-name":"button","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"313","data-component-file":"MessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-gray-300%20transition-colors%20p-1%20rounded%20hover%3Abg-gray-600%22%2C%22title%22%3A%22Emoji%22%7D",children:m.jsx(nf,{className:"w-5 h-5","data-matrix-id":"src/components/layout/MessageArea.tsx:318:18","data-matrix-name":"Smile","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"318","data-component-file":"MessageArea.tsx","data-component-name":"Smile","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})})]})})}),m.jsx("div",{className:"mt-1 px-2","data-matrix-id":"src/components/layout/MessageArea.tsx:326:8","data-matrix-name":"div","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"326","data-component-file":"MessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-1%20px-2%22%7D",children:m.jsxs("p",{className:"text-xs text-gray-500","data-matrix-id":"src/components/layout/MessageArea.tsx:327:10","data-matrix-name":"p","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"327","data-component-file":"MessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%22%7D",children:[m.jsx("span",{className:"font-semibold","data-matrix-id":"src/components/layout/MessageArea.tsx:328:12","data-matrix-name":"span","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"328","data-component-file":"MessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%22%7D",children:"Enter"})," ile gnder"]})})]}),m.jsx("style",{"data-matrix-id":"src/components/layout/MessageArea.tsx:334:6","data-matrix-name":"style","data-component-path":"src/components/layout/MessageArea.tsx","data-component-line":"334","data-component-file":"MessageArea.tsx","data-component-name":"style",children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #1f2937;
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #374151;
        }
        .message-group:hover .message-actions {
          opacity: 1;
        }
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in {
          animation: fade-in 0.3s ease-out;
        }
      `})]})}class ab{constructor(){lt(this,"heartbeatInterval",null);lt(this,"cleanupInterval",null);lt(this,"activityChannel",null);lt(this,"presenceChannel",null);lt(this,"userStatuses",new Map);lt(this,"onStatusChange");lt(this,"isInitialized",!1)}async initialize(t){if(this.isInitialized){console.log("[UserActivity] Already initialized");return}const{data:a,error:o}=await ne.auth.getUser();if(o||!a.user){console.log("[UserActivity] User not authenticated, skipping initialization");return}console.log("[UserActivity] Initializing for user:",a.user.id),this.isInitialized=!0,await this.setStatus("online"),this.startHeartbeat(),this.startVoiceChannelCleanup(),this.setupActivityListener(),this.setupPresenceListener(),document.addEventListener("visibilitychange",()=>{document.hidden?this.setStatus("offline"):this.setStatus("online")}),window.addEventListener("beforeunload",()=>{this.setStatus("offline")})}setupActivityListener(){this.activityChannel=ne.channel("user_activity_changes").on("postgres_changes",{event:"*",schema:"public",table:"user_activity"},t=>{const a=t.new;a&&(console.log("[UserActivity] Real-time update:",a.user_id,"",a.status),this.userStatuses.set(a.user_id,a.status),this.onStatusChange&&this.onStatusChange(a.user_id,a.status))}).subscribe()}setupPresenceListener(){this.presenceChannel=ne.channel("user_presence_listener").on("presence",{event:"sync"},()=>{console.log("[UserActivity] Presence sync received")}).on("presence",{event:"join"},({key:t,newPresences:a})=>{console.log("[UserActivity] User joined presence:",t),a&&a.length>0&&(this.userStatuses.set(t,"online"),this.onStatusChange&&this.onStatusChange(t,"online"))}).on("presence",{event:"leave"},({key:t,leftPresences:a})=>{console.log("[UserActivity] User left presence:",t),this.userStatuses.set(t,"offline"),this.onStatusChange&&this.onStatusChange(t,"offline")}).subscribe()}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=null}startVoiceChannelCleanup(){this.cleanupInterval&&clearInterval(this.cleanupInterval),this.cleanupInterval=setInterval(async()=>{await this.cleanupDisconnectedUsers()},3e4),this.cleanupDisconnectedUsers().catch(console.error)}async cleanupDisconnectedUsers(){try{console.log("[UserActivity] Starting voice channel cleanup...");const t=new Date(Date.now()-6e4).toISOString(),{data:a,error:o}=await ne.from("user_activity").select("user_id").lt("heartbeat",t);if(o){console.error("[UserActivity] Error fetching stale users:",o);return}const l=(a==null?void 0:a.map(x=>x.user_id))||[];if(l.length===0){console.log("[UserActivity] No users with stale heartbeat found");return}const{data:i,error:d}=await ne.from("voice_channel_users").select("user_id, channel_id").in("user_id",l);if(d){console.error("[UserActivity] Error fetching voice users:",d);return}if(!i||i.length===0){console.log("[UserActivity] No disconnected users found in voice channels");return}console.log("[UserActivity] Found disconnected users:",i.length);const u=i.map(x=>x.user_id),{error:h}=await ne.from("voice_channel_users").delete().in("user_id",u);if(h){console.error("[UserActivity] Error removing disconnected users:",h);return}await ne.from("user_activity").update({status:"offline",last_seen:new Date().toISOString()}).in("user_id",u),console.log("[UserActivity] Successfully cleaned up",i.length,"disconnected users")}catch(t){console.error("[UserActivity] Error during voice channel cleanup:",t)}}async setStatus(t,a,o){const{data:l}=await ne.auth.getUser();if(!l.user){console.log("[UserActivity] No user for setStatus");return}console.log("[UserActivity] Setting status:",t,"for user:",l.user.id);try{const i={user_id:l.user.id,status:t,last_seen:new Date().toISOString(),heartbeat:new Date().toISOString(),updated_at:new Date().toISOString()};a!==void 0&&(i.custom_status=a),o!==void 0&&(i.custom_status_emoji=o);const{data:d,error:u}=await ne.from("user_activity").upsert(i,{onConflict:"user_id"}).select();u?console.error("[UserActivity] Failed to set status:",u):(console.log("[UserActivity] Status set successfully:",t),this.userStatuses.set(l.user.id,t),this.onStatusChange&&this.onStatusChange(l.user.id,t))}catch(i){console.error("[UserActivity] Exception setting status:",i)}}async getCustomStatus(t){try{const{data:a,error:o}=await ne.from("user_activity").select("custom_status, custom_status_emoji").eq("user_id",t).maybeSingle();return o||!a?null:{status:a.custom_status||"",emoji:a.custom_status_emoji||""}}catch(a){return console.error("[UserActivity] Error getting custom status:",a),null}}async getUserStatus(t){if(this.userStatuses.has(t))return console.log("[UserActivity] Returning cached status for",t,":",this.userStatuses.get(t)),this.userStatuses.get(t);console.log("[UserActivity] Fetching status for",t,"from database");try{const{data:a,error:o}=await ne.from("user_activity").select("status").eq("user_id",t).maybeSingle();if(o)return console.error("[UserActivity] Failed to get user status:",o),console.log("[UserActivity] Returning offline for",t),"offline";if(!a){console.log("[UserActivity] No status record found for",t,"creating offline record"),await ne.from("user_activity").upsert({user_id:t,status:"offline",last_seen:new Date().toISOString(),heartbeat:new Date().toISOString()},{onConflict:"user_id"});const i="offline";return console.log("[UserActivity] Created offline status for",t,":",i),this.userStatuses.set(t,i),i}const l=(a==null?void 0:a.status)||"offline";return console.log("[UserActivity] Database returned status for",t,":",l),this.userStatuses.set(t,l),l}catch(a){return console.error("[UserActivity] Error getting user status:",a),"offline"}}async getUserStatuses(t){try{const{data:a,error:o}=await ne.from("user_activity").select("user_id, status").in("user_id",t);if(o||!a)return console.error("[UserActivity] Failed to get user statuses:",o),new Map;const l=new Map;return a.forEach(i=>{l.set(i.user_id,i.status),this.userStatuses.set(i.user_id,i.status)}),t.forEach(i=>{l.has(i)||(l.set(i,"offline"),this.userStatuses.set(i,"offline"))}),l}catch(a){return console.error("[UserActivity] Error getting user statuses:",a),new Map}}isUserOnline(t){return this.userStatuses.get(t)==="online"}async destroy(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null),this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),this.activityChannel&&(await ne.removeChannel(this.activityChannel),this.activityChannel=null),this.presenceChannel&&(await ne.removeChannel(this.presenceChannel),this.presenceChannel=null),await this.setStatus("offline"),this.userStatuses.clear()}async triggerCleanup(){await this.cleanupDisconnectedUsers()}}const Tr=new ab,Sd=({userId:r,size:t="md",showLabel:a=!1,showStatusOnly:o=!1})=>{const[l,i]=_.useState("offline");_.useEffect(()=>{Tr.getUserStatus(r).then(i);const x=(C,S)=>{C===r&&i(S)};return Tr.onStatusChange=x,()=>{Tr.onStatusChange=void 0}},[r]);const d={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},u={online:"bg-green-500",away:"bg-yellow-500",offline:"bg-gray-500"},h={online:"evrimii",away:"Uzakta",offline:"evrimd"};return m.jsx(m.Fragment,{children:o?m.jsx("span",{className:"text-xs text-gray-400","data-matrix-id":"src/components/common/StatusIndicator.tsx:58:8","data-matrix-name":"span","data-component-path":"src/components/common/StatusIndicator.tsx","data-component-line":"58","data-component-file":"StatusIndicator.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:h[l]}):m.jsxs("div",{className:"flex items-center gap-1.5","data-matrix-id":"src/components/common/StatusIndicator.tsx:62:8","data-matrix-name":"div","data-component-path":"src/components/common/StatusIndicator.tsx","data-component-line":"62","data-component-file":"StatusIndicator.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1.5%22%7D",children:[m.jsx("div",{className:`${d[t]} ${u[l]} rounded-full ring-2 ring-gray-900`,title:h[l],"data-matrix-id":"src/components/common/StatusIndicator.tsx:63:10","data-matrix-name":"div","data-component-path":"src/components/common/StatusIndicator.tsx","data-component-line":"63","data-component-file":"StatusIndicator.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22title%22%3A%22%5BMemberExpression%5D%22%7D"}),a&&m.jsx("span",{className:"text-xs text-gray-400","data-matrix-id":"src/components/common/StatusIndicator.tsx:68:12","data-matrix-name":"span","data-component-path":"src/components/common/StatusIndicator.tsx","data-component-line":"68","data-component-file":"StatusIndicator.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:h[l]})]})})};function ob({serverId:r}){const[t,a]=_.useState([]),[o,l]=_.useState(null);_.useEffect(()=>{if(!r){a([]),l(null);return}i(),d()},[r]);async function i(){if(!r)return;const{data:x}=await ne.from("server_users").select("user_id").eq("server_id",r);if(x&&x.length>0){const C=x.map(A=>A.user_id),{data:S}=await ne.from("profiles").select("*").in("id",C).order("username",{ascending:!0});S&&a(S)}}async function d(){if(!r)return;const{data:x}=await ne.from("servers").select("owner_id").eq("id",r).single();x&&l(x.owner_id)}if(!r)return null;const u=x=>(x==null?void 0:x.charAt(0).toUpperCase())||"U",h=x=>{const C=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-yellow-500","bg-red-500","bg-indigo-500","bg-teal-500"],S=x.charCodeAt(0)%C.length;return C[S]};return m.jsxs("div",{className:"hidden lg:flex lg:w-60 bg-gray-800/50 flex-col border-l border-gray-800/50","data-matrix-id":"src/components/layout/MemberList.tsx:86:4","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"86","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22hidden%20lg%3Aflex%20lg%3Aw-60%20bg-gray-800%2F50%20flex-col%20border-l%20border-gray-800%2F50%22%7D",children:[m.jsx("div",{className:"px-4 py-3 border-b border-gray-800/50","data-matrix-id":"src/components/layout/MemberList.tsx:88:6","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"88","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20border-b%20border-gray-800%2F50%22%7D",children:m.jsxs("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider","data-matrix-id":"src/components/layout/MemberList.tsx:89:8","data-matrix-name":"h3","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"89","data-component-file":"MemberList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-400%20uppercase%20tracking-wider%22%7D",children:["yeler  ",t.length]})}),m.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-3 space-y-1","data-matrix-id":"src/components/layout/MemberList.tsx:95:6","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"95","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20px-2%20py-3%20space-y-1%22%7D",children:m.jsxs("div",{className:"mb-2","data-matrix-id":"src/components/layout/MemberList.tsx:97:8","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"97","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-2%22%7D",children:[m.jsx("div",{className:"px-2 py-1 mb-1","data-matrix-id":"src/components/layout/MemberList.tsx:98:10","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"98","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-2%20py-1%20mb-1%22%7D",children:m.jsxs("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider","data-matrix-id":"src/components/layout/MemberList.tsx:99:12","data-matrix-name":"h4","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"99","data-component-file":"MemberList.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-500%20uppercase%20tracking-wider%22%7D",children:["evrimii  ",t.length]})}),m.jsx("div",{className:"space-y-0.5","data-matrix-id":"src/components/layout/MemberList.tsx:104:10","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"104","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-0.5%22%7D",children:t.map(x=>{const C=x.id===o;return m.jsxs("button",{className:"w-full px-2 py-1.5 flex items-center gap-3 rounded hover:bg-gray-700/50 transition-colors group","data-matrix-id":"src/components/layout/MemberList.tsx:109:16","data-matrix-name":"button","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"109","data-component-file":"MemberList.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22w-full%20px-2%20py-1.5%20flex%20items-center%20gap-3%20rounded%20hover%3Abg-gray-700%2F50%20transition-colors%20group%22%7D",children:[m.jsxs("div",{className:"relative flex-shrink-0","data-matrix-id":"src/components/layout/MemberList.tsx:114:18","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"114","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%20flex-shrink-0%22%7D",children:[m.jsx("div",{className:`w-8 h-8 rounded-full ${h(x.id)} flex items-center justify-center ring-2 ring-gray-800/50`,"data-matrix-id":"src/components/layout/MemberList.tsx:115:20","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"115","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:x.profile_image_url?m.jsx("img",{src:x.profile_image_url,alt:"",className:"w-full h-full rounded-full object-cover","data-matrix-id":"src/components/layout/MemberList.tsx:117:24","data-matrix-name":"img","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"117","data-component-file":"MemberList.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%22%2C%22className%22%3A%22w-full%20h-full%20rounded-full%20object-cover%22%7D"}):m.jsx("span",{className:"text-sm font-semibold text-white","data-matrix-id":"src/components/layout/MemberList.tsx:123:24","data-matrix-name":"span","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"123","data-component-file":"MemberList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-white%22%7D",children:u(x.username)})}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5","data-matrix-id":"src/components/layout/MemberList.tsx:129:20","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"129","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20-bottom-0.5%20-right-0.5%22%7D",children:m.jsx(Sd,{userId:x.id,size:"sm","data-matrix-id":"src/components/layout/MemberList.tsx:130:22","data-matrix-name":"StatusIndicator","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"130","data-component-file":"MemberList.tsx","data-component-name":"StatusIndicator","data-component-content":"%7B%22userId%22%3A%22%5BMemberExpression%5D%22%2C%22size%22%3A%22sm%22%7D"})})]}),m.jsxs("div",{className:"flex-1 min-w-0 text-left","data-matrix-id":"src/components/layout/MemberList.tsx:135:18","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"135","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%20text-left%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-1.5","data-matrix-id":"src/components/layout/MemberList.tsx:136:20","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"136","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1.5%22%7D",children:[m.jsx("span",{className:"text-sm font-medium text-gray-200 truncate group-hover:text-white transition-colors","data-matrix-id":"src/components/layout/MemberList.tsx:137:22","data-matrix-name":"span","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"137","data-component-file":"MemberList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-200%20truncate%20group-hover%3Atext-white%20transition-colors%22%7D",children:x.username||"Kullanc"}),C&&m.jsx(Hh,{className:"w-3.5 h-3.5 text-yellow-500 flex-shrink-0","data-matrix-id":"src/components/layout/MemberList.tsx:141:24","data-matrix-name":"Crown","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"141","data-component-file":"MemberList.tsx","data-component-name":"Crown","data-component-content":"%7B%22className%22%3A%22w-3.5%20h-3.5%20text-yellow-500%20flex-shrink-0%22%7D"})]}),m.jsx("div",{className:"text-xs text-gray-500 truncate","data-matrix-id":"src/components/layout/MemberList.tsx:144:20","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"144","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%20truncate%22%7D",children:C?"Sunucu Sahibi":"ye"})]})]},x.id)})})]})}),m.jsx("div",{className:"px-4 py-3 border-t border-gray-800/50 bg-gray-900/50","data-matrix-id":"src/components/layout/MemberList.tsx:159:6","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"159","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-4%20py-3%20border-t%20border-gray-800%2F50%20bg-gray-900%2F50%22%7D",children:m.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500","data-matrix-id":"src/components/layout/MemberList.tsx:160:8","data-matrix-name":"div","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"160","data-component-file":"MemberList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%20text-gray-500%22%7D",children:[m.jsx(wa,{className:"w-3.5 h-3.5","data-matrix-id":"src/components/layout/MemberList.tsx:161:10","data-matrix-name":"User","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"161","data-component-file":"MemberList.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-3.5%20h-3.5%22%7D"}),m.jsxs("span",{"data-matrix-id":"src/components/layout/MemberList.tsx:162:10","data-matrix-name":"span","data-component-path":"src/components/layout/MemberList.tsx","data-component-line":"162","data-component-file":"MemberList.tsx","data-component-name":"span",children:[t.length," ye evrimii"]})]})})]})}function rb({isOpen:r,onClose:t,onServerCreated:a}){const[o,l]=_.useState("choose"),[i,d]=_.useState(""),[u,h]=_.useState(""),[x,C]=_.useState(!1),{user:S}=Tt();if(Kp(),!r)return null;const A=()=>{l("choose"),d(""),h(""),t()};async function D(E){if(E.preventDefault(),!(!i.trim()||!S||x)){C(!0);try{const{data:w,error:b}=await ne.from("servers").insert({name:i.trim(),owner_id:S.id,is_public:!1}).select().single();if(b)throw b;const{error:k}=await ne.from("server_users").insert({user_id:S.id,server_id:w.id});if(k)throw k;const{error:j}=await ne.from("channels").insert({name:"genel",server_id:w.id,is_voice:!1});if(j)throw j;d(""),a(),A()}catch(w){console.error("Error creating server:",w),alert("Sunucu oluturulurken bir hata olutu")}finally{C(!1)}}}async function y(E){if(E.preventDefault(),!(!u.trim()||!S||x)){C(!0);try{const w=u.trim().toUpperCase(),{data:b,error:k}=await ne.from("server_invites").select("*, server:servers(*)").eq("invite_code",w).maybeSingle();if(k){console.error("Invite query error:",k),alert("Davet kodu aranrken hata olutu. Ltfen tekrar deneyin."),C(!1);return}if(!b){alert("Geersiz davet kodu. Ltfen kodu kontrol edin."),C(!1);return}if(b.expires_at&&new Date(b.expires_at)<new Date){alert("Bu davet kodunun sresi dolmu. Yeni bir davet kodu isteyin."),C(!1);return}const{data:j,error:I}=await ne.from("server_users").select("*").eq("server_id",b.server_id).eq("user_id",S.id).maybeSingle();if(I&&console.error("Member check error:",I),j){alert("Bu sunucuya zaten yesiniz."),C(!1);return}const{error:O}=await ne.from("server_users").insert({user_id:S.id,server_id:b.server_id});if(O)throw console.error("Join error:",O),new Error("Sunucuya katlrken hata olutu: "+O.message);await ne.from("server_invites").update({uses:(b.uses||0)+1}).eq("id",b.id),h(""),a(),A(),alert(`${b.server.name} sunucusuna baaryla katldnz!`)}catch(w){console.error("Error joining server:",w);const b=w instanceof Error?w.message:"Bilinmeyen hata";alert("Sunucuya katlrken bir hata olutu: "+b)}finally{C(!1)}}}return m.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-sm","data-matrix-id":"src/components/modals/CreateServerModal.tsx:169:4","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"169","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F60%20flex%20items-center%20justify-center%20p-4%20z-50%20backdrop-blur-sm%22%7D",children:m.jsxs("div",{className:"bg-gray-700 rounded-lg w-full max-w-md shadow-glow-lg animate-fade-in","data-matrix-id":"src/components/modals/CreateServerModal.tsx:170:6","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"170","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-700%20rounded-lg%20w-full%20max-w-md%20shadow-glow-lg%20animate-fade-in%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200","data-matrix-id":"src/components/modals/CreateServerModal.tsx:172:8","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"172","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20px-6%20py-4%20border-b%20border-gray-200%22%7D",children:[m.jsxs("h2",{className:"text-2xl font-semibold text-white","data-matrix-id":"src/components/modals/CreateServerModal.tsx:173:10","data-matrix-name":"h2","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"173","data-component-file":"CreateServerModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-semibold%20text-white%22%7D",children:[o==="choose"&&"Sunucu Ekle",o==="create"&&"Sunucu Olutur",o==="join"&&"Sunucuya Katl"]}),m.jsx("button",{onClick:A,className:"p-1 hover:bg-gray-600 rounded transition-colors","data-matrix-id":"src/components/modals/CreateServerModal.tsx:178:10","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"178","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-600%20rounded%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-5 h-5 text-neutral-600","data-matrix-id":"src/components/modals/CreateServerModal.tsx:182:12","data-matrix-name":"X","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"182","data-component-file":"CreateServerModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-600%22%7D"})})]}),m.jsxs("div",{className:"p-6","data-matrix-id":"src/components/modals/CreateServerModal.tsx:187:8","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"187","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%22%7D",children:[o==="choose"&&m.jsxs("div",{className:"space-y-3","data-matrix-id":"src/components/modals/CreateServerModal.tsx:190:12","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"190","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:[m.jsxs("button",{onClick:()=>l("create"),className:"w-full p-4 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-all hover:shadow-glow flex items-center justify-between group","data-matrix-id":"src/components/modals/CreateServerModal.tsx:191:14","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"191","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20p-4%20bg-primary-500%20hover%3Abg-primary-600%20text-white%20rounded-lg%20transition-all%20hover%3Ashadow-glow%20flex%20items-center%20justify-between%20group%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/modals/CreateServerModal.tsx:195:16","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"195","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[m.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center","data-matrix-id":"src/components/modals/CreateServerModal.tsx:196:18","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"196","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F20%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx(Xa,{className:"w-6 h-6","data-matrix-id":"src/components/modals/CreateServerModal.tsx:197:20","data-matrix-name":"Plus","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"197","data-component-file":"CreateServerModal.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"})}),m.jsxs("div",{className:"text-left","data-matrix-id":"src/components/modals/CreateServerModal.tsx:199:18","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"199","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-left%22%7D",children:[m.jsx("h3",{className:"font-semibold text-lg","data-matrix-id":"src/components/modals/CreateServerModal.tsx:200:20","data-matrix-name":"h3","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"200","data-component-file":"CreateServerModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-lg%22%7D",children:"Sunucu Yarat"}),m.jsx("p",{className:"text-sm text-white/80","data-matrix-id":"src/components/modals/CreateServerModal.tsx:201:20","data-matrix-name":"p","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"201","data-component-file":"CreateServerModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-white%2F80%22%7D",children:"Kendi sunucunu olutur"})]})]}),m.jsx(Bc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform","data-matrix-id":"src/components/modals/CreateServerModal.tsx:204:16","data-matrix-name":"ArrowRight","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"204","data-component-file":"CreateServerModal.tsx","data-component-name":"ArrowRight","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20group-hover%3Atranslate-x-1%20transition-transform%22%7D"})]}),m.jsxs("button",{onClick:()=>l("join"),className:"w-full p-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors flex items-center justify-between group","data-matrix-id":"src/components/modals/CreateServerModal.tsx:207:14","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"207","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20p-4%20bg-gray-800%20hover%3Abg-gray-700%20text-white%20rounded-lg%20transition-colors%20flex%20items-center%20justify-between%20group%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/modals/CreateServerModal.tsx:211:16","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"211","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[m.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center","data-matrix-id":"src/components/modals/CreateServerModal.tsx:212:18","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"212","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20bg-white%2F10%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx(Bc,{className:"w-6 h-6","data-matrix-id":"src/components/modals/CreateServerModal.tsx:213:20","data-matrix-name":"ArrowRight","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"213","data-component-file":"CreateServerModal.tsx","data-component-name":"ArrowRight","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"})}),m.jsxs("div",{className:"text-left","data-matrix-id":"src/components/modals/CreateServerModal.tsx:215:18","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"215","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-left%22%7D",children:[m.jsx("h3",{className:"font-semibold text-lg","data-matrix-id":"src/components/modals/CreateServerModal.tsx:216:20","data-matrix-name":"h3","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"216","data-component-file":"CreateServerModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-lg%22%7D",children:"Sunucuya Katl"}),m.jsx("p",{className:"text-sm text-white/70","data-matrix-id":"src/components/modals/CreateServerModal.tsx:217:20","data-matrix-name":"p","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"217","data-component-file":"CreateServerModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-white%2F70%22%7D",children:"Davet kodu ile katl"})]})]}),m.jsx(Bc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform","data-matrix-id":"src/components/modals/CreateServerModal.tsx:220:16","data-matrix-name":"ArrowRight","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"220","data-component-file":"CreateServerModal.tsx","data-component-name":"ArrowRight","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20group-hover%3Atranslate-x-1%20transition-transform%22%7D"})]})]}),o==="create"&&m.jsxs("form",{onSubmit:D,className:"space-y-4","data-matrix-id":"src/components/modals/CreateServerModal.tsx:227:12","data-matrix-name":"form","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"227","data-component-file":"CreateServerModal.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[m.jsx("div",{className:"text-center mb-6","data-matrix-id":"src/components/modals/CreateServerModal.tsx:228:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"228","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-6%22%7D",children:m.jsx("p",{className:"text-neutral-600 text-sm","data-matrix-id":"src/components/modals/CreateServerModal.tsx:229:16","data-matrix-name":"p","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"229","data-component-file":"CreateServerModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20text-sm%22%7D",children:"Sunucuna bir isim ver ve arkadalarn davet et"})}),m.jsxs("div",{"data-matrix-id":"src/components/modals/CreateServerModal.tsx:234:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"234","data-component-file":"CreateServerModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/modals/CreateServerModal.tsx:235:16","data-matrix-name":"label","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"235","data-component-file":"CreateServerModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"Sunucu Ad"}),m.jsx("input",{type:"text",value:i,onChange:E=>d(E.target.value),className:"w-full bg-gray-800 border border-transparent rounded px-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all",placeholder:"Benim Muhteem Sunucum",required:!0,autoFocus:!0,"data-matrix-id":"src/components/modals/CreateServerModal.tsx:238:16","data-matrix-name":"input","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"238","data-component-file":"CreateServerModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20px-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%22%2C%22placeholder%22%3A%22Benim%20Muhte%C5%9Fem%20Sunucum%22%2C%22required%22%3Atrue%2C%22autoFocus%22%3Atrue%7D"})]}),m.jsxs("div",{className:"flex gap-3 pt-4","data-matrix-id":"src/components/modals/CreateServerModal.tsx:249:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"249","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D",children:[m.jsx("button",{type:"button",onClick:()=>l("choose"),className:"flex-1 px-4 py-2.5 rounded bg-gray-600 text-gray-200 font-medium hover:bg-gray-300 transition-colors","data-matrix-id":"src/components/modals/CreateServerModal.tsx:250:16","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"250","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2.5%20rounded%20bg-gray-600%20text-gray-200%20font-medium%20hover%3Abg-gray-300%20transition-colors%22%7D",children:"Geri"}),m.jsx("button",{type:"submit",disabled:!i.trim()||x,className:"flex-1 px-4 py-2.5 rounded bg-primary-500 text-white font-medium hover:bg-primary-700 hover:shadow-glow disabled:opacity-50 disabled:cursor-not-allowed transition-all","data-matrix-id":"src/components/modals/CreateServerModal.tsx:257:16","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"257","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2.5%20rounded%20bg-primary-500%20text-white%20font-medium%20hover%3Abg-primary-700%20hover%3Ashadow-glow%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20transition-all%22%7D",children:x?"Oluturuluyor...":"Olutur"})]})]}),o==="join"&&m.jsxs("form",{onSubmit:y,className:"space-y-4","data-matrix-id":"src/components/modals/CreateServerModal.tsx:270:12","data-matrix-name":"form","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"270","data-component-file":"CreateServerModal.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[m.jsx("div",{className:"text-center mb-6","data-matrix-id":"src/components/modals/CreateServerModal.tsx:271:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"271","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-6%22%7D",children:m.jsx("p",{className:"text-neutral-600 text-sm","data-matrix-id":"src/components/modals/CreateServerModal.tsx:272:16","data-matrix-name":"p","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"272","data-component-file":"CreateServerModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20text-sm%22%7D",children:"Bir sunucuya katlmak iin davet kodunu gir"})}),m.jsxs("div",{"data-matrix-id":"src/components/modals/CreateServerModal.tsx:277:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"277","data-component-file":"CreateServerModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/modals/CreateServerModal.tsx:278:16","data-matrix-name":"label","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"278","data-component-file":"CreateServerModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"Davet Kodu"}),m.jsx("input",{type:"text",value:u,onChange:E=>h(E.target.value),className:"w-full bg-gray-800 border border-transparent rounded px-4 py-3 text-white focus:border-primary-500 focus:shadow-glow-sm focus:outline-none transition-all uppercase",placeholder:"ABC123DEF",required:!0,autoFocus:!0,"data-matrix-id":"src/components/modals/CreateServerModal.tsx:281:16","data-matrix-name":"input","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"281","data-component-file":"CreateServerModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-transparent%20rounded%20px-4%20py-3%20text-white%20focus%3Aborder-primary-500%20focus%3Ashadow-glow-sm%20focus%3Aoutline-none%20transition-all%20uppercase%22%2C%22placeholder%22%3A%22ABC123DEF%22%2C%22required%22%3Atrue%2C%22autoFocus%22%3Atrue%7D"}),m.jsx("p",{className:"text-xs text-neutral-500 mt-2","data-matrix-id":"src/components/modals/CreateServerModal.tsx:290:16","data-matrix-name":"p","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"290","data-component-file":"CreateServerModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-neutral-500%20mt-2%22%7D",children:"Davet kodlar genellikle yle grnr: ABC123DEF"})]}),m.jsxs("div",{className:"flex gap-3 pt-4","data-matrix-id":"src/components/modals/CreateServerModal.tsx:295:14","data-matrix-name":"div","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"295","data-component-file":"CreateServerModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%20pt-4%22%7D",children:[m.jsx("button",{type:"button",onClick:()=>l("choose"),className:"flex-1 px-4 py-2.5 rounded bg-gray-600 text-gray-200 font-medium hover:bg-gray-300 transition-colors","data-matrix-id":"src/components/modals/CreateServerModal.tsx:296:16","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"296","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2.5%20rounded%20bg-gray-600%20text-gray-200%20font-medium%20hover%3Abg-gray-300%20transition-colors%22%7D",children:"Geri"}),m.jsx("button",{type:"submit",disabled:!u.trim()||x,className:"flex-1 px-4 py-2.5 rounded bg-primary-500 text-white font-medium hover:bg-primary-700 hover:shadow-glow disabled:opacity-50 disabled:cursor-not-allowed transition-all","data-matrix-id":"src/components/modals/CreateServerModal.tsx:303:16","data-matrix-name":"button","data-component-path":"src/components/modals/CreateServerModal.tsx","data-component-line":"303","data-component-file":"CreateServerModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2.5%20rounded%20bg-primary-500%20text-white%20font-medium%20hover%3Abg-primary-700%20hover%3Ashadow-glow%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20transition-all%22%7D",children:x?"Katlnyor...":"Katl"})]})]})]})]})})}const sb=({isOpen:r,onClose:t,serverId:a,onChannelCreated:o})=>{const{user:l}=Tt(),[i,d]=_.useState(""),[u,h]=_.useState("text"),[x,C]=_.useState(!1),[S,A]=_.useState(!1);if(!r)return null;const D=async y=>{if(y.preventDefault(),!(!i.trim()||!l||S)){A(!0);try{const{error:E}=await ne.from("channels").insert({name:i.trim(),server_id:a,is_voice:u==="voice",is_owner_only:x});if(E)throw E;d(""),h("text"),C(!1),t(),o&&o()}catch(E){console.error("Error creating channel:",E),alert("Kanal oluturulurken bir hata olutu")}finally{A(!1)}}};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:63:4","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"63","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%20bg-opacity-50%20flex%20items-center%20justify-center%20z-50%22%7D",children:m.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-96 max-w-md mx-4","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:64:6","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"64","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-900%20rounded-lg%20p-6%20w-96%20max-w-md%20mx-4%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:66:8","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"66","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-4%22%7D",children:[m.jsx("h2",{className:"text-xl font-semibold text-white","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:67:10","data-matrix-name":"h2","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"67","data-component-file":"CreateChannelModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%22%7D",children:"Kanal Olutur"}),m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:68:10","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"68","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-white%20transition-colors%22%7D",children:m.jsx(Yt,{size:20,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:72:12","data-matrix-name":"X","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"72","data-component-file":"CreateChannelModal.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A20%7D"})})]}),m.jsxs("form",{onSubmit:D,className:"space-y-4","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:77:8","data-matrix-name":"form","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"77","data-component-file":"CreateChannelModal.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:79:10","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"79","data-component-file":"CreateChannelModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:80:12","data-matrix-name":"label","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"80","data-component-file":"CreateChannelModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-300%20mb-2%22%7D",children:"Kanal Tr"}),m.jsxs("div",{className:"flex space-x-2","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:83:12","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"83","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-2%22%7D",children:[m.jsxs("button",{type:"button",onClick:()=>h("text"),className:`flex-1 flex items-center justify-center py-2 px-3 rounded transition-colors ${u==="text"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:84:14","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"84","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(jn,{size:16,className:"mr-2","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:93:16","data-matrix-name":"Hash","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"93","data-component-file":"CreateChannelModal.tsx","data-component-name":"Hash","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22mr-2%22%7D"}),"Metin Kanal"]}),m.jsxs("button",{type:"button",onClick:()=>h("voice"),className:`flex-1 flex items-center justify-center py-2 px-3 rounded transition-colors ${u==="voice"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:96:14","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"96","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(Vr,{size:16,className:"mr-2","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:105:16","data-matrix-name":"Volume2","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"105","data-component-file":"CreateChannelModal.tsx","data-component-name":"Volume2","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22mr-2%22%7D"}),"Ses Kanal"]})]})]}),m.jsxs("div",{"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:112:10","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"112","data-component-file":"CreateChannelModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:113:12","data-matrix-name":"label","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"113","data-component-file":"CreateChannelModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-300%20mb-2%22%7D",children:"Kanal Ad"}),m.jsx("input",{type:"text",value:i,onChange:y=>d(y.target.value),placeholder:u==="text"?"yeni-kanal":"ses-kanal",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",maxLength:100,required:!0,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:116:12","data-matrix-name":"input","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"116","data-component-file":"CreateChannelModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22%5BConditionalExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-gray-600%20rounded%20px-3%20py-2%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%20focus%3Aborder-blue-500%22%2C%22maxLength%22%3A100%2C%22required%22%3Atrue%7D"}),m.jsxs("p",{className:"text-xs text-gray-400 mt-1","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:127:12","data-matrix-name":"p","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"127","data-component-file":"CreateChannelModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%20mt-1%22%7D",children:[i.length,"/100 karakter"]})]}),m.jsxs("div",{className:"flex items-center justify-between","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:133:10","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"133","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:134:12","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"134","data-component-file":"CreateChannelModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"text-sm font-medium text-gray-300","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:135:14","data-matrix-name":"label","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"135","data-component-file":"CreateChannelModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-300%22%7D",children:"zel Kanal"}),m.jsx("p",{className:"text-xs text-gray-400","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:138:14","data-matrix-name":"p","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"138","data-component-file":"CreateChannelModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:"Sadece yetkili kullanclar grebilir"})]}),m.jsx("button",{type:"button",onClick:()=>C(!x),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x?"bg-blue-600":"bg-gray-600"}`,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:142:12","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"142","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${x?"translate-x-6":"translate-x-1"}`,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:149:14","data-matrix-name":"span","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"149","data-component-file":"CreateChannelModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"})})]}),m.jsxs("div",{className:"flex space-x-3 pt-4","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:158:10","data-matrix-name":"div","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"158","data-component-file":"CreateChannelModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-3%20pt-4%22%7D",children:[m.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors","data-matrix-id":"src/components/modals/CreateChannelModal.tsx:159:12","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"159","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20bg-gray-700%20hover%3Abg-gray-600%20text-white%20py-2%20px-4%20rounded%20transition-colors%22%7D",children:"ptal"}),m.jsx("button",{type:"submit",disabled:!i.trim()||S,className:`flex-1 py-2 px-4 rounded transition-colors ${i.trim()&&!S?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,"data-matrix-id":"src/components/modals/CreateChannelModal.tsx:166:12","data-matrix-name":"button","data-component-path":"src/components/modals/CreateChannelModal.tsx","data-component-line":"166","data-component-file":"CreateChannelModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:S?"Oluturuluyor...":"Kanal Olutur"})]})]})]})})};function ib({isOpen:r,onClose:t}){const{profile:a,signOut:o}=Tt(),[l,i]=_.useState("profile");if(!r)return null;async function d(){await o(),t()}return m.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-sm","data-matrix-id":"src/components/modals/SettingsModal.tsx:22:4","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"22","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F60%20flex%20items-center%20justify-center%20p-4%20z-50%20backdrop-blur-sm%22%7D",children:m.jsxs("div",{className:"bg-gray-700 rounded-lg w-full max-w-4xl h-[600px] shadow-glow-lg animate-fade-in flex","data-matrix-id":"src/components/modals/SettingsModal.tsx:23:6","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"23","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-700%20rounded-lg%20w-full%20max-w-4xl%20h-%5B600px%5D%20shadow-glow-lg%20animate-fade-in%20flex%22%7D",children:[m.jsxs("div",{className:"w-56 bg-gray-800 p-4 border-r border-neutral-200 rounded-l-lg","data-matrix-id":"src/components/modals/SettingsModal.tsx:25:8","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"25","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-56%20bg-gray-800%20p-4%20border-r%20border-neutral-200%20rounded-l-lg%22%7D",children:[m.jsxs("div",{className:"space-y-1","data-matrix-id":"src/components/modals/SettingsModal.tsx:26:10","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"26","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%22%7D",children:[m.jsx("button",{onClick:()=>i("profile"),className:`w-full px-3 py-2 text-left rounded transition-colors ${l==="profile"?"bg-primary-500/10 text-primary-500":"text-gray-200 hover:bg-gray-700"}`,"data-matrix-id":"src/components/modals/SettingsModal.tsx:27:12","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"27","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Profil"}),m.jsx("button",{onClick:()=>i("account"),className:`w-full px-3 py-2 text-left rounded transition-colors ${l==="account"?"bg-primary-500/10 text-primary-500":"text-gray-200 hover:bg-gray-700"}`,"data-matrix-id":"src/components/modals/SettingsModal.tsx:37:12","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"37","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Hesap"})]}),m.jsx("div",{className:"mt-auto pt-8","data-matrix-id":"src/components/modals/SettingsModal.tsx:49:10","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"49","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-auto%20pt-8%22%7D",children:m.jsxs("button",{onClick:d,className:"w-full px-3 py-2 text-left text-error hover:bg-error/10 rounded transition-colors flex items-center gap-2","data-matrix-id":"src/components/modals/SettingsModal.tsx:50:12","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"50","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20px-3%20py-2%20text-left%20text-error%20hover%3Abg-error%2F10%20rounded%20transition-colors%20flex%20items-center%20gap-2%22%7D",children:[m.jsx(zy,{className:"w-4 h-4","data-matrix-id":"src/components/modals/SettingsModal.tsx:54:14","data-matrix-name":"LogOut","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"54","data-component-file":"SettingsModal.tsx","data-component-name":"LogOut","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),"k Yap"]})})]}),m.jsxs("div",{className:"flex-1 flex flex-col","data-matrix-id":"src/components/modals/SettingsModal.tsx:61:8","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"61","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20flex-col%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-neutral-200","data-matrix-id":"src/components/modals/SettingsModal.tsx:62:10","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"62","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20px-6%20py-4%20border-b%20border-neutral-200%22%7D",children:[m.jsx("h2",{className:"text-2xl font-semibold text-white","data-matrix-id":"src/components/modals/SettingsModal.tsx:63:12","data-matrix-name":"h2","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"63","data-component-file":"SettingsModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-semibold%20text-white%22%7D",children:l==="profile"?"Profil":"Hesap"}),m.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-600 rounded transition-colors","data-matrix-id":"src/components/modals/SettingsModal.tsx:66:12","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"66","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-600%20rounded%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-5 h-5 text-neutral-600","data-matrix-id":"src/components/modals/SettingsModal.tsx:70:14","data-matrix-name":"X","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"70","data-component-file":"SettingsModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-neutral-600%22%7D"})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-6","data-matrix-id":"src/components/modals/SettingsModal.tsx:74:10","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"74","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20p-6%22%7D",children:[l==="profile"&&m.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/modals/SettingsModal.tsx:76:14","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"76","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-4","data-matrix-id":"src/components/modals/SettingsModal.tsx:77:16","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"77","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-primary-500 flex items-center justify-center","data-matrix-id":"src/components/modals/SettingsModal.tsx:78:18","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"78","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-20%20h-20%20rounded-full%20bg-primary-500%20flex%20items-center%20justify-center%22%7D",children:a!=null&&a.profile_image_url?m.jsx("img",{src:a.profile_image_url,alt:"",className:"w-full h-full rounded-full object-cover","data-matrix-id":"src/components/modals/SettingsModal.tsx:80:22","data-matrix-name":"img","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"80","data-component-file":"SettingsModal.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%22%2C%22className%22%3A%22w-full%20h-full%20rounded-full%20object-cover%22%7D"}):m.jsx(wa,{className:"w-10 h-10 text-white","data-matrix-id":"src/components/modals/SettingsModal.tsx:86:22","data-matrix-name":"User","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"86","data-component-file":"SettingsModal.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20text-white%22%7D"})}),m.jsx("div",{"data-matrix-id":"src/components/modals/SettingsModal.tsx:89:18","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"89","data-component-file":"SettingsModal.tsx","data-component-name":"div",children:m.jsx("button",{className:"px-4 py-2 bg-primary-500 text-white rounded hover:bg-primary-700 transition-colors","data-matrix-id":"src/components/modals/SettingsModal.tsx:90:20","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"90","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22px-4%20py-2%20bg-primary-500%20text-white%20rounded%20hover%3Abg-primary-700%20transition-colors%22%7D",children:"Avatar Deitir"})})]}),m.jsxs("div",{"data-matrix-id":"src/components/modals/SettingsModal.tsx:96:16","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"96","data-component-file":"SettingsModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/modals/SettingsModal.tsx:97:18","data-matrix-name":"label","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"97","data-component-file":"SettingsModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"Kullanc Ad"}),m.jsx("input",{type:"text",value:(a==null?void 0:a.username)||"",readOnly:!0,className:"w-full bg-gray-800 border border-neutral-200 rounded px-4 py-3 text-white","data-matrix-id":"src/components/modals/SettingsModal.tsx:100:18","data-matrix-name":"input","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"100","data-component-file":"SettingsModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BLogicalExpression%5D%22%2C%22readOnly%22%3Atrue%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-neutral-200%20rounded%20px-4%20py-3%20text-white%22%7D"})]}),m.jsxs("div",{"data-matrix-id":"src/components/modals/SettingsModal.tsx:108:16","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"108","data-component-file":"SettingsModal.tsx","data-component-name":"div",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2","data-matrix-id":"src/components/modals/SettingsModal.tsx:109:18","data-matrix-name":"label","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"109","data-component-file":"SettingsModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-200%20mb-2%22%7D",children:"E-posta"}),m.jsx("input",{type:"email",value:(a==null?void 0:a.email)||"",readOnly:!0,className:"w-full bg-gray-800 border border-neutral-200 rounded px-4 py-3 text-white","data-matrix-id":"src/components/modals/SettingsModal.tsx:112:18","data-matrix-name":"input","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"112","data-component-file":"SettingsModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22email%22%2C%22value%22%3A%22%5BLogicalExpression%5D%22%2C%22readOnly%22%3Atrue%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-neutral-200%20rounded%20px-4%20py-3%20text-white%22%7D"})]})]}),l==="account"&&m.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/modals/SettingsModal.tsx:123:14","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"123","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/SettingsModal.tsx:124:16","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"124","data-component-file":"SettingsModal.tsx","data-component-name":"div",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-2","data-matrix-id":"src/components/modals/SettingsModal.tsx:125:18","data-matrix-name":"h3","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"125","data-component-file":"SettingsModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-white%20mb-2%22%7D",children:"Hesap Bilgileri"}),m.jsxs("p",{className:"text-neutral-600 mb-4","data-matrix-id":"src/components/modals/SettingsModal.tsx:126:18","data-matrix-name":"p","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"126","data-component-file":"SettingsModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20mb-4%22%7D",children:["Hesabnz ",new Date((a==null?void 0:a.created_at)||"").toLocaleDateString("tr-TR")," tarihinde oluturuldu."]})]}),m.jsxs("div",{className:"pt-6 border-t border-neutral-200","data-matrix-id":"src/components/modals/SettingsModal.tsx:131:16","data-matrix-name":"div","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"131","data-component-file":"SettingsModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pt-6%20border-t%20border-neutral-200%22%7D",children:[m.jsx("h3",{className:"text-lg font-semibold text-error mb-2","data-matrix-id":"src/components/modals/SettingsModal.tsx:132:18","data-matrix-name":"h3","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"132","data-component-file":"SettingsModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-error%20mb-2%22%7D",children:"Tehlikeli Blge"}),m.jsx("p",{className:"text-neutral-600 mb-4","data-matrix-id":"src/components/modals/SettingsModal.tsx:133:18","data-matrix-name":"p","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"133","data-component-file":"SettingsModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-600%20mb-4%22%7D",children:"Bu ilemler geri alnamaz. Ltfen dikkatli olun."}),m.jsx("button",{className:"px-4 py-2 bg-error text-white rounded hover:bg-error/90 transition-colors","data-matrix-id":"src/components/modals/SettingsModal.tsx:136:18","data-matrix-name":"button","data-component-path":"src/components/modals/SettingsModal.tsx","data-component-line":"136","data-component-file":"SettingsModal.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22px-4%20py-2%20bg-error%20text-white%20rounded%20hover%3Abg-error%2F90%20transition-colors%22%7D",children:"Hesab Sil"})]})]})]})]})]})})}function lb({isOpen:r,onClose:t,serverId:a,serverName:o}){const{user:l}=Tt(),[i,d]=_.useState([]),[u,h]=_.useState(!1),[x,C]=_.useState(null);_.useEffect(()=>{r&&a&&S()},[r,a]);async function S(){const{data:w,error:b}=await ne.from("server_invites").select("*").eq("server_id",a).eq("is_active",!0).order("created_at",{ascending:!1});w&&!b&&d(w)}async function A(w,b){if(!l)return;h(!0);const k=y(),j=w?new Date(Date.now()+w*24*60*60*1e3).toISOString():null,{data:I,error:O}=await ne.from("server_invites").insert({server_id:a,invite_code:k,created_by:l.id,expires_at:j,max_uses:b||null,uses:0,is_active:!0}).select().single();!O&&I&&d([I,...i]),h(!1)}async function D(w){const{error:b}=await ne.from("server_invites").delete().eq("id",w);b||d(i.filter(k=>k.id!==w))}function y(){const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let b="";for(let k=0;k<8;k++)b+=w.charAt(Math.floor(Math.random()*w.length));return b}async function E(w){const b=`${window.location.origin}/invite/${w}`;await navigator.clipboard.writeText(b),C(w),setTimeout(()=>C(null),2e3)}return r?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:100:4","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"100","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20z-50%20flex%20items-center%20justify-center%20bg-black%2F70%22%7D",children:m.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-hidden flex flex-col","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:101:6","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"101","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-900%20rounded-lg%20w-full%20max-w-2xl%20max-h-%5B80vh%5D%20overflow-hidden%20flex%20flex-col%22%7D",children:[m.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:103:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"103","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20border-b%20border-gray-800%20flex%20items-center%20justify-between%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/ServerInviteModal.tsx:104:10","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"104","data-component-file":"ServerInviteModal.tsx","data-component-name":"div",children:[m.jsx("h2",{className:"text-2xl font-bold text-white","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:105:12","data-matrix-name":"h2","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"105","data-component-file":"ServerInviteModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%22%7D",children:"Sunucu Davetleri"}),m.jsx("p",{className:"text-sm text-gray-400 mt-1","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:106:12","data-matrix-name":"p","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"106","data-component-file":"ServerInviteModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%20mt-1%22%7D",children:o})]}),m.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:108:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"108","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-2%20hover%3Abg-gray-800%20rounded-lg%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-5 h-5 text-gray-400","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:112:12","data-matrix-name":"X","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"112","data-component-file":"ServerInviteModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%22%7D"})})]}),m.jsxs("div",{className:"p-6 border-b border-gray-800","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:117:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"117","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20border-b%20border-gray-800%22%7D",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-3","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:118:10","data-matrix-name":"h3","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"118","data-component-file":"ServerInviteModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-gray-400%20uppercase%20mb-3%22%7D",children:"Hzl Davet Olutur"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:121:10","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"121","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-2%20gap-3%22%7D",children:[m.jsxs("button",{onClick:()=>A(),disabled:u,className:"p-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:122:12","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"122","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-4%20bg-blue-600%20hover%3Abg-blue-700%20disabled%3Abg-blue-800%20disabled%3Acursor-not-allowed%20text-white%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[m.jsx(Xa,{className:"w-5 h-5","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:127:14","data-matrix-name":"Plus","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"127","data-component-file":"ServerInviteModal.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Snrsz Davet"]}),m.jsxs("button",{onClick:()=>A(7,10),disabled:u,className:"p-4 bg-green-600 hover:bg-green-700 disabled:bg-green-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:130:12","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"130","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-4%20bg-green-600%20hover%3Abg-green-700%20disabled%3Abg-green-800%20disabled%3Acursor-not-allowed%20text-white%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[m.jsx(Xa,{className:"w-5 h-5","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:135:14","data-matrix-name":"Plus","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"135","data-component-file":"ServerInviteModal.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"7 Gn, 10 Kullanm"]})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-6","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:142:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"142","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20p-6%22%7D",children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-3","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:143:10","data-matrix-name":"h3","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"143","data-component-file":"ServerInviteModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-gray-400%20uppercase%20mb-3%22%7D",children:["Mevcut Davetler (",i.length,")"]}),m.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:146:10","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"146","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:i.length===0?m.jsxs("div",{className:"text-center py-8 text-neutral-500","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:148:14","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"148","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%20text-neutral-500%22%7D",children:[m.jsx($y,{className:"w-12 h-12 mx-auto mb-2 opacity-50","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:149:16","data-matrix-name":"LinkIcon","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"149","data-component-file":"ServerInviteModal.tsx","data-component-name":"LinkIcon","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20mx-auto%20mb-2%20opacity-50%22%7D"}),m.jsx("p",{"data-matrix-id":"src/components/modals/ServerInviteModal.tsx:150:16","data-matrix-name":"p","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"150","data-component-file":"ServerInviteModal.tsx","data-component-name":"p",children:"Henz davet oluturulmam"})]}):i.map(w=>{const b=w.expires_at&&new Date(w.expires_at)<new Date,k=w.max_uses&&w.uses>=w.max_uses;return m.jsx("div",{className:`p-4 rounded-lg border ${b||k?"bg-gray-950 border-gray-800 opacity-60":"bg-gray-800 border-gray-700"}`,"data-matrix-id":"src/components/modals/ServerInviteModal.tsx:158:18","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"158","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsxs("div",{className:"flex items-start justify-between gap-4","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:166:20","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"166","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20justify-between%20gap-4%22%7D",children:[m.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:167:22","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"167","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:168:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"168","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20mb-2%22%7D",children:[m.jsx("code",{className:"text-sm font-mono text-blue-400 bg-gray-950 px-2 py-1 rounded","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:169:26","data-matrix-name":"code","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"169","data-component-file":"ServerInviteModal.tsx","data-component-name":"code","data-component-content":"%7B%22className%22%3A%22text-sm%20font-mono%20text-blue-400%20bg-gray-950%20px-2%20py-1%20rounded%22%7D",children:w.invite_code}),(b||k)&&m.jsx("span",{className:"text-xs text-red-400 font-semibold","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:173:28","data-matrix-name":"span","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"173","data-component-file":"ServerInviteModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-red-400%20font-semibold%22%7D",children:b?"Sresi Dolmu":"Kullanm Limiti Doldu"})]}),m.jsxs("div",{className:"text-sm text-gray-400 space-y-1","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:178:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"178","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%20space-y-1%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/ServerInviteModal.tsx:179:26","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"179","data-component-file":"ServerInviteModal.tsx","data-component-name":"div",children:["Kullanm: ",w.uses," / ",w.max_uses||""]}),w.expires_at&&m.jsxs("div",{"data-matrix-id":"src/components/modals/ServerInviteModal.tsx:183:28","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"183","data-component-file":"ServerInviteModal.tsx","data-component-name":"div",children:["Biti: ",new Date(w.expires_at).toLocaleString("tr-TR")]}),m.jsxs("div",{className:"text-xs text-neutral-500","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:187:26","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"187","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20text-neutral-500%22%7D",children:["Oluturuldu: ",new Date(w.created_at).toLocaleString("tr-TR")]})]})]}),m.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:192:22","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"192","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[m.jsx("button",{onClick:()=>E(w.invite_code),className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",title:"Davet Linkini Kopyala","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:193:24","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"193","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20bg-gray-700%20hover%3Abg-gray-600%20text-white%20rounded-lg%20transition-colors%22%2C%22title%22%3A%22Davet%20Linkini%20Kopyala%22%7D",children:x===w.invite_code?m.jsx(ji,{className:"w-4 h-4 text-green-400","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:199:28","data-matrix-name":"Check","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"199","data-component-file":"ServerInviteModal.tsx","data-component-name":"Check","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-green-400%22%7D"}):m.jsx(Fy,{className:"w-4 h-4","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:201:28","data-matrix-name":"Copy","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"201","data-component-file":"ServerInviteModal.tsx","data-component-name":"Copy","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})}),m.jsx("button",{onClick:()=>D(w.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Daveti Sil","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:204:24","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"204","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20bg-red-600%20hover%3Abg-red-700%20text-white%20rounded-lg%20transition-colors%22%2C%22title%22%3A%22Daveti%20Sil%22%7D",children:m.jsx(af,{className:"w-4 h-4","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:209:26","data-matrix-name":"Trash2","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"209","data-component-file":"ServerInviteModal.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})})]})]})},w.id)})})]}),m.jsx("div",{className:"p-6 border-t border-gray-800","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:221:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"221","data-component-file":"ServerInviteModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20border-t%20border-gray-800%22%7D",children:m.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors","data-matrix-id":"src/components/modals/ServerInviteModal.tsx:222:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerInviteModal.tsx","data-component-line":"222","data-component-file":"ServerInviteModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-gray-800%20hover%3Abg-gray-700%20text-white%20rounded-lg%20transition-colors%22%7D",children:"Kapat"})})]})}):null}const Pt={CREATE_INSTANT_INVITE:1,KICK_MEMBERS:2,BAN_MEMBERS:4,MANAGE_ROLES:32,MANAGE_CHANNELS:16,MANAGE_SERVER:8,VIEW_AUDIT_LOG:128,CONNECT:1<<20,SPEAK:1<<21,MUTE_MEMBERS:1<<22,DEAFEN_MEMBERS:1<<23,MOVE_MEMBERS:1<<24,USE_VAD:1<<25,PRIORITY_SPEAKER:2048,STREAM:512},np={[Pt.CREATE_INSTANT_INVITE]:"Davet Olutur",[Pt.KICK_MEMBERS]:"yeleri At",[Pt.BAN_MEMBERS]:"yeleri Yasakla",[Pt.MANAGE_ROLES]:"Rolleri Ynet",[Pt.MANAGE_CHANNELS]:"Kanallar Ynet",[Pt.MANAGE_SERVER]:"Sunucuyu Ynet",[Pt.VIEW_AUDIT_LOG]:"Audit Gnln Grntle",[Pt.CONNECT]:"Balan",[Pt.SPEAK]:"Konu",[Pt.MUTE_MEMBERS]:"yeleri Sessize Al",[Pt.DEAFEN_MEMBERS]:"yeleri Sarlatr",[Pt.MOVE_MEMBERS]:"yeleri Ta",[Pt.USE_VAD]:"VAD Kullan",[Pt.PRIORITY_SPEAKER]:"ncelikli Konumac",[Pt.STREAM]:"Yayn Yap"};function cb({isOpen:r,onClose:t,serverId:a,serverName:o}){const{user:l}=Tt(),[i,d]=_.useState([]),[u,h]=_.useState([]),[x,C]=_.useState("roles"),[S,A]=_.useState(""),[D,y]=_.useState(!1),[E,w]=_.useState(!1),[b,k]=_.useState(!1),[j,I]=_.useState(null);_.useEffect(()=>{r&&a&&(F(),U(),O())},[r,a]);async function O(){if(!(!l||!a))try{const{data:fe}=await ne.from("servers").select("owner_id").eq("id",a).single();if((fe==null?void 0:fe.owner_id)===l.id){w(!0),k(!0);return}const{data:H}=await ne.from("server_users").select("id").eq("server_id",a).eq("user_id",l.id).single();if(H){const{data:J}=await ne.from("server_user_roles").select(`
            server_roles!inner(
              permissions
            )
          `).eq("server_user_id",H.id),re=J==null?void 0:J.some(z=>{var Z;return(((Z=z.server_roles)==null?void 0:Z.permissions)||0)&32});k(re||!1)}}catch(fe){console.error("[ServerRolesModal] Permission check failed:",fe)}}async function F(){const{data:fe,error:H}=await ne.from("server_roles").select("*").eq("server_id",a).order("position",{ascending:!1});fe&&!H&&d(fe)}async function U(){try{console.log("[ServerRolesModal] Loading members for server:",a);const{data:fe,error:H}=await ne.from("server_users").select("id, user_id").eq("server_id",a);if(H){console.error("[ServerRolesModal] Error loading server users:",H);return}if(!fe||fe.length===0){console.log("[ServerRolesModal] No members found in server"),h([]);return}console.log("[ServerRolesModal] Found",fe.length,"server users");const J=fe.map(q=>q.user_id),{data:re,error:z}=await ne.from("profiles").select("id, username").in("id",J);if(z){console.error("[ServerRolesModal] Error loading profiles:",z);return}console.log("[ServerRolesModal] Loaded",(re==null?void 0:re.length)||0,"profiles");const Z=fe.map(q=>q.id),{data:te,error:V}=await ne.from("server_user_roles").select("server_user_id, server_role_id").in("server_user_id",Z);V&&console.error("[ServerRolesModal] Error loading user roles:",V);const B=fe.map(q=>{const me=re==null?void 0:re.find(xe=>xe.id===q.user_id),he=(te==null?void 0:te.filter(xe=>xe.server_user_id===q.id).map(xe=>xe.server_role_id))||[];return{id:q.id,user_id:q.user_id,username:(me==null?void 0:me.username)||`User ${q.user_id.substring(0,8)}`,roles:he}});console.log("[ServerRolesModal] Combined members data:",B),h(B)}catch(fe){console.error("[ServerRolesModal] Exception in loadMembers:",fe)}}async function ce(){if(!S.trim()||!l||!b)return;y(!0);const fe=i.length>0?Math.max(...i.map(re=>re.position))+1:1,{data:H,error:J}=await ne.from("server_roles").insert({server_id:a,name:S.trim(),permissions:Pt.CONNECT|Pt.SPEAK,position:fe,color:null,hoist:!1,mentionable:!0}).select().single();H&&!J?(d(re=>[...re,H]),A(""),console.log("[ServerRolesModal] Role created successfully")):console.error("[ServerRolesModal] Failed to create role:",J),y(!1)}async function de(fe,H){if(b)try{const{error:J}=await ne.from("server_roles").update({permissions:H}).eq("id",fe);J||(d(re=>re.map(z=>z.id===fe?{...z,permissions:H}:z)),console.log("[ServerRolesModal] Role permissions updated"))}catch(J){console.error("[ServerRolesModal] Failed to update permissions:",J)}}async function ke(fe){if(!(!b||!confirm("Bu rol silmek istediinizden emin misiniz?")))try{const{error:H}=await ne.from("server_roles").delete().eq("id",fe);H||(d(J=>J.filter(re=>re.id!==fe)),console.log("[ServerRolesModal] Role deleted successfully"))}catch(H){console.error("[ServerRolesModal] Failed to delete role:",H)}}function Ne(fe,H){const J=fe.permissions&H?fe.permissions&~H:fe.permissions|H;de(fe.id,J)}async function ze(fe,H,J){J?await ne.from("server_user_roles").delete().eq("server_user_id",fe).eq("server_role_id",H):await ne.from("server_user_roles").insert({server_user_id:fe,server_role_id:H}),U()}return r?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:370:4","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"370","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20z-50%20flex%20items-center%20justify-center%20bg-black%2F70%22%7D",children:m.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:371:6","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"371","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-900%20rounded-lg%20w-full%20max-w-4xl%20max-h-%5B80vh%5D%20overflow-hidden%20flex%20flex-col%22%7D",children:[m.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:373:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"373","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20border-b%20border-gray-800%20flex%20items-center%20justify-between%22%7D",children:[m.jsxs("div",{"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:374:10","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"374","data-component-file":"ServerRolesModal.tsx","data-component-name":"div",children:[m.jsx("h2",{className:"text-2xl font-bold text-white","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:375:12","data-matrix-name":"h2","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"375","data-component-file":"ServerRolesModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%22%7D",children:"Sunucu Rolleri ve yeler"}),m.jsx("p",{className:"text-sm text-gray-400 mt-1","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:376:12","data-matrix-name":"p","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"376","data-component-file":"ServerRolesModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%20mt-1%22%7D",children:o})]}),m.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:378:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"378","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-2%20hover%3Abg-gray-800%20rounded-lg%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-5 h-5 text-gray-400","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:382:12","data-matrix-name":"X","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"382","data-component-file":"ServerRolesModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%22%7D"})})]}),m.jsxs("div",{className:"flex border-b border-gray-800","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:387:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"387","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20border-b%20border-gray-800%22%7D",children:[m.jsxs("button",{onClick:()=>C("roles"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 transition-colors ${x==="roles"?"bg-gray-800 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-850"}`,"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:388:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"388","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(gi,{className:"w-5 h-5","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:396:12","data-matrix-name":"Shield","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"396","data-component-file":"ServerRolesModal.tsx","data-component-name":"Shield","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Roller (",i.length,")"]}),m.jsxs("button",{onClick:()=>C("members"),className:`flex-1 py-3 px-4 flex items-center justify-center gap-2 transition-colors ${x==="members"?"bg-gray-800 text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white hover:bg-gray-850"}`,"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:399:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"399","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(Po,{className:"w-5 h-5","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:407:12","data-matrix-name":"UsersIcon","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"407","data-component-file":"ServerRolesModal.tsx","data-component-name":"UsersIcon","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"yeler (",u.length,")"]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-6","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:413:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"413","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20p-6%22%7D",children:x==="roles"?m.jsxs("div",{className:"space-y-4","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:415:12","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"415","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:417:14","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"417","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-800%20rounded-lg%20p-4%22%7D",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:418:16","data-matrix-name":"h3","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"418","data-component-file":"ServerRolesModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-gray-400%20uppercase%20mb-3%22%7D",children:"Yeni Rol Olutur"}),m.jsxs("div",{className:"flex gap-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:421:16","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"421","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:[m.jsx("input",{type:"text",value:S,onChange:fe=>A(fe.target.value),placeholder:"Rol ad...",className:"flex-1 px-3 py-2 bg-gray-900 text-white rounded-lg border border-gray-700 focus:border-blue-500 focus:outline-none",onKeyDown:fe=>fe.key==="Enter"&&ce(),"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:422:18","data-matrix-name":"input","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"422","data-component-file":"ServerRolesModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22Rol%20ad%C4%B1...%22%2C%22className%22%3A%22flex-1%20px-3%20py-2%20bg-gray-900%20text-white%20rounded-lg%20border%20border-gray-700%20focus%3Aborder-blue-500%20focus%3Aoutline-none%22%2C%22onKeyDown%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsxs("button",{onClick:ce,disabled:D||!S.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:430:18","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"430","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-blue-600%20hover%3Abg-blue-700%20disabled%3Abg-blue-800%20disabled%3Acursor-not-allowed%20text-white%20rounded-lg%20transition-colors%20flex%20items-center%20gap-2%22%7D",children:[m.jsx(Xa,{className:"w-5 h-5","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:435:20","data-matrix-name":"Plus","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"435","data-component-file":"ServerRolesModal.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Olutur"]})]})]}),m.jsxs("div",{className:"space-y-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:442:14","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"442","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-2%22%7D",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:443:16","data-matrix-name":"h3","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"443","data-component-file":"ServerRolesModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-gray-400%20uppercase%22%7D",children:"Mevcut Roller"}),i.length===0?m.jsxs("div",{className:"text-center py-8 text-neutral-500","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:447:18","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"447","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%20text-neutral-500%22%7D",children:[m.jsx(gi,{className:"w-12 h-12 mx-auto mb-2 opacity-50","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:448:20","data-matrix-name":"Shield","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"448","data-component-file":"ServerRolesModal.tsx","data-component-name":"Shield","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20mx-auto%20mb-2%20opacity-50%22%7D"}),m.jsx("p",{"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:449:20","data-matrix-name":"p","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"449","data-component-file":"ServerRolesModal.tsx","data-component-name":"p",children:"Henz rol oluturulmam"})]}):i.map(fe=>m.jsxs("div",{className:"bg-gray-800 rounded-lg","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:453:20","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"453","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-800%20rounded-lg%22%7D",children:[m.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-700","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:455:22","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"455","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20flex%20items-center%20justify-between%20border-b%20border-gray-700%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:456:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"456","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[m.jsx(gi,{className:"w-5 h-5 text-blue-400","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:457:26","data-matrix-name":"Shield","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"457","data-component-file":"ServerRolesModal.tsx","data-component-name":"Shield","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-blue-400%22%7D"}),m.jsxs("div",{"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:458:26","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"458","data-component-file":"ServerRolesModal.tsx","data-component-name":"div",children:[m.jsx("div",{className:"text-white font-medium","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:459:28","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"459","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%22%7D",children:fe.name}),m.jsxs("div",{className:"text-sm text-gray-400","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:460:28","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"460","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%22%7D",children:["Pozisyon: ",fe.position]})]}),fe.permissions&Pt.MANAGE_SERVER&&m.jsx(Hh,{className:"w-4 h-4 text-yellow-500","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:465:28","data-matrix-name":"Crown","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"465","data-component-file":"ServerRolesModal.tsx","data-component-name":"Crown","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-yellow-500%22%7D"})]}),b&&m.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:469:26","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"469","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[m.jsx("button",{onClick:()=>I((j==null?void 0:j.id)===fe.id?null:fe),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Dzenle","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:470:28","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"470","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20bg-blue-600%20hover%3Abg-blue-700%20text-white%20rounded-lg%20transition-colors%22%2C%22title%22%3A%22D%C3%BCzenle%22%7D",children:m.jsx(tf,{className:"w-4 h-4","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:475:30","data-matrix-name":"Settings","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"475","data-component-file":"ServerRolesModal.tsx","data-component-name":"Settings","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})}),m.jsx("button",{onClick:()=>ke(fe.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Rol Sil","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:477:28","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"477","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20bg-red-600%20hover%3Abg-red-700%20text-white%20rounded-lg%20transition-colors%22%2C%22title%22%3A%22Rol%C3%BC%20Sil%22%7D",children:m.jsx(af,{className:"w-4 h-4","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:482:30","data-matrix-name":"Trash2","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"482","data-component-file":"ServerRolesModal.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})})]})]}),m.jsx("div",{className:"p-4","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:489:22","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"489","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:m.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:490:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"490","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-2%20gap-2%20text-xs%22%7D",children:Object.entries(np).map(([H,J])=>m.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:492:28","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"492","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[m.jsx("div",{className:`w-3 h-3 rounded border ${fe.permissions&parseInt(H)?"bg-green-500 border-green-400":"bg-gray-600 border-gray-500"}`,"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:493:30","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"493","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D"}),m.jsx("span",{className:"text-gray-300","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:498:30","data-matrix-name":"span","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"498","data-component-file":"ServerRolesModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-gray-300%22%7D",children:J})]},H))})}),(j==null?void 0:j.id)===fe.id&&b&&m.jsxs("div",{className:"p-4 border-t border-gray-700 bg-gray-750","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:506:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"506","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border-t%20border-gray-700%20bg-gray-750%22%7D",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:507:26","data-matrix-name":"h4","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"507","data-component-file":"ServerRolesModal.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-300%20mb-3%22%7D",children:"Yetki Ayarla"}),m.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs max-h-40 overflow-y-auto","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:508:26","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"508","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-2%20gap-2%20text-xs%20max-h-40%20overflow-y-auto%22%7D",children:Object.entries(np).map(([H,J])=>{const re=parseInt(H),z=(fe.permissions&re)>0;return m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-700 p-1 rounded","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:513:32","data-matrix-name":"label","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"513","data-component-file":"ServerRolesModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20cursor-pointer%20hover%3Abg-gray-700%20p-1%20rounded%22%7D",children:[m.jsx("input",{type:"checkbox",checked:z,onChange:()=>Ne(fe,re),className:"rounded","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:514:34","data-matrix-name":"input","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"514","data-component-file":"ServerRolesModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22checkbox%22%2C%22checked%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22rounded%22%7D"}),m.jsx("span",{className:"text-gray-300","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:520:34","data-matrix-name":"span","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"520","data-component-file":"ServerRolesModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-gray-300%22%7D",children:J})]},H)})})]})]},fe.id))]})]}):m.jsxs("div",{className:"space-y-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:533:12","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"533","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-2%22%7D",children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-400 uppercase mb-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:534:14","data-matrix-name":"h3","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"534","data-component-file":"ServerRolesModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-gray-400%20uppercase%20mb-3%22%7D",children:"Sunucu yeleri"}),u.length===0?m.jsxs("div",{className:"text-center py-8 text-neutral-500","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:538:16","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"538","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%20text-neutral-500%22%7D",children:[m.jsx(Po,{className:"w-12 h-12 mx-auto mb-2 opacity-50","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:539:18","data-matrix-name":"UsersIcon","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"539","data-component-file":"ServerRolesModal.tsx","data-component-name":"UsersIcon","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20mx-auto%20mb-2%20opacity-50%22%7D"}),m.jsx("p",{"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:540:18","data-matrix-name":"p","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"540","data-component-file":"ServerRolesModal.tsx","data-component-name":"p",children:"Sunucuda ye bulunamad"})]}):u.map(fe=>m.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:544:18","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"544","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20bg-gray-800%20rounded-lg%22%7D",children:[m.jsx("div",{className:"flex items-center justify-between mb-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:548:20","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"548","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-3%22%7D",children:m.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:549:22","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"549","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:550:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"550","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-blue-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-white font-semibold","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:551:26","data-matrix-name":"span","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"551","data-component-file":"ServerRolesModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20font-semibold%22%7D",children:fe.username.charAt(0).toUpperCase()})}),m.jsx("div",{className:"text-white font-medium","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:555:24","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"555","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%22%7D",children:fe.username})]})}),m.jsx("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:558:20","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"558","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:i.map(H=>{const J=fe.roles.includes(H.id);return m.jsx("button",{onClick:()=>ze(fe.id,H.id,J),className:`px-3 py-1 rounded-lg text-sm transition-colors ${J?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"data-matrix-id":"src/components/modals/ServerRolesModal.tsx:562:26","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"562","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:H.name},H.id)})})]},fe.id))]})}),m.jsx("div",{className:"p-6 border-t border-gray-800","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:584:8","data-matrix-name":"div","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"584","data-component-file":"ServerRolesModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20border-t%20border-gray-800%22%7D",children:m.jsx("button",{onClick:t,className:"w-full py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors","data-matrix-id":"src/components/modals/ServerRolesModal.tsx:585:10","data-matrix-name":"button","data-component-path":"src/components/modals/ServerRolesModal.tsx","data-component-line":"585","data-component-file":"ServerRolesModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-gray-800%20hover%3Abg-gray-700%20text-white%20rounded-lg%20transition-colors%22%7D",children:"Kapat"})})]})}):null}const db=({contactId:r,contactName:t,onStartCall:a})=>{const{user:o}=Tt(),[l,i]=_.useState([]),[d,u]=_.useState(""),[h,x]=_.useState(!1),[C,S]=_.useState(!0),A=_.useRef(null),[D,y]=_.useState(!1),[E,w]=_.useState(""),[b,k]=_.useState({messages:[],users:[],channels:[]}),[j,I]=_.useState(!1),[O,F]=_.useState(!1),U=_.useRef(null),ce=_.useRef(null);_.useEffect(()=>{if(r&&o){fe(),H();const V=ne.channel(`dm_conversation_${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chats"},B=>{const q=B.new;(q.sender_id===o.id&&q.receiver_id===r||q.sender_id===r&&q.receiver_id===o.id)&&(i(me=>me.some(he=>he.id===q.id)?me:[...me,q]),q.sender_id===r&&H())}).subscribe();return()=>{V.unsubscribe()}}},[r,o]),_.useEffect(()=>{J()},[l]);const de=V=>{w(V),U.current&&clearTimeout(U.current),V.trim()?(I(!0),U.current=setTimeout(()=>{ke(V.trim())},300)):(k({messages:[],users:[],channels:[]}),I(!1),F(!1))},ke=async V=>{try{I(!0);const{data:B}=await ne.from("chats").select(`
          *,
          sender:profiles!chats_sender_id_fkey(username),
          receiver:profiles!chats_receiver_id_fkey(username)
        `).or(`and(sender_id.eq.${o==null?void 0:o.id},receiver_id.eq.${r}),and(sender_id.eq.${r},receiver_id.eq.${o==null?void 0:o.id})`).ilike("message",`%${V}%`).order("created_at",{ascending:!1}).limit(10),{data:q}=await ne.from("profiles").select("id, username").ilike("username",`%${V}%`).neq("id",o==null?void 0:o.id).limit(10),{data:me}=await ne.from("servers").select(`
          id, name,
          server_users!inner(user_id)
        `).eq("server_users.user_id",o==null?void 0:o.id);let he=[];if(me)for(const xe of me){const{data:$}=await ne.from("channels").select("id, name").eq("server_id",xe.id).ilike("name",`%${V}%`).limit(5);$&&he.push(...$.map(W=>({...W,server_name:xe.name})))}k({messages:B||[],users:q||[],channels:he}),F(!0),I(!1)}catch(B){console.error("Search error:",B),I(!1)}},Ne=()=>{w(""),k({messages:[],users:[],channels:[]}),F(!1),y(!1),I(!1),U.current&&clearTimeout(U.current)},ze=V=>{V.key==="Escape"&&Ne()};_.useEffect(()=>{const V=B=>{D&&ce.current&&!ce.current.contains(B.target)&&(y(!1),Ne())};if(D)return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[D]),_.useEffect(()=>()=>{U.current&&clearTimeout(U.current)},[]);const fe=async()=>{if(!(!o||!r))try{S(!0);const{data:V,error:B}=await ne.from("chats").select("*").or(`and(sender_id.eq.${o.id},receiver_id.eq.${r}),and(sender_id.eq.${r},receiver_id.eq.${o.id})`).order("created_at",{ascending:!0}).limit(100);if(B)throw B;i(V||[])}catch(V){console.error("Error loading messages:",V)}finally{S(!1)}},H=async()=>{!o||!r||await ne.from("chats").update({is_read:!0}).eq("sender_id",r).eq("receiver_id",o.id).eq("is_read",!1)},J=()=>{var V;(V=A.current)==null||V.scrollIntoView({behavior:"smooth"})},re=async()=>{if(!(!o||!r||!d.trim()))try{const V={message:d.trim(),sender_id:o.id,receiver_id:r,is_image:!1,is_read:!1},{data:B,error:q}=await ne.from("chats").insert(V).select().single();if(q)throw q;i(me=>[...me,B]),u("")}catch(V){console.error("Error sending message:",V)}},z=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),re())},Z=V=>{const B=new Date(V),me=Math.floor((new Date().getTime()-B.getTime())/(1e3*60*60*24));return me===0?B.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):me===1?`Dn ${B.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`:B.toLocaleDateString("tr-TR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},te=V=>{const B=[];let q=[];return V.forEach((me,he)=>{he===0||me.sender_id!==V[he-1].sender_id?(q.length>0&&B.push(q),q=[me]):q.push(me)}),q.length>0&&B.push(q),B};return r?m.jsxs("div",{className:"flex-1 flex flex-col bg-gray-800","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:342:4","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"342","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20flex-col%20bg-gray-800%22%7D",children:[m.jsxs("div",{className:"h-16 bg-gray-900 border-b border-gray-700 flex items-center justify-between px-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:344:6","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"344","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-16%20bg-gray-900%20border-b%20border-gray-700%20flex%20items-center%20justify-between%20px-4%22%7D",children:[m.jsxs("div",{className:"flex items-center space-x-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:345:8","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"345","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%22%7D",children:[m.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:346:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"346","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx(wa,{size:16,className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:347:12","data-matrix-name":"User","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"347","data-component-file":"DirectMessageArea.tsx","data-component-name":"User","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22text-white%22%7D"})}),m.jsxs("div",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:349:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"349","data-component-file":"DirectMessageArea.tsx","data-component-name":"div",children:[m.jsx("h3",{className:"text-white font-semibold","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:350:12","data-matrix-name":"h3","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"350","data-component-file":"DirectMessageArea.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-semibold%22%7D",children:t}),m.jsx("p",{className:"text-xs text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:351:12","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"351","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:"Direkt Mesaj"})]})]}),m.jsxs("div",{className:"flex items-center space-x-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:355:8","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"355","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-2%22%7D",children:[m.jsx("button",{onClick:()=>a(r,t,"voice"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:356:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"356","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:m.jsx(bn,{size:20,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:360:12","data-matrix-name":"Phone","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"360","data-component-file":"DirectMessageArea.tsx","data-component-name":"Phone","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("button",{onClick:()=>a(r,t,"video"),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:362:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"362","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:m.jsx(un,{size:20,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:366:12","data-matrix-name":"Video","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"366","data-component-file":"DirectMessageArea.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("button",{onClick:()=>y(!D),className:`p-2 rounded-lg transition-colors ${D?"bg-blue-600 text-white":"hover:bg-gray-700 text-gray-400"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:368:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"368","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsx(wn,{size:20,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:372:12","data-matrix-name":"Search","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"372","data-component-file":"DirectMessageArea.tsx","data-component-name":"Search","data-component-content":"%7B%22size%22%3A20%7D"})}),m.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:374:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"374","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:m.jsx(Vy,{size:20,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:375:12","data-matrix-name":"MoreVertical","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"375","data-component-file":"DirectMessageArea.tsx","data-component-name":"MoreVertical","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"})})]})]}),D&&m.jsx("div",{className:"bg-gray-800 border-b border-gray-700 p-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:382:8","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"382","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-800%20border-b%20border-gray-700%20p-4%22%7D",children:m.jsxs("div",{className:"relative",ref:ce,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:383:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"383","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsxs("div",{className:"flex items-center bg-gray-700 rounded-lg px-4 py-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:384:12","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"384","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20bg-gray-700%20rounded-lg%20px-4%20py-3%22%7D",children:[m.jsx(wn,{size:20,className:"text-gray-400 mr-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:385:14","data-matrix-name":"Search","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"385","data-component-file":"DirectMessageArea.tsx","data-component-name":"Search","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%20mr-3%22%7D"}),m.jsx("input",{type:"text",value:E,onChange:V=>de(V.target.value),onKeyDown:ze,placeholder:"Mesajlarda, kullanclarda ve kanallarda ara...",className:"flex-1 bg-transparent text-white placeholder-gray-400 focus:outline-none",autoFocus:!0,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:386:14","data-matrix-name":"input","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"386","data-component-file":"DirectMessageArea.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onKeyDown%22%3A%22%5BIdentifier%5D%22%2C%22placeholder%22%3A%22Mesajlarda%2C%20kullan%C4%B1c%C4%B1larda%20ve%20kanallarda%20ara...%22%2C%22className%22%3A%22flex-1%20bg-transparent%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%22%2C%22autoFocus%22%3Atrue%7D"}),E&&m.jsx("button",{onClick:Ne,className:"p-1 hover:bg-gray-600 rounded transition-colors ml-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:396:16","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"396","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-600%20rounded%20transition-colors%20ml-2%22%7D",children:m.jsx(Yt,{size:16,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:400:18","data-matrix-name":"X","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"400","data-component-file":"DirectMessageArea.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22text-gray-400%22%7D"})})]}),D&&m.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:407:14","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"407","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20top-full%20left-0%20right-0%20mt-2%20bg-gray-800%20border%20border-gray-700%20rounded-lg%20shadow-xl%20z-50%20max-h-96%20overflow-y-auto%22%7D",children:[j&&m.jsx("div",{className:"p-6 text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:409:18","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"409","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:m.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:410:20","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"410","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-2%20text-gray-400%22%7D",children:[m.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:411:22","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"411","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20w-4%20h-4%20border-2%20border-blue-500%20border-t-transparent%20rounded-full%22%7D"}),m.jsx("span",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:412:22","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"412","data-component-file":"DirectMessageArea.tsx","data-component-name":"span",children:"Aryorsunuz..."})]})}),E&&O&&!j&&m.jsx("div",{className:"p-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:418:18","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"418","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-2%22%7D",children:b.messages.length===0&&b.users.length===0&&b.channels.length===0?m.jsxs("div",{className:"p-6 text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:422:22","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"422","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400 mb-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:423:24","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"423","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-2%20text-gray-400%20mb-2%22%7D",children:[m.jsx(wn,{size:20,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:424:26","data-matrix-name":"Search","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"424","data-component-file":"DirectMessageArea.tsx","data-component-name":"Search","data-component-content":"%7B%22size%22%3A20%7D"}),m.jsx("span",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:425:26","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"425","data-component-file":"DirectMessageArea.tsx","data-component-name":"span",children:"Aranyorsunuz..."})]}),m.jsxs("p",{className:"text-sm text-gray-500","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:427:24","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"427","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-500%22%7D",children:['"',E,'" iin sonu bulunamad']})]}):m.jsxs("div",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:432:22","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"432","data-component-file":"DirectMessageArea.tsx","data-component-name":"div",children:[b.messages.length>0&&m.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:435:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"435","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[m.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide px-3 py-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:436:28","data-matrix-name":"h4","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"436","data-component-file":"DirectMessageArea.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-400%20uppercase%20tracking-wide%20px-3%20py-2%22%7D",children:"Mesajlar"}),b.messages.slice(0,5).map((V,B)=>m.jsxs("div",{className:"px-3 py-2 hover:bg-gray-700 rounded cursor-pointer","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:440:30","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"440","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-3%20py-2%20hover%3Abg-gray-700%20rounded%20cursor-pointer%22%7D",children:[m.jsxs("div",{className:"flex items-center space-x-2 text-sm","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:441:32","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"441","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-2%20text-sm%22%7D",children:[m.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:442:34","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"442","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20bg-blue-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-xs text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:443:36","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"443","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-white%22%7D",children:V.sender_id===(o==null?void 0:o.id)?"S":t.charAt(0)})}),m.jsxs("span",{className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:447:34","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"447","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:[V.sender_id===(o==null?void 0:o.id)?"Siz":t,":"]})]}),m.jsx("p",{className:"text-gray-300 text-sm mt-1 ml-8","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:451:32","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"451","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-300%20text-sm%20mt-1%20ml-8%22%7D",children:V.message.length>100?`${V.message.substring(0,100)}...`:V.message}),m.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-8","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:456:32","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"456","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%20mt-1%20ml-8%22%7D",children:Z(V.created_at)})]},V.id))]}),b.users.length>0&&m.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:466:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"466","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[m.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide px-3 py-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:467:28","data-matrix-name":"h4","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"467","data-component-file":"DirectMessageArea.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-400%20uppercase%20tracking-wide%20px-3%20py-2%22%7D",children:"Kullanclar"}),b.users.slice(0,5).map(V=>m.jsxs("div",{className:"px-3 py-2 hover:bg-gray-700 rounded cursor-pointer flex items-center space-x-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:471:30","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"471","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-3%20py-2%20hover%3Abg-gray-700%20rounded%20cursor-pointer%20flex%20items-center%20space-x-3%22%7D",children:[m.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-600 to-blue-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:472:32","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"472","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gradient-to-br%20from-green-600%20to-blue-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx(wa,{size:16,className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:473:34","data-matrix-name":"User","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"473","data-component-file":"DirectMessageArea.tsx","data-component-name":"User","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22text-white%22%7D"})}),m.jsx("span",{className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:475:32","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"475","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:V.username})]},V.id))]}),b.channels.length>0&&m.jsxs("div",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:483:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"483","data-component-file":"DirectMessageArea.tsx","data-component-name":"div",children:[m.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide px-3 py-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:484:28","data-matrix-name":"h4","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"484","data-component-file":"DirectMessageArea.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-xs%20font-semibold%20text-gray-400%20uppercase%20tracking-wide%20px-3%20py-2%22%7D",children:"Kanallar"}),b.channels.slice(0,5).map(V=>m.jsxs("div",{className:"px-3 py-2 hover:bg-gray-700 rounded cursor-pointer flex items-center space-x-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:488:30","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"488","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-3%20py-2%20hover%3Abg-gray-700%20rounded%20cursor-pointer%20flex%20items-center%20space-x-3%22%7D",children:[m.jsx(jn,{size:16,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:489:32","data-matrix-name":"ChannelIcon","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"489","data-component-file":"DirectMessageArea.tsx","data-component-name":"ChannelIcon","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22text-gray-400%22%7D"}),m.jsxs("div",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:490:32","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"490","data-component-file":"DirectMessageArea.tsx","data-component-name":"div",children:[m.jsxs("span",{className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:491:34","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"491","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:["#",V.name]}),m.jsx("p",{className:"text-xs text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:492:34","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"492","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:V.server_name})]})]},V.id))]})]})}),E&&!O&&!j&&m.jsx("div",{className:"p-6 text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:504:18","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"504","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:m.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:505:20","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"505","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-2%20text-gray-400%22%7D",children:[m.jsx(Py,{size:20,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:506:22","data-matrix-name":"Clock","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"506","data-component-file":"DirectMessageArea.tsx","data-component-name":"Clock","data-component-content":"%7B%22size%22%3A20%7D"}),m.jsx("span",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:507:22","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"507","data-component-file":"DirectMessageArea.tsx","data-component-name":"span",children:"Aramaya hazrlanyor..."})]})}),!E&&!j&&m.jsxs("div",{className:"p-6 text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:513:18","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"513","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-400 mb-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:514:20","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"514","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-2%20text-gray-400%20mb-2%22%7D",children:[m.jsx(wn,{size:20,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:515:22","data-matrix-name":"Search","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"515","data-component-file":"DirectMessageArea.tsx","data-component-name":"Search","data-component-content":"%7B%22size%22%3A20%7D"}),m.jsx("span",{"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:516:22","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"516","data-component-file":"DirectMessageArea.tsx","data-component-name":"span",children:"Aradnz!"})]}),m.jsx("p",{className:"text-sm text-gray-500","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:518:20","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"518","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-500%22%7D",children:"Mesajlarda, kullanclarda ve kanallarda arama yapn"})]})]})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:530:6","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"530","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20p-4%20space-y-4%22%7D",children:C?m.jsx("div",{className:"flex items-center justify-center h-full","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:532:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"532","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20h-full%22%7D",children:m.jsx("div",{className:"animate-pulse text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:533:12","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"533","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-pulse%20text-gray-400%22%7D",children:"Mesajlar ykleniyor..."})}):l.length===0?m.jsx("div",{className:"flex items-center justify-center h-full","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:536:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"536","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20h-full%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:537:12","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"537","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:538:14","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"538","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20mx-auto%20mb-4%20flex%20items-center%20justify-center%22%7D",children:m.jsx(wa,{size:24,className:"text-white","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:539:16","data-matrix-name":"User","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"539","data-component-file":"DirectMessageArea.tsx","data-component-name":"User","data-component-content":"%7B%22size%22%3A24%2C%22className%22%3A%22text-white%22%7D"})}),m.jsxs("h3",{className:"text-lg font-semibold text-white mb-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:541:14","data-matrix-name":"h3","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"541","data-component-file":"DirectMessageArea.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-white%20mb-2%22%7D",children:[t," ile sohbet balat"]}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:544:14","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"544","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Bu sizin ilk direkt mesaj konumanz"})]})}):m.jsxs(m.Fragment,{children:[te(l).map((V,B)=>m.jsx("div",{className:"space-y-1","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:552:14","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"552","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%22%7D",children:V.map((q,me)=>m.jsx("div",{className:`flex ${q.sender_id===(o==null?void 0:o.id)?"justify-end":"justify-start"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:554:18","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"554","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsxs("div",{className:`max-w-xs lg:max-w-md ${q.sender_id===(o==null?void 0:o.id)?"order-1":"order-2"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:558:20","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"558","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[me===0&&q.sender_id!==(o==null?void 0:o.id)&&m.jsxs("div",{className:"flex items-center space-x-2 mb-1","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:563:24","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"563","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-2%20mb-1%22%7D",children:[m.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:564:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"564","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-xs text-white font-medium","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:565:28","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"565","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-white%20font-medium%22%7D",children:t.charAt(0).toUpperCase()})}),m.jsx("span",{className:"text-xs text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:569:26","data-matrix-name":"span","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"569","data-component-file":"DirectMessageArea.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%22%7D",children:t})]}),m.jsxs("div",{className:`rounded-2xl px-4 py-2 ${q.sender_id===(o==null?void 0:o.id)?"bg-blue-600 text-white":"bg-gray-700 text-white"} ${me===0?"":"mt-1"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:573:22","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"573","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[q.is_image?m.jsx("div",{className:"text-sm","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:581:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"581","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%22%7D",children:" Fotoraf"}):m.jsx("div",{className:"text-sm whitespace-pre-wrap break-words","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:583:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"583","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20whitespace-pre-wrap%20break-words%22%7D",children:q.message}),me===V.length-1&&m.jsx("div",{className:`text-xs mt-1 ${q.sender_id===(o==null?void 0:o.id)?"text-blue-200":"text-gray-400"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:590:26","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"590","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:Z(q.created_at)})]})]})},q.id))},B)),m.jsx("div",{ref:A,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:602:12","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"602","data-component-file":"DirectMessageArea.tsx","data-component-name":"div"})]})}),m.jsx("div",{className:"p-4 border-t border-gray-700","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:608:6","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"608","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border-t%20border-gray-700%22%7D",children:m.jsxs("div",{className:"flex items-center space-x-3","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:609:8","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"609","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%22%7D",children:[m.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:610:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"610","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:m.jsx(Hy,{size:20,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:611:12","data-matrix-name":"Paperclip","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"611","data-component-file":"DirectMessageArea.tsx","data-component-name":"Paperclip","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("div",{className:"flex-1 relative","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:614:10","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"614","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20relative%22%7D",children:m.jsx("input",{type:"text",value:d,onChange:V=>u(V.target.value),onKeyPress:z,placeholder:`${t} ile mesajla...`,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:615:12","data-matrix-name":"input","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"615","data-component-file":"DirectMessageArea.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onKeyPress%22%3A%22%5BIdentifier%5D%22%2C%22placeholder%22%3A%22%5BTemplateLiteral%5D%22%2C%22className%22%3A%22w-full%20bg-gray-700%20border%20border-gray-600%20rounded-lg%20px-4%20py-3%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%20focus%3Aborder-blue-500%22%7D"})}),m.jsx("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:625:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"625","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:m.jsx(nf,{size:20,className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:626:12","data-matrix-name":"Smile","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"626","data-component-file":"DirectMessageArea.tsx","data-component-name":"Smile","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("button",{onClick:re,disabled:!d.trim(),className:`p-2 rounded-lg transition-colors ${d.trim()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:629:10","data-matrix-name":"button","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"629","data-component-file":"DirectMessageArea.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BUnaryExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsx(Jy,{size:20,"data-matrix-id":"src/components/dm/DirectMessageArea.tsx:638:12","data-matrix-name":"Send","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"638","data-component-file":"DirectMessageArea.tsx","data-component-name":"Send","data-component-content":"%7B%22size%22%3A20%7D"})})]})})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-800","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:327:6","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"327","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20items-center%20justify-center%20bg-gray-800%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:328:8","data-matrix-name":"div","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"328","data-component-file":"DirectMessageArea.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx(jn,{size:64,className:"text-gray-600 mx-auto mb-4","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:329:10","data-matrix-name":"Hash","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"329","data-component-file":"DirectMessageArea.tsx","data-component-name":"Hash","data-component-content":"%7B%22size%22%3A64%2C%22className%22%3A%22text-gray-600%20mx-auto%20mb-4%22%7D"}),m.jsx("h3",{className:"text-xl font-semibold text-white mb-2","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:330:10","data-matrix-name":"h3","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"330","data-component-file":"DirectMessageArea.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%20mb-2%22%7D",children:"Direkt Mesaj Se"}),m.jsx("p",{className:"text-gray-400","data-matrix-id":"src/components/dm/DirectMessageArea.tsx:333:10","data-matrix-name":"p","data-component-path":"src/components/dm/DirectMessageArea.tsx","data-component-line":"333","data-component-file":"DirectMessageArea.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%22%7D",children:"Sol panelden bir konuma sein veya yeni bir sohbet balatn"})]})})},mb=({onStartDM:r,onStartCall:t})=>{const{user:a}=Tt(),[o,l]=_.useState("friends"),[i,d]=_.useState([]),[u,h]=_.useState([]),[x,C]=_.useState([]),[S,A]=_.useState(""),[D,y]=_.useState(""),[E,w]=_.useState([]),[b,k]=_.useState(!0),[j,I]=_.useState(!1),[O,F]=_.useState(!1);_.useEffect(()=>{a&&(U(),ce(),de())},[a]);const U=async()=>{if(a)try{const{data:J,error:re}=await ne.from("friends").select(`
          *,
          requester:profiles!friends_requester_id_fkey(id, username, profile_image_url),
          requested:profiles!friends_requested_id_fkey(id, username, profile_image_url)
        `).eq("status","accepted").or(`requester_id.eq.${a.id},requested_id.eq.${a.id}`);if(re)throw re;const z=[];for(const Z of J||[]){const te=Z.requester_id===a.id?Z.requested:Z.requester;z.push({id:te.id,username:te.username,profile_image_url:te.profile_image_url,isOnline:!1,status:"offline"})}d(z)}catch(J){console.error("Error loading friends:",J)}finally{k(!1)}},ce=async()=>{if(a)try{const{data:J,error:re}=await ne.from("friend_requests").select(`
          *,
          requester:profiles!friend_requests_requester_id_fkey(id, username, profile_image_url)
        `).eq("requested_id",a.id).eq("status","pending");if(re)throw re;h(J||[])}catch(J){console.error("Error loading friend requests:",J)}},de=async()=>{if(a)try{const{data:J,error:re}=await ne.from("friend_requests").select(`
          *,
          requested:profiles!friend_requests_requested_id_fkey(id, username, profile_image_url)
        `).eq("requester_id",a.id).eq("status","pending");if(re)throw re;C(J||[])}catch(J){console.error("Error loading sent requests:",J)}},ke=async J=>{if(!a||!J.trim()){w([]);return}F(!0);try{const{data:re,error:z}=await ne.from("profiles").select("id, username, profile_image_url").ilike("username",`%${J.trim()}%`).limit(10);if(z)throw z;const Z=(re||[]).filter(te=>te.id===a.id?!1:!i.some(V=>V.id===te.id));w(Z)}catch(re){console.error("Error searching users:",re)}finally{F(!1)}};_.useEffect(()=>{const J=setTimeout(()=>{D.trim()?ke(D):w([])},300);return()=>clearTimeout(J)},[D]);const Ne=async J=>{if(!(!a||!J.trim()||j))try{I(!0);const{data:re,error:z}=await ne.from("profiles").select("id, username").eq("username",J.trim()).single();if(z||!re){alert("Kullanc bulunamad");return}if(re.id===a.id){alert("Kendinize arkada istei gnderemezsiniz");return}const{data:Z}=await ne.from("friends").select("*").eq("status","accepted").or(`
          and(requester_id.eq.${a.id},requested_id.eq.${re.id}),
          and(requester_id.eq.${re.id},requested_id.eq.${a.id})
        `);if(Z&&Z.length>0){alert("Bu kullanc zaten arkadanz");return}const{data:te}=await ne.from("friend_requests").select("*").eq("requester_id",a.id).eq("requested_id",re.id).eq("status","pending");if(te&&te.length>0){alert("Bu kullancya zaten arkada istei gnderilmi");return}const{error:V}=await ne.from("friend_requests").insert({requester_id:a.id,requested_id:re.id,status:"pending"});if(V)throw V;y(""),w([]),alert("Arkada istei gnderildi!")}catch(re){console.error("Error sending friend request:",re),alert("Arkada istei gnderilemedi")}finally{I(!1)}},ze=async(J,re)=>{try{if(re==="accept"){const{error:z}=await ne.from("friend_requests").update({status:"accepted"}).eq("id",J);if(z)throw z;const Z=u.find(te=>te.id===J);if(Z){const{error:te}=await ne.from("friends").insert({requester_id:Z.requester_id,requested_id:Z.requested_id,status:"accepted"});if(te)throw te}}else{const{error:z}=await ne.from("friend_requests").update({status:"declined"}).eq("id",J);if(z)throw z}U(),ce(),de()}catch(z){console.error("Error handling friend request:",z)}},fe=async J=>{if(a)try{const{error:re}=await ne.from("friends").delete().or(`
          and(requester_id.eq.${a.id},requested_id.eq.${J}),
          and(requester_id.eq.${J},requested_id.eq.${a.id})
        `);if(re)throw re;U()}catch(re){console.error("Error removing friend:",re)}},H=i.filter(J=>J.username.toLowerCase().includes(S.toLowerCase()));return m.jsxs("div",{className:"w-72 bg-gray-900 border-r border-gray-800 flex flex-col","data-matrix-id":"src/components/friends/FriendsList.tsx:345:4","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"345","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-72%20bg-gray-900%20border-r%20border-gray-800%20flex%20flex-col%22%7D",children:[m.jsxs("div",{className:"p-4 border-b border-gray-800","data-matrix-id":"src/components/friends/FriendsList.tsx:347:6","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"347","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border-b%20border-gray-800%22%7D",children:[m.jsxs("h2",{className:"text-white font-semibold mb-4 flex items-center","data-matrix-id":"src/components/friends/FriendsList.tsx:348:8","data-matrix-name":"h2","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"348","data-component-file":"FriendsList.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-white%20font-semibold%20mb-4%20flex%20items-center%22%7D",children:[m.jsx(Po,{size:20,className:"mr-2","data-matrix-id":"src/components/friends/FriendsList.tsx:349:10","data-matrix-name":"Users","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"349","data-component-file":"FriendsList.tsx","data-component-name":"Users","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22mr-2%22%7D"}),"Arkadalar"]}),m.jsxs("div",{className:"flex space-x-1 bg-gray-800 rounded-lg p-1","data-matrix-id":"src/components/friends/FriendsList.tsx:354:8","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"354","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-1%20bg-gray-800%20rounded-lg%20p-1%22%7D",children:[m.jsx("button",{onClick:()=>l("friends"),className:`flex-1 py-2 px-3 rounded-md text-sm transition-colors ${o==="friends"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,"data-matrix-id":"src/components/friends/FriendsList.tsx:355:10","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"355","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Arkadalar"}),m.jsxs("button",{onClick:()=>l("pending"),className:`flex-1 py-2 px-3 rounded-md text-sm transition-colors relative ${o==="pending"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,"data-matrix-id":"src/components/friends/FriendsList.tsx:365:10","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"365","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:["Bekleyen",u.length>0&&m.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:375:14","data-matrix-name":"span","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"375","data-component-file":"FriendsList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22absolute%20-top-1%20-right-1%20bg-red-500%20text-white%20text-xs%20rounded-full%20w-5%20h-5%20flex%20items-center%20justify-center%22%7D",children:u.length})]}),m.jsx("button",{onClick:()=>l("add"),className:`flex-1 py-2 px-3 rounded-md text-sm transition-colors ${o==="add"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,"data-matrix-id":"src/components/friends/FriendsList.tsx:380:10","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"380","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Ekle"})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto","data-matrix-id":"src/components/friends/FriendsList.tsx:394:6","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"394","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%22%7D",children:[o==="friends"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"p-4","data-matrix-id":"src/components/friends/FriendsList.tsx:398:12","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"398","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:m.jsxs("div",{className:"relative","data-matrix-id":"src/components/friends/FriendsList.tsx:399:14","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"399","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx(wn,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400","data-matrix-id":"src/components/friends/FriendsList.tsx:400:16","data-matrix-name":"Search","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"400","data-component-file":"FriendsList.tsx","data-component-name":"Search","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22absolute%20left-3%20top-1%2F2%20transform%20-translate-y-1%2F2%20text-gray-400%22%7D"}),m.jsx("input",{type:"text",placeholder:"Arkada ara...",value:S,onChange:J=>A(J.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:401:16","data-matrix-name":"input","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"401","data-component-file":"FriendsList.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22placeholder%22%3A%22Arkada%C5%9F%20ara...%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-gray-600%20rounded-lg%20pl-10%20pr-4%20py-2%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%20focus%3Aborder-blue-500%20text-sm%22%7D"})]})}),m.jsx("div",{className:"px-2 pb-4","data-matrix-id":"src/components/friends/FriendsList.tsx:412:12","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"412","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22px-2%20pb-4%22%7D",children:b?m.jsx("div",{className:"text-center py-8","data-matrix-id":"src/components/friends/FriendsList.tsx:414:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"414","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%22%7D",children:m.jsx("div",{className:"animate-pulse text-gray-400","data-matrix-id":"src/components/friends/FriendsList.tsx:415:18","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"415","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-pulse%20text-gray-400%22%7D",children:"Ykleniyor..."})}):H.length===0?m.jsxs("div",{className:"text-center py-8","data-matrix-id":"src/components/friends/FriendsList.tsx:418:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"418","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%22%7D",children:[m.jsx(Po,{size:48,className:"text-gray-600 mx-auto mb-4","data-matrix-id":"src/components/friends/FriendsList.tsx:419:18","data-matrix-name":"Users","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"419","data-component-file":"FriendsList.tsx","data-component-name":"Users","data-component-content":"%7B%22size%22%3A48%2C%22className%22%3A%22text-gray-600%20mx-auto%20mb-4%22%7D"}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:420:18","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"420","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:S?"Arama sonucu bulunamad":"Henz arkadanz yok"})]}):m.jsx("div",{className:"space-y-1","data-matrix-id":"src/components/friends/FriendsList.tsx:425:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"425","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%22%7D",children:H.map(J=>m.jsx("div",{className:"p-3 rounded-lg hover:bg-gray-800 transition-colors group cursor-pointer",onClick:()=>r(J.id,J.username),"data-matrix-id":"src/components/friends/FriendsList.tsx:427:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"427","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20rounded-lg%20hover%3Abg-gray-800%20transition-colors%20group%20cursor-pointer%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:m.jsxs("div",{className:"flex items-center space-x-3","data-matrix-id":"src/components/friends/FriendsList.tsx:432:22","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"432","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%22%7D",children:[m.jsxs("div",{className:"relative","data-matrix-id":"src/components/friends/FriendsList.tsx:434:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"434","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:435:26","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"435","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-white text-sm font-medium","data-matrix-id":"src/components/friends/FriendsList.tsx:436:28","data-matrix-name":"span","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"436","data-component-file":"FriendsList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%22%7D",children:J.username.charAt(0).toUpperCase()})}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5","data-matrix-id":"src/components/friends/FriendsList.tsx:440:26","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"440","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20-bottom-0.5%20-right-0.5%22%7D",children:m.jsx(Sd,{userId:J.id,size:"sm","data-matrix-id":"src/components/friends/FriendsList.tsx:441:28","data-matrix-name":"StatusIndicator","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"441","data-component-file":"FriendsList.tsx","data-component-name":"StatusIndicator","data-component-content":"%7B%22userId%22%3A%22%5BMemberExpression%5D%22%2C%22size%22%3A%22sm%22%7D"})})]}),m.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/friends/FriendsList.tsx:446:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"446","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[m.jsx("h3",{className:"text-white font-medium text-sm truncate","data-matrix-id":"src/components/friends/FriendsList.tsx:447:26","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"447","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20text-sm%20truncate%22%7D",children:J.username}),m.jsx("p",{className:"text-xs text-gray-400 truncate","data-matrix-id":"src/components/friends/FriendsList.tsx:450:26","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"450","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-400%20truncate%22%7D",children:m.jsx(Sd,{userId:J.id,showStatusOnly:!0,"data-matrix-id":"src/components/friends/FriendsList.tsx:451:28","data-matrix-name":"StatusIndicator","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"451","data-component-file":"FriendsList.tsx","data-component-name":"StatusIndicator","data-component-content":"%7B%22userId%22%3A%22%5BMemberExpression%5D%22%2C%22showStatusOnly%22%3Atrue%7D"})})]}),m.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity","data-matrix-id":"src/components/friends/FriendsList.tsx:456:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"456","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%20opacity-0%20group-hover%3Aopacity-100%20transition-opacity%22%7D",children:[m.jsx("button",{onClick:re=>{re.stopPropagation(),t(J.id,J.username,"voice")},className:"p-1 hover:bg-gray-700 rounded",title:"Sesli arama","data-matrix-id":"src/components/friends/FriendsList.tsx:457:26","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"457","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%22%2C%22title%22%3A%22Sesli%20arama%22%7D",children:m.jsx(bn,{size:14,className:"text-gray-400","data-matrix-id":"src/components/friends/FriendsList.tsx:465:28","data-matrix-name":"Phone","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"465","data-component-file":"FriendsList.tsx","data-component-name":"Phone","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("button",{onClick:re=>{re.stopPropagation(),t(J.id,J.username,"video")},className:"p-1 hover:bg-gray-700 rounded",title:"Grntl arama","data-matrix-id":"src/components/friends/FriendsList.tsx:467:26","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"467","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%22%2C%22title%22%3A%22G%C3%B6r%C3%BCnt%C3%BCl%C3%BC%20arama%22%7D",children:m.jsx(un,{size:14,className:"text-gray-400","data-matrix-id":"src/components/friends/FriendsList.tsx:475:28","data-matrix-name":"Video","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"475","data-component-file":"FriendsList.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22text-gray-400%22%7D"})}),m.jsx("button",{onClick:re=>{re.stopPropagation(),fe(J.id)},className:"p-1 hover:bg-gray-700 rounded",title:"Arkadalktan kar","data-matrix-id":"src/components/friends/FriendsList.tsx:477:26","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"477","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%22%2C%22title%22%3A%22Arkada%C5%9Fl%C4%B1ktan%20%C3%A7%C4%B1kar%22%7D",children:m.jsx(Yy,{size:14,className:"text-red-400","data-matrix-id":"src/components/friends/FriendsList.tsx:485:28","data-matrix-name":"UserMinus","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"485","data-component-file":"FriendsList.tsx","data-component-name":"UserMinus","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22text-red-400%22%7D"})})]})]})},J.id))})})]}),o==="pending"&&m.jsxs("div",{className:"p-4","data-matrix-id":"src/components/friends/FriendsList.tsx:498:10","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"498","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:[u.length>0&&m.jsxs("div",{className:"mb-6","data-matrix-id":"src/components/friends/FriendsList.tsx:501:14","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"501","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[m.jsx("h3",{className:"text-white font-medium mb-3","data-matrix-id":"src/components/friends/FriendsList.tsx:502:16","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"502","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20mb-3%22%7D",children:"Gelen stekler"}),m.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/friends/FriendsList.tsx:503:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"503","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:u.map(J=>m.jsxs("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-800","data-matrix-id":"src/components/friends/FriendsList.tsx:505:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"505","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20bg-gray-800%20rounded-lg%20border%20border-gray-800%22%7D",children:[m.jsxs("div",{className:"flex items-center space-x-3","data-matrix-id":"src/components/friends/FriendsList.tsx:509:22","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"509","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%22%7D",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:510:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"510","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-white text-sm font-medium","data-matrix-id":"src/components/friends/FriendsList.tsx:511:26","data-matrix-name":"span","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"511","data-component-file":"FriendsList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%22%7D",children:J.requester.username.charAt(0).toUpperCase()})}),m.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/friends/FriendsList.tsx:516:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"516","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[m.jsx("h3",{className:"text-white font-medium text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:517:26","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"517","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20text-sm%22%7D",children:J.requester.username}),m.jsx("p",{className:"text-gray-400 text-xs","data-matrix-id":"src/components/friends/FriendsList.tsx:520:26","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"520","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-xs%22%7D",children:"Arkada istei gnderdi"})]})]}),m.jsxs("div",{className:"flex space-x-2 mt-3","data-matrix-id":"src/components/friends/FriendsList.tsx:526:22","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"526","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-2%20mt-3%22%7D",children:[m.jsxs("button",{onClick:()=>ze(J.id,"accept"),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded text-sm transition-colors flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:527:24","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"527","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20bg-green-600%20hover%3Abg-green-700%20text-white%20py-2%20px-3%20rounded%20text-sm%20transition-colors%20flex%20items-center%20justify-center%22%7D",children:[m.jsx(ji,{size:14,className:"mr-1","data-matrix-id":"src/components/friends/FriendsList.tsx:531:26","data-matrix-name":"Check","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"531","data-component-file":"FriendsList.tsx","data-component-name":"Check","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22mr-1%22%7D"}),"Kabul Et"]}),m.jsxs("button",{onClick:()=>ze(J.id,"decline"),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 px-3 rounded text-sm transition-colors flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:534:24","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"534","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20bg-gray-700%20hover%3Abg-gray-600%20text-white%20py-2%20px-3%20rounded%20text-sm%20transition-colors%20flex%20items-center%20justify-center%22%7D",children:[m.jsx(Yt,{size:14,className:"mr-1","data-matrix-id":"src/components/friends/FriendsList.tsx:538:26","data-matrix-name":"X","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"538","data-component-file":"FriendsList.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22mr-1%22%7D"}),"Reddet"]})]})]},J.id))})]}),x.length>0&&m.jsxs("div",{"data-matrix-id":"src/components/friends/FriendsList.tsx:550:14","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"550","data-component-file":"FriendsList.tsx","data-component-name":"div",children:[m.jsx("h3",{className:"text-white font-medium mb-3","data-matrix-id":"src/components/friends/FriendsList.tsx:551:16","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"551","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20mb-3%22%7D",children:"Gnderilen stekler"}),m.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/friends/FriendsList.tsx:552:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"552","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:x.map(J=>m.jsx("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-800","data-matrix-id":"src/components/friends/FriendsList.tsx:554:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"554","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20bg-gray-800%20rounded-lg%20border%20border-gray-800%22%7D",children:m.jsxs("div",{className:"flex items-center space-x-3","data-matrix-id":"src/components/friends/FriendsList.tsx:558:22","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"558","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%22%7D",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:559:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"559","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-white text-sm font-medium","data-matrix-id":"src/components/friends/FriendsList.tsx:560:26","data-matrix-name":"span","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"560","data-component-file":"FriendsList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%22%7D",children:J.requested.username.charAt(0).toUpperCase()})}),m.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/friends/FriendsList.tsx:565:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"565","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[m.jsx("h3",{className:"text-white font-medium text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:566:26","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"566","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20text-sm%22%7D",children:J.requested.username}),m.jsx("p",{className:"text-gray-400 text-xs","data-matrix-id":"src/components/friends/FriendsList.tsx:569:26","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"569","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-xs%22%7D",children:"stek gnderildi, bekliyor"})]})]})},J.id))})]}),u.length===0&&x.length===0&&m.jsxs("div",{className:"text-center py-8","data-matrix-id":"src/components/friends/FriendsList.tsx:581:14","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"581","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-8%22%7D",children:[m.jsx(Qa,{size:48,className:"text-gray-600 mx-auto mb-4","data-matrix-id":"src/components/friends/FriendsList.tsx:582:16","data-matrix-name":"UserPlus","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"582","data-component-file":"FriendsList.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22size%22%3A48%2C%22className%22%3A%22text-gray-600%20mx-auto%20mb-4%22%7D"}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:583:16","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"583","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Bekleyen arkada istei yok"})]})]}),o==="add"&&m.jsxs("div",{className:"p-4","data-matrix-id":"src/components/friends/FriendsList.tsx:590:10","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"590","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%22%7D",children:[m.jsxs("div",{className:"text-center mb-6","data-matrix-id":"src/components/friends/FriendsList.tsx:591:12","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"591","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-6%22%7D",children:[m.jsx(Qa,{size:48,className:"text-gray-600 mx-auto mb-4","data-matrix-id":"src/components/friends/FriendsList.tsx:592:14","data-matrix-name":"UserPlus","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"592","data-component-file":"FriendsList.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22size%22%3A48%2C%22className%22%3A%22text-gray-600%20mx-auto%20mb-4%22%7D"}),m.jsx("h3",{className:"text-white font-semibold mb-2","data-matrix-id":"src/components/friends/FriendsList.tsx:593:14","data-matrix-name":"h3","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"593","data-component-file":"FriendsList.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-semibold%20mb-2%22%7D",children:"Arkada Ekle"}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:594:14","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"594","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Kullanc adn girerek arkada istei gnder"})]}),m.jsxs("div",{className:"space-y-3","data-matrix-id":"src/components/friends/FriendsList.tsx:599:12","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"599","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:[m.jsx("input",{type:"text",placeholder:"Kullanc ad ara...",value:D,onChange:J=>y(J.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500","data-matrix-id":"src/components/friends/FriendsList.tsx:600:14","data-matrix-name":"input","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"600","data-component-file":"FriendsList.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22placeholder%22%3A%22Kullan%C4%B1c%C4%B1%20ad%C4%B1%20ara...%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-gray-600%20rounded-lg%20px-4%20py-3%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%20focus%3Aborder-blue-500%22%7D"}),D.trim()&&m.jsx("div",{className:"max-h-60 overflow-y-auto","data-matrix-id":"src/components/friends/FriendsList.tsx:610:16","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"610","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-h-60%20overflow-y-auto%22%7D",children:O?m.jsx("div",{className:"text-center py-4","data-matrix-id":"src/components/friends/FriendsList.tsx:612:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"612","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-4%22%7D",children:m.jsx("div",{className:"animate-pulse text-gray-400 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:613:22","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"613","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-pulse%20text-gray-400%20text-sm%22%7D",children:"Aranyor..."})}):E.length===0?m.jsx("div",{className:"text-center py-4","data-matrix-id":"src/components/friends/FriendsList.tsx:616:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"616","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-4%22%7D",children:m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/friends/FriendsList.tsx:617:22","data-matrix-name":"p","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"617","data-component-file":"FriendsList.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Kullanc bulunamad"})}):m.jsx("div",{className:"space-y-2","data-matrix-id":"src/components/friends/FriendsList.tsx:620:20","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"620","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-2%22%7D",children:E.map(J=>m.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors","data-matrix-id":"src/components/friends/FriendsList.tsx:622:24","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"622","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%20p-3%20bg-gray-800%20rounded-lg%20hover%3Abg-gray-700%20transition-colors%22%7D",children:[m.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center","data-matrix-id":"src/components/friends/FriendsList.tsx:626:26","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"626","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20bg-gradient-to-br%20from-blue-600%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:m.jsx("span",{className:"text-white text-sm font-medium","data-matrix-id":"src/components/friends/FriendsList.tsx:627:28","data-matrix-name":"span","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"627","data-component-file":"FriendsList.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%22%7D",children:J.username.charAt(0).toUpperCase()})}),m.jsx("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/friends/FriendsList.tsx:631:26","data-matrix-name":"div","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"631","data-component-file":"FriendsList.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:m.jsx("h4",{className:"text-white font-medium text-sm truncate","data-matrix-id":"src/components/friends/FriendsList.tsx:632:28","data-matrix-name":"h4","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"632","data-component-file":"FriendsList.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20text-sm%20truncate%22%7D",children:J.username})}),m.jsx("button",{onClick:()=>{y(J.username),w([])},className:"p-1 hover:bg-green-600 rounded transition-colors",title:"Se","data-matrix-id":"src/components/friends/FriendsList.tsx:636:26","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"636","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-green-600%20rounded%20transition-colors%22%2C%22title%22%3A%22Se%C3%A7%22%7D",children:m.jsx(Qa,{size:14,className:"text-green-400","data-matrix-id":"src/components/friends/FriendsList.tsx:644:28","data-matrix-name":"UserPlus","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"644","data-component-file":"FriendsList.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22text-green-400%22%7D"})})]},J.id))})}),m.jsx("button",{onClick:()=>{if(E.length>0){const J=E[0];Ne(J.username)}else Ne(D.trim())},disabled:!D.trim()||j||O,className:`w-full py-3 rounded-lg text-sm font-medium transition-colors ${D.trim()&&!j&&!O?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,"data-matrix-id":"src/components/friends/FriendsList.tsx:653:14","data-matrix-name":"button","data-component-path":"src/components/friends/FriendsList.tsx","data-component-line":"653","data-component-file":"FriendsList.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:j?"Gnderiliyor...":"Arkada stei Gnder"})]})]})]})]})},ub=()=>{const{user:r}=Tt(),[t,a]=_.useState([]),[o,l]=_.useState(!1),[i,d]=_.useState(0);_.useEffect(()=>{r&&(u(),h())},[r]),_.useEffect(()=>{const w=t.filter(b=>!b.is_read).length;d(w)},[t]);const u=async()=>{if(r)try{const{data:w,error:b}=await ne.from("notifications").select("*").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(20);if(b)throw b;a(w||[])}catch(w){console.error("Error loading notifications:",w)}},h=()=>{if(!r)return;const w=ne.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${r.id}`},b=>{const k=b.new;a(j=>[k,...j]),x(k)}).subscribe();return()=>{w.unsubscribe()}},x=w=>{Notification.permission==="granted"&&new Notification(w.title,{body:w.message,icon:"/logo.png"})},C=()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},S=async w=>{try{const{error:b}=await ne.from("notifications").update({is_read:!0}).eq("id",w);if(b)throw b;a(k=>k.map(j=>j.id===w?{...j,is_read:!0}:j))}catch(b){console.error("Error marking notification as read:",b)}},A=async()=>{try{const{error:w}=await ne.from("notifications").update({is_read:!0}).eq("user_id",r==null?void 0:r.id).eq("is_read",!1);if(w)throw w;a(b=>b.map(k=>({...k,is_read:!0})))}catch(w){console.error("Error marking all notifications as read:",w)}},D=async w=>{try{const{error:b}=await ne.from("notifications").delete().eq("id",w);if(b)throw b;a(k=>k.filter(j=>j.id!==w))}catch(b){console.error("Error deleting notification:",b)}},y=w=>{switch(w){case"message":return m.jsx(Wy,{size:18,className:"text-blue-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:155:15","data-matrix-name":"MessageCircle","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"155","data-component-file":"NotificationSystem.tsx","data-component-name":"MessageCircle","data-component-content":"%7B%22size%22%3A18%2C%22className%22%3A%22text-blue-400%22%7D"});case"friend_request":return m.jsx(Qa,{size:18,className:"text-green-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:157:15","data-matrix-name":"UserPlus","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"157","data-component-file":"NotificationSystem.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22size%22%3A18%2C%22className%22%3A%22text-green-400%22%7D"});case"call":return m.jsx(bn,{size:18,className:"text-purple-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:159:15","data-matrix-name":"Phone","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"159","data-component-file":"NotificationSystem.tsx","data-component-name":"Phone","data-component-content":"%7B%22size%22%3A18%2C%22className%22%3A%22text-purple-400%22%7D"});default:return m.jsx(Tc,{size:18,className:"text-gray-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:161:15","data-matrix-name":"Bell","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"161","data-component-file":"NotificationSystem.tsx","data-component-name":"Bell","data-component-content":"%7B%22size%22%3A18%2C%22className%22%3A%22text-gray-400%22%7D"})}},E=w=>{const b=new Date(w),j=Math.floor((new Date().getTime()-b.getTime())/(1e3*60));if(j<1)return"imdi";if(j<60)return`${j}dk nce`;const I=Math.floor(j/60);if(I<24)return`${I}sa nce`;const O=Math.floor(I/24);return O<7?`${O}g nce`:b.toLocaleDateString("tr-TR",{day:"numeric",month:"short"})};return _.useEffect(()=>{C()},[]),m.jsxs("div",{className:"relative","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:188:4","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"188","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsxs("button",{onClick:()=>l(!o),className:"relative p-2 hover:bg-gray-700 rounded-lg transition-colors","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:190:6","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"190","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22relative%20p-2%20hover%3Abg-gray-700%20rounded-lg%20transition-colors%22%7D",children:[m.jsx(Tc,{size:20,className:"text-gray-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:194:8","data-matrix-name":"Bell","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"194","data-component-file":"NotificationSystem.tsx","data-component-name":"Bell","data-component-content":"%7B%22size%22%3A20%2C%22className%22%3A%22text-gray-400%22%7D"}),i>0&&m.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:196:10","data-matrix-name":"span","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"196","data-component-file":"NotificationSystem.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22absolute%20-top-1%20-right-1%20bg-red-500%20text-white%20text-xs%20rounded-full%20min-w-%5B20px%5D%20h-5%20flex%20items-center%20justify-center%20px-1%22%7D",children:i>99?"99+":i})]}),o&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1),"data-matrix-id":"src/components/notifications/NotificationSystem.tsx:206:10","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"206","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20z-40%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-gray-900 border border-gray-700 rounded-lg shadow-xl z-50","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:212:10","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"212","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20right-0%20top-full%20mt-2%20w-80%20bg-gray-900%20border%20border-gray-700%20rounded-lg%20shadow-xl%20z-50%22%7D",children:[m.jsx("div",{className:"p-4 border-b border-gray-700","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:214:12","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"214","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border-b%20border-gray-700%22%7D",children:m.jsxs("div",{className:"flex items-center justify-between","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:215:14","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"215","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%22%7D",children:[m.jsx("h3",{className:"text-white font-semibold","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:216:16","data-matrix-name":"h3","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"216","data-component-file":"NotificationSystem.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-white%20font-semibold%22%7D",children:"Bildirimler"}),m.jsxs("div",{className:"flex items-center space-x-2","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:217:16","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"217","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-2%22%7D",children:[i>0&&m.jsx("button",{onClick:A,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:219:20","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"219","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-xs%20text-blue-400%20hover%3Atext-blue-300%20transition-colors%22%7D",children:"Tmn okundu iaretle"}),m.jsx("button",{onClick:()=>l(!1),className:"p-1 hover:bg-gray-700 rounded transition-colors","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:226:18","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"226","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%20transition-colors%22%7D",children:m.jsx(Yt,{size:16,className:"text-gray-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:230:20","data-matrix-name":"X","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"230","data-component-file":"NotificationSystem.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22text-gray-400%22%7D"})})]})]})}),m.jsx("div",{className:"max-h-96 overflow-y-auto","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:237:12","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"237","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-h-96%20overflow-y-auto%22%7D",children:t.length===0?m.jsxs("div",{className:"p-6 text-center","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:239:16","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"239","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:[m.jsx(Tc,{size:48,className:"text-gray-600 mx-auto mb-4","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:240:18","data-matrix-name":"Bell","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"240","data-component-file":"NotificationSystem.tsx","data-component-name":"Bell","data-component-content":"%7B%22size%22%3A48%2C%22className%22%3A%22text-gray-600%20mx-auto%20mb-4%22%7D"}),m.jsx("p",{className:"text-gray-400 text-sm","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:241:18","data-matrix-name":"p","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"241","data-component-file":"NotificationSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-sm%22%7D",children:"Henz bildiriminiz yok"})]}):m.jsx("div",{className:"divide-y divide-gray-700","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:244:16","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"244","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22divide-y%20divide-gray-700%22%7D",children:t.map(w=>m.jsx("div",{className:`p-4 transition-colors ${w.is_read?"hover:bg-gray-800":"bg-blue-600/10 border-l-2 border-l-blue-600"}`,"data-matrix-id":"src/components/notifications/NotificationSystem.tsx:246:20","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"246","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:m.jsxs("div",{className:"flex items-start space-x-3","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:254:22","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"254","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20space-x-3%22%7D",children:[m.jsx("div",{className:"flex-shrink-0 mt-1","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:256:24","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"256","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-shrink-0%20mt-1%22%7D",children:y(w.type)}),m.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:261:24","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"261","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[m.jsx("h4",{className:`text-sm font-medium ${w.is_read?"text-gray-300":"text-white"}`,"data-matrix-id":"src/components/notifications/NotificationSystem.tsx:262:26","data-matrix-name":"h4","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"262","data-component-file":"NotificationSystem.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:w.title}),m.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:267:26","data-matrix-name":"p","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"267","data-component-file":"NotificationSystem.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%20mt-1%20line-clamp-2%22%7D",children:w.message}),m.jsxs("div",{className:"flex items-center justify-between mt-2","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:270:26","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"270","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mt-2%22%7D",children:[m.jsx("span",{className:"text-xs text-gray-500","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:271:28","data-matrix-name":"span","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"271","data-component-file":"NotificationSystem.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%22%7D",children:E(w.created_at)}),m.jsxs("div",{className:"flex items-center space-x-1","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:275:28","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"275","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%22%7D",children:[!w.is_read&&m.jsx("button",{onClick:()=>S(w.id),className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Okundu iaretle","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:277:32","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"277","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%20transition-colors%22%2C%22title%22%3A%22Okundu%20i%C5%9Faretle%22%7D",children:m.jsx(ji,{size:12,className:"text-green-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:282:34","data-matrix-name":"Check","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"282","data-component-file":"NotificationSystem.tsx","data-component-name":"Check","data-component-content":"%7B%22size%22%3A12%2C%22className%22%3A%22text-green-400%22%7D"})}),m.jsx("button",{onClick:()=>D(w.id),className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Sil","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:285:30","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"285","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-gray-700%20rounded%20transition-colors%22%2C%22title%22%3A%22Sil%22%7D",children:m.jsx(Yt,{size:12,className:"text-red-400","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:290:32","data-matrix-name":"X","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"290","data-component-file":"NotificationSystem.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A12%2C%22className%22%3A%22text-red-400%22%7D"})})]})]})]})]})},w.id))})}),t.length>0&&m.jsx("div",{className:"p-3 border-t border-gray-700 text-center","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:304:14","data-matrix-name":"div","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"304","data-component-file":"NotificationSystem.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20border-t%20border-gray-700%20text-center%22%7D",children:m.jsx("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors","data-matrix-id":"src/components/notifications/NotificationSystem.tsx:305:16","data-matrix-name":"button","data-component-path":"src/components/notifications/NotificationSystem.tsx","data-component-line":"305","data-component-file":"NotificationSystem.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22text-xs%20text-blue-400%20hover%3Atext-blue-300%20transition-colors%22%7D",children:"Tm bildirimleri grntle"})})]})]})]})},sf=_.createContext(void 0),pb=({children:r})=>{const{user:t}=Tt(),[a,o]=_.useState(!1),[l,i]=_.useState("disconnected"),[d,u]=_.useState(null),[h,x]=_.useState(null),[C,S]=_.useState({direct:!1,presence:!1,voice:!1}),[A,D]=_.useState(!1),[y,E]=_.useState("disconnected"),[w,b]=_.useState(0),[k,j]=_.useState(null),I=15,O=3e4,F=_.useRef(null),U=_.useRef(null),ce=_.useRef(null),de=_.useRef(new Map),ke=_.useRef(null),Ne=_.useRef(0),ze=10,fe=3e3,H=_.useCallback(N=>{if(console.log("[SupabaseRealtime] Validating channel ID:",N,"type:",typeof N),N==null)return console.log("[SupabaseRealtime]  Channel ID validation failed: null or undefined"),!1;if(typeof N=="string"){if(N.trim()==="")return console.log("[SupabaseRealtime]  Channel ID validation failed: empty string"),!1;const ee=parseInt(N,10);return isNaN(ee)||ee<=0?(console.log("[SupabaseRealtime]  Channel ID validation failed: invalid number string",{original:N,parsed:ee}),!1):(console.log("[SupabaseRealtime]  Channel ID validation passed for string:",ee),!0)}return typeof N=="number"?isNaN(N)||N<=0?(console.log("[SupabaseRealtime]  Channel ID validation failed: invalid number",{channelId:N,isNaN:isNaN(N)}),!1):(console.log("[SupabaseRealtime]  Channel ID validation passed for number:",N),!0):(console.log("[SupabaseRealtime]  Channel ID validation failed: unexpected type",typeof N),!1)},[]),J=_.useCallback(N=>{if(typeof N=="string"){const ee=parseInt(N,10);if(isNaN(ee)||ee<=0)throw new Error(`Invalid channel ID: ${N}`);return ee}if(typeof N=="number"&&!isNaN(N)&&N>0)return N;throw new Error(`Invalid channel ID: ${N}`)},[]);_.useEffect(()=>{t?(u(t.id),console.log("[SupabaseRealtime] User authenticated:",t.id)):(u(null),console.log("[SupabaseRealtime] User logged out"),Z())},[t]);const re=_.useCallback(()=>{if(Ne.current>=ze){console.error("[SupabaseRealtime] Max reconnection attempts reached"),i("disconnected");return}Ne.current+=1,console.log(`[SupabaseRealtime] Reconnecting in ${fe/1e3}s... (attempt ${Ne.current}/${ze})`),ke.current=setTimeout(async()=>{try{await z()}catch(N){console.error("[SupabaseRealtime] Reconnection failed:",N),re()}},fe)},[]),z=_.useCallback(async()=>{if(!t){console.error("[SupabaseRealtime] No authenticated user for connection"),i("disconnected"),o(!1);return}i("connecting"),console.log("[SupabaseRealtime] Connecting for user:",t.id),F.current=ne.channel(`direct-signals:${t.id}`).on("broadcast",{event:"webrtc-signal"},({payload:N})=>{N.to===t.id&&(de.current.get("ReceiveSignal")||[]).forEach(ge=>{ge.callback({from:N.from,signal:N.signal,type:N.type,callType:N.callType,accepted:N.accepted,rejected:N.rejected,requestType:N.requestType,callRequestId:N.callRequestId})})}).subscribe(N=>{N==="SUBSCRIBED"?(console.log("[SupabaseRealtime]  Direct signal channel connected"),Ne.current=0,S(ee=>({...ee,direct:!0})),o(!0),i("connected"),console.log("[SupabaseRealtime]  Direct signal channel ready")):(N==="CHANNEL_ERROR"||N==="TIMED_OUT")&&(console.error("[SupabaseRealtime] Direct signal channel error (critical), scheduling reconnect..."),S(ee=>({...ee,direct:!1})),o(!1),i("disconnected"),re())}),ce.current=ne.channel("user-presence").on("presence",{event:"sync"},()=>{var ge;const N=(ge=ce.current)==null?void 0:ge.presenceState();(de.current.get("UserPresenceChanged")||[]).forEach(Ae=>Ae.callback(N))}).on("presence",{event:"join"},async({key:N,newPresences:ee})=>{console.log("[SupabaseRealtime] User joined presence:",N),(de.current.get("UserJoined")||[]).forEach(Ae=>Ae.callback({userId:N,presences:ee})),await xe(N,"online")}).on("presence",{event:"leave"},async({key:N,leftPresences:ee})=>{console.log("[SupabaseRealtime] User left presence:",N),(de.current.get("UserLeft")||[]).forEach(Ae=>Ae.callback({userId:N,presences:ee})),await xe(N,"offline")}).subscribe(async N=>{var ee;if(N==="SUBSCRIBED")try{await((ee=ce.current)==null?void 0:ee.track({user_id:t.id,online_at:new Date().toISOString()})),S(ge=>({...ge,presence:!0})),console.log("[SupabaseRealtime]  Presence channel connected and tracking")}catch(ge){console.warn("[SupabaseRealtime] Presence tracking failed (non-critical):",ge),S(Ae=>({...Ae,presence:!1}))}else(N==="CHANNEL_ERROR"||N==="TIMED_OUT")&&(console.warn("[SupabaseRealtime] Presence channel error (non-critical), continuing without presence tracking"),S(ge=>({...ge,presence:!1})))})},[t]),Z=_.useCallback(async()=>{console.log("[SupabaseRealtime] Disconnecting all connections including voice channel"),ke.current&&(clearTimeout(ke.current),ke.current=null),D(!1),E("disconnected"),b(0),F.current&&(await ne.removeChannel(F.current),F.current=null),U.current&&(await ne.removeChannel(U.current),U.current=null),ce.current&&(await ne.removeChannel(ce.current),ce.current=null),o(!1),i("disconnected"),x(null),S({direct:!1,presence:!1,voice:!1}),Ne.current=0,console.log("[SupabaseRealtime] All connections disconnected including voice channel")},[]),te=_.useCallback((N,ee)=>{const ge=de.current.get(N)||[];ge.push({event:N,callback:ee}),de.current.set(N,ge)},[]),V=_.useCallback((N,ee)=>{const Ae=(de.current.get(N)||[]).filter(X=>X.callback!==ee);de.current.set(N,Ae)},[]),B=_.useCallback(async(N,ee,ge,Ae)=>{if(!d){console.error("[SupabaseRealtime] No user ID");return}const X={from:d,to:N,signal:ee,type:ge,channelId:Ae==null?void 0:Ae.channelId,callType:Ae==null?void 0:Ae.callType,accepted:Ae==null?void 0:Ae.accepted,rejected:Ae==null?void 0:Ae.rejected,requestType:Ae==null?void 0:Ae.requestType,callRequestId:Ae==null?void 0:Ae.callRequestId,mediaType:Ae==null?void 0:Ae.mediaType,enabled:Ae==null?void 0:Ae.enabled,fromUsername:Ae==null?void 0:Ae.fromUsername,toUsername:Ae==null?void 0:Ae.toUsername},we=ne.channel(`direct-signals:${N}`,{config:{broadcast:{self:!1}}});await new Promise((Me,Ve)=>{we.subscribe(Pe=>{Pe==="SUBSCRIBED"?Me():(Pe==="CHANNEL_ERROR"||Pe==="TIMED_OUT")&&Ve(new Error("Failed to subscribe to target channel"))})}),await we.send({type:"broadcast",event:"webrtc-signal",payload:X}),await ne.removeChannel(we)},[d]),q=_.useCallback(async(N,ee,ge)=>{var Me,Ve,Pe;if(!d){console.error("[SupabaseRealtime] No user ID for voice channel signal");return}if(console.log("[SupabaseRealtime] Attempting to send voice channel signal:",ge,"for channel:",N),!H(N)){console.error("[SupabaseRealtime] Invalid channel ID for voice signal:",N),console.error("[SupabaseRealtime] Channel ID validation failed - details:",{channelId:N,type:typeof N,isNull:N===null,isUndefined:N===void 0,isEmptyString:typeof N=="string"&&N.trim()==="",isNaN:typeof N=="number"&&isNaN(N),isZero:N===0,isNegative:typeof N=="number"&&N<0});return}let Ae;try{Ae=J(N)}catch(ot){console.error("[SupabaseRealtime] Failed to normalize channel ID:",ot);return}if(isNaN(Ae)||Ae<=0){console.error("[SupabaseRealtime] Normalized channel ID is invalid:",Ae);return}const X=15;let we=0;for(;we<X;){we++,console.log(`[SupabaseRealtime] Voice signal attempt ${we}/${X}`);const ot=((Me=U.current)==null?void 0:Me.state)==="joined"&&C.voice&&A&&y==="connected";if(console.log("[SupabaseRealtime] Voice channel status check:",{voiceChannelReady:ot,voiceState:(Ve=U.current)==null?void 0:Ve.state,voiceChannelConnected:A,voiceChannelStatus:y,channelsReady:C,currentChannelId:h,expectedChannelId:Ae,channelMatch:h===Ae}),ot&&Ae===h)try{const We={from:d,to:"",signal:ee,type:ge,channelId:Ae};await U.current.send({type:"broadcast",event:"voice-signal",payload:We}),ge==="media:toggle"&&(ee==null?void 0:ee.type)==="media-toggle"?console.log("[SupabaseRealtime]  Media toggle signal sent:",{type:"media:toggle",mediaType:ee.mediaType||"unknown",enabled:ee.enabled,state:ee.enabled?"enabled":"disabled",targetUsers:"broadcast to channel",channelId:Ae}):console.log("[SupabaseRealtime]  Voice channel signal sent successfully:",ge);return}catch(We){if(console.error("[SupabaseRealtime] Failed to send voice channel signal:",We),we<X){console.log("[SupabaseRealtime] Retrying voice channel connection...");try{await Promise.race([ye(Ae),new Promise((Re,Te)=>setTimeout(()=>Te(new Error("Join timeout")),5e3))]),await new Promise(Re=>setTimeout(Re,500))}catch(Re){console.error("[SupabaseRealtime] Voice channel reconnection failed:",Re)}}}else{console.log("[SupabaseRealtime] Voice channel not ready or wrong channel, establishing independently...");try{await Promise.race([ye(Ae),new Promise((We,Re)=>setTimeout(()=>Re(new Error("Join timeout")),5e3))]),await new Promise(We=>setTimeout(We,500))}catch(We){console.error("[SupabaseRealtime] Failed to establish voice channel connection:",We)}}if(we<X){const Re=Math.min(500+we*200,5e3);console.log(`[SupabaseRealtime] Waiting ${Re}ms before attempt ${we+1}`),await new Promise(Te=>setTimeout(Te,Re))}}console.error("[SupabaseRealtime] Failed to send voice channel signal after",X,"attempts"),console.error("[SupabaseRealtime] Voice channel status at failure:",{voiceChannelConnected:A,voiceChannelStatus:y,currentChannelId:h,expectedChannelId:Ae,voiceChannelState:(Pe=U.current)==null?void 0:Pe.state,normalizedChannelId:H(Ae)?Ae:"INVALID"})},[d,C,A,y,h,H,J]),me=_.useCallback(async()=>{if(console.log("[SupabaseRealtime] Leaving voice channel with cleanup"),D(!1),E("disconnected"),b(0),j(null),U.current){try{await ne.removeChannel(U.current)}catch(ee){console.warn("[SupabaseRealtime] Error removing voice channel:",ee)}U.current=null}S(ee=>({...ee,voice:!1})),(de.current.get("LeftVoiceChannel")||[]).forEach(ee=>ee.callback({})),x(ee=>(console.log("[SupabaseRealtime] Clearing voice channel ID from",ee,"to null"),null)),console.log("[SupabaseRealtime] Left voice channel with cleanup completed")},[]),he=_.useCallback(async N=>{d&&await ne.from("user_activity").upsert({user_id:d,status:N,last_seen:new Date().toISOString(),heartbeat:new Date().toISOString()})},[d]),xe=_.useCallback(async(N,ee)=>{N&&(console.log("[SupabaseRealtime] Updating status for user:",N,"to:",ee),await ne.from("user_activity").upsert({user_id:N,status:ee,last_seen:new Date().toISOString(),heartbeat:new Date().toISOString()}))},[]),$=_.useCallback(()=>{var X,we,Me;const N=((X=F.current)==null?void 0:X.state)==="joined",ee=((we=ce.current)==null?void 0:we.state)==="joined",ge=((Me=U.current)==null?void 0:Me.state)==="joined";let Ae;return N&&ee?Ae="connected":N||ee?Ae="connecting":Ae="disconnected",{status:Ae,directChannel:N,presenceChannel:ee,voiceChannel:ge}},[]),W=_.useCallback(()=>y,[y]),ie=_.useCallback(async N=>{var X;if(!N||isNaN(N)||N<=0){console.error("[SupabaseRealtime] Invalid channel ID for connection establishment:",N),E("disconnected"),D(!1);return}if(console.log("[SupabaseRealtime] Establishing independent voice channel connection for validated ID:",N),E("connecting"),b(we=>we+1),U.current){try{await ne.removeChannel(U.current)}catch(we){console.warn("[SupabaseRealtime] Error removing previous voice channel:",we)}U.current=null}console.log("[SupabaseRealtime] Creating new independent voice channel connection..."),U.current=ne.channel(`voice-channel:${N}`).on("broadcast",{event:"voice-signal"},({payload:we})=>{if(we.from===d)return;(de.current.get("ReceiveVoiceChannelSignal")||[]).forEach(Ve=>{Ve.callback({from:we.from,signal:we.signal,type:we.type})})}).on("presence",{event:"sync"},()=>{var Ve;const we=(Ve=U.current)==null?void 0:Ve.presenceState();(de.current.get("VoiceChannelUsersChanged")||[]).forEach(Pe=>Pe.callback(we))}).on("presence",{event:"join"},({key:we,newPresences:Me})=>{(de.current.get("UserJoinedVoiceChannel")||[]).forEach(Pe=>Pe.callback({userId:we,presences:Me}))}).on("presence",{event:"leave"},({key:we,leftPresences:Me})=>{(de.current.get("UserLeftVoiceChannel")||[]).forEach(Pe=>Pe.callback({userId:we,presences:Me}))}).subscribe(async we=>{var Me;if(console.log("[SupabaseRealtime] Voice channel subscription status:",we),we==="SUBSCRIBED")try{await((Me=U.current)==null?void 0:Me.track({user_id:d,joined_at:new Date().toISOString()})),S(Pe=>({...Pe,voice:!0})),D(!0),E("connected"),b(0),j(null),console.log("[SupabaseRealtime]  Voice channel independently connected and tracking"),(de.current.get("JoinedVoiceChannel")||[]).forEach(Pe=>Pe.callback({channelId:N}))}catch(Ve){console.warn("[SupabaseRealtime] Failed to track voice channel presence:",Ve),D(!0),E("connected"),S(Pe=>({...Pe,voice:!0})),j(`Presence tracking failed: ${Ve}`)}else if(we==="CHANNEL_ERROR"||we==="TIMED_OUT"){const Ve=`Voice channel connection failed: ${we}`;if(console.error("[SupabaseRealtime]",Ve),S(Pe=>({...Pe,voice:!1})),D(!1),E("disconnected"),j(Ve),w<I){const Pe=Math.min(2e3*w,5e3);console.log(`[SupabaseRealtime] Retrying voice channel connection in ${Pe}ms (attempt ${w+1}/${I})`),setTimeout(()=>{ie(N)},Pe)}else console.error("[SupabaseRealtime] Max voice channel connection attempts reached"),j("Max connection attempts reached")}});const ee=Date.now();let ge=0;const Ae=60;for(;ge<Ae;){if(ge++,Date.now()-ee>=O){console.error("[SupabaseRealtime] Voice channel connection timeout after",O,"ms"),E("disconnected"),D(!1),j("Connection timeout");return}if(((X=U.current)==null?void 0:X.state)==="joined"&&(A||y==="connected")){console.log("[SupabaseRealtime]  Voice channel connection fully established in",Date.now()-ee,"ms");const We=U.current.state;console.log("[SupabaseRealtime] Channel state verification:",{state:We,isJoined:We==="joined",hasRef:!!U.current});break}const Me=Date.now()-ee;if(Me>15e3&&ge>30){console.log("[SupabaseRealtime]  Forcing connection establishment after",Me,"ms"),E("connected"),D(!0);break}console.log(`[SupabaseRealtime] Waiting for voice channel connection (${ge}/${Ae})...`);const ot=Math.min(500+ge*50,2e3);await new Promise(We=>setTimeout(We,ot))}ge>=Ae&&(console.error("[SupabaseRealtime] Voice channel connection timeout - max wait attempts reached"),E("disconnected"),D(!1),j("Max wait attempts reached"))},[d,w,A,y,H]),ye=_.useCallback(async N=>{if(!d){console.error("[SupabaseRealtime] No user ID for voice channel");return}if(!H(N)){console.error("[SupabaseRealtime] Invalid channel ID for voice channel join:",N);return}let ee;try{ee=J(N),console.log("[SupabaseRealtime] Joining voice channel with validated ID:",ee)}catch(ge){console.error("[SupabaseRealtime] Failed to normalize channel ID for voice channel join:",ge);return}if(isNaN(ee)||ee<=0){console.error("[SupabaseRealtime] Normalized channel ID is invalid for voice channel join:",ee);return}x(ee),await ie(ee),console.log("[SupabaseRealtime] Voice channel join process completed for validated channel:",ee)},[d,ie,H,J]),pe=_.useCallback(async()=>{console.log("[SupabaseRealtime] User went offline, cleaning up...");try{U.current&&await me(),await Z(),console.log("[SupabaseRealtime] Cleanup completed for offline user")}catch(N){console.error("[SupabaseRealtime] Error during offline cleanup:",N)}},[Z,me]);_.useEffect(()=>{t?(console.log("[SupabaseRealtime] User available, attempting to connect..."),z()):(console.log("[SupabaseRealtime] No user, staying disconnected"),i("disconnected"),o(!1))},[t,z]),_.useEffect(()=>{const N=()=>{console.log("[SupabaseRealtime] Page unloading, performing cleanup..."),he("offline").catch(console.error),pe().catch(console.error)};return window.addEventListener("beforeunload",N),()=>{console.log("[SupabaseRealtime] Cleaning up..."),window.removeEventListener("beforeunload",N),Z()}},[he,pe,Z]),_.useEffect(()=>{const N=$();console.log("[SupabaseRealtime] Status changed:",{connectionStatus:l,connected:a,currentUserId:d,hasDirectChannel:!!F.current,hasPresenceChannel:!!ce.current,hasVoiceChannel:!!U.current,channelsReady:C,voiceChannelConnected:A,voiceChannelStatus:y,voiceChannelAttempts:w,voiceChannelLastError:k,currentChannelId:h,isCurrentChannelIdValid:H(h),detailedStatus:N})},[l,a,d,C,A,y,w,k,h,H]);const T={isConnected:()=>a,getConnectionStatus:()=>l,getDetailedConnectionStatus:$,getVoiceChannelConnectionStatus:W,connect:z,disconnect:Z,addEventListener:te,removeEventListener:V,sendSignal:B,sendVoiceChannelSignal:q,joinVoiceChannelRoom:ye,leaveVoiceChannelRoom:me,updateUserStatus:he,handleUserOffline:pe,getCurrentChannelId:()=>H(h)?h:(console.warn("[SupabaseRealtime] Current channel ID is invalid:",h),null),getVoiceChannelError:()=>k,isValidChannelId:N=>H(N)};return m.jsx(sf.Provider,{value:T,"data-matrix-id":"src/contexts/SupabaseRealtimeContext.tsx:986:9","data-matrix-name":"SupabaseRealtimeContext.Provider","data-component-path":"src/contexts/SupabaseRealtimeContext.tsx","data-component-line":"986","data-component-file":"SupabaseRealtimeContext.tsx","data-component-name":"SupabaseRealtimeContext.Provider","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:r})},$r=()=>{const r=_.useContext(sf);if(!r)throw new Error("useSupabaseRealtime must be used within SupabaseRealtimeProvider");return r},lf=()=>{const{user:r}=Tt(),{addEventListener:t,removeEventListener:a,sendSignal:o}=$r(),[l,i]=_.useState([]),[d,u]=_.useState([]),h=_.useCallback(async()=>{if(r)try{const{data:y}=await ne.from("call_requests").select(`
          *,
          profiles!call_requests_from_user_id_fkey(username)
        `).eq("to_user_id",r.id).eq("status","pending").order("created_at",{ascending:!1});y&&i(y);const{data:E}=await ne.from("call_requests").select(`
          *,
          profiles!call_requests_to_user_id_fkey(username)
        `).eq("from_user_id",r.id).eq("status","pending").order("created_at",{ascending:!1});E&&u(E)}catch(y){console.error("[CallRequests] Error loading:",y)}},[r]),x=_.useCallback(async(y,E="voice")=>{if(r)try{const{data:w}=await ne.from("call_requests").select("*").or(`and(from_user_id.eq.${r.id},to_user_id.eq.${y}),and(from_user_id.eq.${y},to_user_id.eq.${r.id})`).eq("status","pending").maybeSingle();if(w)throw new Error("Call request already exists");const{data:b,error:k}=await ne.from("call_requests").insert({from_user_id:r.id,to_user_id:y,call_type:E,status:"pending"}).select(`
          *,
          profiles!call_requests_to_user_id_fkey(username)
        `).single();if(k)throw k;return await o(y,{callRequestId:b.id,fromUserId:r.id,callType:E,requestType:"call-request"},"offer"),console.log("[CallRequests] Call request sent to:",y),b}catch(w){throw console.error("[CallRequests] Error sending request:",w),w}},[r,o]),C=_.useCallback(async y=>{if(r)try{const{data:E,error:w}=await ne.from("call_requests").select("*").eq("id",y).eq("to_user_id",r.id).single();if(w)throw w;if(!E)throw new Error("Call request not found");const{error:b}=await ne.from("call_requests").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",y).eq("to_user_id",r.id);if(b)throw b;await o(E.from_user_id,{callRequestId:E.id,accepted:!0,callType:E.call_type,fromUserId:r.id,requestType:"call-accepted"},"answer"),i(k=>k.filter(j=>j.id!==y)),console.log("[CallRequests] Call request accepted and notification sent to:",E.from_user_id)}catch(E){throw console.error("[CallRequests] Error accepting request:",E),E}},[r,o]),S=_.useCallback(async y=>{if(r)try{const{data:E,error:w}=await ne.from("call_requests").select("*").eq("id",y).eq("to_user_id",r.id).single();if(w)throw w;if(!E)throw new Error("Call request not found");const{error:b}=await ne.from("call_requests").update({status:"rejected",rejected_at:new Date().toISOString()}).eq("id",y).eq("to_user_id",r.id);if(b)throw b;await o(E.from_user_id,{callRequestId:E.id,rejected:!0,callType:E.call_type,fromUserId:r.id,requestType:"call-rejected"},"answer"),i(k=>k.filter(j=>j.id!==y)),console.log("[CallRequests] Call request rejected and notification sent to:",E.from_user_id)}catch(E){throw console.error("[CallRequests] Error rejecting request:",E),E}},[r,o]),A=_.useCallback(async y=>{if(r)try{const{error:E}=await ne.from("call_requests").update({status:"cancelled"}).eq("id",y).eq("from_user_id",r.id);if(E)throw E;u(w=>w.filter(b=>b.id!==y)),console.log("[CallRequests] Call request cancelled:",y)}catch(E){throw console.error("[CallRequests] Error cancelling request:",E),E}},[r]),D=_.useCallback(y=>{console.log("[CallRequests] Received call request signal:",y),h()},[h]);return _.useEffect(()=>{if(r){h(),t("call-request",D);const y=ne.channel("call_requests_changes").on("postgres_changes",{event:"*",schema:"public",table:"call_requests"},()=>{h()}).subscribe();return()=>{a("call-request",D),y.unsubscribe()}}},[r,h,t,a,D]),{incomingCallRequests:l,outgoingCallRequests:d,sendCallRequest:x,acceptCallRequest:C,rejectCallRequest:S,cancelCallRequest:A,loadCallRequests:h,refreshRequests:h}},hb={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}},fb={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}},xb={video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}},Ga=class Ga{constructor(){lt(this,"screenShares",new Map);lt(this,"channelUsers",new Map)}static getInstance(){return Ga.instance||(Ga.instance=new Ga),Ga.instance}async joinVoiceChannel(t,a){const o=`channel_${t}`;this.channelUsers.has(o)||this.channelUsers.set(o,new Set),this.channelUsers.get(o).add(a)}async leaveVoiceChannel(t,a){const o=`channel_${t}`;this.channelUsers.has(o)&&this.channelUsers.get(o).delete(a)}addScreenShare(t,a,o){this.screenShares.set(t,{userId:t,stream:a,username:o,startedAt:new Date})}removeScreenShare(t){this.screenShares.delete(t)}getScreenShares(){return this.screenShares}isUserSharing(t){return this.screenShares.has(t)}static async joinVoiceChannel(t,a){await this.getInstance().joinVoiceChannel(t,a)}static async leaveVoiceChannel(t,a){await this.getInstance().leaveVoiceChannel(t,a)}static async broadcastScreenShare(t,a,o,l){console.log("[VoiceChannelManager] Broadcast screen share:",l);const i=this.getInstance();l==="screen_start"?i.addScreenShare(a,o):i.removeScreenShare(a)}};lt(Ga,"instance");let Ai=Ga;const Ut=class Ut{static async initializeWebRTC(){console.log("[WebRTC]  Initializing WebRTC service...");const t={simplePeer:!1,audioContext:!1};try{await this.initializeSimplePeer(),t.simplePeer=!!this.SimplePeer}catch(a){console.error("[WebRTC] SimplePeer initialization failed:",a)}return t.audioContext=!!this.audioContext,typeof window<"u"&&(document.addEventListener("visibilitychange",async()=>{if(!document.hidden&&this.audioContext&&this.audioContext.state==="suspended"){console.log("[WebRTC] Resuming audio context after page became visible");try{await this.audioContext.resume()}catch(a){console.warn("[WebRTC] Failed to resume audio context after visibility change:",a)}}}),window.addEventListener("focus",async()=>{if(this.audioContext&&this.audioContext.state==="suspended"){console.log("[WebRTC] Resuming audio context after window focus");try{await this.audioContext.resume()}catch(a){console.warn("[WebRTC] Failed to resume audio context after focus:",a)}}})),console.log("[WebRTC]  WebRTC service initialization complete:",t),t}static async initializeSimplePeer(){typeof window<"u"&&window.SimplePeer?(this.SimplePeer=window.SimplePeer,console.log("[WebRTC] SimplePeer initialized")):console.warn("[WebRTC] SimplePeer not available - some features may not work");try{await this.initializeAudioContext()?console.log("[WebRTC] Audio context pre-initialized for optimal performance"):console.warn("[WebRTC] Audio context not available during initialization")}catch(t){console.warn("[WebRTC] Early audio context initialization failed:",t)}}static isValidStream(t,a){if(!t)return console.warn("[WebRTC] Invalid stream: stream is null/undefined for user:",a),!1;if(t.getTracks().length===0)return console.warn("[WebRTC] Invalid stream: no tracks for user:",a),!1;const o=t.getAudioTracks();return o.length===0?(console.warn("[WebRTC] Invalid stream: no audio tracks for user:",a),!1):o.some(i=>i.kind==="audio"&&i.readyState==="live"&&i.enabled!==void 0)?(console.log("[WebRTC] Stream validation passed for user:",a),!0):(console.warn("[WebRTC] Invalid stream: no valid audio tracks for user:",a),console.warn("[WebRTC] Audio track states:",o.map(i=>({id:i.id,kind:i.kind,readyState:i.readyState,enabled:i.enabled}))),!1)}static async getDisplayMedia(){try{console.log("[WebRTC] Getting display media for screen share");const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}}});return console.log("[WebRTC]  Display media acquired:",t.id),t}catch(t){throw console.error("[WebRTC] Failed to get display media:",t),new Error(`Display media access denied: ${t instanceof Error?t.message:"Unknown error"}`)}}static async createPeerConnection(t){if(await this.initializeSimplePeer(),!this.SimplePeer)throw new Error("SimplePeer not available");console.log("[WebRTC] Creating enhanced peer connection:",{initiator:t.initiator,userId:t.userId,hasStream:!!t.stream,streamTracks:t.stream?{audio:t.stream.getAudioTracks().length,video:t.stream.getVideoTracks().length}:null,enableIceRestart:t.enableIceRestart!==!1});const a=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.ekiga.net"},{urls:"stun:stun.ideasip.com"},{urls:"stun:stun.rixtelecom.se"},{urls:"stun:stun.schlund.de"},{urls:"turn:global.turn.twilio.com:3478?transport=udp",username:"twilio",credential:"twilio"},{urls:"turn:global.turn.twilio.com:3478?transport=tcp",username:"twilio",credential:"twilio"}],o=new this.SimplePeer({initiator:t.initiator,trickle:!0,stream:t.stream,config:{iceServers:a,iceCandidatePoolSize:8,iceTransportPolicy:"all",bundlePolicy:"balanced",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},channelName:`voice-${t.userId}`,debug:1});let l=0,i=!1;t.onConnectionStateChange&&o.on("connectionStateChange",A=>{console.log("[WebRTC] Connection state changed to:",A,"for user:",t.userId),t.onConnectionStateChange(A),A==="failed"&&!i?(console.error("[WebRTC] Connection failed for user:",t.userId),this.handleConnectionFailure(o,t,++l)):A==="connected"&&(i=!0,console.log("[WebRTC] Connection established for user:",t.userId))}),t.onIceConnectionStateChange&&o.on("iceConnectionStateChange",A=>{console.log("[WebRTC] ICE connection state changed to:",A,"for user:",t.userId),t.onIceConnectionStateChange(A),A==="failed"&&!i?(console.error("[WebRTC] ICE connection failed for user:",t.userId),this.handleIceConnectionFailure(o,t,++l)):(A==="connected"||A==="completed")&&(i=!0,console.log("[WebRTC] ICE connection established for user:",t.userId,"state:",A))}),o.on("signal",A=>{var D;console.log("[WebRTC]  Peer signal event:",A.type,"to:",t.userId),A.type==="ice-candidate"||((D=A.sdp)==null?void 0:D.type)==="candidate"?(console.log("[WebRTC]  Processing ICE candidate for:",t.userId,"via Trickle ICE"),Ut.onSignalCallbacks.set(`ice-${t.userId}`,y=>{console.log("[WebRTC]  Sending ICE candidate to:",t.userId),t.onSignal(y)}),t.onSignal(A)):(console.log("[WebRTC]  Sending offer/answer signal:",A.type,"to:",t.userId),t.onSignal(A))}),o.on("stream",A=>{if(console.log("[WebRTC] Stream event from user:",t.userId,"stream ID:",A==null?void 0:A.id),!this.isValidStream(A,t.userId)){console.error("[WebRTC] Rejected invalid stream from user:",t.userId);return}A.getAudioTracks().forEach(y=>{y.enabled||(y.enabled=!0)}),Ut.peers.set(t.userId,o);try{t.onStream(A),console.log("[WebRTC] onStream callback successful for user:",t.userId)}catch(y){console.error("[WebRTC] Error in onStream callback for user:",t.userId,y)}}),o.on("connect",()=>{console.log("[WebRTC]  PEER CONNECTED:",t.userId),i=!0,t.connectionTimeout&&t.connectionTimeout>0&&console.log("[WebRTC]  Connection established for user:",t.userId,"- clearing timeout"),l=0}),o.on("data",A=>{console.log("[WebRTC]  Received data from:",t.userId,A.toString())}),o.on("close",()=>{console.log("[WebRTC]  PEER CLOSED for:",t.userId),Ut.peers.delete(t.userId),Ut.onSignalCallbacks.delete(`ice-${t.userId}`),t.onClose()}),o.on("error",A=>{console.error("[WebRTC]  PEER ERROR for",t.userId,":",A),Ut.peers.delete(t.userId),Ut.onSignalCallbacks.delete(`ice-${t.userId}`),t.onError(A)}),o.on("ice-candidate",A=>{console.log("[WebRTC]  ICE CANDIDATE received from:",t.userId,A),Ut.onSignalCallbacks.has(`ice-${t.userId}`)&&Ut.onSignalCallbacks.get(`ice-${t.userId}`)({type:"ice-candidate",candidate:A.candidate})});const d=this.getOptimizedTimeouts(),u=t.connectionTimeout||d.connection,h=d.iceGathering,x=d.iceConnection;if(u>0){const A=setTimeout(()=>{console.warn("[WebRTC] Connection timeout for user:",t.userId,"after",u,"ms"),i||this.handleConnectionTimeout(o,t)},u);o.on("connect",()=>{clearTimeout(A),console.log("[WebRTC] Connection established for user:",t.userId,"within timeout")})}const C=setTimeout(()=>{console.warn("[WebRTC] ICE gathering timeout for user:",t.userId,"- proceeding with available candidates")},h);o.on("iceGatheringStateChange",A=>{A==="complete"&&(clearTimeout(C),console.log("[WebRTC] ICE gathering completed for user:",t.userId))}),o.on("connect",()=>{clearTimeout(C)});const S=setTimeout(()=>{i||(console.warn("[WebRTC] ICE connection timeout for user:",t.userId,"after",x,"ms"),this.handleIceConnectionTimeout(o,t))},x);return o.on("connect",()=>{clearTimeout(S)}),o.on("iceConnectionStateChange",A=>{(A==="connected"||A==="completed")&&clearTimeout(S)}),o}static async getVoiceChannelUsers(t){try{const{data:a,error:o}=await ne.from("voice_channel_users").select("user_id").eq("channel_id",t).eq("is_active",!0);return o?(console.error("[WebRTC] Error getting voice channel users:",o),[]):a||[]}catch(a){return console.error("[WebRTC] Exception getting voice channel users:",a),[]}}static async addUserToVoiceChannel(t,a){try{const{data:o,error:l}=await ne.from("voice_channel_users").select("id, is_active").eq("channel_id",t).eq("user_id",a).maybeSingle();if(l)throw console.error("[WebRTC] Error checking existing user:",l),l;if(o){if(console.log("[WebRTC] User already in voice channel:",t,a,"updating to active..."),o.is_active)console.log("[WebRTC] User already active in voice channel:",t,a);else{const{error:u}=await ne.from("voice_channel_users").update({is_active:!0,joined_at:new Date().toISOString(),last_seen:new Date().toISOString()}).eq("id",o.id);if(u)throw console.error("[WebRTC] Error updating user to active:",u),u;console.log("[WebRTC]  User reactivated in voice channel:",t,a)}return}const{data:i,error:d}=await ne.from("voice_channel_users").insert({channel_id:t,user_id:a,is_active:!0,joined_at:new Date().toISOString(),last_seen:new Date().toISOString()});if(d)throw console.error("[WebRTC] Error adding user to voice channel:",d),d;console.log("[WebRTC]  User added to voice channel:",t,a)}catch(o){throw console.error("[WebRTC] Failed to add user to voice channel:",o),o}}static async removeUserFromVoiceChannel(t,a){try{const{error:o}=await ne.from("voice_channel_users").delete().eq("channel_id",t).eq("user_id",a);if(o)throw console.error("[WebRTC] Error removing user from voice channel:",o),o;console.log("[WebRTC]  User removed from voice channel:",t,a)}catch(o){throw console.error("[WebRTC] Failed to remove user from voice channel:",o),o}}static playJoinSound(){console.log("[WebRTC] Join sound (disabled - no audio file)")}static playLeaveSound(){console.log("[WebRTC] Leave sound (disabled - no audio file)")}static ensureAudioTrackEnabled(t,a=0){try{const o=t.getAudioTracks();if(o.length>a){const l=o[a];return l.enabled||(l.enabled=!0),l.enabled}return!1}catch(o){return console.error("[WebRTC] Failed to ensure audio track enabled:",o),!1}}static async processBufferedIceCandidates(t,a){try{a.forEach(o=>{t&&t.addIceCandidate&&t.addIceCandidate(o)})}catch(o){console.error("[WebRTC] Failed to process buffered ICE candidates:",o)}}static async getCallerProfile(t){var a,o;try{console.log("[WebRTC] Getting profile for user:",t);const{data:l,error:i}=await ne.from("profiles").select("username, profile_image_url").eq("id",t).maybeSingle();if(i)return console.error("[WebRTC] Error fetching profile:",i),null;if(l)return console.log("[WebRTC] Profile found:",l.username),{username:l.username||"Kullanc",profile_image_url:l.profile_image_url||void 0};const{data:d,error:u}=await ne.auth.admin.getUserById(t);if(d!=null&&d.user&&!u){const h=((a=d.user.user_metadata)==null?void 0:a.username)||((o=d.user.email)==null?void 0:o.split("@")[0])||"Kullanc";return console.log("[WebRTC] Using auth data for username:",h),{username:h}}return console.warn("[WebRTC] No profile or auth data found for user:",t),{username:"Kullanc"}}catch(l){return console.error("[WebRTC] Exception getting profile:",l),{username:"Kullanc"}}}static async getUserMedia(t){try{if(console.log("[WebRTC] Getting user media"),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Taraycnz medya cihazlarn desteklemiyor.");const a=await navigator.mediaDevices.getUserMedia(t);return a.getAudioTracks().forEach(o=>{o.kind==="audio"&&(o.enabled=!0)}),a}catch(a){if(console.error("[WebRTC] Failed to get user media:",a),a instanceof Error){if(a.name==="NotAllowedError")throw new Error("Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan mikrofon eriimini etkinletirin.");if(a.name==="NotFoundError")throw new Error("Mikrofon bulunamad. Ltfen mikrofonun bal olduundan emin olun.");if(a.name==="NotReadableError")throw new Error("Mikrofon okunamad. Baka bir uygulama mikrofonu kullanyor olabilir.")}throw new Error(`Media access denied: ${a instanceof Error?a.message:"Unknown error"}`)}}static async getAvailableDevices(){try{const t=await navigator.mediaDevices.enumerateDevices();return{audio:t.filter(a=>a.kind==="audioinput"),video:t.filter(a=>a.kind==="videoinput")}}catch(t){return console.error("[WebRTC] Failed to enumerate devices:",t),{audio:[],video:[]}}}static async getDeviceById(t){try{return(await navigator.mediaDevices.enumerateDevices()).find(o=>o.deviceId===t)||null}catch(a){return console.error("[WebRTC] Failed to find device by ID:",a),null}}static async initializeAudioContext(){if(this.audioContext)return console.log("[WebRTC] Reusing existing audio context"),this.audioContext;if(this.audioContextState==="initializing")return console.log("[WebRTC] Audio context is being initialized by another call, waiting..."),new Promise((t,a)=>{const o=setInterval(()=>{this.audioContext?(clearInterval(o),t(this.audioContext)):this.audioContextState==="failed"&&(clearInterval(o),a(new Error("Audio context initialization failed")))},100);setTimeout(()=>{clearInterval(o),this.audioContext||(this.audioContextState="failed",a(new Error("Audio context initialization timeout")))},5e3)});this.audioContextState="initializing";try{const t=window.AudioContext||window.webkitAudioContext;if(!t)throw new Error("AudioContext not supported in this browser");switch(this.audioContext=new t,console.log("[WebRTC]  Audio context created successfully"),this.audioContext.state){case"suspended":console.log("[WebRTC] Audio context is suspended, attempting to resume..."),await this.audioContext.resume(),console.log("[WebRTC]  Audio context resumed successfully");break;case"running":console.log("[WebRTC]  Audio context is already running");break;case"closed":throw new Error("Audio context is closed")}return this.audioContext.addEventListener("statechange",()=>{var a,o;console.log(`[WebRTC] Audio context state changed to: ${(a=this.audioContext)==null?void 0:a.state}`),((o=this.audioContext)==null?void 0:o.state)==="closed"&&(console.log("[WebRTC] Audio context was closed, resetting..."),this.audioContext=null,this.audioContextState="uninitialized")}),this.audioContextState="initialized",this.audioContext}catch(t){return console.error("[WebRTC]  Failed to initialize audio context:",t),this.audioContextState="failed",this.audioContext=null,null}}static async getAudioContext(){try{return await this.initializeAudioContext()}catch(t){return console.error("[WebRTC] Error getting audio context:",t),null}}static getAudioContextStatus(){var a;const t=!!(window.AudioContext||window.webkitAudioContext);return{exists:!!this.audioContext,state:((a=this.audioContext)==null?void 0:a.state)||null,initializationState:this.audioContextState,isSupported:t}}static async cleanupAudioContext(){if(this.audioContext)try{this.audioContext.state!=="closed"&&(await this.audioContext.close(),console.log("[WebRTC]  Audio context closed successfully"))}catch(t){console.warn("[WebRTC] Error closing audio context:",t)}finally{this.audioContext=null,this.audioContextState="uninitialized"}}static async checkMediaPermissions(){var t,a,o,l;try{const i=await Promise.all([(t=navigator.permissions)==null?void 0:t.query({name:"microphone"}),(a=navigator.permissions)==null?void 0:a.query({name:"camera"})]);return{audio:((o=i[0])==null?void 0:o.state)||"prompt",video:((l=i[1])==null?void 0:l.state)||"prompt"}}catch(i){return console.warn("[WebRTC] Failed to check permissions:",i),{audio:"prompt",video:"prompt"}}}static createAudioConstraints(t){const a={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0};return t&&(a.deviceId={exact:t}),a}static createVideoConstraints(t){const a={width:{ideal:1280},height:{ideal:720},facingMode:"user"};return t&&(a.deviceId={exact:t}),a}static async getUserMediaWithFallback(){console.log("[WebRTC] Starting enhanced getUserMediaWithFallback process...");try{await this.initializeAudioContext()?console.log("[WebRTC]  Audio context ready for audio processing"):console.warn("[WebRTC]  Audio context not available, continuing without it");const a=await this.checkMediaPermissions();console.log("[WebRTC] Current permissions:",a);try{console.log("[WebRTC] Strategy 1: Enhanced constraints");const i=await this.getUserMedia(fb);console.log("[WebRTC]  Strategy 1 successful");const{audio:d}=await this.getAvailableDevices();return console.log("[WebRTC] Available audio devices after permission:",d.length),i}catch(i){console.warn("[WebRTC] Strategy 1 failed:",i)}try{console.log("[WebRTC] Strategy 2: Audio-only constraints");const i=await this.getUserMedia(hb);console.log("[WebRTC]  Strategy 2 successful");const{audio:d}=await this.getAvailableDevices();return console.log("[WebRTC] Available audio devices after permission:",d.length),i}catch(i){console.warn("[WebRTC] Strategy 2 failed:",i)}try{console.log("[WebRTC] Strategy 3: Minimal constraints");const i={audio:!0},d=await this.getUserMedia(i);console.log("[WebRTC]  Strategy 3 successful");const{audio:u}=await this.getAvailableDevices();return console.log("[WebRTC] Available audio devices after permission:",u.length),d}catch(i){console.warn("[WebRTC] Strategy 3 failed:",i)}try{const{audio:i}=await this.getAvailableDevices();if(console.log("[WebRTC] Strategy 4: Trying specific devices, found:",i.length),i.length>0)for(const d of i)try{console.log("[WebRTC] Trying device:",d.label||d.deviceId);const u={audio:this.createAudioConstraints(d.deviceId)},h=await this.getUserMedia(u);return console.log("[WebRTC]  Strategy 4 successful with device:",d.label||d.deviceId),h}catch(u){console.warn("[WebRTC] Device failed:",d.label||d.deviceId,u);continue}}catch(i){console.warn("[WebRTC] Strategy 4 failed - device enumeration:",i)}const{audio:o}=await this.getAvailableDevices();if(o.length===0)throw new Error("Mikrofon bulunamad. Ltfen mikrofonun bal olduundan ve taraycnzn mikrofon eriimine sahip olduundan emin olun. Ayrca sistem ayarlarnz kontrol edin.");if(a.audio==="denied")throw new Error("Mikrofon izni reddedildi. Tarayc ayarlarndan mikrofon eriimini etkinletirin ve sayfay yenileyin.");const{audio:l}=await this.getAvailableDevices();throw new Error(`Mikrofon eriimi salanamad. Mevcut cihaz says: ${l.length}, zin durumu: ${a.audio}. Ltfen mikrofonun bal olduundan ve tarayc izinlerinin verildiinden emin olun.`)}catch(t){if(console.error("[WebRTC] getUserMediaWithFallback failed:",t),t instanceof Error){if(t.name==="NotAllowedError"||t.name==="PermissionDeniedError")throw new Error("Mikrofon eriim izni reddedildi. Tarayc ayarlarndan mikrofon eriimini etkinletirin ve sayfay yenileyin.");if(t.name==="NotFoundError"||t.name==="DevicesNotFoundError"){const a=(await this.getAvailableDevices()).audio.length;throw new Error(`Mikrofon bulunamad. Sistemde ${a} adet ses giri cihaz tespit edildi. Ltfen mikrofonun bal olduundan emin olun.`)}else throw t.name==="NotReadableError"||t.name==="TrackStartError"?new Error("Mikrofon baka bir uygulama tarafndan kullanlyor. Ltfen dier uygulamalar kapatn ve tekrar deneyin."):t.name==="OverconstrainedError"?new Error("stenen mikrofon ayarlar desteklenmiyor. Daha dk kaliteli ayarlarla tekrar denenecek."):t.name==="TypeError"?new Error("Geersiz medya kstlamalar. Sayfay yenileyin ve tekrar deneyin."):new Error(`Mikrofon eriimi baarsz: ${t.message}. Ltfen mikrofonun bal olduundan ve tarayc ayarlarnzn doru olduundan emin olun.`)}throw new Error("Mikrofon eriimi baarsz oldu. Bilinmeyen bir hata olutu.")}}static async getCameraMediaWithFallback(){console.log("[WebRTC] Starting camera getUserMediaWithFallback process...");try{try{console.log("[WebRTC] Camera Strategy 1: Video constraints");const a=await navigator.mediaDevices.getUserMedia({video:!0});return console.log("[WebRTC]  Camera Strategy 1 successful"),a}catch(a){console.warn("[WebRTC] Camera Strategy 1 failed:",a)}const{video:t}=await this.getAvailableDevices();if(t.length>0){console.log("[WebRTC] Camera Strategy 2: Trying specific devices");for(const a of t)try{console.log("[WebRTC] Trying camera device:",a.label||a.deviceId);const o={video:this.createVideoConstraints(a.deviceId)},l=await this.getUserMedia(o);return console.log("[WebRTC]  Camera Strategy 2 successful with device:",a.label||a.deviceId),l}catch(o){console.warn("[WebRTC] Camera device failed:",a.label||a.deviceId,o);continue}}throw new Error("Kamera eriimi salanamad.")}catch(t){if(console.error("[WebRTC] getCameraMediaWithFallback failed:",t),t instanceof Error){if(t.name==="NotAllowedError"||t.name==="PermissionDeniedError")throw new Error("Kamera eriim izni reddedildi. Tarayc ayarlarndan kamera eriimini etkinletirin.");if(t.name==="NotFoundError"||t.name==="DevicesNotFoundError")throw new Error("Kamera bulunamad. Ltfen kamerann bal olduundan emin olun.");if(t.name==="NotReadableError"||t.name==="TrackStartError")throw new Error("Kamera baka bir uygulama tarafndan kullanlyor.")}throw new Error("Kamera eriimi baarsz oldu.")}}static toggleAudio(t,a){try{t.getAudioTracks().forEach(o=>{o.enabled=a,console.log("[WebRTC] Audio track",o.id,"set to:",a?"enabled":"disabled")})}catch(o){console.error("[WebRTC] Failed to toggle audio:",o)}}static toggleVideo(t,a){try{t.getVideoTracks().forEach(o=>{o.enabled=a,console.log("[WebRTC] Video track",o.id,"set to:",a?"enabled":"disabled")})}catch(o){console.error("[WebRTC] Failed to toggle video:",o)}}static stopStream(t){if(t)try{t.getTracks().forEach(a=>{a.stop(),console.log("[WebRTC] Track stopped:",a.id,a.kind)})}catch(a){console.error("[WebRTC] Failed to stop stream:",a)}}static getVoiceChannelManager(){return Ai.getInstance()}static createCallTimeout(t,a){return setTimeout(t,a)}static createConnectionTimeout(t,a){return setTimeout(a,t)}static async createCallRequest(t,a,o){return{id:"temp-"+Date.now(),from_user_id:t,to_user_id:a,status:"pending",call_type:o,created_at:new Date().toISOString()}}static async acceptCallRequest(t){}static async rejectCallRequest(t){}static subscribeToCallRequests(t,a){return{unsubscribe:()=>{}}}static handleIceConnectionFailure(t,a,o){console.warn(`[WebRTC] ICE connection failure attempt ${o} for user:`,a.userId),a.enableIceRestart!==!1&&o<=3?(console.log("[WebRTC] Attempting ICE restart for user:",a.userId),this.scheduleIceRestart(t,a,o)):(console.error("[WebRTC] Max ICE restart attempts reached for user:",a.userId),this.handlePersistentConnectionFailure(t,a,"ICE connection failure"))}static handleConnectionFailure(t,a,o){console.warn(`[WebRTC] Connection failure attempt ${o} for user:`,a.userId),a.enableIceRestart!==!1&&o<=3?(console.log("[WebRTC] Attempting connection recovery for user:",a.userId),this.scheduleIceRestart(t,a,o)):(console.error("[WebRTC] Max connection recovery attempts reached for user:",a.userId),this.handlePersistentConnectionFailure(t,a,"Connection failure"))}static scheduleIceRestart(t,a,o){const l=Math.min(1e3*Math.pow(2,o-1),1e4);console.log(`[WebRTC] Scheduling ICE restart in ${l}ms (attempt ${o}) for user:`,a.userId),setTimeout(()=>{try{t.restartIce?(console.log("[WebRTC] Executing ICE restart for user:",a.userId),t.restartIce(),t._negotiating?console.log("[WebRTC] Peer already negotiating, will retry later for user:",a.userId):t._signaling&&a.onSignal({type:"renegotiate"})):(console.log("[WebRTC] ICE restart not supported, creating new connection for user:",a.userId),t.destroy())}catch(i){console.error("[WebRTC] ICE restart failed for user:",a.userId,i),this.handlePersistentConnectionFailure(t,a,"ICE restart failed")}},l)}static handlePersistentConnectionFailure(t,a,o){console.error("[WebRTC] Persistent connection failure for user:",a.userId,"reason:",o);try{t.destroy()}catch(l){console.error("[WebRTC] Error destroying peer after persistent failure:",l)}Ut.peers.delete(a.userId),Ut.onSignalCallbacks.delete(`ice-${a.userId}`),a.onError(new Error(`WebRTC connection failed: ${o}`))}static handleIceCandidate(t,a,o){try{console.log("[WebRTC]  Handling ICE candidate for user:",o,"via Trickle ICE"),t&&typeof t.addIceCandidate=="function"?(t.addIceCandidate(a),console.log("[WebRTC]  ICE candidate added successfully for user:",o)):console.warn("[WebRTC]  Peer does not support addIceCandidate for user:",o)}catch(l){console.error("[WebRTC]  Failed to add ICE candidate for user:",o,l)}}static getIceServersConfiguration(){return{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.ekiga.net"},{urls:"stun:stun.ideasip.com"},{urls:"turn:global.turn.twilio.com:3478?transport=udp",username:"twilio",credential:"twilio"},{urls:"turn:global.turn.twilio.com:3478?transport=tcp",username:"twilio",credential:"twilio"}],iceCandidatePoolSize:8,iceTransportPolicy:"all",bundlePolicy:"balanced",rtcpMuxPolicy:"require"}}static async createTurnCredentials(t=1){const l=`${Math.floor(Date.now()/1e3)+t*3600}:${Math.random().toString(36).substring(7)}`,i=Math.random().toString(36).substring(2,15);return console.log("[WebRTC] Created ephemeral TURN credentials with TTL:",t,"hours"),{username:l,credential:i,urls:["turn:your-turn-server.com:3478?transport=udp","turn:your-turn-server.com:3478?transport=tcp","turns:your-turn-server.com:5349?transport=tcp"]}}static getOptimizedTimeouts(){var i;const t=(i=navigator==null?void 0:navigator.connection)==null?void 0:i.effectiveType;let a=45e3,o=15e3,l=2e4;return t==="4g"?(a=3e4,o=12e3,l=15e3):t==="3g"?(a=6e4,o=2e4,l=25e3):t==="2g"&&(a=9e4,o=3e4,l=4e4),console.log("[WebRTC] Optimized timeouts for connection type:",t,{connection:a,iceGathering:o,iceConnection:l}),{connection:a,iceGathering:o,iceConnection:l}}static async getPeerConnectionStats(t){try{if(!t||typeof t.getStats!="function")return console.warn("[WebRTC] Peer does not support getStats"),null;const a=await t.getStats(),o={timestamp:Date.now(),connectionState:t.connectionState||"unknown",iceConnectionState:t.iceConnectionState||"unknown",iceGatheringState:t.iceGatheringState||"unknown",signalingState:t.signalingState||"unknown",stats:{}};return a.forEach(l=>{o.stats[l.id]={type:l.type,timestamp:l.timestamp,...l}}),o}catch(a){return console.error("[WebRTC] Failed to get peer connection stats:",a),null}}static handleConnectionTimeout(t,a){console.warn("[WebRTC] Connection timeout occurred for user:",a.userId),a.enableIceRestart!==!1?(console.log("[WebRTC] Attempting final ICE restart due to timeout for user:",a.userId),this.scheduleIceRestart(t,a,4)):this.handlePersistentConnectionFailure(t,a,"Connection timeout")}static handleIceConnectionTimeout(t,a){console.warn("[WebRTC] ICE connection timeout for user:",a.userId),a.enableIceRestart!==!1?(console.log("[WebRTC] ICE connection timeout - attempting ICE restart for user:",a.userId),this.scheduleIceRestart(t,a,3)):(console.log("[WebRTC] ICE connection timeout - giving up on user:",a.userId),this.handlePersistentConnectionFailure(t,a,"ICE connection timeout"))}};lt(Ut,"SimplePeer",null),lt(Ut,"peers",new Map),lt(Ut,"onSignalCallbacks",new Map),lt(Ut,"audioContext",null),lt(Ut,"audioContextState","uninitialized");let dt=Ut;const cf=_.createContext(void 0),gb=({children:r})=>{const t=_.useRef(new Map),a=_.useRef(new Map),o=_.useRef(new Map),[l,i]=_.useState(null),[d,u]=_.useState(null),[h,x]=_.useState(null),C=_.useRef(null),S=_.useRef(null),A=_.useRef(null),[D,y]=_.useState(!1),[E,w]=_.useState(!1),[b,k]=_.useState(!1),[j,I]=_.useState(null),[O,F]=_.useState(null),[U,ce]=_.useState(null),[de,ke]=_.useState(null),[Ne,ze]=_.useState(null),[fe,H]=_.useState(!0),[J,re]=_.useState(!0),z=_.useRef(new Map),[Z,te]=_.useState(0),V=_.useRef(null),B=_.useRef(new Map),q=_.useRef(null),me=_.useRef(null),he=_.useRef(new Map),xe=_.useRef(new Map),$=_.useRef(new Map),[W,ie]=_.useState(null),[ye,pe]=_.useState(null),T=_.useCallback(()=>t.current,[]),N=_.useCallback((K,ue)=>{try{console.log("[WebRTCContext] Adding peer connection for user:",K),Yn(K),t.current.set(K,ue),Jn(K,{connectionStartTime:Date.now(),userId:K}),Go(K),ue.peer&&(ue.peer.on("error",De=>{console.error("[WebRTCContext] Peer error for user:",K,De),pn(K,De)}),ue.peer.on("close",()=>{console.log("[WebRTCContext] Peer connection closed for user:",K),Yn(K)}),ue.peer.on("timeout",()=>{console.warn("[WebRTCContext] Peer connection timeout for user:",K),pn(K,new Error("Connection timeout"))})),console.log("[WebRTCContext] Peer connection added successfully for user:",K)}catch(De){console.error("[WebRTCContext] Error adding peer connection for user:",K,De),pn(K,De)}},[]),ee=_.useCallback(K=>{try{console.log("[WebRTCContext] Removing peer connection for user:",K);const ue=t.current.get(K);if(ue){if(Yn(K),ue.peer)try{ue.peer.removeAllListeners(),ue.peer.destroy(),console.log("[WebRTCContext] Peer destroyed for user:",K)}catch(De){console.warn("[WebRTCContext] Error destroying peer for user:",K,De)}if(ue.stream)try{ue.stream.getTracks().forEach(De=>{try{De.stop()}catch(Ye){console.warn("[WebRTCContext] Error stopping peer stream track:",Ye)}})}catch(De){console.warn("[WebRTCContext] Error accessing peer stream tracks:",De)}t.current.delete(K),xe.current.delete(K),$.current.delete(K),console.log("[WebRTCContext] Peer connection removed successfully for user:",K)}else console.warn("[WebRTCContext] No peer connection found to remove for user:",K)}catch(ue){console.error("[WebRTCContext] Error removing peer connection for user:",K,ue)}},[]),ge=_.useCallback(()=>{console.log("[WebRTCContext] Clearing all peer connections...");try{he.current.forEach((K,ue)=>{clearInterval(K),console.log("[WebRTCContext] Stopped monitoring for user during clear:",ue)}),he.current.clear(),t.current.forEach(({peer:K,stream:ue},De)=>{try{K&&(K.removeAllListeners(),K.destroy())}catch(Ye){console.error("[WebRTCContext] Error destroying peer during clear for user:",De,Ye)}if(ue)try{ue.getTracks().forEach(Ye=>{try{Ye.stop()}catch(mt){console.warn("[WebRTCContext] Error stopping stream track during clear:",mt)}})}catch(Ye){console.warn("[WebRTCContext] Error accessing stream tracks during clear:",Ye)}}),t.current.clear(),xe.current.clear(),$.current.clear(),console.log("[WebRTCContext] All peer connections cleared successfully")}catch(K){console.error("[WebRTCContext] Error during peer connections clear:",K)}},[]),Ae=_.useCallback(()=>a.current,[]),X=_.useCallback((K,ue)=>{try{console.log("[WebRTCContext] Adding screen share peer for user:",K),a.current.set(K,ue),ue.peer&&(ue.peer.on("error",De=>{console.error("[WebRTCContext] Screen share peer error for user:",K,De),pn(K,De)}),ue.peer.on("close",()=>{console.log("[WebRTCContext] Screen share peer closed for user:",K)}))}catch(De){console.error("[WebRTCContext] Error adding screen share peer for user:",K,De),pn(K,De)}},[]),we=_.useCallback(K=>{try{console.log("[WebRTCContext] Removing screen share peer for user:",K);const ue=a.current.get(K);if(ue){if(ue.peer)try{ue.peer.removeAllListeners(),ue.peer.destroy()}catch(De){console.warn("[WebRTCContext] Error destroying screen share peer for user:",K,De)}a.current.delete(K),console.log("[WebRTCContext] Screen share peer removed successfully for user:",K)}}catch(ue){console.error("[WebRTCContext] Error removing screen share peer for user:",K,ue)}},[]),Me=_.useCallback(()=>o.current,[]),Ve=_.useCallback((K,ue)=>{try{console.log("[WebRTCContext] Adding camera share peer for user:",K),o.current.set(K,ue),ue.peer&&(ue.peer.on("error",De=>{console.error("[WebRTCContext] Camera share peer error for user:",K,De),pn(K,De)}),ue.peer.on("close",()=>{console.log("[WebRTCContext] Camera share peer closed for user:",K)}))}catch(De){console.error("[WebRTCContext] Error adding camera share peer for user:",K,De),pn(K,De)}},[]),Pe=_.useCallback(K=>{try{console.log("[WebRTCContext] Removing camera share peer for user:",K);const ue=o.current.get(K);if(ue){if(ue.peer)try{ue.peer.removeAllListeners(),ue.peer.destroy()}catch(De){console.warn("[WebRTCContext] Error destroying camera share peer for user:",K,De)}o.current.delete(K),console.log("[WebRTCContext] Camera share peer removed successfully for user:",K)}}catch(ue){console.error("[WebRTCContext] Error removing camera share peer for user:",K,ue)}},[]),ot=_.useCallback(()=>l,[l]),We=_.useCallback(K=>{C.current&&C.current.getTracks().forEach(ue=>ue.stop()),C.current=K,i(K)},[C]),Re=_.useCallback(()=>d,[d]),Te=_.useCallback(K=>{S.current&&S.current.getTracks().forEach(ue=>ue.stop()),S.current=K,u(K)},[S]),qe=_.useCallback(()=>h,[h]),nt=_.useCallback(K=>{A.current&&A.current.getTracks().forEach(ue=>ue.stop()),A.current=K,x(K)},[A]),R=_.useCallback(()=>D,[D]),f=_.useCallback(K=>y(K),[]),v=_.useCallback(()=>E,[E]),L=_.useCallback(K=>w(K),[]),Y=_.useCallback(()=>b,[b]),se=_.useCallback(K=>k(K),[]),ve=_.useCallback(()=>j,[j]),et=_.useCallback(K=>I(K),[]),be=_.useCallback(()=>O,[O]),Le=_.useCallback(K=>F(K),[]),rt=_.useCallback(()=>U,[U]),He=_.useCallback(K=>ce(K),[]),ft=_.useCallback(()=>de,[de]),at=_.useCallback(K=>ke(K),[]),pt=_.useCallback(()=>Ne,[Ne]),_t=_.useCallback(K=>{ze(K)},[]),to=_.useCallback(()=>fe,[fe]),Wr=_.useCallback(K=>{H(K),l&&l.getAudioTracks().forEach(ue=>{ue.enabled=K})},[fe,l]),Gr=_.useCallback(()=>J,[J]),Hr=_.useCallback(K=>{re(K)},[]),Kr=_.useCallback(()=>z.current,[Z]),no=_.useCallback((K,ue)=>{if(!K)return console.warn("[WebRTCContext] Invalid stream: stream is null/undefined for user:",ue),!1;if(!K.id)return console.warn("[WebRTCContext] Invalid stream: no stream ID for user:",ue),!1;let De=[];try{De=K.getTracks()}catch(Ue){return console.warn("[WebRTCContext] Invalid stream: getTracks() failed for user:",ue,Ue),!1}if(!De||De.length===0)return console.warn("[WebRTCContext] Invalid stream: no tracks found for user:",ue),!1;if(De.length===0)return console.warn("[WebRTCContext] Invalid stream: tracks.length === 0 for user:",ue),!1;const Ye=De.filter(Ue=>Ue.kind==="audio");if(Ye.length===0)return console.warn("[WebRTCContext] Invalid stream: no audio tracks for user:",ue),!1;if(!Ye.some(Ue=>Ue.readyState==="ended"?(console.warn("[WebRTCContext] Invalid stream: audio track is ended for user:",ue),!1):Ue.readyState!=="live"?(console.warn("[WebRTCContext] Invalid stream: audio track not live (state:",Ue.readyState,") for user:",ue),!1):Ue.enabled===void 0?(console.warn("[WebRTCContext] Invalid stream: audio track enabled property missing for user:",ue),!1):!0))return console.warn("[WebRTCContext] Invalid stream: no valid audio tracks (not ended, live state, properly enabled) for user:",ue),!1;const ct=De.filter(Ue=>Ue.kind==="video");return ct.forEach(Ue=>{Ue.readyState==="ended"&&console.warn("[WebRTCContext] Video track is ended for user:",ue),Ue.readyState!=="live"&&console.warn("[WebRTCContext] Video track not live (state:",Ue.readyState,") for user:",ue)}),console.log("[WebRTCContext] Stream validation successful for user:",ue,{streamId:K.id,totalTracks:De.length,audioTracks:Ye.length,videoTracks:ct.length,audioTrackStates:Ye.map(Ue=>({id:Ue.id,readyState:Ue.readyState,enabled:Ue.enabled,ended:Ue.readyState==="ended"}))}),!0},[]),Sa=_.useCallback((K,ue)=>{console.log("[WebRTCContext] Processing remote stream from user:",K,"stream ID:",ue==null?void 0:ue.id);try{if(!no(ue,K)){console.error("[WebRTCContext] Rejected invalid stream from user:",K);return}const De=ue.getTracks(),Ye=De.filter(Ue=>Ue.kind==="audio"),mt=De.filter(Ue=>Ue.kind==="video");Ye.forEach(Ue=>{try{Ue.enabled||(Ue.enabled=!0,console.log("[WebRTCContext] Enabled audio track for user:",K,"track:",Ue.id)),Ue.onended=()=>{console.warn("[WebRTCContext] Audio track ended for user:",K,"track:",Ue.id),ao(K)},Ue.onmute=()=>{console.warn("[WebRTCContext] Audio track muted for user:",K,"track:",Ue.id)},Ue.onunmute=()=>{console.log("[WebRTCContext] Audio track unmuted for user:",K,"track:",Ue.id)},console.log("[WebRTCContext] Audio track processed:",{trackId:Ue.id,enabled:Ue.enabled,readyState:Ue.readyState,ended:Ue.readyState==="ended",muted:Ue.muted})}catch(ht){console.error("[WebRTCContext] Error processing audio track for user:",K,ht)}}),mt.forEach(Ue=>{try{Ue.onended=()=>{console.warn("[WebRTCContext] Video track ended for user:",K,"track:",Ue.id)}}catch(ht){console.error("[WebRTCContext] Error processing video track for user:",K,ht)}});const ct=z.current.get(K);if((ct==null?void 0:ct.id)!==ue.id){if(ct)try{ct.getTracks().forEach(ht=>{try{ht.stop()}catch(ka){console.warn("[WebRTCContext] Error stopping previous track:",ka)}})}catch(ht){console.warn("[WebRTCContext] Error accessing previous stream tracks:",ht)}z.current.set(K,ue);const Ue=Z+1;te(Ue),console.log("[WebRTCContext] Remote stream added/updated successfully:",{userId:K,streamId:ue.id,audioTracks:Ye.length,videoTracks:mt.length,remoteStreamsCount:z.current.size,version:Ue,replaced:!!ct})}else console.log("[WebRTCContext] Stream already exists for user:",K,"stream ID:",ue.id)}catch(De){console.error("[WebRTCContext] Critical error in handleRemoteStream for user:",K,De),pn(K,De)}},[no,Z]),Aa=_.useCallback((K,ue)=>{console.log("[WebRTCContext] addRemoteStream called for user:",K),Sa(K,ue)},[Sa]),ao=_.useCallback(K=>{z.current.delete(K);const ue=Z+1;te(ue)},[Z]),_a=_.useCallback(K=>B.current.get(K)||[],[]),Bi=_.useCallback((K,ue)=>{const De=B.current.get(K)||[];De.push(ue),B.current.set(K,De)},[]),Ea=_.useCallback(K=>{B.current.delete(K)},[]),Na=_.useCallback(()=>{console.log("[WebRTCContext] Starting comprehensive WebRTC cleanup...");try{q.current&&(clearTimeout(q.current),q.current=null),me.current&&(clearTimeout(me.current),me.current=null),he.current.forEach((ue,De)=>{clearTimeout(ue),console.log("[WebRTCContext] Stopped monitoring for user:",De)}),he.current.clear();const K=(ue,De)=>{if(ue)try{ue.getTracks().forEach(mt=>{try{mt.onended=null,mt.onmute=null,mt.onunmute=null,mt.stop(),console.log("[WebRTCContext] Stopped",De,"track:",mt.id,"kind:",mt.kind)}catch(ct){console.warn("[WebRTCContext] Error stopping",De,"track:",mt.id,ct)}})}catch(Ye){console.warn("[WebRTCContext] Error accessing",De,"tracks:",Ye)}};K(l,"local"),K(d,"screen"),K(h,"camera");try{ge()}catch(ue){console.error("[WebRTCContext] Error clearing peer connections:",ue)}a.current.forEach(({peer:ue},De)=>{try{ue.destroy(),console.log("[WebRTCContext] Destroyed screen share peer for user:",De)}catch(Ye){console.error("[WebRTCContext] Error destroying screen share peer for user:",De,Ye)}}),a.current.clear(),o.current.forEach(({peer:ue},De)=>{try{ue.destroy(),console.log("[WebRTCContext] Destroyed camera share peer for user:",De)}catch(Ye){console.error("[WebRTCContext] Error destroying camera share peer for user:",De,Ye)}}),o.current.clear(),z.current.forEach((ue,De)=>{try{ue.getTracks().forEach(Ye=>{Ye.onended=null,Ye.onmute=null,Ye.onunmute=null}),console.log("[WebRTCContext] Cleaned up remote stream for user:",De)}catch(Ye){console.warn("[WebRTCContext] Error cleaning remote stream for user:",De,Ye)}}),z.current.clear(),te(0),B.current.clear(),$.current.clear(),xe.current.clear(),ie(null),pe(null),i(null),u(null),x(null),y(!1),w(!1),k(!1),I(null),F(null),ce(null),ke(null),ze(null),H(!0),re(!0),C.current=null,S.current=null,A.current=null,V.current=null,console.log("[WebRTCContext] WebRTC cleanup completed successfully")}catch(K){console.error("[WebRTCContext] Critical error during cleanup:",K)}},[l,d,h,ge]),oo=_.useCallback((K,ue=3e4)=>{q.current&&clearTimeout(q.current),q.current=setTimeout(K,ue)},[]),Wo=_.useCallback((K,ue=15e3)=>{me.current&&clearTimeout(me.current),me.current=setTimeout(K,ue)},[]),Ti=_.useCallback(()=>{q.current&&(clearTimeout(q.current),q.current=null)},[]),Li=_.useCallback(()=>{me.current&&(clearTimeout(me.current),me.current=null)},[]),Jn=_.useCallback((K,ue)=>{const Ye={...xe.current.get(K)||{},...ue,lastUpdate:Date.now()};xe.current.set(K,Ye),console.log("[WebRTCContext] Connection state updated for user:",K,Ye)},[]),In=_.useCallback(K=>{const ue=xe.current.get(K),De=t.current.get(K);return De?{...De,...ue}:ue},[]),Go=_.useCallback(K=>{const ue=t.current.get(K);if(!ue){console.warn("[WebRTCContext] No peer connection found for monitoring user:",K);return}Yn(K),console.log("[WebRTCContext] Starting connection monitoring for user:",K);const Ye=setInterval(async()=>{var mt;try{const ct=ue.peer;if(!ct){console.warn("[WebRTCContext] No peer found for monitoring user:",K);return}if(ct._pc){const Ue=ct._pc;Jn(K,{connectionState:Ue.connectionState,iceConnectionState:Ue.iceConnectionState,dtlsTransportState:Ue.dtlsTransportState});const ht=Ho(K);ht.healthy||console.warn("[WebRTCContext] Unhealthy connection for user:",K,ht),(Ue.connectionState==="failed"||Ue.iceConnectionState==="failed")&&(console.error("[WebRTCContext] Connection failed for user:",K,"triggering recovery..."),pn(K,new Error("Connection failed - applying recovery strategy"))),Ue.iceConnectionState==="checking"&&ue.connectionStartTime&&Date.now()-ue.connectionStartTime>1e4&&console.warn("[WebRTCContext] Long connection time for user:",K,"considering ICE restart")}if(ct.getStats)try{const Ue=await ct.getStats();let ht=0,ka=0;Ue.forEach(Qn=>{Qn.type==="outbound-rtp"&&Qn.packetsSent&&(ht=Qn.packetsSent),Qn.type==="inbound-rtp"&&Qn.packetsReceived&&(ka=Qn.packetsReceived)}),console.log("[WebRTCContext] Connection stats for user:",K,{packetsSent:ht,packetsReceived:ka,connectionState:(mt=xe.current.get(K))==null?void 0:mt.connectionState})}catch(Ue){console.warn("[WebRTCContext] Error getting stats for user:",K,Ue)}}catch(ct){console.error("[WebRTCContext] Error in connection monitoring for user:",K,ct)}},200);he.current.set(K,Ye),Jn(K,{connectionStartTime:Date.now()})},[]),Yn=_.useCallback(K=>{const ue=he.current.get(K);ue&&(clearInterval(ue),he.current.delete(K),console.log("[WebRTCContext] Stopped connection monitoring for user:",K))},[]),pn=_.useCallback((K,ue)=>{console.error("[WebRTCContext] Handling peer error for user:",K,ue);const De=$.current.get(K)||[];De.push({error:ue.toString(),timestamp:Date.now(),userId:K}),De.length>10&&De.shift(),$.current.set(K,De);const Ye=ue.message||ue.toString();(Ye.includes("ICE")||Ye.includes("connection failed"))&&(console.warn("[WebRTCContext] ICE connection failure detected for user:",K),t.current.get(K)&&console.log("[WebRTCContext] Attempting recovery for user:",K)),Ye.includes("WEBRTC_SUPPORT")&&console.error("[WebRTCContext] WebRTC not supported for user:",K),(Ye.includes("signal")||Ye.includes("signaling"))&&console.error("[WebRTCContext] Signaling error for user:",K),Jn(K,{})},[Jn]),Ho=_.useCallback(K=>{const ue=xe.current.get(K),De=$.current.get(K)||[],Ye=[];let mt=!0;if(!ue)return{state:"unknown",healthy:!1,issues:["No connection state available"]};ue.connectionState==="failed"?(Ye.push("Connection failed"),mt=!1):ue.connectionState==="disconnected"?(Ye.push("Connection disconnected"),mt=!1):ue.connectionState==="connecting"&&Ye.push("Connection in progress"),ue.iceConnectionState==="failed"?(Ye.push("ICE connection failed"),mt=!1):ue.iceConnectionState==="disconnected"&&Ye.push("ICE connection disconnected"),ue.dtlsTransportState==="failed"&&(Ye.push("DTLS transport failed"),mt=!1),De.filter(ht=>Date.now()-ht.timestamp<3e4).length>3&&(Ye.push("Too many recent errors"),mt=!1);let Ue;return ue.connectionStartTime&&(Ue=Date.now()-ue.connectionStartTime),{state:ue.connectionState||"unknown",healthy:mt,uptime:Ue,issues:Ye}},[]),Jr=_.useCallback(()=>W,[W]),Yr=_.useCallback(()=>ye,[ye]),Qr=_.useCallback(()=>{ie(null),pe(null)},[]),Oi=_.useCallback(async()=>{const K=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});u(K)},[]),Ii=_.useCallback(async()=>{const K=S.current;K&&(K.getTracks().forEach(ue=>ue.stop()),u(null))},[]),wt=_.useCallback(async()=>{const K=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});x(K)},[]),Pi=_.useCallback(async()=>{const K=A.current;K&&(K.getTracks().forEach(ue=>ue.stop()),x(null))},[]);_.useEffect(()=>{V.current=Sa},[]),_.useEffect(()=>()=>{console.log("[WebRTCContext] WebRTCContext unmounting - performing final cleanup..."),Na()},[]);const Ko={getPeerConnections:T,addPeerConnection:N,removePeerConnection:ee,clearAllPeerConnections:ge,getLocalStream:ot,setLocalStream:We,getScreenStream:Re,setScreenStream:Te,getCameraStream:qe,setCameraStream:nt,getCallActive:R,setCallActive:f,getIsCalling:v,setIsCalling:L,getIsReceivingCall:Y,setIsReceivingCall:se,getCallerId:ve,setCallerId:et,getCallerName:be,setCallerName:Le,getContactId:rt,setContactId:He,getContactName:ft,setContactName:at,getCurrentVoiceChannel:pt,setCurrentVoiceChannel:_t,getMicEnabled:to,setMicEnabled:Wr,getSpeakerEnabled:Gr,setSpeakerEnabled:Hr,getRemoteStreams:Kr,remoteStreamsVersion:Z,addRemoteStream:Aa,removeRemoteStream:ao,onStream:Sa,getIceBuffer:_a,addIceCandidate:Bi,clearIceBuffer:Ea,getScreenSharePeers:Ae,getCameraSharePeers:Me,addCameraSharePeer:Ve,removeCameraSharePeer:Pe,addScreenSharePeer:X,removeScreenSharePeer:we,startScreenShare:Oi,stopScreenShare:Ii,startCameraShare:wt,stopCameraShare:Pi,clearAllWebRTC:Na,updatePeerConnectionState:Jn,getPeerConnectionState:In,startConnectionMonitoring:Go,stopConnectionMonitoring:Yn,handlePeerError:pn,getConnectionHealth:Ho,getRemoteOffer:Jr,getRemoteOfferSender:Yr,setRemoteOffer:(K,ue)=>{ie(K),pe(ue)},clearRemoteOffer:Qr,startCallTimeout:oo,startConnectionTimeout:Wo,clearCallTimeout:Ti,clearConnectionTimeout:Li};return m.jsx(cf.Provider,{value:Ko,"data-matrix-id":"src/contexts/WebRTCContext.tsx:1251:9","data-matrix-name":"WebRTCContext.Provider","data-component-path":"src/contexts/WebRTCContext.tsx","data-component-line":"1251","data-component-file":"WebRTCContext.tsx","data-component-name":"WebRTCContext.Provider","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:r})},vb=Ip.memo(gb),Kn=()=>{const r=_.useContext(cf);if(!r)throw new Error("useWebRTC must be used within WebRTCProvider");return r},yb=({isOpen:r,onClose:t,onSelectServer:a,onSelectChannel:o,onSelectUser:l,onAddFriend:i})=>{const{user:d}=Tt(),{sendCallRequest:u,outgoingCallRequests:h}=lf(),x=Kn(),[C,S]=_.useState(""),[A,D]=_.useState([]),[y,E]=_.useState(!1),[w,b]=_.useState("voice"),[k,j]=_.useState(!1),[I,O]=_.useState(null),[F,U]=_.useState(new Map);_.useEffect(()=>{C.trim().length>0?ce():D([])},[C]);const ce=async()=>{if(!(!d||!C.trim())){E(!0);try{const H=C.toLowerCase(),J=[];console.log(" [GLOBAL_SEARCH_DEBUG] === ARAMA BALADI ==="),console.log(" [GLOBAL_SEARCH_DEBUG] Arama terimi:",H),console.log(" [GLOBAL_SEARCH_DEBUG] Mevcut kullanc:",d.id,d.email),console.log(" [GLOBAL_SEARCH_DEBUG] Kullanc aramas balyor..."),console.log(" [GLOBAL_SEARCH_DEBUG] Arama query:",`%${H}%`);const{data:re}=await ne.from("profiles").select("id, username").or(`username.ilike.%${H}%,email.ilike.%${H}%`).limit(10);console.log(" [GLOBAL_SEARCH_DEBUG] OR query kullanld: username OR email ile arama"),console.log(" [GLOBAL_SEARCH_DEBUG] Database'den gelen kullanclar:",re),console.log(" [GLOBAL_SEARCH_DEBUG] Kullanc says:",(re==null?void 0:re.length)||0),re?(console.log(" [GLOBAL_SEARCH_DEBUG] Kullanclar ilenmeye balanyor..."),re.forEach((V,B)=>{console.log(` [GLOBAL_SEARCH_DEBUG] Kullanc ${B+1}:`,{id:V.id,username:V.username,is_current_user:V.id===d.id}),V.id!==d.id?(console.log(" [GLOBAL_SEARCH_DEBUG] Kullanc sonulara eklendi:",V.username),J.push({type:"user",id:V.id,name:V.username,subtitle:"Kullanc"})):console.log(" [GLOBAL_SEARCH_DEBUG] Kullanc kendini hari tuttu:",V.username)}),console.log(" [GLOBAL_SEARCH_DEBUG] Sonulara eklenen toplam kullanc:",J.filter(V=>V.type==="user").length)):console.log(" [GLOBAL_SEARCH_DEBUG] Hi kullanc bulunamad");const{data:z}=await ne.from("server_users").select("server_id").eq("user_id",d.id),Z=(z==null?void 0:z.map(V=>V.server_id))||[];if(Z.length>0){const{data:V}=await ne.from("servers").select("id, name").in("id",Z).ilike("name",`%${H}%`).limit(5);V&&V.forEach(B=>{J.push({type:"server",id:B.id,name:B.name,subtitle:"Sunucum"})})}const{data:te}=await ne.from("servers").select("id, name, is_public").eq("is_public",!0).ilike("name",`%${H}%`).not("id","in",`(${Z.length>0?Z.join(","):"null"})`).limit(5);if(te&&te.forEach(V=>{J.push({type:"server",id:V.id,name:V.name,subtitle:"Genel Sunucu"})}),Z.length>0){const{data:V}=await ne.from("channels").select("id, name, server_id, type").in("server_id",Z).ilike("name",`%${H}%`).limit(15);if(V){const B=[...new Set(V.map(he=>he.server_id))],{data:q}=await ne.from("servers").select("id, name").in("id",B),me=new Map((q==null?void 0:q.map(he=>[he.id,he.name]))||[]);V.forEach(he=>{J.push({type:"channel",id:he.id.toString(),name:he.name,subtitle:`${me.get(he.server_id)||"Bilinmeyen Sunucu"} - ${he.type==="text"?"Metin":"Ses"} Kanal`,serverId:he.server_id})})}}if(console.log(" [GLOBAL_SEARCH_DEBUG] === ARAMA TAMAMLANDI ==="),console.log(" [GLOBAL_SEARCH_DEBUG] Toplam sonu says:",J.length),console.log(" [GLOBAL_SEARCH_DEBUG] Sonu detaylar:",J),H==="yusu"||H.includes("yusu")){console.log(" [GLOBAL_SEARCH_DEBUG] YUSU aranyor - ytbx kullancs aranyor...");const{data:V}=await ne.from("profiles").select("id, username").ilike("username","%ytbx%");console.log(" [GLOBAL_SEARCH_DEBUG] YTBX ile balayan kullanclar:",V);const{data:B}=await ne.from("profiles").select("id, username, email").ilike("email","%yusuftalhabarlas%");console.log(" [GLOBAL_SEARCH_DEBUG] Yusuf kullancs:",B)}D(J)}catch(H){console.error(" [GLOBAL_SEARCH_DEBUG] Arama hatas:",H),console.error(" [GLOBAL_SEARCH_DEBUG] Error stack:",H)}finally{E(!1),console.log(" [GLOBAL_SEARCH_DEBUG] Arama tamamland, loading false yapld")}}},de=async H=>{console.log("[GlobalSearch]  BUTON TIKLANDI:",H);try{console.log("[GlobalSearch] Starting broadcast function:",H),k&&I===H?(console.log("[GlobalSearch] Stopping broadcast:",H),H==="screen"?await x.stopScreenShare():await x.stopCameraShare(),j(!1),O(null),console.log("[GlobalSearch] Broadcast stopped successfully")):(console.log("[GlobalSearch] Starting broadcast:",H),H==="screen"?(console.log("[GlobalSearch] Calling startScreenShare..."),await x.startScreenShare(),console.log("[GlobalSearch] Screen share started successfully")):(console.log("[GlobalSearch] Calling startCameraShare..."),await x.startCameraShare(),console.log("[GlobalSearch] Camera share started successfully")),j(!0),O(H),console.log("[GlobalSearch] Broadcast state updated:",{isBroadcasting:!0,broadcastType:H}))}catch(J){console.error("[GlobalSearch] Broadcast error:",J),alert(`Paylam hatas: ${J instanceof Error?J.message:"Bilinmeyen hata"}`)}},ke=async H=>{if(H.type==="user"&&l)try{console.log("[GlobalSearch] Sending call request to:",H.name,"Type:",w),await u(H.id,w),console.log("[GlobalSearch]  Call request sent successfully to:",H.name),alert(`${H.name} kullancsna ${w==="voice"?"sesli":"grntl"} arama istei gnderildi!`),console.log("[GlobalSearch] Modal will remain open for additional searches")}catch(J){console.error("[GlobalSearch]  Failed to send call request:",J);const re=J instanceof Error?J.message:"Bilinmeyen hata";re.includes("Call request already exists")?alert(`${H.name} kullancsna zaten arama istei gnderilmi. Ltfen bekleyin.`):alert(`Arama istei gnderilemedi: ${re}
Ltfen tekrar deneyin.`)}else H.type==="server"&&a?(a(H.id),t()):H.type==="channel"&&o&&H.serverId&&(o(parseInt(H.id),H.serverId),t())},Ne=H=>h.some(J=>J.to_user_id===H&&J.status==="pending"),ze=async(H,J)=>{if(d)try{const{data:re}=await ne.from("friends").select("*").eq("status","accepted").or(`
          and(requester_id.eq.${d.id},requested_id.eq.${H}),
          and(requester_id.eq.${H},requested_id.eq.${d.id})
        `);if(re&&re.length>0){alert(`${J} zaten arkadanz`);return}const{data:z}=await ne.from("friend_requests").select("*").eq("requester_id",d.id).eq("requested_id",H).eq("status","pending");if(z&&z.length>0){alert(`${J} kullancsna zaten arkada istei gnderilmi`);return}const{error:Z}=await ne.from("friend_requests").insert({requester_id:d.id,requested_id:H,status:"pending"});if(Z)throw Z;alert(`${J} kullancsna arkada istei gnderildi!`)}catch(re){console.error("Error sending friend request:",re),alert("Arkada istei gnderilemedi")}},fe=H=>{switch(H){case"user":return m.jsx(wa,{className:"w-5 h-5 text-blue-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:369:15","data-matrix-name":"User","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"369","data-component-file":"GlobalSearchModal.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-blue-400%22%7D"});case"server":return m.jsx(Cd,{className:"w-5 h-5 text-purple-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:371:15","data-matrix-name":"ServerIcon","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"371","data-component-file":"GlobalSearchModal.tsx","data-component-name":"ServerIcon","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-purple-400%22%7D"});case"channel":return m.jsx(jn,{className:"w-5 h-5 text-green-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:373:15","data-matrix-name":"Hash","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"373","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-green-400%22%7D"});default:return m.jsx(wn,{className:"w-5 h-5 text-gray-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:375:15","data-matrix-name":"Search","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"375","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-400%22%7D"})}};return _.useEffect(()=>{const H=J=>{J.key==="Escape"&&r&&t()};if(r)return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[r,t]),r?m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-start justify-center pt-20 z-50",onClick:H=>{console.log("[GlobalSearch] Modal overlay clicked, closing modal"),t()},"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:396:4","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"396","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F80%20flex%20items-start%20justify-center%20pt-20%20z-50%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:m.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-2xl border border-gray-700 shadow-xl",onClick:H=>{console.log("[GlobalSearch] Modal content clicked, preventing close"),H.stopPropagation()},"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:403:6","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"403","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-900%20rounded-lg%20w-full%20max-w-2xl%20border%20border-gray-700%20shadow-xl%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:411:8","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"411","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-4%20border-b%20border-gray-700%22%7D",children:[m.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:412:10","data-matrix-name":"h2","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"412","data-component-file":"GlobalSearchModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%20flex%20items-center%20gap-2%22%7D",children:[m.jsx(wn,{className:"w-5 h-5","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:413:12","data-matrix-name":"Search","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"413","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Global Arama"]}),m.jsx("button",{onClick:()=>{console.log("[GlobalSearch] Modal close button clicked"),t()},className:"text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:416:10","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"416","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-white%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-6 h-6","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:423:12","data-matrix-name":"X","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"423","data-component-file":"GlobalSearchModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"})})]}),m.jsxs("div",{className:"p-4 border-b border-gray-700","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:428:8","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"428","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border-b%20border-gray-700%22%7D",children:[m.jsxs("div",{className:"relative mb-3","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:429:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"429","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%20mb-3%22%7D",children:[m.jsx(wn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:430:12","data-matrix-name":"Search","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"430","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22absolute%20left-3%20top-1%2F2%20transform%20-translate-y-1%2F2%20text-gray-400%20w-5%20h-5%22%7D"}),m.jsx("input",{type:"text",value:C,onChange:H=>S(H.target.value),placeholder:"Kullanc, sunucu veya kanal ara...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500",autoFocus:!0,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:431:12","data-matrix-name":"input","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"431","data-component-file":"GlobalSearchModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22Kullan%C4%B1c%C4%B1%2C%20sunucu%20veya%20kanal%20ara...%22%2C%22className%22%3A%22w-full%20bg-gray-800%20border%20border-gray-600%20rounded-lg%20pl-10%20pr-4%20py-3%20text-white%20placeholder-gray-400%20focus%3Aoutline-none%20focus%3Aborder-blue-500%22%2C%22autoFocus%22%3Atrue%7D"})]}),m.jsxs("div",{className:"flex gap-2 mb-3","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:442:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"442","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%20mb-3%22%7D",children:[m.jsxs("button",{onClick:()=>b("voice"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${w==="voice"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:443:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"443","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(bn,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:451:14","data-matrix-name":"Phone","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"451","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Sesli Arama"]}),m.jsxs("button",{onClick:()=>b("video"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${w==="video"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:454:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"454","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(un,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:462:14","data-matrix-name":"Video","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"462","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Grntl Arama"]})]}),m.jsxs("div",{className:"flex gap-2 mb-3","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:468:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"468","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%20mb-3%22%7D",children:[m.jsxs("button",{onClick:async()=>{if(console.log("[GlobalSearch]  DIRECT VOICE CALL CLICKED"),A.length>0){const H=A.find(J=>J.type==="user");if(H){const J=w;b("voice"),await ke(H),b(J)}}else alert("Sesli arama iin nce kullanc arayn!")},className:"flex-1 py-3 px-3 rounded-lg text-sm font-bold bg-blue-600 text-white hover:bg-blue-500 transition-colors border-2 border-blue-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:469:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"469","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20py-3%20px-3%20rounded-lg%20text-sm%20font-bold%20bg-blue-600%20text-white%20hover%3Abg-blue-500%20transition-colors%20border-2%20border-blue-400%22%7D",children:[m.jsx(bn,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:488:14","data-matrix-name":"Phone","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"488","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Hemen Sesli Arama"]}),m.jsxs("button",{onClick:async()=>{if(console.log("[GlobalSearch]  DIRECT VIDEO CALL CLICKED"),A.length>0){const H=A.find(J=>J.type==="user");if(H){const J=w;b("video"),await ke(H),b(J)}}else alert("Grntl arama iin nce kullanc arayn!")},className:"flex-1 py-3 px-3 rounded-lg text-sm font-bold bg-purple-600 text-white hover:bg-purple-500 transition-colors border-2 border-purple-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:491:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"491","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20py-3%20px-3%20rounded-lg%20text-sm%20font-bold%20bg-purple-600%20text-white%20hover%3Abg-purple-500%20transition-colors%20border-2%20border-purple-400%22%7D",children:[m.jsx(un,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:510:14","data-matrix-name":"Video","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"510","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Hemen Grntl Arama"]})]}),m.jsxs("div",{className:"flex gap-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:516:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"516","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:[m.jsxs("button",{onClick:()=>de("screen"),disabled:k,className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${k&&I==="screen"?"bg-red-600 text-white":"bg-green-700 text-green-200 hover:bg-green-600"} ${k?"opacity-50 cursor-not-allowed":""}`,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:517:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"517","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(Si,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:526:14","data-matrix-name":"Monitor","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"526","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Monitor","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),k&&I==="screen"?"Yayn Durdur":"Ekran Payla"]}),m.jsxs("button",{onClick:()=>de("camera"),disabled:k,className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-colors ${k&&I==="camera"?"bg-red-600 text-white":"bg-purple-700 text-purple-200 hover:bg-purple-600"} ${k?"opacity-50 cursor-not-allowed":""}`,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:529:12","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"529","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx(un,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:538:14","data-matrix-name":"Video","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"538","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),k&&I==="camera"?"Yayn Durdur":"Kamera Payla"]})]})]}),(k||F.size>0)&&m.jsxs("div",{className:"p-3 bg-gray-800/50 border-b border-gray-700","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:546:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"546","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20bg-gray-800%2F50%20border-b%20border-gray-700%22%7D",children:[m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300 mb-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:547:12","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"547","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-sm%20text-gray-300%20mb-2%22%7D",children:[m.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:548:14","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"548","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-2%20h-2%20bg-red-500%20rounded-full%20animate-pulse%22%7D"}),"Aktif Yaynlar"]}),m.jsxs("div",{className:"space-y-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:551:12","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"551","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%22%7D",children:[k&&I&&m.jsx("div",{className:"flex items-center gap-2 text-xs","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:553:16","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"553","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%22%7D",children:m.jsxs("span",{className:"px-2 py-1 bg-blue-600 text-white rounded","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:554:18","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"554","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-2%20py-1%20bg-blue-600%20text-white%20rounded%22%7D",children:["Ben ",I==="screen"?"Ekran":"Kamera"," Paylayorum"]})}),Array.from(F.entries()).map(([H,J])=>m.jsx("div",{className:"flex items-center gap-2 text-xs","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:560:16","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"560","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20text-xs%22%7D",children:m.jsxs("span",{className:"px-2 py-1 bg-green-600 text-white rounded","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:561:18","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"561","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-2%20py-1%20bg-green-600%20text-white%20rounded%22%7D",children:[J.username," ",J.type==="screen"?"Ekran":"Kamera"," Paylayor"]})},H))]})]}),m.jsx("div",{className:"max-h-96 overflow-y-auto p-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:571:8","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"571","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-h-96%20overflow-y-auto%20p-2%22%7D",children:y?m.jsx("div",{className:"p-8 text-center","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:573:12","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"573","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-8%20text-center%22%7D",children:m.jsx("div",{className:"animate-pulse text-gray-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:574:14","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"574","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-pulse%20text-gray-400%22%7D",children:"Aranyor..."})}):A.length===0?m.jsxs("div",{className:"p-8 text-center","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:577:12","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"577","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-8%20text-center%22%7D",children:[m.jsx(wn,{className:"w-12 h-12 text-gray-600 mx-auto mb-3","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:578:14","data-matrix-name":"Search","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"578","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Search","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-gray-600%20mx-auto%20mb-3%22%7D"}),m.jsx("p",{className:"text-gray-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:579:14","data-matrix-name":"p","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"579","data-component-file":"GlobalSearchModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%22%7D",children:C.trim()?"Sonu bulunamad":"Aramak iin yazmaya balayn"})]}):m.jsx("div",{className:"space-y-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:584:12","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"584","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%22%7D",children:A.map((H,J)=>m.jsxs("button",{onClick:()=>ke(H),disabled:H.type==="user"&&Ne(H.id),className:`w-full p-3 rounded-lg transition-colors flex items-center gap-3 text-left ${H.type==="user"&&Ne(H.id)?"opacity-50 cursor-not-allowed bg-gray-800/50":"hover:bg-gray-800"}`,"data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:586:16","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"586","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[m.jsx("div",{className:"flex-shrink-0","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:596:18","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"596","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-shrink-0%22%7D",children:fe(H.type)}),m.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:599:18","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"599","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[m.jsxs("div",{className:"text-white font-medium truncate flex items-center gap-2","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:600:20","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"600","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-white%20font-medium%20truncate%20flex%20items-center%20gap-2%22%7D",children:[H.name,H.type==="user"&&Ne(H.id)&&m.jsx("span",{className:"text-xs bg-yellow-600 text-white px-2 py-1 rounded-full","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:603:24","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"603","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20bg-yellow-600%20text-white%20px-2%20py-1%20rounded-full%22%7D",children:"Bekliyor"})]}),m.jsx("div",{className:"text-sm text-gray-400 truncate","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:608:20","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"608","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-400%20truncate%22%7D",children:H.subtitle})]}),H.type==="user"&&m.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:613:20","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"613","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[w==="voice"?m.jsx(bn,{className:"w-4 h-4 text-blue-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:615:24","data-matrix-name":"Phone","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"615","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-blue-400%22%7D"}):m.jsx(un,{className:"w-4 h-4 text-purple-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:617:24","data-matrix-name":"Video","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"617","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-purple-400%22%7D"}),i&&m.jsx("button",{onClick:re=>{re.stopPropagation(),ze(H.id,H.name)},className:"ml-2 p-1 hover:bg-green-600 rounded transition-colors",title:"Arkada Ekle","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:620:24","data-matrix-name":"button","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"620","data-component-file":"GlobalSearchModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22ml-2%20p-1%20hover%3Abg-green-600%20rounded%20transition-colors%22%2C%22title%22%3A%22Arkada%C5%9F%20Ekle%22%7D",children:m.jsx(Qa,{className:"w-4 h-4 text-green-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:628:26","data-matrix-name":"UserPlus","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"628","data-component-file":"GlobalSearchModal.tsx","data-component-name":"UserPlus","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-green-400%22%7D"})})]})]},`${H.type}-${H.id}-${J}`))})}),m.jsx("div",{className:"p-3 border-t border-gray-700 bg-gray-800/50","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:640:8","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"640","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-3%20border-t%20border-gray-700%20bg-gray-800%2F50%22%7D",children:m.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-500","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:641:10","data-matrix-name":"div","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"641","data-component-file":"GlobalSearchModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20gap-4%20text-xs%20text-gray-500%22%7D",children:[m.jsxs("span",{className:"flex items-center gap-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:642:12","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"642","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[m.jsx(bn,{className:"w-3 h-3 text-blue-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:643:14","data-matrix-name":"Phone","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"643","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-blue-400%22%7D"})," Sesli Arama"]}),m.jsxs("span",{className:"flex items-center gap-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:645:12","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"645","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[m.jsx(un,{className:"w-3 h-3 text-purple-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:646:14","data-matrix-name":"Video","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"646","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-purple-400%22%7D"})," Grntl Arama"]}),m.jsxs("span",{className:"flex items-center gap-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:648:12","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"648","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[m.jsx(Cd,{className:"w-3 h-3 text-green-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:649:14","data-matrix-name":"ServerIcon","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"649","data-component-file":"GlobalSearchModal.tsx","data-component-name":"ServerIcon","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-green-400%22%7D"})," Sunucular"]}),m.jsxs("span",{className:"flex items-center gap-1","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:651:12","data-matrix-name":"span","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"651","data-component-file":"GlobalSearchModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[m.jsx(jn,{className:"w-3 h-3 text-orange-400","data-matrix-id":"src/components/modals/GlobalSearchModal.tsx:652:14","data-matrix-name":"Hash","data-component-path":"src/components/modals/GlobalSearchModal.tsx","data-component-line":"652","data-component-file":"GlobalSearchModal.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-orange-400%22%7D"})," Kanallar"]})]})})]})}):null},ap=()=>{if(typeof window>"u")throw new Error("[ScreenShare] Window object not available");const r=window.SimplePeer;if(!r)throw new Error("[ScreenShare] SimplePeer not found - CDN script may not be loaded");return r},bb=()=>{const{getScreenSharePeers:r,addScreenSharePeer:t,removeScreenSharePeer:a,getScreenStream:o,setScreenStream:l,getCurrentVoiceChannel:i,getCallActive:d,addRemoteStream:u,removeRemoteStream:h}=Kn(),{sendVoiceChannelSignal:x,getCurrentChannelId:C,addEventListener:S,removeEventListener:A}=$r(),D=_.useCallback(async()=>{try{console.log("[ScreenShare] Starting screen share - MESH TOPOLOGY MODE");const b=await dt.getDisplayMedia();l(b),b.getVideoTracks()[0].onended=()=>{console.log("[ScreenShare] Screen share stopped by user"),y()};const k=i(),j=d();if(console.log("[ScreenShare]  Voice channel detection debug:"),console.log("[ScreenShare] - channelId:",k,"(type:",typeof k,")"),console.log("[ScreenShare] - isInCall:",j,"(type:",typeof j,")"),console.log("[ScreenShare] - channelId truthy:",!!k),console.log("[ScreenShare] - isInCall truthy:",!!j),!(!!k||!!j)){console.log("[ScreenShare]  No valid connection state for screen share"),console.log("[ScreenShare] Voice channel state:",{channelId:k,hasChannelId:!!k,channelIdType:typeof k,channelIdValue:k}),console.log("[ScreenShare] Call state:",{isInCall:j,hasCallActive:!!j,callActiveType:typeof j,callActiveValue:j}),console.log("[ScreenShare]  Solution: Join a voice channel or start a call first"),console.log("[ScreenShare] Current WebRTC context state - check if voice channel join or call start is needed"),console.log("[ScreenShare] Full context:",{voiceChannel:{id:k,isConnected:!!k,type:typeof k},call:{isActive:!!j,type:typeof j,value:j},recommendation:"Join a voice channel or start a call before screen sharing"});return}console.log("[ScreenShare] Starting screen share, channelId:",k,"isInCall:",j);const{data:{user:O}}=await ne.auth.getUser();if(!O)throw new Error("Not authenticated");let F=[];k?F=await dt.getVoiceChannelUsers(String(k)):j&&(console.log("[ScreenShare] Screen sharing during active call"),F=[]);const U=F.map(de=>de.user_id).filter(de=>de!==O.id);console.log(`[ScreenShare] Creating ${U.length} peer connections for screen share`);const ce=ap();for(const de of U)try{const ke=new ce({initiator:!0,trickle:!1,stream:b,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]},offerOptions:{offerToReceiveAudio:!1,offerToReceiveVideo:!0}});ke.on("signal",async Ne=>{console.log("[ScreenShare] Sending screen share offer to:",de);const ze=i(),{data:{user:fe}}=await ne.auth.getUser();ze&&fe?(await x(String(ze),{from:de,signal:Ne},"screen-offer"),console.log("[ScreenShare] Screen offer sent via realtime signal to:",de)):console.log("[ScreenShare] No voice channel or user found for screen offer")}),ke.on("error",Ne=>{console.error("[ScreenShare] Peer error for user",de,":",Ne)}),t(de,{peer:ke,userId:de,type:"screen",stream:b})}catch(ke){console.error("[ScreenShare] Failed to create peer for",de,":",ke)}console.log("[ScreenShare] Screen share started with MESH topology")}catch(b){throw console.error("[ScreenShare] Failed to start screen share:",b),b}},[l,i,d,t]),y=_.useCallback(async()=>{console.log("[ScreenShare] Stopping screen share");const b=o();if(!b){console.log("[ScreenShare] No active screen share to stop");return}const k=i(),{data:{user:j}}=await ne.auth.getUser();k&&j?Ai.broadcastScreenShare(String(k),j.id,b,"screen_stop").catch(O=>console.error("[ScreenShare] Broadcast stop failed:",O)):j&&!k&&console.log("[ScreenShare] Stopping screen share during call (no voice channel)"),dt.stopStream(b),l(null),r().forEach((O,F)=>{O.peer&&O.peer.destroy(),a(F)}),console.log("[ScreenShare] Screen share stopped")},[o,l,r,a,i]),E=_.useCallback(async b=>{if(console.log("[ScreenShare] Received screen share signal from:",b.from,"type:",b.type),b.type==="screen-offer"){const k=ap(),j=new k({initiator:!1,trickle:!1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]},answerOptions:{offerToReceiveAudio:!1,offerToReceiveVideo:!0}});j.on("signal",async I=>{console.log("[ScreenShare] Sending screen share answer to:",b.from);const O=i(),{data:{user:F}}=await ne.auth.getUser();O&&F?(await x(String(O),{from:b.from,signal:I},"screen-answer"),console.log("[ScreenShare] Screen answer sent via realtime signal to:",b.from)):console.log("[ScreenShare] No voice channel found for answer, screen share may be during call")}),j.on("stream",I=>{if(console.log("[ScreenShare]  Received remote screen stream from:",b.from),console.log("[ScreenShare] Stream details:",{id:I.id,active:I.active,videoTracks:I.getVideoTracks().length,hasVideoTrack:I.getVideoTracks().length>0}),!I||I.getVideoTracks().length===0){console.error("[ScreenShare]  Invalid screen stream from:",b.from);return}const O=`screen-share-video-${b.from}`,F=document.getElementById(O);F&&(F.remove(),console.log("[ScreenShare] Removed existing video for user:",b.from));const U=document.createElement("video");U.id=O,U.srcObject=I,U.autoplay=!0,U.playsInline=!0,U.muted=!0,U.style.width="100%",U.style.height="auto",U.onloadedmetadata=()=>{console.log("[ScreenShare] Video metadata loaded for user:",b.from)},U.oncanplay=()=>{console.log("[ScreenShare] Video can play for user:",b.from)},U.onerror=de=>{console.error("[ScreenShare] Video element error for user:",b.from,de)};const ce=document.getElementById("screen-share-container");if(ce)ce.appendChild(U),console.log("[ScreenShare] Video element added to DOM for user:",b.from);else{console.warn("[ScreenShare] Screen share container not found, creating fallback container");const de=document.createElement("div");de.id="screen-share-container",de.style.cssText="position: fixed; bottom: 20px; right: 20px; width: 300px; height: 200px; background: black; border: 2px solid #3ba55d; z-index: 1000;",document.body.appendChild(de),de.appendChild(U),console.log("[ScreenShare] Created fallback container and added video for user:",b.from)}u(b.from,I),t(b.from,{peer:j,userId:b.from,type:"screen",stream:I}),console.log("[ScreenShare]  Screen share stream setup complete for user:",b.from)}),j.on("error",I=>{console.error("[ScreenShare] Peer error for",b.from,":",I),a(b.from),h(b.from),console.log("[ScreenShare] Connection to",b.from,"failed. Stream removed.")});try{j.signal(b.signal)}catch(I){console.error("[ScreenShare] Failed to signal peer:",I)}}else if(b.type==="screen-answer"){const j=r().get(b.from);if(j&&j.peer)try{j.peer.signal(b.signal),console.log("[ScreenShare] Processed answer from:",b.from)}catch(I){console.error("[ScreenShare] Failed to process answer:",I)}}},[u,t,a,h,i,r]),w=_.useCallback(()=>o()!==null,[o]);return _.useEffect(()=>(S("ReceiveVoiceChannelSignal",b=>{var k;(k=b.type)!=null&&k.startsWith("screen-")&&E(b)}),()=>{A("ReceiveVoiceChannelSignal",b=>{var k;(k=b.type)!=null&&k.startsWith("screen-")&&E(b)})}),[S,A,E,o,i,t]),{startScreenShare:D,stopScreenShare:y,isScreenSharing:w}};var mi={exports:{}},Oc,op;function wb(){if(op)return Oc;op=1;var r=1e3,t=r*60,a=t*60,o=a*24,l=o*7,i=o*365.25;Oc=function(C,S){S=S||{};var A=typeof C;if(A==="string"&&C.length>0)return d(C);if(A==="number"&&isFinite(C))return S.long?h(C):u(C);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(C))};function d(C){if(C=String(C),!(C.length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(C);if(S){var A=parseFloat(S[1]),D=(S[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return A*i;case"weeks":case"week":case"w":return A*l;case"days":case"day":case"d":return A*o;case"hours":case"hour":case"hrs":case"hr":case"h":return A*a;case"minutes":case"minute":case"mins":case"min":case"m":return A*t;case"seconds":case"second":case"secs":case"sec":case"s":return A*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return A;default:return}}}}function u(C){var S=Math.abs(C);return S>=o?Math.round(C/o)+"d":S>=a?Math.round(C/a)+"h":S>=t?Math.round(C/t)+"m":S>=r?Math.round(C/r)+"s":C+"ms"}function h(C){var S=Math.abs(C);return S>=o?x(C,S,o,"day"):S>=a?x(C,S,a,"hour"):S>=t?x(C,S,t,"minute"):S>=r?x(C,S,r,"second"):C+" ms"}function x(C,S,A,D){var y=S>=A*1.5;return Math.round(C/A)+" "+D+(y?"s":"")}return Oc}var Ic,rp;function Cb(){if(rp)return Ic;rp=1;function r(t){o.debug=o,o.default=o,o.coerce=x,o.disable=u,o.enable=i,o.enabled=h,o.humanize=wb(),o.destroy=C,Object.keys(t).forEach(S=>{o[S]=t[S]}),o.names=[],o.skips=[],o.formatters={};function a(S){let A=0;for(let D=0;D<S.length;D++)A=(A<<5)-A+S.charCodeAt(D),A|=0;return o.colors[Math.abs(A)%o.colors.length]}o.selectColor=a;function o(S){let A,D=null,y,E;function w(...b){if(!w.enabled)return;const k=w,j=Number(new Date),I=j-(A||j);k.diff=I,k.prev=A,k.curr=j,A=j,b[0]=o.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let O=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(U,ce)=>{if(U==="%%")return"%";O++;const de=o.formatters[ce];if(typeof de=="function"){const ke=b[O];U=de.call(k,ke),b.splice(O,1),O--}return U}),o.formatArgs.call(k,b),(k.log||o.log).apply(k,b)}return w.namespace=S,w.useColors=o.useColors(),w.color=o.selectColor(S),w.extend=l,w.destroy=o.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(y!==o.namespaces&&(y=o.namespaces,E=o.enabled(S)),E),set:b=>{D=b}}),typeof o.init=="function"&&o.init(w),w}function l(S,A){const D=o(this.namespace+(typeof A>"u"?":":A)+S);return D.log=this.log,D}function i(S){o.save(S),o.namespaces=S,o.names=[],o.skips=[];const A=(typeof S=="string"?S:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const D of A)D[0]==="-"?o.skips.push(D.slice(1)):o.names.push(D)}function d(S,A){let D=0,y=0,E=-1,w=0;for(;D<S.length;)if(y<A.length&&(A[y]===S[D]||A[y]==="*"))A[y]==="*"?(E=y,w=D,y++):(D++,y++);else if(E!==-1)y=E+1,w++,D=w;else return!1;for(;y<A.length&&A[y]==="*";)y++;return y===A.length}function u(){const S=[...o.names,...o.skips.map(A=>"-"+A)].join(",");return o.enable(""),S}function h(S){for(const A of o.skips)if(d(S,A))return!1;for(const A of o.names)if(d(S,A))return!0;return!1}function x(S){return S instanceof Error?S.stack||S.message:S}function C(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return Ic=r,Ic}var sp;function Sb(){return sp||(sp=1,(function(r,t){var a={};t.formatArgs=l,t.save=i,t.load=d,t.useColors=o,t.storage=u(),t.destroy=(()=>{let x=!1;return()=>{x||(x=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let x;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(x=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(x[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(x){if(x[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+x[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const C="color: "+this.color;x.splice(1,0,C,"color: inherit");let S=0,A=0;x[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(S++,D==="%c"&&(A=S))}),x.splice(A,0,C)}t.log=console.debug||console.log||(()=>{});function i(x){try{x?t.storage.setItem("debug",x):t.storage.removeItem("debug")}catch{}}function d(){let x;try{x=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!x&&typeof process<"u"&&"env"in process&&(x=a.DEBUG),x}function u(){try{return localStorage}catch{}}r.exports=Cb()(t);const{formatters:h}=r.exports;h.j=function(x){try{return JSON.stringify(x)}catch(C){return"[UnexpectedJSONParseError]: "+C.message}}})(mi,mi.exports)),mi.exports}var Pc,ip;function Ab(){return ip||(ip=1,Pc=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}),Pc}var ui={exports:{}},pi={exports:{}},Fc={},Dr={},lp;function _b(){if(lp)return Dr;lp=1,Dr.byteLength=u,Dr.toByteArray=x,Dr.fromByteArray=A;for(var r=[],t=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,i=o.length;l<i;++l)r[l]=o[l],t[o.charCodeAt(l)]=l;t[45]=62,t[95]=63;function d(D){var y=D.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=D.indexOf("=");E===-1&&(E=y);var w=E===y?0:4-E%4;return[E,w]}function u(D){var y=d(D),E=y[0],w=y[1];return(E+w)*3/4-w}function h(D,y,E){return(y+E)*3/4-E}function x(D){var y,E=d(D),w=E[0],b=E[1],k=new a(h(D,w,b)),j=0,I=b>0?w-4:w,O;for(O=0;O<I;O+=4)y=t[D.charCodeAt(O)]<<18|t[D.charCodeAt(O+1)]<<12|t[D.charCodeAt(O+2)]<<6|t[D.charCodeAt(O+3)],k[j++]=y>>16&255,k[j++]=y>>8&255,k[j++]=y&255;return b===2&&(y=t[D.charCodeAt(O)]<<2|t[D.charCodeAt(O+1)]>>4,k[j++]=y&255),b===1&&(y=t[D.charCodeAt(O)]<<10|t[D.charCodeAt(O+1)]<<4|t[D.charCodeAt(O+2)]>>2,k[j++]=y>>8&255,k[j++]=y&255),k}function C(D){return r[D>>18&63]+r[D>>12&63]+r[D>>6&63]+r[D&63]}function S(D,y,E){for(var w,b=[],k=y;k<E;k+=3)w=(D[k]<<16&16711680)+(D[k+1]<<8&65280)+(D[k+2]&255),b.push(C(w));return b.join("")}function A(D){for(var y,E=D.length,w=E%3,b=[],k=16383,j=0,I=E-w;j<I;j+=k)b.push(S(D,j,j+k>I?I:j+k));return w===1?(y=D[E-1],b.push(r[y>>2]+r[y<<4&63]+"==")):w===2&&(y=(D[E-2]<<8)+D[E-1],b.push(r[y>>10]+r[y>>4&63]+r[y<<2&63]+"=")),b.join("")}return Dr}var hi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var cp;function Eb(){return cp||(cp=1,hi.read=function(r,t,a,o,l){var i,d,u=l*8-o-1,h=(1<<u)-1,x=h>>1,C=-7,S=a?l-1:0,A=a?-1:1,D=r[t+S];for(S+=A,i=D&(1<<-C)-1,D>>=-C,C+=u;C>0;i=i*256+r[t+S],S+=A,C-=8);for(d=i&(1<<-C)-1,i>>=-C,C+=o;C>0;d=d*256+r[t+S],S+=A,C-=8);if(i===0)i=1-x;else{if(i===h)return d?NaN:(D?-1:1)*(1/0);d=d+Math.pow(2,o),i=i-x}return(D?-1:1)*d*Math.pow(2,i-o)},hi.write=function(r,t,a,o,l,i){var d,u,h,x=i*8-l-1,C=(1<<x)-1,S=C>>1,A=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=o?0:i-1,y=o?1:-1,E=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,d=C):(d=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-d))<1&&(d--,h*=2),d+S>=1?t+=A/h:t+=A*Math.pow(2,1-S),t*h>=2&&(d++,h/=2),d+S>=C?(u=0,d=C):d+S>=1?(u=(t*h-1)*Math.pow(2,l),d=d+S):(u=t*Math.pow(2,S-1)*Math.pow(2,l),d=0));l>=8;r[a+D]=u&255,D+=y,u/=256,l-=8);for(d=d<<l|u,x+=l;x>0;r[a+D]=d&255,D+=y,d/=256,x-=8);r[a+D-y]|=E*128}),hi}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var dp;function qr(){return dp||(dp=1,(function(r){const t=_b(),a=Eb(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=k,r.INSPECT_MAX_BYTES=50;const l=2147483647;r.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const R=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(R,f),R.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(R){if(R>l)throw new RangeError('The value "'+R+'" is invalid for option "size"');const f=new Uint8Array(R);return Object.setPrototypeOf(f,u.prototype),f}function u(R,f,v){if(typeof R=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(R)}return h(R,f,v)}u.poolSize=8192;function h(R,f,v){if(typeof R=="string")return A(R,f);if(ArrayBuffer.isView(R))return y(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(We(R,ArrayBuffer)||R&&We(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(We(R,SharedArrayBuffer)||R&&We(R.buffer,SharedArrayBuffer)))return E(R,f,v);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=R.valueOf&&R.valueOf();if(L!=null&&L!==R)return u.from(L,f,v);const Y=w(R);if(Y)return Y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return u.from(R[Symbol.toPrimitive]("string"),f,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}u.from=function(R,f,v){return h(R,f,v)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function x(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function C(R,f,v){return x(R),R<=0?d(R):f!==void 0?typeof v=="string"?d(R).fill(f,v):d(R).fill(f):d(R)}u.alloc=function(R,f,v){return C(R,f,v)};function S(R){return x(R),d(R<0?0:b(R)|0)}u.allocUnsafe=function(R){return S(R)},u.allocUnsafeSlow=function(R){return S(R)};function A(R,f){if((typeof f!="string"||f==="")&&(f="utf8"),!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const v=j(R,f)|0;let L=d(v);const Y=L.write(R,f);return Y!==v&&(L=L.slice(0,Y)),L}function D(R){const f=R.length<0?0:b(R.length)|0,v=d(f);for(let L=0;L<f;L+=1)v[L]=R[L]&255;return v}function y(R){if(We(R,Uint8Array)){const f=new Uint8Array(R);return E(f.buffer,f.byteOffset,f.byteLength)}return D(R)}function E(R,f,v){if(f<0||R.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<f+(v||0))throw new RangeError('"length" is outside of buffer bounds');let L;return f===void 0&&v===void 0?L=new Uint8Array(R):v===void 0?L=new Uint8Array(R,f):L=new Uint8Array(R,f,v),Object.setPrototypeOf(L,u.prototype),L}function w(R){if(u.isBuffer(R)){const f=b(R.length)|0,v=d(f);return v.length===0||R.copy(v,0,0,f),v}if(R.length!==void 0)return typeof R.length!="number"||Re(R.length)?d(0):D(R);if(R.type==="Buffer"&&Array.isArray(R.data))return D(R.data)}function b(R){if(R>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return R|0}function k(R){return+R!=R&&(R=0),u.alloc(+R)}u.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==u.prototype},u.compare=function(f,v){if(We(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),We(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(f)||!u.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===v)return 0;let L=f.length,Y=v.length;for(let se=0,ve=Math.min(L,Y);se<ve;++se)if(f[se]!==v[se]){L=f[se],Y=v[se];break}return L<Y?-1:Y<L?1:0},u.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(f,v){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return u.alloc(0);let L;if(v===void 0)for(v=0,L=0;L<f.length;++L)v+=f[L].length;const Y=u.allocUnsafe(v);let se=0;for(L=0;L<f.length;++L){let ve=f[L];if(We(ve,Uint8Array))se+ve.length>Y.length?(u.isBuffer(ve)||(ve=u.from(ve)),ve.copy(Y,se)):Uint8Array.prototype.set.call(Y,ve,se);else if(u.isBuffer(ve))ve.copy(Y,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ve.length}return Y};function j(R,f){if(u.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||We(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const v=R.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&v===0)return 0;let Y=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return we(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Pe(R).length;default:if(Y)return L?-1:we(R).length;f=(""+f).toLowerCase(),Y=!0}}u.byteLength=j;function I(R,f,v){let L=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,f>>>=0,v<=f))return"";for(R||(R="utf8");;)switch(R){case"hex":return te(this,f,v);case"utf8":case"utf-8":return H(this,f,v);case"ascii":return z(this,f,v);case"latin1":case"binary":return Z(this,f,v);case"base64":return fe(this,f,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,f,v);default:if(L)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),L=!0}}u.prototype._isBuffer=!0;function O(R,f,v){const L=R[f];R[f]=R[v],R[v]=L}u.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<f;v+=2)O(this,v,v+1);return this},u.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<f;v+=4)O(this,v,v+3),O(this,v+1,v+2);return this},u.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<f;v+=8)O(this,v,v+7),O(this,v+1,v+6),O(this,v+2,v+5),O(this,v+3,v+4);return this},u.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?H(this,0,f):I.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(f){if(!u.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:u.compare(this,f)===0},u.prototype.inspect=function(){let f="";const v=r.INSPECT_MAX_BYTES;return f=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(f+=" ... "),"<Buffer "+f+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(f,v,L,Y,se){if(We(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(v===void 0&&(v=0),L===void 0&&(L=f?f.length:0),Y===void 0&&(Y=0),se===void 0&&(se=this.length),v<0||L>f.length||Y<0||se>this.length)throw new RangeError("out of range index");if(Y>=se&&v>=L)return 0;if(Y>=se)return-1;if(v>=L)return 1;if(v>>>=0,L>>>=0,Y>>>=0,se>>>=0,this===f)return 0;let ve=se-Y,et=L-v;const be=Math.min(ve,et),Le=this.slice(Y,se),rt=f.slice(v,L);for(let He=0;He<be;++He)if(Le[He]!==rt[He]){ve=Le[He],et=rt[He];break}return ve<et?-1:et<ve?1:0};function F(R,f,v,L,Y){if(R.length===0)return-1;if(typeof v=="string"?(L=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,Re(v)&&(v=Y?0:R.length-1),v<0&&(v=R.length+v),v>=R.length){if(Y)return-1;v=R.length-1}else if(v<0)if(Y)v=0;else return-1;if(typeof f=="string"&&(f=u.from(f,L)),u.isBuffer(f))return f.length===0?-1:U(R,f,v,L,Y);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?Y?Uint8Array.prototype.indexOf.call(R,f,v):Uint8Array.prototype.lastIndexOf.call(R,f,v):U(R,[f],v,L,Y);throw new TypeError("val must be string, number or Buffer")}function U(R,f,v,L,Y){let se=1,ve=R.length,et=f.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(R.length<2||f.length<2)return-1;se=2,ve/=2,et/=2,v/=2}function be(rt,He){return se===1?rt[He]:rt.readUInt16BE(He*se)}let Le;if(Y){let rt=-1;for(Le=v;Le<ve;Le++)if(be(R,Le)===be(f,rt===-1?0:Le-rt)){if(rt===-1&&(rt=Le),Le-rt+1===et)return rt*se}else rt!==-1&&(Le-=Le-rt),rt=-1}else for(v+et>ve&&(v=ve-et),Le=v;Le>=0;Le--){let rt=!0;for(let He=0;He<et;He++)if(be(R,Le+He)!==be(f,He)){rt=!1;break}if(rt)return Le}return-1}u.prototype.includes=function(f,v,L){return this.indexOf(f,v,L)!==-1},u.prototype.indexOf=function(f,v,L){return F(this,f,v,L,!0)},u.prototype.lastIndexOf=function(f,v,L){return F(this,f,v,L,!1)};function ce(R,f,v,L){v=Number(v)||0;const Y=R.length-v;L?(L=Number(L),L>Y&&(L=Y)):L=Y;const se=f.length;L>se/2&&(L=se/2);let ve;for(ve=0;ve<L;++ve){const et=parseInt(f.substr(ve*2,2),16);if(Re(et))return ve;R[v+ve]=et}return ve}function de(R,f,v,L){return ot(we(f,R.length-v),R,v,L)}function ke(R,f,v,L){return ot(Me(f),R,v,L)}function Ne(R,f,v,L){return ot(Pe(f),R,v,L)}function ze(R,f,v,L){return ot(Ve(f,R.length-v),R,v,L)}u.prototype.write=function(f,v,L,Y){if(v===void 0)Y="utf8",L=this.length,v=0;else if(L===void 0&&typeof v=="string")Y=v,L=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(L)?(L=L>>>0,Y===void 0&&(Y="utf8")):(Y=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-v;if((L===void 0||L>se)&&(L=se),f.length>0&&(L<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");Y||(Y="utf8");let ve=!1;for(;;)switch(Y){case"hex":return ce(this,f,v,L);case"utf8":case"utf-8":return de(this,f,v,L);case"ascii":case"latin1":case"binary":return ke(this,f,v,L);case"base64":return Ne(this,f,v,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,f,v,L);default:if(ve)throw new TypeError("Unknown encoding: "+Y);Y=(""+Y).toLowerCase(),ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function fe(R,f,v){return f===0&&v===R.length?t.fromByteArray(R):t.fromByteArray(R.slice(f,v))}function H(R,f,v){v=Math.min(R.length,v);const L=[];let Y=f;for(;Y<v;){const se=R[Y];let ve=null,et=se>239?4:se>223?3:se>191?2:1;if(Y+et<=v){let be,Le,rt,He;switch(et){case 1:se<128&&(ve=se);break;case 2:be=R[Y+1],(be&192)===128&&(He=(se&31)<<6|be&63,He>127&&(ve=He));break;case 3:be=R[Y+1],Le=R[Y+2],(be&192)===128&&(Le&192)===128&&(He=(se&15)<<12|(be&63)<<6|Le&63,He>2047&&(He<55296||He>57343)&&(ve=He));break;case 4:be=R[Y+1],Le=R[Y+2],rt=R[Y+3],(be&192)===128&&(Le&192)===128&&(rt&192)===128&&(He=(se&15)<<18|(be&63)<<12|(Le&63)<<6|rt&63,He>65535&&He<1114112&&(ve=He))}}ve===null?(ve=65533,et=1):ve>65535&&(ve-=65536,L.push(ve>>>10&1023|55296),ve=56320|ve&1023),L.push(ve),Y+=et}return re(L)}const J=4096;function re(R){const f=R.length;if(f<=J)return String.fromCharCode.apply(String,R);let v="",L=0;for(;L<f;)v+=String.fromCharCode.apply(String,R.slice(L,L+=J));return v}function z(R,f,v){let L="";v=Math.min(R.length,v);for(let Y=f;Y<v;++Y)L+=String.fromCharCode(R[Y]&127);return L}function Z(R,f,v){let L="";v=Math.min(R.length,v);for(let Y=f;Y<v;++Y)L+=String.fromCharCode(R[Y]);return L}function te(R,f,v){const L=R.length;(!f||f<0)&&(f=0),(!v||v<0||v>L)&&(v=L);let Y="";for(let se=f;se<v;++se)Y+=Te[R[se]];return Y}function V(R,f,v){const L=R.slice(f,v);let Y="";for(let se=0;se<L.length-1;se+=2)Y+=String.fromCharCode(L[se]+L[se+1]*256);return Y}u.prototype.slice=function(f,v){const L=this.length;f=~~f,v=v===void 0?L:~~v,f<0?(f+=L,f<0&&(f=0)):f>L&&(f=L),v<0?(v+=L,v<0&&(v=0)):v>L&&(v=L),v<f&&(v=f);const Y=this.subarray(f,v);return Object.setPrototypeOf(Y,u.prototype),Y};function B(R,f,v){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+f>v)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(f,v,L){f=f>>>0,v=v>>>0,L||B(f,v,this.length);let Y=this[f],se=1,ve=0;for(;++ve<v&&(se*=256);)Y+=this[f+ve]*se;return Y},u.prototype.readUintBE=u.prototype.readUIntBE=function(f,v,L){f=f>>>0,v=v>>>0,L||B(f,v,this.length);let Y=this[f+--v],se=1;for(;v>0&&(se*=256);)Y+=this[f+--v]*se;return Y},u.prototype.readUint8=u.prototype.readUInt8=function(f,v){return f=f>>>0,v||B(f,1,this.length),this[f]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(f,v){return f=f>>>0,v||B(f,2,this.length),this[f]|this[f+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(f,v){return f=f>>>0,v||B(f,2,this.length),this[f]<<8|this[f+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(f,v){return f=f>>>0,v||B(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(f,v){return f=f>>>0,v||B(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},u.prototype.readBigUInt64LE=qe(function(f){f=f>>>0,ee(f,"offset");const v=this[f],L=this[f+7];(v===void 0||L===void 0)&&ge(f,this.length-8);const Y=v+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,se=this[++f]+this[++f]*2**8+this[++f]*2**16+L*2**24;return BigInt(Y)+(BigInt(se)<<BigInt(32))}),u.prototype.readBigUInt64BE=qe(function(f){f=f>>>0,ee(f,"offset");const v=this[f],L=this[f+7];(v===void 0||L===void 0)&&ge(f,this.length-8);const Y=v*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],se=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+L;return(BigInt(Y)<<BigInt(32))+BigInt(se)}),u.prototype.readIntLE=function(f,v,L){f=f>>>0,v=v>>>0,L||B(f,v,this.length);let Y=this[f],se=1,ve=0;for(;++ve<v&&(se*=256);)Y+=this[f+ve]*se;return se*=128,Y>=se&&(Y-=Math.pow(2,8*v)),Y},u.prototype.readIntBE=function(f,v,L){f=f>>>0,v=v>>>0,L||B(f,v,this.length);let Y=v,se=1,ve=this[f+--Y];for(;Y>0&&(se*=256);)ve+=this[f+--Y]*se;return se*=128,ve>=se&&(ve-=Math.pow(2,8*v)),ve},u.prototype.readInt8=function(f,v){return f=f>>>0,v||B(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},u.prototype.readInt16LE=function(f,v){f=f>>>0,v||B(f,2,this.length);const L=this[f]|this[f+1]<<8;return L&32768?L|4294901760:L},u.prototype.readInt16BE=function(f,v){f=f>>>0,v||B(f,2,this.length);const L=this[f+1]|this[f]<<8;return L&32768?L|4294901760:L},u.prototype.readInt32LE=function(f,v){return f=f>>>0,v||B(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},u.prototype.readInt32BE=function(f,v){return f=f>>>0,v||B(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},u.prototype.readBigInt64LE=qe(function(f){f=f>>>0,ee(f,"offset");const v=this[f],L=this[f+7];(v===void 0||L===void 0)&&ge(f,this.length-8);const Y=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(L<<24);return(BigInt(Y)<<BigInt(32))+BigInt(v+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),u.prototype.readBigInt64BE=qe(function(f){f=f>>>0,ee(f,"offset");const v=this[f],L=this[f+7];(v===void 0||L===void 0)&&ge(f,this.length-8);const Y=(v<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(Y)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+L)}),u.prototype.readFloatLE=function(f,v){return f=f>>>0,v||B(f,4,this.length),a.read(this,f,!0,23,4)},u.prototype.readFloatBE=function(f,v){return f=f>>>0,v||B(f,4,this.length),a.read(this,f,!1,23,4)},u.prototype.readDoubleLE=function(f,v){return f=f>>>0,v||B(f,8,this.length),a.read(this,f,!0,52,8)},u.prototype.readDoubleBE=function(f,v){return f=f>>>0,v||B(f,8,this.length),a.read(this,f,!1,52,8)};function q(R,f,v,L,Y,se){if(!u.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>Y||f<se)throw new RangeError('"value" argument is out of bounds');if(v+L>R.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(f,v,L,Y){if(f=+f,v=v>>>0,L=L>>>0,!Y){const et=Math.pow(2,8*L)-1;q(this,f,v,L,et,0)}let se=1,ve=0;for(this[v]=f&255;++ve<L&&(se*=256);)this[v+ve]=f/se&255;return v+L},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(f,v,L,Y){if(f=+f,v=v>>>0,L=L>>>0,!Y){const et=Math.pow(2,8*L)-1;q(this,f,v,L,et,0)}let se=L-1,ve=1;for(this[v+se]=f&255;--se>=0&&(ve*=256);)this[v+se]=f/ve&255;return v+L},u.prototype.writeUint8=u.prototype.writeUInt8=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,1,255,0),this[v]=f&255,v+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,2,65535,0),this[v]=f&255,this[v+1]=f>>>8,v+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,2,65535,0),this[v]=f>>>8,this[v+1]=f&255,v+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,4,4294967295,0),this[v+3]=f>>>24,this[v+2]=f>>>16,this[v+1]=f>>>8,this[v]=f&255,v+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,4,4294967295,0),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4};function me(R,f,v,L,Y){N(f,L,Y,R,v,7);let se=Number(f&BigInt(4294967295));R[v++]=se,se=se>>8,R[v++]=se,se=se>>8,R[v++]=se,se=se>>8,R[v++]=se;let ve=Number(f>>BigInt(32)&BigInt(4294967295));return R[v++]=ve,ve=ve>>8,R[v++]=ve,ve=ve>>8,R[v++]=ve,ve=ve>>8,R[v++]=ve,v}function he(R,f,v,L,Y){N(f,L,Y,R,v,7);let se=Number(f&BigInt(4294967295));R[v+7]=se,se=se>>8,R[v+6]=se,se=se>>8,R[v+5]=se,se=se>>8,R[v+4]=se;let ve=Number(f>>BigInt(32)&BigInt(4294967295));return R[v+3]=ve,ve=ve>>8,R[v+2]=ve,ve=ve>>8,R[v+1]=ve,ve=ve>>8,R[v]=ve,v+8}u.prototype.writeBigUInt64LE=qe(function(f,v=0){return me(this,f,v,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=qe(function(f,v=0){return he(this,f,v,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(f,v,L,Y){if(f=+f,v=v>>>0,!Y){const be=Math.pow(2,8*L-1);q(this,f,v,L,be-1,-be)}let se=0,ve=1,et=0;for(this[v]=f&255;++se<L&&(ve*=256);)f<0&&et===0&&this[v+se-1]!==0&&(et=1),this[v+se]=(f/ve>>0)-et&255;return v+L},u.prototype.writeIntBE=function(f,v,L,Y){if(f=+f,v=v>>>0,!Y){const be=Math.pow(2,8*L-1);q(this,f,v,L,be-1,-be)}let se=L-1,ve=1,et=0;for(this[v+se]=f&255;--se>=0&&(ve*=256);)f<0&&et===0&&this[v+se+1]!==0&&(et=1),this[v+se]=(f/ve>>0)-et&255;return v+L},u.prototype.writeInt8=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,1,127,-128),f<0&&(f=255+f+1),this[v]=f&255,v+1},u.prototype.writeInt16LE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,2,32767,-32768),this[v]=f&255,this[v+1]=f>>>8,v+2},u.prototype.writeInt16BE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,2,32767,-32768),this[v]=f>>>8,this[v+1]=f&255,v+2},u.prototype.writeInt32LE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,4,2147483647,-2147483648),this[v]=f&255,this[v+1]=f>>>8,this[v+2]=f>>>16,this[v+3]=f>>>24,v+4},u.prototype.writeInt32BE=function(f,v,L){return f=+f,v=v>>>0,L||q(this,f,v,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[v]=f>>>24,this[v+1]=f>>>16,this[v+2]=f>>>8,this[v+3]=f&255,v+4},u.prototype.writeBigInt64LE=qe(function(f,v=0){return me(this,f,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=qe(function(f,v=0){return he(this,f,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(R,f,v,L,Y,se){if(v+L>R.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function $(R,f,v,L,Y){return f=+f,v=v>>>0,Y||xe(R,f,v,4),a.write(R,f,v,L,23,4),v+4}u.prototype.writeFloatLE=function(f,v,L){return $(this,f,v,!0,L)},u.prototype.writeFloatBE=function(f,v,L){return $(this,f,v,!1,L)};function W(R,f,v,L,Y){return f=+f,v=v>>>0,Y||xe(R,f,v,8),a.write(R,f,v,L,52,8),v+8}u.prototype.writeDoubleLE=function(f,v,L){return W(this,f,v,!0,L)},u.prototype.writeDoubleBE=function(f,v,L){return W(this,f,v,!1,L)},u.prototype.copy=function(f,v,L,Y){if(!u.isBuffer(f))throw new TypeError("argument should be a Buffer");if(L||(L=0),!Y&&Y!==0&&(Y=this.length),v>=f.length&&(v=f.length),v||(v=0),Y>0&&Y<L&&(Y=L),Y===L||f.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("sourceEnd out of bounds");Y>this.length&&(Y=this.length),f.length-v<Y-L&&(Y=f.length-v+L);const se=Y-L;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,L,Y):Uint8Array.prototype.set.call(f,this.subarray(L,Y),v),se},u.prototype.fill=function(f,v,L,Y){if(typeof f=="string"){if(typeof v=="string"?(Y=v,v=0,L=this.length):typeof L=="string"&&(Y=L,L=this.length),Y!==void 0&&typeof Y!="string")throw new TypeError("encoding must be a string");if(typeof Y=="string"&&!u.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);if(f.length===1){const ve=f.charCodeAt(0);(Y==="utf8"&&ve<128||Y==="latin1")&&(f=ve)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(v<0||this.length<v||this.length<L)throw new RangeError("Out of range index");if(L<=v)return this;v=v>>>0,L=L===void 0?this.length:L>>>0,f||(f=0);let se;if(typeof f=="number")for(se=v;se<L;++se)this[se]=f;else{const ve=u.isBuffer(f)?f:u.from(f,Y),et=ve.length;if(et===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(se=0;se<L-v;++se)this[se+v]=ve[se%et]}return this};const ie={};function ye(R,f,v){ie[R]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,this.stack,delete this.name}get code(){return R}set code(Y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Y,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(R,f){return`The "${R}" argument must be of type number. Received type ${typeof f}`},TypeError),ye("ERR_OUT_OF_RANGE",function(R,f,v){let L=`The value of "${R}" is out of range.`,Y=v;return Number.isInteger(v)&&Math.abs(v)>2**32?Y=pe(String(v)):typeof v=="bigint"&&(Y=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(Y=pe(Y)),Y+="n"),L+=` It must be ${f}. Received ${Y}`,L},RangeError);function pe(R){let f="",v=R.length;const L=R[0]==="-"?1:0;for(;v>=L+4;v-=3)f=`_${R.slice(v-3,v)}${f}`;return`${R.slice(0,v)}${f}`}function T(R,f,v){ee(f,"offset"),(R[f]===void 0||R[f+v]===void 0)&&ge(f,R.length-(v+1))}function N(R,f,v,L,Y,se){if(R>v||R<f){const ve=typeof f=="bigint"?"n":"";let et;throw f===0||f===BigInt(0)?et=`>= 0${ve} and < 2${ve} ** ${(se+1)*8}${ve}`:et=`>= -(2${ve} ** ${(se+1)*8-1}${ve}) and < 2 ** ${(se+1)*8-1}${ve}`,new ie.ERR_OUT_OF_RANGE("value",et,R)}T(L,Y,se)}function ee(R,f){if(typeof R!="number")throw new ie.ERR_INVALID_ARG_TYPE(f,"number",R)}function ge(R,f,v){throw Math.floor(R)!==R?(ee(R,v),new ie.ERR_OUT_OF_RANGE("offset","an integer",R)):f<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,R)}const Ae=/[^+/0-9A-Za-z-_]/g;function X(R){if(R=R.split("=")[0],R=R.trim().replace(Ae,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function we(R,f){f=f||1/0;let v;const L=R.length;let Y=null;const se=[];for(let ve=0;ve<L;++ve){if(v=R.charCodeAt(ve),v>55295&&v<57344){if(!Y){if(v>56319){(f-=3)>-1&&se.push(239,191,189);continue}else if(ve+1===L){(f-=3)>-1&&se.push(239,191,189);continue}Y=v;continue}if(v<56320){(f-=3)>-1&&se.push(239,191,189),Y=v;continue}v=(Y-55296<<10|v-56320)+65536}else Y&&(f-=3)>-1&&se.push(239,191,189);if(Y=null,v<128){if((f-=1)<0)break;se.push(v)}else if(v<2048){if((f-=2)<0)break;se.push(v>>6|192,v&63|128)}else if(v<65536){if((f-=3)<0)break;se.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((f-=4)<0)break;se.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return se}function Me(R){const f=[];for(let v=0;v<R.length;++v)f.push(R.charCodeAt(v)&255);return f}function Ve(R,f){let v,L,Y;const se=[];for(let ve=0;ve<R.length&&!((f-=2)<0);++ve)v=R.charCodeAt(ve),L=v>>8,Y=v%256,se.push(Y),se.push(L);return se}function Pe(R){return t.toByteArray(X(R))}function ot(R,f,v,L){let Y;for(Y=0;Y<L&&!(Y+v>=f.length||Y>=R.length);++Y)f[Y+v]=R[Y];return Y}function We(R,f){return R instanceof f||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===f.name}function Re(R){return R!==R}const Te=(function(){const R="0123456789abcdef",f=new Array(256);for(let v=0;v<16;++v){const L=v*16;for(let Y=0;Y<16;++Y)f[L+Y]=R[v]+R[Y]}return f})();function qe(R){return typeof BigInt>"u"?nt:R}function nt(){throw new Error("BigInt not supported")}})(Fc)),Fc}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var mp;function df(){return mp||(mp=1,(function(r,t){var a=qr(),o=a.Buffer;function l(d,u){for(var h in d)u[h]=d[h]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=a:(l(a,t),t.Buffer=i);function i(d,u,h){return o(d,u,h)}i.prototype=Object.create(o.prototype),l(o,i),i.from=function(d,u,h){if(typeof d=="number")throw new TypeError("Argument must not be a number");return o(d,u,h)},i.alloc=function(d,u,h){if(typeof d!="number")throw new TypeError("Argument must be a number");var x=o(d);return u!==void 0?typeof h=="string"?x.fill(u,h):x.fill(u):x.fill(0),x},i.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return o(d)},i.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return a.SlowBuffer(d)}})(pi,pi.exports)),pi.exports}var up;function Nb(){if(up)return ui.exports;up=1;var r=65536,t=4294967295;function a(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var o=df().Buffer,l=Hn.crypto||Hn.msCrypto;l&&l.getRandomValues?ui.exports=i:ui.exports=a;function i(d,u){if(d>t)throw new RangeError("requested too many random bytes");var h=o.allocUnsafe(d);if(d>0)if(d>r)for(var x=0;x<d;x+=r)l.getRandomValues(h.slice(x,x+r));else l.getRandomValues(h);return typeof u=="function"?process.nextTick(function(){u(null,h)}):h}return ui.exports}var fi={exports:{}};const kb={},Db=Object.freeze(Object.defineProperty({__proto__:null,default:kb},Symbol.toStringTag,{value:"Module"})),_i=Nd(Db);var Vc,pp;function mf(){return pp||(pp=1,Vc=_i.EventEmitter),Vc}var Uc,hp;function Mb(){if(hp)return Uc;hp=1;function r(y,E){var w=Object.keys(y);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(y);E&&(b=b.filter(function(k){return Object.getOwnPropertyDescriptor(y,k).enumerable})),w.push.apply(w,b)}return w}function t(y){for(var E=1;E<arguments.length;E++){var w=arguments[E]!=null?arguments[E]:{};E%2?r(Object(w),!0).forEach(function(b){a(y,b,w[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(b){Object.defineProperty(y,b,Object.getOwnPropertyDescriptor(w,b))})}return y}function a(y,E,w){return E=d(E),E in y?Object.defineProperty(y,E,{value:w,enumerable:!0,configurable:!0,writable:!0}):y[E]=w,y}function o(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}function l(y,E){for(var w=0;w<E.length;w++){var b=E[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,d(b.key),b)}}function i(y,E,w){return E&&l(y.prototype,E),Object.defineProperty(y,"prototype",{writable:!1}),y}function d(y){var E=u(y,"string");return typeof E=="symbol"?E:String(E)}function u(y,E){if(typeof y!="object"||y===null)return y;var w=y[Symbol.toPrimitive];if(w!==void 0){var b=w.call(y,E);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}var h=qr(),x=h.Buffer,C=_i,S=C.inspect,A=S&&S.custom||"inspect";function D(y,E,w){x.prototype.copy.call(y,E,w)}return Uc=(function(){function y(){o(this,y),this.head=null,this.tail=null,this.length=0}return i(y,[{key:"push",value:function(w){var b={data:w,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(w){var b={data:w,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var b=this.head,k=""+b.data;b=b.next;)k+=w+b.data;return k}},{key:"concat",value:function(w){if(this.length===0)return x.alloc(0);for(var b=x.allocUnsafe(w>>>0),k=this.head,j=0;k;)D(k.data,b,j),j+=k.data.length,k=k.next;return b}},{key:"consume",value:function(w,b){var k;return w<this.head.data.length?(k=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?k=this.shift():k=b?this._getString(w):this._getBuffer(w),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var b=this.head,k=1,j=b.data;for(w-=j.length;b=b.next;){var I=b.data,O=w>I.length?I.length:w;if(O===I.length?j+=I:j+=I.slice(0,w),w-=O,w===0){O===I.length?(++k,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=I.slice(O));break}++k}return this.length-=k,j}},{key:"_getBuffer",value:function(w){var b=x.allocUnsafe(w),k=this.head,j=1;for(k.data.copy(b),w-=k.data.length;k=k.next;){var I=k.data,O=w>I.length?I.length:w;if(I.copy(b,b.length-w,0,O),w-=O,w===0){O===I.length?(++j,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=I.slice(O));break}++j}return this.length-=j,b}},{key:A,value:function(w,b){return S(this,t(t({},b),{},{depth:0,customInspect:!1}))}}]),y})(),Uc}var $c,fp;function uf(){if(fp)return $c;fp=1;function r(d,u){var h=this,x=this._readableState&&this._readableState.destroyed,C=this._writableState&&this._writableState.destroyed;return x||C?(u?u(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(l,this,d)):process.nextTick(l,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(S){!u&&S?h._writableState?h._writableState.errorEmitted?process.nextTick(a,h):(h._writableState.errorEmitted=!0,process.nextTick(t,h,S)):process.nextTick(t,h,S):u?(process.nextTick(a,h),u(S)):process.nextTick(a,h)}),this)}function t(d,u){l(d,u),a(d)}function a(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(d,u){d.emit("error",u)}function i(d,u){var h=d._readableState,x=d._writableState;h&&h.autoDestroy||x&&x.autoDestroy?d.destroy(u):d.emit("error",u)}return $c={destroy:r,undestroy:o,errorOrDestroy:i},$c}var qc={},xp;function zo(){if(xp)return qc;xp=1;function r(u,h){u.prototype=Object.create(h.prototype),u.prototype.constructor=u,u.__proto__=h}var t={};function a(u,h,x){x||(x=Error);function C(A,D,y){return typeof h=="string"?h:h(A,D,y)}var S=(function(A){r(D,A);function D(y,E,w){return A.call(this,C(y,E,w))||this}return D})(x);S.prototype.name=x.name,S.prototype.code=u,t[u]=S}function o(u,h){if(Array.isArray(u)){var x=u.length;return u=u.map(function(C){return String(C)}),x>2?"one of ".concat(h," ").concat(u.slice(0,x-1).join(", "),", or ")+u[x-1]:x===2?"one of ".concat(h," ").concat(u[0]," or ").concat(u[1]):"of ".concat(h," ").concat(u[0])}else return"of ".concat(h," ").concat(String(u))}function l(u,h,x){return u.substr(0,h.length)===h}function i(u,h,x){return(x===void 0||x>u.length)&&(x=u.length),u.substring(x-h.length,x)===h}function d(u,h,x){return typeof x!="number"&&(x=0),x+h.length>u.length?!1:u.indexOf(h,x)!==-1}return a("ERR_INVALID_OPT_VALUE",function(u,h){return'The value "'+h+'" is invalid for option "'+u+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(u,h,x){var C;typeof h=="string"&&l(h,"not ")?(C="must not be",h=h.replace(/^not /,"")):C="must be";var S;if(i(u," argument"))S="The ".concat(u," ").concat(C," ").concat(o(h,"type"));else{var A=d(u,".")?"property":"argument";S='The "'.concat(u,'" ').concat(A," ").concat(C," ").concat(o(h,"type"))}return S+=". Received type ".concat(typeof x),S},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),qc.codes=t,qc}var zc,gp;function pf(){if(gp)return zc;gp=1;var r=zo().codes.ERR_INVALID_OPT_VALUE;function t(o,l,i){return o.highWaterMark!=null?o.highWaterMark:l?o[i]:null}function a(o,l,i,d){var u=t(l,d,i);if(u!=null){if(!(isFinite(u)&&Math.floor(u)===u)||u<0){var h=d?i:"highWaterMark";throw new r(h,u)}return Math.floor(u)}return o.objectMode?16:16*1024}return zc={getHighWaterMark:a},zc}var xi={exports:{}},vp;function zr(){return vp||(vp=1,typeof Object.create=="function"?xi.exports=function(t,a){a&&(t.super_=a,t.prototype=Object.create(a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:xi.exports=function(t,a){if(a){t.super_=a;var o=function(){};o.prototype=a.prototype,t.prototype=new o,t.prototype.constructor=t}}),xi.exports}var Wc,yp;function Rb(){if(yp)return Wc;yp=1,Wc=r;function r(a,o){if(t("noDeprecation"))return a;var l=!1;function i(){if(!l){if(t("throwDeprecation"))throw new Error(o);t("traceDeprecation")?console.trace(o):console.warn(o),l=!0}return a.apply(this,arguments)}return i}function t(a){try{if(!Hn.localStorage)return!1}catch{return!1}var o=Hn.localStorage[a];return o==null?!1:String(o).toLowerCase()==="true"}return Wc}var Gc,bp;function hf(){if(bp)return Gc;bp=1,Gc=ce;function r($){var W=this;this.next=null,this.entry=null,this.finish=function(){xe(W,$)}}var t;ce.WritableState=F;var a={deprecate:Rb()},o=mf(),l=qr().Buffer,i=(typeof Hn<"u"?Hn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d($){return l.from($)}function u($){return l.isBuffer($)||$ instanceof i}var h=uf(),x=pf(),C=x.getHighWaterMark,S=zo().codes,A=S.ERR_INVALID_ARG_TYPE,D=S.ERR_METHOD_NOT_IMPLEMENTED,y=S.ERR_MULTIPLE_CALLBACK,E=S.ERR_STREAM_CANNOT_PIPE,w=S.ERR_STREAM_DESTROYED,b=S.ERR_STREAM_NULL_VALUES,k=S.ERR_STREAM_WRITE_AFTER_END,j=S.ERR_UNKNOWN_ENCODING,I=h.errorOrDestroy;zr()(ce,o);function O(){}function F($,W,ie){t=t||Fo(),$=$||{},typeof ie!="boolean"&&(ie=W instanceof t),this.objectMode=!!$.objectMode,ie&&(this.objectMode=this.objectMode||!!$.writableObjectMode),this.highWaterMark=C(this,$,"writableHighWaterMark",ie),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ye=$.decodeStrings===!1;this.decodeStrings=!ye,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pe){re(W,pe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}F.prototype.getBuffer=function(){for(var W=this.bufferedRequest,ie=[];W;)ie.push(W),W=W.next;return ie},(function(){try{Object.defineProperty(F.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var U;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(U=Function.prototype[Symbol.hasInstance],Object.defineProperty(ce,Symbol.hasInstance,{value:function(W){return U.call(this,W)?!0:this!==ce?!1:W&&W._writableState instanceof F}})):U=function(W){return W instanceof this};function ce($){t=t||Fo();var W=this instanceof t;if(!W&&!U.call(ce,this))return new ce($);this._writableState=new F($,this,W),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),o.call(this)}ce.prototype.pipe=function(){I(this,new E)};function de($,W){var ie=new k;I($,ie),process.nextTick(W,ie)}function ke($,W,ie,ye){var pe;return ie===null?pe=new b:typeof ie!="string"&&!W.objectMode&&(pe=new A("chunk",["string","Buffer"],ie)),pe?(I($,pe),process.nextTick(ye,pe),!1):!0}ce.prototype.write=function($,W,ie){var ye=this._writableState,pe=!1,T=!ye.objectMode&&u($);return T&&!l.isBuffer($)&&($=d($)),typeof W=="function"&&(ie=W,W=null),T?W="buffer":W||(W=ye.defaultEncoding),typeof ie!="function"&&(ie=O),ye.ending?de(this,ie):(T||ke(this,ye,$,ie))&&(ye.pendingcb++,pe=ze(this,ye,T,$,W,ie)),pe},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,!$.writing&&!$.corked&&!$.bufferProcessing&&$.bufferedRequest&&te(this,$))},ce.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=W.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((W+"").toLowerCase())>-1))throw new j(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Ne($,W,ie){return!$.objectMode&&$.decodeStrings!==!1&&typeof W=="string"&&(W=l.from(W,ie)),W}Object.defineProperty(ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ze($,W,ie,ye,pe,T){if(!ie){var N=Ne(W,ye,pe);ye!==N&&(ie=!0,pe="buffer",ye=N)}var ee=W.objectMode?1:ye.length;W.length+=ee;var ge=W.length<W.highWaterMark;if(ge||(W.needDrain=!0),W.writing||W.corked){var Ae=W.lastBufferedRequest;W.lastBufferedRequest={chunk:ye,encoding:pe,isBuf:ie,callback:T,next:null},Ae?Ae.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else fe($,W,!1,ee,ye,pe,T);return ge}function fe($,W,ie,ye,pe,T,N){W.writelen=ye,W.writecb=N,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new w("write")):ie?$._writev(pe,W.onwrite):$._write(pe,T,W.onwrite),W.sync=!1}function H($,W,ie,ye,pe){--W.pendingcb,ie?(process.nextTick(pe,ye),process.nextTick(me,$,W),$._writableState.errorEmitted=!0,I($,ye)):(pe(ye),$._writableState.errorEmitted=!0,I($,ye),me($,W))}function J($){$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0}function re($,W){var ie=$._writableState,ye=ie.sync,pe=ie.writecb;if(typeof pe!="function")throw new y;if(J(ie),W)H($,ie,ye,W,pe);else{var T=V(ie)||$.destroyed;!T&&!ie.corked&&!ie.bufferProcessing&&ie.bufferedRequest&&te($,ie),ye?process.nextTick(z,$,ie,T,pe):z($,ie,T,pe)}}function z($,W,ie,ye){ie||Z($,W),W.pendingcb--,ye(),me($,W)}function Z($,W){W.length===0&&W.needDrain&&(W.needDrain=!1,$.emit("drain"))}function te($,W){W.bufferProcessing=!0;var ie=W.bufferedRequest;if($._writev&&ie&&ie.next){var ye=W.bufferedRequestCount,pe=new Array(ye),T=W.corkedRequestsFree;T.entry=ie;for(var N=0,ee=!0;ie;)pe[N]=ie,ie.isBuf||(ee=!1),ie=ie.next,N+=1;pe.allBuffers=ee,fe($,W,!0,W.length,pe,"",T.finish),W.pendingcb++,W.lastBufferedRequest=null,T.next?(W.corkedRequestsFree=T.next,T.next=null):W.corkedRequestsFree=new r(W),W.bufferedRequestCount=0}else{for(;ie;){var ge=ie.chunk,Ae=ie.encoding,X=ie.callback,we=W.objectMode?1:ge.length;if(fe($,W,!1,we,ge,Ae,X),ie=ie.next,W.bufferedRequestCount--,W.writing)break}ie===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=ie,W.bufferProcessing=!1}ce.prototype._write=function($,W,ie){ie(new D("_write()"))},ce.prototype._writev=null,ce.prototype.end=function($,W,ie){var ye=this._writableState;return typeof $=="function"?(ie=$,$=null,W=null):typeof W=="function"&&(ie=W,W=null),$!=null&&this.write($,W),ye.corked&&(ye.corked=1,this.uncork()),ye.ending||he(this,ye,ie),this},Object.defineProperty(ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function V($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function B($,W){$._final(function(ie){W.pendingcb--,ie&&I($,ie),W.prefinished=!0,$.emit("prefinish"),me($,W)})}function q($,W){!W.prefinished&&!W.finalCalled&&(typeof $._final=="function"&&!W.destroyed?(W.pendingcb++,W.finalCalled=!0,process.nextTick(B,$,W)):(W.prefinished=!0,$.emit("prefinish")))}function me($,W){var ie=V(W);if(ie&&(q($,W),W.pendingcb===0&&(W.finished=!0,$.emit("finish"),W.autoDestroy))){var ye=$._readableState;(!ye||ye.autoDestroy&&ye.endEmitted)&&$.destroy()}return ie}function he($,W,ie){W.ending=!0,me($,W),ie&&(W.finished?process.nextTick(ie):$.once("finish",ie)),W.ended=!0,$.writable=!1}function xe($,W,ie){var ye=$.entry;for($.entry=null;ye;){var pe=ye.callback;W.pendingcb--,pe(ie),ye=ye.next}W.corkedRequestsFree.next=$}return Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),ce.prototype.destroy=h.destroy,ce.prototype._undestroy=h.undestroy,ce.prototype._destroy=function($,W){W($)},Gc}var Hc,wp;function Fo(){if(wp)return Hc;wp=1;var r=Object.keys||function(x){var C=[];for(var S in x)C.push(S);return C};Hc=d;var t=ff(),a=hf();zr()(d,t);for(var o=r(a.prototype),l=0;l<o.length;l++){var i=o[l];d.prototype[i]||(d.prototype[i]=a.prototype[i])}function d(x){if(!(this instanceof d))return new d(x);t.call(this,x),a.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||process.nextTick(h,this)}function h(x){x.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(C){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=C,this._writableState.destroyed=C)}}),Hc}var Kc={},Cp;function Sp(){if(Cp)return Kc;Cp=1;var r=df().Buffer,t=r.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(b){if(!b)return"utf8";for(var k;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(k)return;b=(""+b).toLowerCase(),k=!0}}function o(b){var k=a(b);if(typeof k!="string"&&(r.isEncoding===t||!t(b)))throw new Error("Unknown encoding: "+b);return k||b}Kc.StringDecoder=l;function l(b){this.encoding=o(b);var k;switch(this.encoding){case"utf16le":this.text=S,this.end=A,k=4;break;case"utf8":this.fillLast=h,k=4;break;case"base64":this.text=D,this.end=y,k=3;break;default:this.write=E,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(k)}l.prototype.write=function(b){if(b.length===0)return"";var k,j;if(this.lastNeed){if(k=this.fillLast(b),k===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<b.length?k?k+this.text(b,j):this.text(b,j):k||""},l.prototype.end=C,l.prototype.text=x,l.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function i(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function d(b,k,j){var I=k.length-1;if(I<j)return 0;var O=i(k[I]);return O>=0?(O>0&&(b.lastNeed=O-1),O):--I<j||O===-2?0:(O=i(k[I]),O>=0?(O>0&&(b.lastNeed=O-2),O):--I<j||O===-2?0:(O=i(k[I]),O>=0?(O>0&&(O===2?O=0:b.lastNeed=O-3),O):0))}function u(b,k,j){if((k[0]&192)!==128)return b.lastNeed=0,"";if(b.lastNeed>1&&k.length>1){if((k[1]&192)!==128)return b.lastNeed=1,"";if(b.lastNeed>2&&k.length>2&&(k[2]&192)!==128)return b.lastNeed=2,""}}function h(b){var k=this.lastTotal-this.lastNeed,j=u(this,b);if(j!==void 0)return j;if(this.lastNeed<=b.length)return b.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,k,0,b.length),this.lastNeed-=b.length}function x(b,k){var j=d(this,b,k);if(!this.lastNeed)return b.toString("utf8",k);this.lastTotal=j;var I=b.length-(j-this.lastNeed);return b.copy(this.lastChar,0,I),b.toString("utf8",k,I)}function C(b){var k=b&&b.length?this.write(b):"";return this.lastNeed?k+"":k}function S(b,k){if((b.length-k)%2===0){var j=b.toString("utf16le",k);if(j){var I=j.charCodeAt(j.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",k,b.length-1)}function A(b){var k=b&&b.length?this.write(b):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,j)}return k}function D(b,k){var j=(b.length-k)%3;return j===0?b.toString("base64",k):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",k,b.length-j))}function y(b){var k=b&&b.length?this.write(b):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function E(b){return b.toString(this.encoding)}function w(b){return b&&b.length?this.write(b):""}return Kc}var Jc,Ap;function Fd(){if(Ap)return Jc;Ap=1;var r=zo().codes.ERR_STREAM_PREMATURE_CLOSE;function t(i){var d=!1;return function(){if(!d){d=!0;for(var u=arguments.length,h=new Array(u),x=0;x<u;x++)h[x]=arguments[x];i.apply(this,h)}}}function a(){}function o(i){return i.setHeader&&typeof i.abort=="function"}function l(i,d,u){if(typeof d=="function")return l(i,null,d);d||(d={}),u=t(u||a);var h=d.readable||d.readable!==!1&&i.readable,x=d.writable||d.writable!==!1&&i.writable,C=function(){i.writable||A()},S=i._writableState&&i._writableState.finished,A=function(){x=!1,S=!0,h||u.call(i)},D=i._readableState&&i._readableState.endEmitted,y=function(){h=!1,D=!0,x||u.call(i)},E=function(j){u.call(i,j)},w=function(){var j;if(h&&!D)return(!i._readableState||!i._readableState.ended)&&(j=new r),u.call(i,j);if(x&&!S)return(!i._writableState||!i._writableState.ended)&&(j=new r),u.call(i,j)},b=function(){i.req.on("finish",A)};return o(i)?(i.on("complete",A),i.on("abort",w),i.req?b():i.on("request",b)):x&&!i._writableState&&(i.on("end",C),i.on("close",C)),i.on("end",y),i.on("finish",A),d.error!==!1&&i.on("error",E),i.on("close",w),function(){i.removeListener("complete",A),i.removeListener("abort",w),i.removeListener("request",b),i.req&&i.req.removeListener("finish",A),i.removeListener("end",C),i.removeListener("close",C),i.removeListener("finish",A),i.removeListener("end",y),i.removeListener("error",E),i.removeListener("close",w)}}return Jc=l,Jc}var Yc,_p;function jb(){if(_p)return Yc;_p=1;var r;function t(j,I,O){return I=a(I),I in j?Object.defineProperty(j,I,{value:O,enumerable:!0,configurable:!0,writable:!0}):j[I]=O,j}function a(j){var I=o(j,"string");return typeof I=="symbol"?I:String(I)}function o(j,I){if(typeof j!="object"||j===null)return j;var O=j[Symbol.toPrimitive];if(O!==void 0){var F=O.call(j,I);if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(j)}var l=Fd(),i=Symbol("lastResolve"),d=Symbol("lastReject"),u=Symbol("error"),h=Symbol("ended"),x=Symbol("lastPromise"),C=Symbol("handlePromise"),S=Symbol("stream");function A(j,I){return{value:j,done:I}}function D(j){var I=j[i];if(I!==null){var O=j[S].read();O!==null&&(j[x]=null,j[i]=null,j[d]=null,I(A(O,!1)))}}function y(j){process.nextTick(D,j)}function E(j,I){return function(O,F){j.then(function(){if(I[h]){O(A(void 0,!0));return}I[C](O,F)},F)}}var w=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((r={get stream(){return this[S]},next:function(){var I=this,O=this[u];if(O!==null)return Promise.reject(O);if(this[h])return Promise.resolve(A(void 0,!0));if(this[S].destroyed)return new Promise(function(de,ke){process.nextTick(function(){I[u]?ke(I[u]):de(A(void 0,!0))})});var F=this[x],U;if(F)U=new Promise(E(F,this));else{var ce=this[S].read();if(ce!==null)return Promise.resolve(A(ce,!1));U=new Promise(this[C])}return this[x]=U,U}},t(r,Symbol.asyncIterator,function(){return this}),t(r,"return",function(){var I=this;return new Promise(function(O,F){I[S].destroy(null,function(U){if(U){F(U);return}O(A(void 0,!0))})})}),r),w),k=function(I){var O,F=Object.create(b,(O={},t(O,S,{value:I,writable:!0}),t(O,i,{value:null,writable:!0}),t(O,d,{value:null,writable:!0}),t(O,u,{value:null,writable:!0}),t(O,h,{value:I._readableState.endEmitted,writable:!0}),t(O,C,{value:function(ce,de){var ke=F[S].read();ke?(F[x]=null,F[i]=null,F[d]=null,ce(A(ke,!1))):(F[i]=ce,F[d]=de)},writable:!0}),O));return F[x]=null,l(I,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=F[d];ce!==null&&(F[x]=null,F[i]=null,F[d]=null,ce(U)),F[u]=U;return}var de=F[i];de!==null&&(F[x]=null,F[i]=null,F[d]=null,de(A(void 0,!0))),F[h]=!0}),I.on("readable",y.bind(null,F)),F};return Yc=k,Yc}var Qc,Ep;function Bb(){return Ep||(Ep=1,Qc=function(){throw new Error("Readable.from is not available in the browser")}),Qc}var Xc,Np;function ff(){if(Np)return Xc;Np=1,Xc=de;var r;de.ReadableState=ce,_i.EventEmitter;var t=function(N,ee){return N.listeners(ee).length},a=mf(),o=qr().Buffer,l=(typeof Hn<"u"?Hn:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(T){return o.from(T)}function d(T){return o.isBuffer(T)||T instanceof l}var u=_i,h;u&&u.debuglog?h=u.debuglog("stream"):h=function(){};var x=Mb(),C=uf(),S=pf(),A=S.getHighWaterMark,D=zo().codes,y=D.ERR_INVALID_ARG_TYPE,E=D.ERR_STREAM_PUSH_AFTER_EOF,w=D.ERR_METHOD_NOT_IMPLEMENTED,b=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,k,j,I;zr()(de,a);var O=C.errorOrDestroy,F=["error","close","destroy","pause","resume"];function U(T,N,ee){if(typeof T.prependListener=="function")return T.prependListener(N,ee);!T._events||!T._events[N]?T.on(N,ee):Array.isArray(T._events[N])?T._events[N].unshift(ee):T._events[N]=[ee,T._events[N]]}function ce(T,N,ee){r=r||Fo(),T=T||{},typeof ee!="boolean"&&(ee=N instanceof r),this.objectMode=!!T.objectMode,ee&&(this.objectMode=this.objectMode||!!T.readableObjectMode),this.highWaterMark=A(this,T,"readableHighWaterMark",ee),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(k||(k=Sp().StringDecoder),this.decoder=new k(T.encoding),this.encoding=T.encoding)}function de(T){if(r=r||Fo(),!(this instanceof de))return new de(T);var N=this instanceof r;this._readableState=new ce(T,this,N),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),a.call(this)}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(N){this._readableState&&(this._readableState.destroyed=N)}}),de.prototype.destroy=C.destroy,de.prototype._undestroy=C.undestroy,de.prototype._destroy=function(T,N){N(T)},de.prototype.push=function(T,N){var ee=this._readableState,ge;return ee.objectMode?ge=!0:typeof T=="string"&&(N=N||ee.defaultEncoding,N!==ee.encoding&&(T=o.from(T,N),N=""),ge=!0),ke(this,T,N,!1,ge)},de.prototype.unshift=function(T){return ke(this,T,null,!0,!1)};function ke(T,N,ee,ge,Ae){h("readableAddChunk",N);var X=T._readableState;if(N===null)X.reading=!1,re(T,X);else{var we;if(Ae||(we=ze(X,N)),we)O(T,we);else if(X.objectMode||N&&N.length>0)if(typeof N!="string"&&!X.objectMode&&Object.getPrototypeOf(N)!==o.prototype&&(N=i(N)),ge)X.endEmitted?O(T,new b):Ne(T,X,N,!0);else if(X.ended)O(T,new E);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!ee?(N=X.decoder.write(N),X.objectMode||N.length!==0?Ne(T,X,N,!1):te(T,X)):Ne(T,X,N,!1)}else ge||(X.reading=!1,te(T,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function Ne(T,N,ee,ge){N.flowing&&N.length===0&&!N.sync?(N.awaitDrain=0,T.emit("data",ee)):(N.length+=N.objectMode?1:ee.length,ge?N.buffer.unshift(ee):N.buffer.push(ee),N.needReadable&&z(T)),te(T,N)}function ze(T,N){var ee;return!d(N)&&typeof N!="string"&&N!==void 0&&!T.objectMode&&(ee=new y("chunk",["string","Buffer","Uint8Array"],N)),ee}de.prototype.isPaused=function(){return this._readableState.flowing===!1},de.prototype.setEncoding=function(T){k||(k=Sp().StringDecoder);var N=new k(T);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var ee=this._readableState.buffer.head,ge="";ee!==null;)ge+=N.write(ee.data),ee=ee.next;return this._readableState.buffer.clear(),ge!==""&&this._readableState.buffer.push(ge),this._readableState.length=ge.length,this};var fe=1073741824;function H(T){return T>=fe?T=fe:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function J(T,N){return T<=0||N.length===0&&N.ended?0:N.objectMode?1:T!==T?N.flowing&&N.length?N.buffer.head.data.length:N.length:(T>N.highWaterMark&&(N.highWaterMark=H(T)),T<=N.length?T:N.ended?N.length:(N.needReadable=!0,0))}de.prototype.read=function(T){h("read",T),T=parseInt(T,10);var N=this._readableState,ee=T;if(T!==0&&(N.emittedReadable=!1),T===0&&N.needReadable&&((N.highWaterMark!==0?N.length>=N.highWaterMark:N.length>0)||N.ended))return h("read: emitReadable",N.length,N.ended),N.length===0&&N.ended?ie(this):z(this),null;if(T=J(T,N),T===0&&N.ended)return N.length===0&&ie(this),null;var ge=N.needReadable;h("need readable",ge),(N.length===0||N.length-T<N.highWaterMark)&&(ge=!0,h("length less than watermark",ge)),N.ended||N.reading?(ge=!1,h("reading or ended",ge)):ge&&(h("do read"),N.reading=!0,N.sync=!0,N.length===0&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(T=J(ee,N)));var Ae;return T>0?Ae=W(T,N):Ae=null,Ae===null?(N.needReadable=N.length<=N.highWaterMark,T=0):(N.length-=T,N.awaitDrain=0),N.length===0&&(N.ended||(N.needReadable=!0),ee!==T&&N.ended&&ie(this)),Ae!==null&&this.emit("data",Ae),Ae};function re(T,N){if(h("onEofChunk"),!N.ended){if(N.decoder){var ee=N.decoder.end();ee&&ee.length&&(N.buffer.push(ee),N.length+=N.objectMode?1:ee.length)}N.ended=!0,N.sync?z(T):(N.needReadable=!1,N.emittedReadable||(N.emittedReadable=!0,Z(T)))}}function z(T){var N=T._readableState;h("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(h("emitReadable",N.flowing),N.emittedReadable=!0,process.nextTick(Z,T))}function Z(T){var N=T._readableState;h("emitReadable_",N.destroyed,N.length,N.ended),!N.destroyed&&(N.length||N.ended)&&(T.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,$(T)}function te(T,N){N.readingMore||(N.readingMore=!0,process.nextTick(V,T,N))}function V(T,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&N.length===0);){var ee=N.length;if(h("maybeReadMore read 0"),T.read(0),ee===N.length)break}N.readingMore=!1}de.prototype._read=function(T){O(this,new w("_read()"))},de.prototype.pipe=function(T,N){var ee=this,ge=this._readableState;switch(ge.pipesCount){case 0:ge.pipes=T;break;case 1:ge.pipes=[ge.pipes,T];break;default:ge.pipes.push(T);break}ge.pipesCount+=1,h("pipe count=%d opts=%j",ge.pipesCount,N);var Ae=(!N||N.end!==!1)&&T!==process.stdout&&T!==process.stderr,X=Ae?Me:nt;ge.endEmitted?process.nextTick(X):ee.once("end",X),T.on("unpipe",we);function we(R,f){h("onunpipe"),R===ee&&f&&f.hasUnpiped===!1&&(f.hasUnpiped=!0,ot())}function Me(){h("onend"),T.end()}var Ve=B(ee);T.on("drain",Ve);var Pe=!1;function ot(){h("cleanup"),T.removeListener("close",Te),T.removeListener("finish",qe),T.removeListener("drain",Ve),T.removeListener("error",Re),T.removeListener("unpipe",we),ee.removeListener("end",Me),ee.removeListener("end",nt),ee.removeListener("data",We),Pe=!0,ge.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&Ve()}ee.on("data",We);function We(R){h("ondata");var f=T.write(R);h("dest.write",f),f===!1&&((ge.pipesCount===1&&ge.pipes===T||ge.pipesCount>1&&pe(ge.pipes,T)!==-1)&&!Pe&&(h("false write response, pause",ge.awaitDrain),ge.awaitDrain++),ee.pause())}function Re(R){h("onerror",R),nt(),T.removeListener("error",Re),t(T,"error")===0&&O(T,R)}U(T,"error",Re);function Te(){T.removeListener("finish",qe),nt()}T.once("close",Te);function qe(){h("onfinish"),T.removeListener("close",Te),nt()}T.once("finish",qe);function nt(){h("unpipe"),ee.unpipe(T)}return T.emit("pipe",ee),ge.flowing||(h("pipe resume"),ee.resume()),T};function B(T){return function(){var ee=T._readableState;h("pipeOnDrain",ee.awaitDrain),ee.awaitDrain&&ee.awaitDrain--,ee.awaitDrain===0&&t(T,"data")&&(ee.flowing=!0,$(T))}}de.prototype.unpipe=function(T){var N=this._readableState,ee={hasUnpiped:!1};if(N.pipesCount===0)return this;if(N.pipesCount===1)return T&&T!==N.pipes?this:(T||(T=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,T&&T.emit("unpipe",this,ee),this);if(!T){var ge=N.pipes,Ae=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var X=0;X<Ae;X++)ge[X].emit("unpipe",this,{hasUnpiped:!1});return this}var we=pe(N.pipes,T);return we===-1?this:(N.pipes.splice(we,1),N.pipesCount-=1,N.pipesCount===1&&(N.pipes=N.pipes[0]),T.emit("unpipe",this,ee),this)},de.prototype.on=function(T,N){var ee=a.prototype.on.call(this,T,N),ge=this._readableState;return T==="data"?(ge.readableListening=this.listenerCount("readable")>0,ge.flowing!==!1&&this.resume()):T==="readable"&&!ge.endEmitted&&!ge.readableListening&&(ge.readableListening=ge.needReadable=!0,ge.flowing=!1,ge.emittedReadable=!1,h("on readable",ge.length,ge.reading),ge.length?z(this):ge.reading||process.nextTick(me,this)),ee},de.prototype.addListener=de.prototype.on,de.prototype.removeListener=function(T,N){var ee=a.prototype.removeListener.call(this,T,N);return T==="readable"&&process.nextTick(q,this),ee},de.prototype.removeAllListeners=function(T){var N=a.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&process.nextTick(q,this),N};function q(T){var N=T._readableState;N.readableListening=T.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:T.listenerCount("data")>0&&T.resume()}function me(T){h("readable nexttick read 0"),T.read(0)}de.prototype.resume=function(){var T=this._readableState;return T.flowing||(h("resume"),T.flowing=!T.readableListening,he(this,T)),T.paused=!1,this};function he(T,N){N.resumeScheduled||(N.resumeScheduled=!0,process.nextTick(xe,T,N))}function xe(T,N){h("resume",N.reading),N.reading||T.read(0),N.resumeScheduled=!1,T.emit("resume"),$(T),N.flowing&&!N.reading&&T.read(0)}de.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function $(T){var N=T._readableState;for(h("flow",N.flowing);N.flowing&&T.read()!==null;);}de.prototype.wrap=function(T){var N=this,ee=this._readableState,ge=!1;T.on("end",function(){if(h("wrapped end"),ee.decoder&&!ee.ended){var we=ee.decoder.end();we&&we.length&&N.push(we)}N.push(null)}),T.on("data",function(we){if(h("wrapped data"),ee.decoder&&(we=ee.decoder.write(we)),!(ee.objectMode&&we==null)&&!(!ee.objectMode&&(!we||!we.length))){var Me=N.push(we);Me||(ge=!0,T.pause())}});for(var Ae in T)this[Ae]===void 0&&typeof T[Ae]=="function"&&(this[Ae]=(function(Me){return function(){return T[Me].apply(T,arguments)}})(Ae));for(var X=0;X<F.length;X++)T.on(F[X],this.emit.bind(this,F[X]));return this._read=function(we){h("wrapped _read",we),ge&&(ge=!1,T.resume())},this},typeof Symbol=="function"&&(de.prototype[Symbol.asyncIterator]=function(){return j===void 0&&(j=jb()),j(this)}),Object.defineProperty(de.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(de.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(de.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}}),de._fromList=W,Object.defineProperty(de.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function W(T,N){if(N.length===0)return null;var ee;return N.objectMode?ee=N.buffer.shift():!T||T>=N.length?(N.decoder?ee=N.buffer.join(""):N.buffer.length===1?ee=N.buffer.first():ee=N.buffer.concat(N.length),N.buffer.clear()):ee=N.buffer.consume(T,N.decoder),ee}function ie(T){var N=T._readableState;h("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,process.nextTick(ye,N,T))}function ye(T,N){if(h("endReadableNT",T.endEmitted,T.length),!T.endEmitted&&T.length===0&&(T.endEmitted=!0,N.readable=!1,N.emit("end"),T.autoDestroy)){var ee=N._writableState;(!ee||ee.autoDestroy&&ee.finished)&&N.destroy()}}typeof Symbol=="function"&&(de.from=function(T,N){return I===void 0&&(I=Bb()),I(de,T,N)});function pe(T,N){for(var ee=0,ge=T.length;ee<ge;ee++)if(T[ee]===N)return ee;return-1}return Xc}var Zc,kp;function xf(){if(kp)return Zc;kp=1,Zc=u;var r=zo().codes,t=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,i=Fo();zr()(u,i);function d(C,S){var A=this._transformState;A.transforming=!1;var D=A.writecb;if(D===null)return this.emit("error",new a);A.writechunk=null,A.writecb=null,S!=null&&this.push(S),D(C);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function u(C){if(!(this instanceof u))return new u(C);i.call(this,C),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,C&&(typeof C.transform=="function"&&(this._transform=C.transform),typeof C.flush=="function"&&(this._flush=C.flush)),this.on("prefinish",h)}function h(){var C=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(S,A){x(C,S,A)}):x(this,null,null)}u.prototype.push=function(C,S){return this._transformState.needTransform=!1,i.prototype.push.call(this,C,S)},u.prototype._transform=function(C,S,A){A(new t("_transform()"))},u.prototype._write=function(C,S,A){var D=this._transformState;if(D.writecb=A,D.writechunk=C,D.writeencoding=S,!D.transforming){var y=this._readableState;(D.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},u.prototype._read=function(C){var S=this._transformState;S.writechunk!==null&&!S.transforming?(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform)):S.needTransform=!0},u.prototype._destroy=function(C,S){i.prototype._destroy.call(this,C,function(A){S(A)})};function x(C,S,A){if(S)return C.emit("error",S);if(A!=null&&C.push(A),C._writableState.length)throw new l;if(C._transformState.transforming)throw new o;return C.push(null)}return Zc}var ed,Dp;function Tb(){if(Dp)return ed;Dp=1,ed=t;var r=xf();zr()(t,r);function t(a){if(!(this instanceof t))return new t(a);r.call(this,a)}return t.prototype._transform=function(a,o,l){l(null,a)},ed}var td,Mp;function Lb(){if(Mp)return td;Mp=1;var r;function t(A){var D=!1;return function(){D||(D=!0,A.apply(void 0,arguments))}}var a=zo().codes,o=a.ERR_MISSING_ARGS,l=a.ERR_STREAM_DESTROYED;function i(A){if(A)throw A}function d(A){return A.setHeader&&typeof A.abort=="function"}function u(A,D,y,E){E=t(E);var w=!1;A.on("close",function(){w=!0}),r===void 0&&(r=Fd()),r(A,{readable:D,writable:y},function(k){if(k)return E(k);w=!0,E()});var b=!1;return function(k){if(!w&&!b){if(b=!0,d(A))return A.abort();if(typeof A.destroy=="function")return A.destroy();E(k||new l("pipe"))}}}function h(A){A()}function x(A,D){return A.pipe(D)}function C(A){return!A.length||typeof A[A.length-1]!="function"?i:A.pop()}function S(){for(var A=arguments.length,D=new Array(A),y=0;y<A;y++)D[y]=arguments[y];var E=C(D);if(Array.isArray(D[0])&&(D=D[0]),D.length<2)throw new o("streams");var w,b=D.map(function(k,j){var I=j<D.length-1,O=j>0;return u(k,I,O,function(F){w||(w=F),F&&b.forEach(h),!I&&(b.forEach(h),E(w))})});return D.reduce(x)}return td=S,td}var Rp;function Ob(){return Rp||(Rp=1,(function(r,t){t=r.exports=ff(),t.Stream=t,t.Readable=t,t.Writable=hf(),t.Duplex=Fo(),t.Transform=xf(),t.PassThrough=Tb(),t.finished=Fd(),t.pipeline=Lb()})(fi,fi.exports)),fi.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var nd,jp;function Ib(){if(jp)return nd;jp=1;let r;return nd=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Hn):t=>(r||(r=Promise.resolve())).then(t).catch(a=>setTimeout(()=>{throw a},0)),nd}var ad,Bp;function Pb(){if(Bp)return ad;Bp=1;function r(a,o){for(const l in o)Object.defineProperty(a,l,{value:o[l],enumerable:!0,configurable:!0});return a}function t(a,o,l){if(!a||typeof a=="string")throw new TypeError("Please pass an Error to err-code");l||(l={}),typeof o=="object"&&(l=o,o=""),o&&(l.code=o);try{return r(a,l)}catch{l.message=a.message,l.stack=a.stack;const d=function(){};return d.prototype=Object.create(Object.getPrototypeOf(a)),r(new d,l)}}return ad=t,ad}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var od,Tp;function Fb(){if(Tp)return od;Tp=1;const r=Sb()("simple-peer"),t=Ab(),a=Nb(),o=Ob(),l=Ib(),i=Pb(),{Buffer:d}=qr(),u=64*1024,h=5*1e3,x=5*1e3;function C(D){return D.replace(/a=ice-options:trickle\s\n/g,"")}function S(D){console.warn(D)}class A extends o.Duplex{constructor(y){if(y=Object.assign({allowHalfOpen:!1},y),super(y),this._id=a(4).toString("hex").slice(0,7),this._debug("new peer %o",y),this.channelName=y.initiator?y.channelName||a(20).toString("hex"):null,this.initiator=y.initiator||!1,this.channelConfig=y.channelConfig||A.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},A.config,y.config),this.offerOptions=y.offerOptions||{},this.answerOptions=y.answerOptions||{},this.sdpTransform=y.sdpTransform||(E=>E),this.streams=y.streams||(y.stream?[y.stream]:[]),this.trickle=y.trickle!==void 0?y.trickle:!0,this.allowHalfTrickle=y.allowHalfTrickle!==void 0?y.allowHalfTrickle:!1,this.iceCompleteTimeout=y.iceCompleteTimeout||h,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=y.wrtc&&typeof y.wrtc=="object"?y.wrtc:t(),!this._wrtc)throw i(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(E){this.destroy(i(E,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=E=>{this._onIceCandidate(E)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(E=>{this.destroy(i(E,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=E=>{this._setupData(E)},this.streams&&this.streams.forEach(E=>{this.addStream(E)}),this._pc.ontrack=E=>{this._onTrack(E)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(y){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof y=="string")try{y=JSON.parse(y)}catch{y={}}this._debug("signal()"),y.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),y.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(y.transceiverRequest.kind,y.transceiverRequest.init)),y.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(y.candidate):this._pendingCandidates.push(y.candidate)),y.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(y)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(E=>{this._addIceCandidate(E)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(E=>{this.destroy(i(E,"ERR_SET_REMOTE_DESCRIPTION"))}),!y.sdp&&!y.candidate&&!y.renegotiate&&!y.transceiverRequest&&this.destroy(i(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(y){const E=new this._wrtc.RTCIceCandidate(y);this._pc.addIceCandidate(E).catch(w=>{!E.address||E.address.endsWith(".local")?S("Ignoring unsupported ICE candidate."):this.destroy(i(w,"ERR_ADD_ICE_CANDIDATE"))})}send(y){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(y)}}addTransceiver(y,E){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(y,E),this._needsNegotiation()}catch(w){this.destroy(i(w,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:y,init:E}})}}addStream(y){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),y.getTracks().forEach(E=>{this.addTrack(E,y)})}}addTrack(y,E){if(this.destroying)return;if(this.destroyed)throw i(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const w=this._senderMap.get(y)||new Map;let b=w.get(E);if(!b)b=this._pc.addTrack(y,E),w.set(E,b),this._senderMap.set(y,w),this._needsNegotiation();else throw b.removed?i(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):i(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(y,E,w){if(this.destroying)return;if(this.destroyed)throw i(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const b=this._senderMap.get(y),k=b?b.get(w):null;if(!k)throw i(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");E&&this._senderMap.set(E,b),k.replaceTrack!=null?k.replaceTrack(E):this.destroy(i(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(y,E){if(this.destroying)return;if(this.destroyed)throw i(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const w=this._senderMap.get(y),b=w?w.get(E):null;if(!b)throw i(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{b.removed=!0,this._pc.removeTrack(b)}catch(k){k.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(b):this.destroy(i(k,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(y){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),y.getTracks().forEach(E=>{this.removeTrack(E,y)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,l(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw i(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(y){this._destroy(y,()=>{})}_destroy(y,E){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",y&&(y.message||y)),l(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",y&&(y.message||y)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,y&&this.emit("error",y),this.emit("close"),E()}))}_setupData(y){if(!y.channel)return this.destroy(i(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=y.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=w=>{this._onChannelMessage(w)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=w=>{const b=w.error instanceof Error?w.error:new Error(`Datachannel error: ${w.message} ${w.filename}:${w.lineno}:${w.colno}`);this.destroy(i(b,"ERR_DATA_CHANNEL"))};let E=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(E&&this._onChannelClose(),E=!0):E=!1},x)}_read(){}_write(y,E,w){if(this.destroyed)return w(i(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(y)}catch(b){return this.destroy(i(b,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=w):w(null)}else this._debug("write before connect"),this._chunk=y,this._cb=w}_onFinish(){if(this.destroyed)return;const y=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?y():this.once("connect",y)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(y=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(y.sdp=C(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const E=()=>{if(this.destroyed)return;const k=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:k.type,sdp:k.sdp})},w=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?E():this.once("_iceComplete",E))},b=k=>{this.destroy(i(k,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(y).then(w).catch(b)}).catch(y=>{this.destroy(i(y,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(y=>{!y.mid&&y.sender.track&&!y.requested&&(y.requested=!0,this.addTransceiver(y.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(y=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(y.sdp=C(y.sdp)),y.sdp=this.sdpTransform(y.sdp);const E=()=>{if(this.destroyed)return;const k=this._pc.localDescription||y;this._debug("signal"),this.emit("signal",{type:k.type,sdp:k.sdp}),this.initiator||this._requestMissingTransceivers()},w=()=>{this.destroyed||(this.trickle||this._iceComplete?E():this.once("_iceComplete",E))},b=k=>{this.destroy(i(k,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(y).then(w).catch(b)}).catch(y=>{this.destroy(i(y,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(i(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const y=this._pc.iceConnectionState,E=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",y,E),this.emit("iceStateChange",y,E),(y==="connected"||y==="completed")&&(this._pcReady=!0,this._maybeReady()),y==="failed"&&this.destroy(i(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),y==="closed"&&this.destroy(i(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(y){const E=w=>(Object.prototype.toString.call(w.values)==="[object Array]"&&w.values.forEach(b=>{Object.assign(w,b)}),w);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(w=>{const b=[];w.forEach(k=>{b.push(E(k))}),y(null,b)},w=>y(w)):this._pc.getStats.length>0?this._pc.getStats(w=>{if(this.destroyed)return;const b=[];w.result().forEach(k=>{const j={};k.names().forEach(I=>{j[I]=k.stat(I)}),j.id=k.id,j.type=k.type,j.timestamp=k.timestamp,b.push(E(j))}),y(null,b)},w=>y(w)):y(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const y=()=>{this.destroyed||this.getStats((E,w)=>{if(this.destroyed)return;E&&(w=[]);const b={},k={},j={};let I=!1;w.forEach(F=>{(F.type==="remotecandidate"||F.type==="remote-candidate")&&(b[F.id]=F),(F.type==="localcandidate"||F.type==="local-candidate")&&(k[F.id]=F),(F.type==="candidatepair"||F.type==="candidate-pair")&&(j[F.id]=F)});const O=F=>{I=!0;let U=k[F.localCandidateId];U&&(U.ip||U.address)?(this.localAddress=U.ip||U.address,this.localPort=Number(U.port)):U&&U.ipAddress?(this.localAddress=U.ipAddress,this.localPort=Number(U.portNumber)):typeof F.googLocalAddress=="string"&&(U=F.googLocalAddress.split(":"),this.localAddress=U[0],this.localPort=Number(U[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let ce=b[F.remoteCandidateId];ce&&(ce.ip||ce.address)?(this.remoteAddress=ce.ip||ce.address,this.remotePort=Number(ce.port)):ce&&ce.ipAddress?(this.remoteAddress=ce.ipAddress,this.remotePort=Number(ce.portNumber)):typeof F.googRemoteAddress=="string"&&(ce=F.googRemoteAddress.split(":"),this.remoteAddress=ce[0],this.remotePort=Number(ce[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(w.forEach(F=>{F.type==="transport"&&F.selectedCandidatePairId&&O(j[F.selectedCandidatePairId]),(F.type==="googCandidatePair"&&F.googActiveConnection==="true"||(F.type==="candidatepair"||F.type==="candidate-pair")&&F.selected)&&O(F)}),!I&&(!Object.keys(j).length||Object.keys(k).length)){setTimeout(y,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(U){return this.destroy(i(U,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const F=this._cb;this._cb=null,F(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};y()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>u||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(y=>{this._pc.removeTrack(y),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(y){this.destroyed||(y.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:y.candidate.candidate,sdpMLineIndex:y.candidate.sdpMLineIndex,sdpMid:y.candidate.sdpMid}}):!y.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),y.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(y){if(this.destroyed)return;let E=y.data;E instanceof ArrayBuffer&&(E=d.from(E)),this.push(E)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const y=this._cb;this._cb=null,y(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(y){this.destroyed||y.streams.forEach(E=>{this._debug("on track"),this.emit("track",y.track,E),this._remoteTracks.push({track:y.track,stream:E}),!this._remoteStreams.some(w=>w.id===E.id)&&(this._remoteStreams.push(E),l(()=>{this._debug("on stream"),this.emit("stream",E)}))})}_debug(){const y=[].slice.call(arguments);y[0]="["+this._id+"] "+y[0],r.apply(null,y)}}return A.WEBRTC_SUPPORT=!!t(),A.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},A.channelConfig={},od=A,od}var Vb=Fb();const Lp=Ed(Vb),Ub=()=>{const{getCameraSharePeers:r,addCameraSharePeer:t,removeCameraSharePeer:a,getCameraStream:o,setCameraStream:l,getCurrentVoiceChannel:i,addRemoteStream:d,removeRemoteStream:u}=Kn(),{sendVoiceChannelSignal:h,addEventListener:x,removeEventListener:C}=$r(),S=_.useCallback(async()=>{try{console.log("[CameraShare] Starting camera share - MESH TOPOLOGY MODE");const E=await dt.getUserMedia(xb);l(E);const w=i();if(!w){console.log("[CameraShare] Not in voice channel, cannot share camera");return}const{data:{user:b}}=await ne.auth.getUser();if(!b)throw new Error("Not authenticated");const j=(await dt.getVoiceChannelUsers(String(w))).map(I=>I.user_id).filter(I=>I!==b.id);console.log(`[CameraShare] Creating ${j.length} peer connections for camera share`);for(const I of j)try{const O=new Lp({initiator:!0,trickle:!1,stream:E,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]},offerOptions:{offerToReceiveAudio:!1,offerToReceiveVideo:!0}});O.on("signal",async F=>{console.log("[CameraShare] Sending camera share offer to:",I),await h(w,{from:I,signal:F},"camera-offer")}),O.on("error",F=>{console.error("[CameraShare] Peer error for user",I,":",F),setTimeout(()=>{console.log("[CameraShare] Retrying connection to:",I),a(I)},3e3)}),t(I,{peer:O,userId:I,type:"camera",stream:E})}catch(O){console.error("[CameraShare] Failed to create peer for",I,":",O)}console.log("[CameraShare] Camera share started with MESH topology")}catch(E){throw console.error("[CameraShare] Failed to start camera share:",E),E}},[l,i,t]),A=_.useCallback(()=>{console.log("[CameraShare] Stopping camera share");const E=o();dt.stopStream(E),l(null),r().forEach((b,k)=>{b.peer.destroy(),a(k)})},[o,l,r,a]),D=_.useCallback(async E=>{if(console.log("[CameraShare] Received camera share signal from:",E.from,"type:",E.type),E.type==="camera-offer"){const w=new Lp({initiator:!1,trickle:!1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]},answerOptions:{offerToReceiveAudio:!1,offerToReceiveVideo:!0}});w.on("signal",async b=>{console.log("[CameraShare] Sending camera share answer to:",E.from);const k=i();k&&await h(k,{from:E.from,signal:b},"camera-answer")}),w.on("stream",b=>{console.log("[CameraShare] Received remote camera stream from:",E.from),d(`camera-${E.from}`,b),t(E.from,{peer:w,userId:E.from,type:"camera",stream:b})}),w.on("error",b=>{console.error("[CameraShare] Peer error:",b),a(E.from),u(`camera-${E.from}`),console.log("[CameraShare] Connection to",E.from,"failed. Stream removed.")});try{w.signal(E.signal)}catch(b){console.error("[CameraShare] Failed to signal peer:",b)}}else if(E.type==="camera-answer"){const b=r().get(E.from);if(b&&b.peer)try{b.peer.signal(E.signal),console.log("[CameraShare] Processed answer from:",E.from)}catch(k){console.error("[CameraShare] Failed to process answer:",k)}}},[d,t,a,u,i,r]),y=_.useCallback(()=>o()!==null,[o]);return _.useEffect(()=>(x("ReceiveVoiceChannelSignal",E=>{var w;(w=E.type)!=null&&w.startsWith("camera-")&&D(E)}),()=>{C("ReceiveVoiceChannelSignal",E=>{var w;(w=E.type)!=null&&w.startsWith("camera-")&&D(E)})}),[x,C,D,o,i,t]),{startCameraShare:S,stopCameraShare:A,isCameraSharing:y}},Ha=class Ha{constructor(){lt(this,"status","online");lt(this,"callbacks",new Set);lt(this,"reconnectAttempts",0);lt(this,"maxReconnectAttempts",5);lt(this,"reconnectTimer",null);lt(this,"isMonitoring",!1);lt(this,"handleOnline",()=>{console.log("[ConnectionMonitor] Network online detected"),this.status="online",this.reconnectAttempts=0,this.notifyCallbacks("online")});lt(this,"handleOffline",()=>{console.log("[ConnectionMonitor] Network offline detected"),this.status="offline",this.notifyCallbacks("offline"),this.startReconnectionAttempts()});lt(this,"handleVisibilityChange",()=>{document.hidden?console.log("[ConnectionMonitor] Tab hidden"):(console.log("[ConnectionMonitor] Tab visible"),!navigator.onLine&&this.status==="online"?this.handleOffline():navigator.onLine&&this.status==="offline"&&this.handleOnline())});lt(this,"handleBeforeUnload",()=>{console.log("[ConnectionMonitor] Page unloading")});this.initializeMonitoring()}static getInstance(){return Ha.instance||(Ha.instance=new Ha),Ha.instance}initializeMonitoring(){this.isMonitoring||(this.isMonitoring=!0,window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("beforeunload",this.handleBeforeUnload),this.status=navigator.onLine?"online":"offline",console.log("[ConnectionMonitor] Monitoring started, initial status:",this.status))}startReconnectionAttempts(){this.reconnectTimer&&clearTimeout(this.reconnectTimer);const t=()=>{if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("[ConnectionMonitor] Max reconnection attempts reached");return}this.reconnectAttempts++,this.status="reconnecting",console.log(`[ConnectionMonitor] Reconnection attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),this.notifyCallbacks("reconnecting"),this.reconnectTimer=setTimeout(()=>{navigator.onLine?this.handleOnline():t()},3e3*this.reconnectAttempts)};t()}notifyCallbacks(t){this.callbacks.forEach(a=>{try{a(t)}catch(o){console.error("[ConnectionMonitor] Callback error:",o)}})}getStatus(){return this.status}isOnline(){return this.status==="online"&&navigator.onLine}subscribe(t){return this.callbacks.add(t),t(this.status),()=>{this.callbacks.delete(t)}}cleanup(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("beforeunload",this.handleBeforeUnload),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.callbacks.clear(),this.isMonitoring=!1,console.log("[ConnectionMonitor] Cleanup completed")}};lt(Ha,"instance",null);let Ad=Ha;const $b=Ad.getInstance(),rd="webrtc_call_state",qb=300*1e3;class ba{static saveCallState(t){try{const a={...t,timestamp:Date.now()};sessionStorage.setItem(rd,JSON.stringify(a)),console.log("[CallStateRecovery] Call state saved")}catch(a){console.error("[CallStateRecovery] Failed to save call state:",a)}}static loadCallState(){try{const t=sessionStorage.getItem(rd);if(!t)return null;const a=JSON.parse(t);return Date.now()-a.timestamp>qb?(console.log("[CallStateRecovery] Call state expired, clearing"),ba.clearCallState(),null):(console.log("[CallStateRecovery] Call state loaded"),a)}catch(t){return console.error("[CallStateRecovery] Failed to load call state:",t),null}}static clearCallState(){try{sessionStorage.removeItem(rd),console.log("[CallStateRecovery] Call state cleared")}catch(t){console.error("[CallStateRecovery] Failed to clear call state:",t)}}static hasActiveCallToCleanup(){const t=ba.loadCallState();return t!==null&&(t.isActive||t.isCalling||t.isReceiving)}static handlePageRefresh(){const t=ba.loadCallState();return t&&(t.isActive||t.isCalling||t.isReceiving)?(console.warn("[CallStateRecovery] Active call detected after page refresh - needs cleanup"),ba.clearCallState(),t):null}}const zb=({callState:r,callerId:t,callerName:a,calleeId:o,calleeName:l,onAccept:i,onReject:d,onEndCall:u,onToggleMute:h,isMuted:x=!1,callId:C,remoteStreamsVersion:S=0})=>{const{getRemoteStreams:A,getSpeakerEnabled:D,setSpeakerEnabled:y,getScreenSharePeers:E,getCameraSharePeers:w,getCallActive:b,getCurrentVoiceChannel:k}=Kn(),{startScreenShare:j,stopScreenShare:I,isScreenSharing:O}=bb(),{startCameraShare:F,stopCameraShare:U,isCameraSharing:ce}=Ub(),[de,ke]=_.useState(!1),[Ne,ze]=_.useState(x),[fe,H]=_.useState(!0),[J,re]=_.useState(!1),[z,Z]=_.useState(0),[te,V]=_.useState(null),[B,q]=_.useState(null),[me,he]=_.useState(null),[xe,$]=_.useState(!1),[W,ie]=_.useState(!1),[ye,pe]=_.useState(!1),[T,N]=_.useState(!1),[ee,ge]=_.useState({x:20,y:20}),[Ae,X]=_.useState({x:20,y:200}),[we,Me]=_.useState(!0),[Ve,Pe]=_.useState("unknown"),[ot,We]=_.useState(null),[Re,Te]=_.useState(!1),qe=_.useRef(new Map);_.useEffect(()=>{if(r==="connected"){const be=D();H(be),console.log("[VoiceCallOverlay] Headset enabled:",be)}},[r,D]),_.useEffect(()=>{const be=b();console.log("[VoiceCallOverlay] Call active state from WebRTC context:",be),be&&r==="inactive"&&console.log("[VoiceCallOverlay]  Call is active in WebRTC context but overlay shows inactive - this indicates a sync issue")},[b,r]),_.useEffect(()=>{const be=$b.subscribe(Le=>{console.log("[VoiceCallOverlay] Connection status changed:",Le),Le==="online"?(Me(!0),We(null)):Le==="offline"?(Me(!1),We("nternet balants kesildi"),r==="connected"&&We("nternet balants kesildi - Arama kesintiye urayabilir")):Le==="reconnecting"&&(Me(!1),We("Balant yeniden kuruluyor..."))});return()=>{be()}},[r]),_.useEffect(()=>{r!=="inactive"?ba.saveCallState({isActive:r==="connected",isCalling:r==="outgoing",isReceiving:r==="incoming",contactId:o||null,contactName:l||null,callerId:t||null,callerName:a||null,timestamp:Date.now()}):ba.clearCallState()},[r,o,l,t,a]),_.useEffect(()=>{r==="outgoing"?(Te(!0),console.log("[VoiceCallOverlay] Outgoing call - no timeout limit")):Te(!1)},[r]),_.useEffect(()=>{if(r==="connected"){const be=setInterval(()=>{const Le=A();if(Le.size>0){const rt=Array.from(Le.values()).filter(He=>He.active);rt.length===Le.size?Pe("excellent"):rt.length>0?Pe("poor"):Pe("unknown")}},3e3);return()=>clearInterval(be)}else Pe("unknown")},[r,A]),_.useEffect(()=>{if(console.log("[VoiceCallOverlay]  Remote streams useEffect triggered:",{callState:r,remoteStreamsVersion:S,timestamp:new Date().toISOString()}),r==="connected"){const be=A();console.log("[VoiceCallOverlay]  Setting up remote audio streams:",be.size),console.log("[VoiceCallOverlay] Current remote users:",Array.from(be.keys())),console.log("[VoiceCallOverlay]  REMOTE STREAMS DEBUG - UI UPDATE CRITICAL:",{callState:r,remoteStreamsCount:be.size,remoteStreamsVersion:S,remoteUsers:Array.from(be.keys()),shouldShowStreams:r==="connected",timestamp:new Date().toISOString(),getRemoteStreamsFunctionExists:typeof A=="function",functionReturns:be,mapSize:be.size,mapKeys:Array.from(be.keys()),mapEntries:Array.from(be.entries())}),be.size===0?(console.log("[VoiceCallOverlay]  NO REMOTE STREAMS FOUND - THIS IS THE CORE PROBLEM! "),console.log("[VoiceCallOverlay] Debug info for empty streams:",{getRemoteStreamsFunction:A.toString(),remoteStreamsVersion:S,callActive:b(),voiceChannelId:k(),functionName:"getRemoteStreams",functionType:typeof A}),setTimeout(()=>{console.log("[VoiceCallOverlay]  Delayed re-check for remote streams...");const He=A();console.log("[VoiceCallOverlay]  Delayed check result:",{delayedCount:He.size,delayedUsers:Array.from(He.keys()),timestamp:new Date().toISOString()}),He.size>0&&console.log("[VoiceCallOverlay]  Streams found on delayed check! UI should update! ")},1e3)):(console.log("[VoiceCallOverlay]  Remote streams found:",be.size,"users"),console.log("[VoiceCallOverlay]  UI SHOULD UPDATE WITH THESE STREAMS! ")),be.forEach((He,ft)=>{if(console.log("[VoiceCallOverlay]  Processing remote stream for user:",ft,"stream:",He.id),!He||He.getTracks().length===0){console.error("[VoiceCallOverlay]  Invalid stream for user:",ft);return}const at=He.getAudioTracks();console.log(`[VoiceCallOverlay]  Audio tracks for user ${ft}:`,at.length),at.forEach((_t,to)=>{console.log(`[VoiceCallOverlay] Audio track ${to} for user ${ft}:`,{id:_t.id,enabled:_t.enabled,muted:_t.muted,readyState:_t.readyState,label:_t.label}),_t.enabled||(console.warn(`[VoiceCallOverlay]  Audio track was disabled, enabling for user ${ft}`),_t.enabled=!0)});let pt=qe.current.get(ft);pt||(console.log("[VoiceCallOverlay] Creating new audio element for user:",ft),pt=new Audio,pt.autoplay=!0,pt.muted=!1,pt.volume=1,pt.controls=!1,pt.onloadeddata=()=>{console.log("[VoiceCallOverlay] Audio data loaded for user:",ft)},pt.oncanplay=()=>{console.log("[VoiceCallOverlay] Audio can play for user:",ft),pt.play().then(()=>{console.log("[VoiceCallOverlay]  Remote audio playing for user:",ft)}).catch(_t=>{console.warn("[VoiceCallOverlay]  Audio autoplay blocked for user:",ft,_t.message)})},pt.onerror=_t=>{console.error("[VoiceCallOverlay] Audio error for user",ft,":",_t)},pt.onended=()=>{console.log("[VoiceCallOverlay] Audio ended for user:",ft)},qe.current.set(ft,pt)),pt.muted=!1,pt.volume=1,pt.srcObject!==He&&(pt.srcObject=He),at[0]&&(at[0].enabled=!0),console.log("[VoiceCallOverlay]  Audio element configured for user:",ft)});const Le=Array.from(be.keys()),rt=[];qe.current.forEach((He,ft)=>{Le.includes(ft)||(console.log("[VoiceCallOverlay]  Cleaning up audio for removed user:",ft),He.pause(),He.srcObject=null,rt.push(ft))}),rt.forEach(He=>{qe.current.delete(He)}),setTimeout(()=>{const He=()=>{qe.current.forEach((at,pt)=>{at.paused&&at.play().catch(_t=>{console.log("[VoiceCallOverlay] Autoplay still blocked for user:",pt,_t.message)})})};if(Array.from(qe.current.values()).some(at=>at.paused)&&!document.getElementById("enable-audio-button")){console.log("[VoiceCallOverlay] Creating audio enable button due to autoplay policy");const at=document.createElement("button");at.id="enable-audio-button",at.innerHTML=" <strong>Sesli Sohbeti Etkinletir</strong>",at.style.position="fixed",at.style.top="20px",at.style.right="20px",at.style.zIndex="1000",at.style.padding="12px 20px",at.style.background="linear-gradient(135deg, #3B82F6, #1D4ED8)",at.style.color="white",at.style.border="none",at.style.borderRadius="8px",at.style.cursor="pointer",at.style.fontSize="14px",at.style.fontWeight="500",at.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)",at.style.transition="all 0.3s ease",at.onclick=()=>{He(),at.remove(),console.log("[VoiceCallOverlay]  Audio enabled by user interaction")},document.body.appendChild(at),setTimeout(()=>{at.parentNode&&at.remove()},5e3)}},1e3)}else console.log("[VoiceCallOverlay]  Cleaning up all audio elements - call not connected"),qe.current.forEach(be=>{be.pause(),be.srcObject=null}),qe.current.clear()},[r,A,S]),_.useEffect(()=>{console.log("[VoiceCallOverlay] State changed:",{callState:r,callerId:t,callerName:a,calleeId:o,calleeName:l}),r!=="inactive"?(console.log("[VoiceCallOverlay] Showing overlay, state:",r),ke(!0)):(console.log("[VoiceCallOverlay] Hiding overlay"),ke(!1))},[r,t,a,o,l]),_.useEffect(()=>{r==="connected"&&!te?V(Date.now()):r==="inactive"&&(V(null),Z(0))},[r,te]),_.useEffect(()=>{if(r==="connected"&&te){const be=setInterval(()=>{Z(Math.floor((Date.now()-te)/1e3))},1e3);return()=>clearInterval(be)}},[r,te]),_.useEffect(()=>{ze(x)},[x]),_.useEffect(()=>{(async()=>{if(t){const{data:Le}=await ne.from("profiles").select("profile_image_url").eq("id",t).maybeSingle();Le!=null&&Le.profile_image_url&&q(Le.profile_image_url)}if(o){const{data:Le}=await ne.from("profiles").select("profile_image_url").eq("id",o).maybeSingle();Le!=null&&Le.profile_image_url&&he(Le.profile_image_url)}})()},[t,o]);const nt=_.useCallback(()=>{if(h){const be=h();ze(be),C&&L({mic_enabled:!be})}},[h,C]),R=_.useCallback(()=>{const be=!fe;H(be),y(be),qe.current.forEach(Le=>{Le.muted=!be}),console.log("[VoiceCallOverlay]  Headset toggled:",{state:be?"enabled":"disabled",action:be?"turning ON":"turning OFF",audioElementsAffected:qe.current.size,callId:C||"N/A"}),C&&L({headset_enabled:be})},[fe,y,C]),f=_.useCallback(async()=>{try{console.log("[VoiceCallOverlay] Screen share toggle clicked. Current state from hook:",{isScreenSharingHook:O}),O?(console.log("[VoiceCallOverlay] Stopping screen share..."),await I(),$(!1),We(null),C&&L({screen_enabled:!1})):(console.log("[VoiceCallOverlay] Starting screen share..."),await j(),$(!0),We(null),C&&L({screen_enabled:!0})),console.log("[VoiceCallOverlay] Screen share state updated, showing window:",xe)}catch(be){console.error("[VoiceCallOverlay] Screen share toggle error:",be),We("Ekran paylam balatlamad")}},[O,j,I,C,xe]),v=_.useCallback(async()=>{try{console.log("[VoiceCallOverlay] Camera share toggle clicked. Current state:",{cameraOn:J,isCameraSharingHook:ce}),ce?(console.log("[VoiceCallOverlay] Stopping camera share..."),U(),re(!1),ie(!1),We(null),C&&L({cam_enabled:!1})):(console.log("[VoiceCallOverlay] Starting camera share..."),await F(),re(!0),ie(!0),We(null),C&&L({cam_enabled:!0})),console.log("[VoiceCallOverlay] Camera share state updated:",{cameraOn:J,showCameraShareWindow:W})}catch(be){console.error("[VoiceCallOverlay] Camera toggle error:",be),We("Kamera eriimi reddedildi")}},[ce,F,U,C]),L=_.useCallback(async be=>{if(C)try{const{data:{user:Le}}=await ne.auth.getUser();if(!Le)return;await ne.from("media_states").upsert({call_id:C,user_id:Le.id,...be,updated_at:new Date().toISOString()},{onConflict:"call_id,user_id"})}catch(Le){console.error("[VoiceCallOverlay] Failed to sync media state:",Le)}},[C]),Y=be=>{const Le=Math.floor(be/60),rt=be%60;return`${String(Le).padStart(2,"0")}:${String(rt).padStart(2,"0")}`},se=be=>{if(!be)return"?";const Le=be.split(" ");return Le.length>=2?`${Le[0][0]}${Le[1][0]}`.toUpperCase():be[0].toUpperCase()},ve=()=>{if(ot)return ot;if(Re)return"Balanyor...";switch(r){case"outgoing":return"Aranyor...";case"incoming":return`${a||"Bilinmeyen"} sizi aryor`;case"connected":return`Arama sresi: ${Y(z)}`;default:return""}},et=()=>{switch(Ve){case"excellent":return m.jsx(Lc,{size:16,color:"#3ba55d","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:632:15","data-matrix-name":"Signal","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"632","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Signal","data-component-content":"%7B%22size%22%3A16%2C%22color%22%3A%22%233ba55d%22%7D"});case"good":return m.jsx(Lc,{size:16,color:"#f0b232","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:634:15","data-matrix-name":"Signal","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"634","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Signal","data-component-content":"%7B%22size%22%3A16%2C%22color%22%3A%22%23f0b232%22%7D"});case"poor":return m.jsx(Lc,{size:16,color:"#ed4245","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:636:15","data-matrix-name":"Signal","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"636","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Signal","data-component-content":"%7B%22size%22%3A16%2C%22color%22%3A%22%23ed4245%22%7D"});default:return null}};return r==="inactive"?(console.log("[VoiceCallOverlay] Returning null - state is inactive"),null):(console.log("[VoiceCallOverlay] Rendering overlay, state:",r),m.jsxs("div",{className:`fixed inset-0 z-50 flex items-start justify-center pt-20 transition-all duration-500 ${de?"opacity-100":"opacity-0 pointer-events-none"}`,style:{backgroundColor:"rgba(0, 0, 0, 0.88)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:650:4","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"650","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22rgba(0%2C%200%2C%200%2C%200.88)%22%7D%7D",children:[m.jsxs("div",{className:`relative w-full max-w-2xl mx-4 rounded-xl border transition-all duration-500 transform ${de?"translate-y-0 scale-100":"-translate-y-5 scale-95"}`,style:{background:"linear-gradient(135deg, #1a1a1a 0%, #242424 100%)",borderColor:"rgba(255, 255, 255, 0.08)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.6), 0 2px 8px rgba(0, 0, 0, 0.4)",minHeight:"400px",maxHeight:"600px",padding:"64px 32px"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:657:6","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"657","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22background%22%3A%22linear-gradient(135deg%2C%20%231a1a1a%200%25%2C%20%23242424%20100%25)%22%2C%22borderColor%22%3A%22rgba(255%2C%20255%2C%20255%2C%200.08)%22%2C%22boxShadow%22%3A%220%208px%2032px%20rgba(0%2C%200%2C%200%2C%200.6)%2C%200%202px%208px%20rgba(0%2C%200%2C%200%2C%200.4)%22%2C%22minHeight%22%3A%22400px%22%2C%22maxHeight%22%3A%22600px%22%2C%22padding%22%3A%2264px%2032px%22%7D%7D",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center space-y-6 mb-12","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:671:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"671","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20items-center%20justify-center%20space-y-6%20mb-12%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-6","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:673:10","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"673","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-6%22%7D",children:[r==="outgoing"&&m.jsxs("div",{className:"relative","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:676:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"676","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[m.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center overflow-hidden border-4 border-transparent animate-pulse-ring",style:{background:me?`url(${me}) center/cover`:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:677:16","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"677","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-36%20h-36%20rounded-full%20flex%20items-center%20justify-center%20overflow-hidden%20border-4%20border-transparent%20animate-pulse-ring%22%2C%22style%22%3A%7B%22background%22%3A%22%5BConditionalExpression%5D%22%7D%7D",children:!me&&m.jsx("span",{className:"text-4xl font-semibold text-white","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:686:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"686","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-semibold%20text-white%22%7D",children:se(l)})}),r==="outgoing"&&m.jsx("div",{className:"absolute inset-0 rounded-full",style:{animation:"pulse-ring 2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:692:18","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"692","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20inset-0%20rounded-full%22%2C%22style%22%3A%7B%22animation%22%3A%22pulse-ring%202s%20cubic-bezier(0.4%2C%200%2C%200.2%2C%201)%20infinite%22%7D%7D"})]}),r==="connected"&&m.jsx("div",{className:"relative","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:703:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"703","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:m.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center overflow-hidden border-4 border-transparent",style:{background:B?`url(${B}) center/cover`:"linear-gradient(135deg, #3ba55d 0%, #2d7d46 100%)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:704:16","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"704","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-36%20h-36%20rounded-full%20flex%20items-center%20justify-center%20overflow-hidden%20border-4%20border-transparent%22%2C%22style%22%3A%7B%22background%22%3A%22%5BConditionalExpression%5D%22%7D%7D",children:!B&&m.jsx("span",{className:"text-4xl font-semibold text-white","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:713:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"713","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-semibold%20text-white%22%7D",children:se(a)})})}),r==="connected"&&m.jsx("div",{className:"relative","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:723:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"723","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:m.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center overflow-hidden border-4 border-transparent",style:{background:me?`url(${me}) center/cover`:"linear-gradient(135deg, #5865f2 0%, #7289da 100%)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:724:16","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"724","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-36%20h-36%20rounded-full%20flex%20items-center%20justify-center%20overflow-hidden%20border-4%20border-transparent%22%2C%22style%22%3A%7B%22background%22%3A%22%5BConditionalExpression%5D%22%7D%7D",children:!me&&m.jsx("span",{className:"text-4xl font-semibold text-white","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:733:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"733","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-semibold%20text-white%22%7D",children:se(l)})})}),r==="incoming"&&m.jsx("div",{className:"relative","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:743:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"743","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:m.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center overflow-hidden border-4 border-transparent",style:{background:me?`url(${me}) center/cover`:"linear-gradient(135deg, #3ba55d 0%, #2d7d46 100%)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:744:16","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"744","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-36%20h-36%20rounded-full%20flex%20items-center%20justify-center%20overflow-hidden%20border-4%20border-transparent%22%2C%22style%22%3A%7B%22background%22%3A%22%5BConditionalExpression%5D%22%7D%7D",children:!me&&m.jsx("span",{className:"text-4xl font-semibold text-white","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:753:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"753","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-semibold%20text-white%22%7D",children:se(r==="incoming"?a:l)})})})]}),m.jsxs("div",{className:"text-center space-y-2","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:763:10","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"763","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20space-y-2%22%7D",children:[m.jsx("p",{className:"text-lg font-normal transition-opacity duration-300",style:{color:ot?"#ed4245":"#b9bbbe"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:764:12","data-matrix-name":"p","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"764","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-lg%20font-normal%20transition-opacity%20duration-300%22%2C%22style%22%3A%7B%22color%22%3A%22%5BConditionalExpression%5D%22%7D%7D",children:ve()}),!we&&m.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-2","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:773:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"773","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-2%20mt-2%22%7D",children:[m.jsx(Qy,{size:16,color:"#ed4245","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:774:16","data-matrix-name":"WifiOff","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"774","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"WifiOff","data-component-content":"%7B%22size%22%3A16%2C%22color%22%3A%22%23ed4245%22%7D"}),m.jsx("span",{className:"text-sm",style:{color:"#ed4245"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:775:16","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"775","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%22%2C%22style%22%3A%7B%22color%22%3A%22%23ed4245%22%7D%7D",children:"nternet balants yok"})]}),r==="connected"&&we&&m.jsxs("div",{className:"flex items-center justify-center space-x-3","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:783:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"783","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-3%22%7D",children:[m.jsxs("div",{className:"flex items-center space-x-1","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:784:16","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"784","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%22%7D",children:[m.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#3ba55d"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:785:18","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"785","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-2%20h-2%20rounded-full%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22%233ba55d%22%7D%7D"}),m.jsx("span",{className:"text-sm",style:{color:"#72767d"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:789:18","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"789","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%22%2C%22style%22%3A%7B%22color%22%3A%22%2372767d%22%7D%7D",children:"Bal"})]}),et()]}),r==="connected"&&(O||J)&&m.jsxs("div",{className:"flex items-center justify-center space-x-3 mt-2","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:799:14","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"799","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-3%20mt-2%22%7D",children:[O&&m.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 rounded",style:{backgroundColor:"rgba(59, 165, 93, 0.2)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:801:18","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"801","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%20px-2%20py-1%20rounded%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22rgba(59%2C%20165%2C%2093%2C%200.2)%22%7D%7D",children:[m.jsx(Si,{size:14,color:"#3ba55d","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:802:20","data-matrix-name":"Monitor","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"802","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Monitor","data-component-content":"%7B%22size%22%3A14%2C%22color%22%3A%22%233ba55d%22%7D"}),m.jsx("span",{className:"text-xs",style:{color:"#3ba55d"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:803:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"803","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%22%2C%22style%22%3A%7B%22color%22%3A%22%233ba55d%22%7D%7D",children:"Ekran paylalyor"})]}),J&&m.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 rounded",style:{backgroundColor:"rgba(59, 165, 93, 0.2)"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:807:18","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"807","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%20px-2%20py-1%20rounded%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22rgba(59%2C%20165%2C%2093%2C%200.2)%22%7D%7D",children:[m.jsx(un,{size:14,color:"#3ba55d","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:808:20","data-matrix-name":"Video","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"808","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A14%2C%22color%22%3A%22%233ba55d%22%7D"}),m.jsx("span",{className:"text-xs",style:{color:"#3ba55d"},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:809:20","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"809","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%22%2C%22style%22%3A%7B%22color%22%3A%22%233ba55d%22%7D%7D",children:"Kamera ak"})]})]})]})]}),m.jsxs("div",{className:"flex items-center justify-center space-x-6","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:818:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"818","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20space-x-6%22%7D",children:[r==="incoming"&&i&&m.jsx("button",{onClick:i,className:"group relative flex items-center justify-center transition-all duration-150",style:{width:"56px",height:"56px",borderRadius:"9999px",backgroundColor:"#3ba55d"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#2d7d46",be.currentTarget.style.transform="scale(1.1)",be.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#3ba55d",be.currentTarget.style.transform="scale(1)",be.currentTarget.style.boxShadow="none"},"aria-label":"Aramay kabul et","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:821:12","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"821","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-150%22%2C%22style%22%3A%7B%22width%22%3A%2256px%22%2C%22height%22%3A%2256px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%233ba55d%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:m.jsx(bn,{size:24,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:842:14","data-matrix-name":"Phone","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"842","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Phone","data-component-content":"%7B%22size%22%3A24%2C%22color%22%3A%22%23ffffff%22%7D"})}),r==="connected"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:nt,className:"group relative flex items-center justify-center transition-all duration-300",style:{width:"48px",height:"48px",borderRadius:"9999px",backgroundColor:Ne?"#ed4245":"#3c3f45"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor=Ne?"#c03537":"#4e5158"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor=Ne?"#ed4245":"#3c3f45"},"aria-label":Ne?"Mikrofonu a":"Mikrofonu kapat","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:850:14","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"850","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-300%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%5BConditionalExpression%5D%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:Ne?m.jsx(Qh,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:868:18","data-matrix-name":"MicOff","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"868","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"MicOff","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(Xh,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:870:18","data-matrix-name":"Mic","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"870","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Mic","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:R,className:"group relative flex items-center justify-center transition-all duration-300",style:{width:"48px",height:"48px",borderRadius:"9999px",backgroundColor:fe?"#3c3f45":"#ed4245"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor=fe?"#4e5158":"#c03537"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor=fe?"#3c3f45":"#ed4245"},"aria-label":fe?"Hoparlr kapat":"Hoparlr a","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:875:14","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"875","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-300%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%5BConditionalExpression%5D%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:fe?m.jsx(Vr,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:893:18","data-matrix-name":"Volume2","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"893","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Volume2","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(rf,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:895:18","data-matrix-name":"VolumeX","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"895","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"VolumeX","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:f,className:"group relative flex items-center justify-center transition-all duration-300",style:{width:"48px",height:"48px",borderRadius:"9999px",backgroundColor:O?"#3ba55d":"#3c3f45"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor=O?"#2d7d46":"#4e5158"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor=O?"#3ba55d":"#3c3f45"},"aria-label":O?"Ekran paylamn durdur":"Ekran paylamn balat","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:900:14","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"900","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-300%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%5BConditionalExpression%5D%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:O?m.jsx(Gy,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:918:18","data-matrix-name":"MonitorOff","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"918","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"MonitorOff","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(Si,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:920:18","data-matrix-name":"Monitor","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"920","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Monitor","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:v,className:"group relative flex items-center justify-center transition-all duration-300",style:{width:"48px",height:"48px",borderRadius:"9999px",backgroundColor:J?"#3ba55d":"#3c3f45"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor=J?"#2d7d46":"#4e5158"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor=J?"#3ba55d":"#3c3f45"},"aria-label":J?"Kameray kapat":"Kameray a","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:925:14","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"925","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-300%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%5BConditionalExpression%5D%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:J?m.jsx(of,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:943:18","data-matrix-name":"VideoOff","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"943","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"VideoOff","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(un,{size:20,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:945:18","data-matrix-name":"Video","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"945","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})})]}),m.jsx("button",{onClick:r==="incoming"?d:u,className:"group relative flex items-center justify-center transition-all duration-150",style:{width:"56px",height:"56px",borderRadius:"9999px",backgroundColor:"#ed4245"},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#c03537",be.currentTarget.style.transform="scale(1.1)",be.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.3)"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#ed4245",be.currentTarget.style.transform="scale(1)",be.currentTarget.style.boxShadow="none"},"aria-label":r==="incoming"?"Aramay reddet":"Aramay sonlandr","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:952:10","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"952","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BConditionalExpression%5D%22%2C%22className%22%3A%22group%20relative%20flex%20items-center%20justify-center%20transition-all%20duration-150%22%2C%22style%22%3A%7B%22width%22%3A%2256px%22%2C%22height%22%3A%2256px%22%2C%22borderRadius%22%3A%229999px%22%2C%22backgroundColor%22%3A%22%23ed4245%22%7D%2C%22onMouseEnter%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onMouseLeave%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:m.jsx(ef,{size:24,color:"#ffffff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:973:12","data-matrix-name":"PhoneOff","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"973","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"PhoneOff","data-component-content":"%7B%22size%22%3A24%2C%22color%22%3A%22%23ffffff%22%7D"})})]})]}),xe&&m.jsx(Wb,{position:ee,onPositionChange:ge,minimized:ye,onMinimize:()=>pe(!ye),onClose:()=>{$(!1),O&&f()},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:980:8","data-matrix-name":"ScreenShareWindow","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"980","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"ScreenShareWindow","data-component-content":"%7B%22position%22%3A%22%5BIdentifier%5D%22%2C%22onPositionChange%22%3A%22%5BIdentifier%5D%22%2C%22minimized%22%3A%22%5BIdentifier%5D%22%2C%22onMinimize%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),W&&m.jsx(Gb,{position:Ae,onPositionChange:X,minimized:T,onMinimize:()=>N(!T),onClose:()=>{ie(!1),J&&v()},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:996:8","data-matrix-name":"CameraShareWindow","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"996","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"CameraShareWindow","data-component-content":"%7B%22position%22%3A%22%5BIdentifier%5D%22%2C%22onPositionChange%22%3A%22%5BIdentifier%5D%22%2C%22minimized%22%3A%22%5BIdentifier%5D%22%2C%22onMinimize%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsx("style",{"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1011:6","data-matrix-name":"style","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1011","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"style",children:`
        @keyframes pulse-ring {
          0%, 100% {
            box-shadow: 0 0 0 0 rgba(88, 101, 242, 0.5);
            transform: scale(1);
          }
          50% {
            box-shadow: 0 0 0 16px rgba(88, 101, 242, 0);
            transform: scale(1.02);
          }
        }
        .animate-pulse-ring {
          animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @media (prefers-reduced-motion: reduce) {
          .animate-pulse-ring {
            animation: none;
          }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
          .w-36 {
            width: 100px !important;
            height: 100px !important;
          }
          .text-4xl {
            font-size: 2rem !important;
          }
        }

        /* Drag cursor styles */
        .draggable {
          cursor: move;
        }
        .draggable:active {
          cursor: grabbing;
        }
      `})]}))},Wb=({position:r,onPositionChange:t,minimized:a,onMinimize:o,onClose:l})=>{const[i,d]=_.useState(!1),[u,h]=_.useState({x:0,y:0}),{getScreenSharePeers:x}=Kn(),C=x();console.log("[ScreenShareWindow] Rendering window:",{minimized:a,peersCount:C.size});const S=y=>{d(!0),h({x:y.clientX-r.x,y:y.clientY-r.y})},A=_.useCallback(y=>{i&&t({x:y.clientX-u.x,y:y.clientY-u.y})},[i,u,t]),D=_.useCallback(()=>{d(!1)},[]);return _.useEffect(()=>{if(i)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",D),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)}},[i,A,D]),m.jsxs("div",{className:`fixed z-50 bg-black rounded-lg border shadow-2xl transition-all duration-300 ${a?"w-64 h-12":"w-80 h-60"} draggable`,style:{left:r.x,top:r.y,borderColor:"rgba(59, 165, 93, 0.5)",backgroundColor:"rgba(0, 0, 0, 0.9)"},onMouseDown:S,"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1112:4","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1112","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22left%22%3A%22%5BMemberExpression%5D%22%2C%22top%22%3A%22%5BMemberExpression%5D%22%2C%22borderColor%22%3A%22rgba(59%2C%20165%2C%2093%2C%200.5)%22%2C%22backgroundColor%22%3A%22rgba(0%2C%200%2C%200%2C%200.9)%22%7D%2C%22onMouseDown%22%3A%22%5BIdentifier%5D%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-600 rounded-t-lg cursor-move",onMouseDown:S,"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1125:6","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1125","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-2%20bg-green-600%20rounded-t-lg%20cursor-move%22%2C%22onMouseDown%22%3A%22%5BIdentifier%5D%22%7D",children:[m.jsxs("span",{className:"text-white text-sm font-medium flex items-center","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1129:8","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1129","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%20flex%20items-center%22%7D",children:[m.jsx(Si,{size:14,className:"mr-2","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1130:10","data-matrix-name":"Monitor","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1130","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Monitor","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22mr-2%22%7D"}),"Ekran Paylam"]}),m.jsxs("div",{className:"flex items-center space-x-1","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1133:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1133","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%22%7D",children:[m.jsx("button",{onClick:o,className:"p-1 hover:bg-green-700 rounded transition-colors","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1134:10","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1134","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-green-700%20rounded%20transition-colors%22%7D",children:a?m.jsx(Yh,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1138:25","data-matrix-name":"Maximize2","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1138","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Maximize2","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"}):m.jsx(Zh,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1138:64","data-matrix-name":"Minimize2","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1138","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Minimize2","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"})}),m.jsx("button",{onClick:l,className:"p-1 hover:bg-red-600 rounded transition-colors","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1140:10","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1140","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-red-600%20rounded%20transition-colors%22%7D",children:m.jsx(Yt,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1144:12","data-matrix-name":"X","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1144","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"})})]})]}),!a&&m.jsxs("div",{className:"relative w-full h-48 overflow-hidden rounded-b-lg","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1151:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1151","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%20w-full%20h-48%20overflow-hidden%20rounded-b-lg%22%7D",children:[Array.from(C.entries()).map(([y,E])=>m.jsx("video",{className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:y==="local-screen",ref:w=>{w&&E.stream&&(w.srcObject=E.stream)},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1153:12","data-matrix-name":"video","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1153","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"video","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20object-cover%22%2C%22autoPlay%22%3Atrue%2C%22playsInline%22%3Atrue%2C%22muted%22%3A%22%5BBinaryExpression%5D%22%7D"},y)),C.size===0&&m.jsx("div",{className:"flex items-center justify-center w-full h-full text-gray-400","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1168:12","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1168","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20w-full%20h-full%20text-gray-400%22%7D",children:m.jsx("span",{className:"text-sm","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1169:14","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1169","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%22%7D",children:"Ekran paylam bekleniyor..."})})]})]})},Gb=({position:r,onPositionChange:t,minimized:a,onMinimize:o,onClose:l})=>{const[i,d]=_.useState(!1),[u,h]=_.useState({x:0,y:0}),{getCameraSharePeers:x}=Kn(),C=x();console.log("[CameraShareWindow] Rendering window:",{minimized:a,peersCount:C.size});const S=y=>{d(!0),h({x:y.clientX-r.x,y:y.clientY-r.y})},A=_.useCallback(y=>{i&&t({x:y.clientX-u.x,y:y.clientY-u.y})},[i,u,t]),D=_.useCallback(()=>{d(!1)},[]);return _.useEffect(()=>{if(i)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",D),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)}},[i,A,D]),m.jsxs("div",{className:`fixed z-50 bg-black rounded-lg border shadow-2xl transition-all duration-300 ${a?"w-64 h-12":"w-80 h-60"} draggable`,style:{left:r.x,top:r.y,borderColor:"rgba(59, 165, 93, 0.5)",backgroundColor:"rgba(0, 0, 0, 0.9)"},onMouseDown:S,"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1235:4","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1235","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22left%22%3A%22%5BMemberExpression%5D%22%2C%22top%22%3A%22%5BMemberExpression%5D%22%2C%22borderColor%22%3A%22rgba(59%2C%20165%2C%2093%2C%200.5)%22%2C%22backgroundColor%22%3A%22rgba(0%2C%200%2C%200%2C%200.9)%22%7D%2C%22onMouseDown%22%3A%22%5BIdentifier%5D%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-600 rounded-t-lg cursor-move",onMouseDown:S,"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1248:6","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1248","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-2%20bg-blue-600%20rounded-t-lg%20cursor-move%22%2C%22onMouseDown%22%3A%22%5BIdentifier%5D%22%7D",children:[m.jsxs("span",{className:"text-white text-sm font-medium flex items-center","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1252:8","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1252","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%20text-sm%20font-medium%20flex%20items-center%22%7D",children:[m.jsx(un,{size:14,className:"mr-2","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1253:10","data-matrix-name":"Video","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1253","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A14%2C%22className%22%3A%22mr-2%22%7D"}),"Kamera Paylam"]}),m.jsxs("div",{className:"flex items-center space-x-1","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1256:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1256","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-1%22%7D",children:[m.jsx("button",{onClick:o,className:"p-1 hover:bg-blue-700 rounded transition-colors","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1257:10","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1257","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-blue-700%20rounded%20transition-colors%22%7D",children:a?m.jsx(Yh,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1261:25","data-matrix-name":"Maximize2","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1261","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Maximize2","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"}):m.jsx(Zh,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1261:64","data-matrix-name":"Minimize2","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1261","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"Minimize2","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"})}),m.jsx("button",{onClick:l,className:"p-1 hover:bg-red-600 rounded transition-colors","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1263:10","data-matrix-name":"button","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1263","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-red-600%20rounded%20transition-colors%22%7D",children:m.jsx(Yt,{size:12,color:"#fff","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1267:12","data-matrix-name":"X","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1267","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A12%2C%22color%22%3A%22%23fff%22%7D"})})]})]}),!a&&m.jsxs("div",{className:"relative w-full h-48 overflow-hidden rounded-b-lg","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1274:8","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1274","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%20w-full%20h-48%20overflow-hidden%20rounded-b-lg%22%7D",children:[Array.from(C.entries()).map(([y,E])=>m.jsx("video",{className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:y==="local-camera",ref:w=>{w&&E.stream&&(w.srcObject=E.stream)},"data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1276:12","data-matrix-name":"video","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1276","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"video","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20object-cover%22%2C%22autoPlay%22%3Atrue%2C%22playsInline%22%3Atrue%2C%22muted%22%3A%22%5BBinaryExpression%5D%22%7D"},y)),C.size===0&&m.jsx("div",{className:"flex items-center justify-center w-full h-full text-gray-400","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1291:12","data-matrix-name":"div","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1291","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20w-full%20h-full%20text-gray-400%22%7D",children:m.jsx("span",{className:"text-sm","data-matrix-id":"src/components/call/VoiceCallOverlay.tsx:1292:14","data-matrix-name":"span","data-component-path":"src/components/call/VoiceCallOverlay.tsx","data-component-line":"1292","data-component-file":"VoiceCallOverlay.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%22%7D",children:"Kamera paylam bekleniyor..."})})]})]})},Hb=r=>{const t={...r,onToggleMute:r.onToggleMute?()=>{var a;return(a=r.onToggleMute)==null||a.call(r),!1}:void 0,onToggleVideo:r.onToggleVideo?()=>{var a;return(a=r.onToggleVideo)==null||a.call(r),!1}:void 0};return m.jsx(zb,{...t,"data-matrix-id":"src/components/call/NewCallOverlay.tsx:42:9","data-matrix-name":"VoiceCallOverlay","data-component-path":"src/components/call/NewCallOverlay.tsx","data-component-line":"42","data-component-file":"NewCallOverlay.tsx","data-component-name":"VoiceCallOverlay","data-component-content":"%7B%22...spread%22%3Atrue%7D"})},Kb=({isOpen:r,callRequest:t,onAccept:a,onReject:o,onClose:l})=>{var x;if(!r||!t)return null;const i=new Date(t.created_at),u=new Date().getTime()-i.getTime(),h=Math.floor(u/6e4);return m.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:37:4","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"37","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%2F80%20flex%20items-center%20justify-center%20z-50%22%7D",children:m.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-700 shadow-xl max-w-md w-full mx-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:38:6","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"38","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-900%20rounded-lg%20border%20border-gray-700%20shadow-xl%20max-w-md%20w-full%20mx-4%22%7D",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:40:8","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"40","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-6%20border-b%20border-gray-700%22%7D",children:[m.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:41:10","data-matrix-name":"h2","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"41","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%20flex%20items-center%20gap-2%22%7D",children:[t.call_type==="voice"?m.jsx(bn,{className:"w-5 h-5 text-blue-400","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:43:14","data-matrix-name":"Phone","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"43","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-blue-400%22%7D"}):m.jsx(un,{className:"w-5 h-5 text-purple-400","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:45:14","data-matrix-name":"Video","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"45","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-purple-400%22%7D"}),"Gelen Arama"]}),m.jsx("button",{onClick:l,className:"text-gray-400 hover:text-white transition-colors","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:49:10","data-matrix-name":"button","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"49","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-white%20transition-colors%22%7D",children:m.jsx(Yt,{className:"w-6 h-6","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:53:12","data-matrix-name":"X","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"53","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"})})]}),m.jsxs("div",{className:"p-6 text-center","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:58:8","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"58","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-6%20text-center%22%7D",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:60:10","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"60","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-20%20h-20%20bg-gradient-to-br%20from-blue-500%20to-purple-600%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:m.jsx(wa,{className:"w-10 h-10 text-white","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:61:12","data-matrix-name":"User","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"61","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"User","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20text-white%22%7D"})}),m.jsx("h3",{className:"text-xl font-bold text-white mb-2","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:65:10","data-matrix-name":"h3","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"65","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-white%20mb-2%22%7D",children:((x=t.from_user)==null?void 0:x.username)||"Bilinmeyen Kullanc"}),m.jsxs("p",{className:"text-gray-400 mb-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:69:10","data-matrix-name":"p","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"69","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20mb-4%22%7D",children:[t.call_type==="voice"?"Sesli arama":"Grntl arama"," istiyor"]}),m.jsx("p",{className:"text-sm text-gray-500 mb-6","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:73:10","data-matrix-name":"p","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"73","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-500%20mb-6%22%7D",children:h===0?"Az nce":`${h} dakika nce`}),m.jsxs("div",{className:"flex gap-3","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:78:10","data-matrix-name":"div","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"78","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%22%7D",children:[m.jsxs("button",{onClick:o,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:79:12","data-matrix-name":"button","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"79","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20bg-gray-700%20hover%3Abg-gray-600%20text-white%20font-medium%20py-3%20px-4%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[m.jsx(Yt,{className:"w-4 h-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:83:14","data-matrix-name":"X","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"83","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),"Reddet"]}),m.jsxs("button",{onClick:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:86:12","data-matrix-name":"button","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"86","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20bg-blue-600%20hover%3Abg-blue-700%20text-white%20font-medium%20py-3%20px-4%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[t.call_type==="voice"?m.jsx(bn,{className:"w-4 h-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:91:16","data-matrix-name":"Phone","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"91","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}):m.jsx(un,{className:"w-4 h-4","data-matrix-id":"src/components/modals/IncomingCallRequestModal.tsx:93:16","data-matrix-name":"Video","data-component-path":"src/components/modals/IncomingCallRequestModal.tsx","data-component-line":"93","data-component-file":"IncomingCallRequestModal.tsx","data-component-name":"Video","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),"Kabul Et"]})]})]})]})})},Jb=()=>{const{getPeerConnections:r,addPeerConnection:t,removePeerConnection:a,getLocalStream:o,setLocalStream:l,getCurrentVoiceChannel:i,setCurrentVoiceChannel:d,getMicEnabled:u,addRemoteStream:h,removeRemoteStream:x,getIceBuffer:C,addIceCandidate:S,clearIceBuffer:A,onStream:D}=Kn(),{sendVoiceChannelSignal:y,addEventListener:E,removeEventListener:w,joinVoiceChannelRoom:b,leaveVoiceChannelRoom:k}=$r(),j=_.useRef(!1),I=_.useRef({channelId:null,timestamp:0}),O=_.useRef(null),F=_.useCallback(z=>{try{const Z=Date.now();if(I.current.channelId&&Z-I.current.timestamp<6e4&&I.current.channelId===Number(z))return console.log("[VoiceChannel] Using cached channel ID:",I.current.channelId),I.current.channelId;let te;if(typeof z=="number")te=Math.floor(z);else if(typeof z=="string"){const V=parseInt(z.trim(),10);if(isNaN(V))return console.error("[VoiceChannel]  String channel ID could not be parsed:",z),null;te=V}else return console.error("[VoiceChannel]  Channel ID must be string or number, got:",typeof z),null;return!Number.isInteger(te)||te<=0||te>Number.MAX_SAFE_INTEGER||!Number.isFinite(te)?(console.error("[VoiceChannel]  Invalid channel ID after validation:",{original:z,validated:te,isInteger:Number.isInteger(te),isFinite:Number.isFinite(te)}),null):(I.current={channelId:te,timestamp:Z},console.log("[VoiceChannel]  Channel ID validated and cached:",te),te)}catch(Z){return console.error("[VoiceChannel]  Channel ID validation error:",Z),I.current={channelId:null,timestamp:0},null}},[]),U=_.useCallback(async(z,Z,te,V=3)=>{const B=Math.random().toString(36).substr(2,9);console.log(`[VoiceChannel]  Starting signal send [${B}]`,{type:te,channelId:z,signalKeys:Object.keys(Z||{})});for(let q=1;q<=V;q++)try{const me=F(z);if(!me){const ie=new Error(`Invalid channel ID: ${z}`);throw console.error(`[VoiceChannel]  Signal [${B}] validation failed:`,ie.message),ie}const he=i();if(!he||he!==me){const ie=new Error(`Channel context mismatch. Current: ${he}, Expected: ${me}`);throw console.error(`[VoiceChannel]  Signal [${B}] context mismatch:`,ie.message),ie}console.log(`[VoiceChannel]  Signal attempt ${q}/${V} [${B}] - Channel: ${me}`);const xe=Math.min(1e4*q,3e4),$=y(me,Z,te),W=new Promise((ie,ye)=>setTimeout(()=>ye(new Error(`Signal send timeout after ${xe}ms`)),xe));return await Promise.race([$,W]),console.log(`[VoiceChannel]  Signal [${B}] sent successfully on attempt ${q}`),!0}catch(me){const he=me instanceof Error?me.message:"Unknown error";if(console.error(`[VoiceChannel]  Signal attempt ${q}/${V} [${B}] failed:`,he),he.includes("Invalid channel ID")||he.includes("context mismatch")||he.includes("Authentication required"))throw new Error(`Signal sending failed permanently: ${he}`);if(q===V){const W=new Error(`Signal sending failed after ${V} attempts: ${he}`);throw console.error(`[VoiceChannel]  Signal [${B}] final failure:`,W.message),W}const xe=Math.min(1e3*Math.pow(1.5,q-1),8e3),$=Math.random()*500;await new Promise(W=>setTimeout(W,xe+$))}return!1},[i,F,y]),ce=_.useCallback(async z=>{var Z;if(j.current){console.log("[VoiceChannel] Already joining, skipping...");return}j.current=!0,j.current=!0;try{console.log("[VoiceChannel]  Starting join process for channel:",z);try{await dt.initializeAudioContext()?console.log("[VoiceChannel]  Audio context initialized for voice channel"):console.warn("[VoiceChannel]  Audio context not available, continuing without it")}catch(xe){console.warn("[VoiceChannel] Audio context initialization failed, continuing without it:",xe)}const te=F(z);if(!te)throw new Error(`Invalid channel ID provided: ${z}`);const V=await dt.getUserMediaWithFallback();if(!V||V.getTracks().length===0)throw new Error("Failed to acquire media stream");V.getAudioTracks().forEach(xe=>{xe.enabled=!0,console.log("[VoiceChannel]  Local audio track enabled:",xe.id)}),l(V);const{data:{user:B},error:q}=await ne.auth.getUser();if(q||!B)throw new Error("Not authenticated or authentication failed");try{console.log("[VoiceChannel] Calling Voice Channel Manager for join operation");const xe="https://ukxddlrmmvpegamjvbfm.supabase.co",$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVreGRkbHJtbXZwZWdhbWp2YmZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NjgyOTgsImV4cCI6MjA3NzM0NDI5OH0.Pjj3SY7hzob68WLr2k6J6gdPZOCGKN1ixjJsNHRbwGg",W=await fetch(`${xe}/functions/v1/voice-channel-manager`,{method:"POST",headers:{Authorization:`Bearer ${$}`,apikey:$,"Content-Type":"application/json"},body:JSON.stringify({action:"join_channel",channelId:te,userId:B.id})});if(!W.ok){const pe=((Z=(await W.json().catch(()=>({}))).error)==null?void 0:Z.message)||`HTTP ${W.status}`;throw new Error(`Voice Channel Manager failed: ${pe}`)}const ie=await W.json();console.log("[VoiceChannel]  Voice Channel Manager response:",ie)}catch(xe){console.error("[VoiceChannel] Voice Channel Manager error:",xe),console.log("[VoiceChannel] Attempting fallback to direct database operation...");try{const $=String(te);if((await dt.getVoiceChannelUsers($)).some(ye=>ye.user_id===B.id)){const{error:ye}=await ne.from("voice_channel_users").update({is_active:!0,last_seen:new Date().toISOString(),left_at:null}).eq("channel_id",$).eq("user_id",B.id);if(ye)throw new Error(`Fallback update failed: ${ye.message}`);console.log("[VoiceChannel]  Updated existing user in voice channel")}else{const{error:ye}=await ne.from("voice_channel_users").insert({channel_id:te,user_id:B.id,is_active:!0,is_muted:!1,is_deafened:!1,joined_at:new Date().toISOString(),last_seen:new Date().toISOString()});if(ye)if(ye.code==="23505"){console.log("[VoiceChannel] User already exists, updating instead");const{error:pe}=await ne.from("voice_channel_users").update({is_active:!0,last_seen:new Date().toISOString(),left_at:null}).eq("channel_id",te).eq("user_id",B.id);if(pe)throw new Error(`Fallback update after constraint failed: ${pe.message}`)}else throw new Error(`Fallback insert failed: ${ye.message}`);else console.log("[VoiceChannel]  Successfully added user to voice channel")}console.log("[VoiceChannel]  Fallback database operation successful")}catch($){throw console.error("[VoiceChannel] Fallback operation also failed:",$),new Error(`Both Voice Channel Manager and fallback failed: ${$ instanceof Error?$.message:"Unknown error"}`)}}await b(te),d(te);const he=(await dt.getVoiceChannelUsers(String(te))).map(xe=>xe.user_id).filter(xe=>xe!==B.id);if(console.log("[VoiceChannel] Creating mesh connections with:",he.length,"users"),he.length>0&&await Promise.all(he.map(async xe=>{try{await ke(xe,!0,V)}catch($){console.error("[VoiceChannel] Failed to connect to user:",xe,$)}})),he.length>0)for(const xe of he)try{await U(te,{type:"request-shares",requester:B.id},"offer")}catch($){console.error("[VoiceChannel] Failed to request shares from",xe,":",$)}console.log("[VoiceChannel]  Successfully joined voice channel:",te)}catch(te){console.error("[VoiceChannel]  Failed to join:",te);try{const V=i();if(V){const{data:{user:B}}=await ne.auth.getUser();B&&await dt.removeUserFromVoiceChannel(String(V),B.id)}d(null)}catch(V){console.error("[VoiceChannel] Cleanup error:",V)}throw te}finally{j.current=!1}},[l,b,d,F,U]),de=_.useCallback(async()=>{const z=i();if(!z){console.log("[VoiceChannel] No active voice channel to leave");return}const Z=F(z);if(!Z){console.error("[VoiceChannel] Invalid channel ID during leave, forcing cleanup"),d(null);return}console.log("[VoiceChannel]  Leaving channel:",Z),O.current&&(clearTimeout(O.current),O.current=null);try{const{data:{user:te},error:V}=await ne.auth.getUser();if(te&&!V)try{console.log("[VoiceChannel] Calling Voice Channel Manager for leave operation");const B="https://ukxddlrmmvpegamjvbfm.supabase.co",q="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVreGRkbHJtbXZwZWdhbWp2YmZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NjgyOTgsImV4cCI6MjA3NzM0NDI5OH0.Pjj3SY7hzob68WLr2k6J6gdPZOCGKN1ixjJsNHRbwGg";if((await fetch(`${B}/functions/v1/voice-channel-manager`,{method:"POST",headers:{Authorization:`Bearer ${q}`,apikey:q,"Content-Type":"application/json"},body:JSON.stringify({action:"leave_channel",channelId:Z,userId:te.id})})).ok)console.log("[VoiceChannel]  User left via Voice Channel Manager");else throw console.warn("[VoiceChannel] Voice Channel Manager failed for leave, using fallback"),new Error("Voice Channel Manager leave failed")}catch(B){console.warn("[VoiceChannel] Voice Channel Manager error:",B);try{await dt.removeUserFromVoiceChannel(String(Z),te.id),console.log("[VoiceChannel]  User removed from database via fallback")}catch(q){console.error("[VoiceChannel] Fallback removal also failed:",q)}}try{const B=new Promise((me,he)=>setTimeout(()=>he(new Error("Leave room timeout")),5e3)),q=k();await Promise.race([q,B]),console.log("[VoiceChannel]  Left realtime room successfully")}catch(B){console.error("[VoiceChannel] Failed to leave realtime room:",B)}try{const B=r(),q=[];B.forEach((me,he)=>{console.log(`[VoiceChannel] Cleaning up peer connection with user: ${he}`);try{me.peer&&typeof me.peer.close=="function"&&me.peer.close()}catch(xe){console.error(`[VoiceChannel] Error closing peer connection for user ${he}:`,xe)}q.push(Promise.resolve().then(()=>{try{a(he),x(he)}catch(xe){console.error(`[VoiceChannel] Error removing peer state for user ${he}:`,xe)}}))}),await Promise.allSettled(q),console.log(`[VoiceChannel]  Cleaned up ${B.size} peer connections`)}catch(B){console.error("[VoiceChannel] Error during peer cleanup:",B);try{r().forEach((me,he)=>{try{a(he),x(he)}catch(xe){console.error(`[VoiceChannel] Force cleanup error for user ${he}:`,xe)}})}catch(q){console.error("[VoiceChannel] Force peer cleanup failed:",q)}}try{const B=o();B&&(dt.stopStream(B),console.log("[VoiceChannel]  Local stream stopped"))}catch(B){console.error("[VoiceChannel] Error stopping local stream:",B)}finally{l(null)}try{await dt.cleanupAudioContext(),console.log("[VoiceChannel]  Audio context cleaned up")}catch(B){console.warn("[VoiceChannel] Error cleaning up audio context:",B)}I.current={channelId:null,timestamp:0},d(null),console.log("[VoiceChannel]  Successfully left voice channel:",Z)}catch(te){const V=te instanceof Error?te.message:"Unknown error";console.error("[VoiceChannel]  Error during leave process:",V);try{d(null),l(null),I.current={channelId:null,timestamp:0},r().forEach((q,me)=>{try{a(me),x(me)}catch(he){console.error(`[VoiceChannel] Force cleanup error for user ${me}:`,he)}})}catch(B){console.error("[VoiceChannel] Force cleanup failed:",B)}}},[i,k,r,a,x,o,l,d,F]),ke=_.useCallback(async(z,Z,te)=>{const V=Math.random().toString(36).substr(2,9);console.log(`[VoiceChannel]  Creating peer connection [${V}] with:`,z,"initiator:",Z);try{const B=te||o();if(!B)throw new Error("No local stream available");if(B.getTracks().length===0)throw new Error("Local stream has no tracks");if(B.getAudioTracks().length===0){console.warn("[VoiceChannel]  No audio tracks in local stream, attempting to fix...");const pe=await dt.getUserMediaWithFallback();if(pe&&pe.getAudioTracks().length>0)l(pe),console.log("[VoiceChannel]  Successfully reacquired audio stream");else throw new Error("Failed to acquire audio tracks")}const{data:{user:he},error:xe}=await ne.auth.getUser();if(xe||!he)throw new Error(`Authentication required: ${(xe==null?void 0:xe.message)||"No user found"}`);const $=i(),W=F($);if(!W)throw new Error("Voice channel not active or invalid channel ID");if(r().has(z)){console.log(`[VoiceChannel] Peer connection already exists for user ${z}, cleaning up first`);try{a(z),x(z),await new Promise(pe=>setTimeout(pe,100))}catch(pe){console.error("[VoiceChannel] Failed to cleanup existing connection:",pe)}}const ye=await dt.createPeerConnection({initiator:Z,stream:B,userId:z,connectionTimeout:45e3,onSignal:async pe=>{console.log(`[VoiceChannel]  Sending ${pe.type} signal [${V}] to:`,z);try{const T=pe.type==="offer"?"offer":pe.type==="answer"?"answer":"ice-candidate";if(!await U(W,pe,T))throw new Error("Signal sending failed after retries")}catch(T){const N=T instanceof Error?T.message:"Unknown signal error";console.error(`[VoiceChannel]  Failed to send ${pe.type} signal [${V}]:`,N),console.log("[VoiceChannel]  Signal failure will be handled by connection timeout")}},onStream:pe=>{var T;if(console.log(`[VoiceChannel]  RECEIVED REMOTE STREAM [${V}] - CRITICAL EVENT `),console.log("[VoiceChannel] Stream received from:",z,"stream ID:",pe.id),!pe||pe.getTracks().length===0){console.error("[VoiceChannel]  Invalid remote stream received from:",z),console.error("[VoiceChannel] Stream validation details:",{streamExists:!!pe,streamType:typeof pe,streamId:pe==null?void 0:pe.id,tracksLength:((T=pe==null?void 0:pe.getTracks())==null?void 0:T.length)||0,streamActive:pe==null?void 0:pe.active});return}if(pe.getAudioTracks().forEach(N=>{try{N.enabled=!0,console.log(`[VoiceChannel]  Audio track enabled for user ${z}:`,N.id)}catch(ee){console.error("[VoiceChannel] Failed to enable audio track:",ee)}}),console.log(`[VoiceChannel]  Adding remote stream [${V}] for user:`,z),D)try{D(z,pe),console.log(`[VoiceChannel]  onStream callback completed [${V}] for user:`,z)}catch(N){console.error(`[VoiceChannel]  Error in onStream callback [${V}] for user:`,z,N),console.log(`[VoiceChannel]  Falling back to addRemoteStream [${V}]...`),h(z,pe)}else console.log(`[VoiceChannel]  onStream callback not available [${V}], using addRemoteStream fallback`),h(z,pe)},onClose:()=>{console.log(`[VoiceChannel] Peer connection closed [${V}]:`,z);try{a(z),x(z)}catch(pe){console.error(`[VoiceChannel] Error during peer cleanup [${V}]:`,pe)}},onError:pe=>{const T=pe instanceof Error?pe.message:"Unknown peer error";console.error(`[VoiceChannel] Peer error [${V}] for user ${z}:`,T);try{a(z),x(z)}catch(N){console.error(`[VoiceChannel] Error during peer error cleanup [${V}]:`,N)}(Z&&T.includes("ICE")||T.includes("timeout"))&&(console.log("[VoiceChannel]  Connection failed, will retry..."),setTimeout(()=>{try{const N=o();N&&N.getTracks().length>0&&ke(z,!0,N)}catch(N){console.error("[VoiceChannel] Retry failed:",N)}},2e3))}});try{t(z,{peer:ye,userId:z,type:"voice"}),console.log(`[VoiceChannel]  Peer connection added [${V}] for user:`,z)}catch(pe){console.error(`[VoiceChannel] Failed to add peer connection [${V}]:`,pe);try{ye&&typeof ye.close=="function"&&ye.close()}catch(T){console.error(`[VoiceChannel] Failed to close peer after add error [${V}]:`,T)}throw pe}try{const pe=C(z);pe.length>0&&(console.log(`[VoiceChannel] Processing ${pe.length} buffered ICE candidates [${V}]`),await dt.processBufferedIceCandidates(ye,pe),A(z))}catch(pe){console.error(`[VoiceChannel] Failed to process ICE candidates [${V}]:`,pe)}return console.log(`[VoiceChannel]  Peer connection created successfully [${V}]`),ye}catch(B){const q=B instanceof Error?B.message:"Unknown error";console.error(`[VoiceChannel]  Failed to create peer connection [${V}] with user ${z}:`,q);try{a(z),x(z)}catch(me){console.error(`[VoiceChannel] Cleanup error after connection failure [${V}]:`,me)}throw new Error(`Peer connection creation failed: ${q}`)}},[o,i,F,U,h,a,x,t,C,A,D,l]),Ne=_.useCallback(async z=>{var Z;console.log("[VoiceChannel] Received signal from:",z.from,"type:",z.type);try{const te=i();if(!F(te)){console.warn("[VoiceChannel] Received signal but no active voice channel");return}let q=r().get(z.from);if(z.type==="media:toggle"&&((Z=z.signal)==null?void 0:Z.type)==="media-toggle"){const me=z.signal,he=me.mediaType,xe=me.enabled;let $;typeof xe=="boolean"?$=xe:typeof xe=="string"?$=xe.toLowerCase()==="true"||xe==="1":typeof xe=="number"?$=xe!==0:$=!1,console.log("[VoiceChannel] Media toggle received:",{from:z.from,mediaType:he||"unknown",enabled:$,state:$?"enabled":"disabled"});return}if(z.type==="offer")if(q)q.peer.signal(z.signal);else{const me=await ke(z.from,!1);me&&me.signal(z.signal)}else if(z.type==="answer")q?q.peer.signal(z.signal):S(z.from,z.signal);else if(z.type==="ice-candidate")if(q)try{q.peer.signal(z.signal)}catch(me){console.error("[VoiceChannel] Failed to process ICE candidate:",me)}else S(z.from,z.signal)}catch(te){console.error("[VoiceChannel] Error handling signal:",te)}},[r,ke,S,F,i]),ze=_.useCallback(async z=>{console.log("[VoiceChannel] User joined:",z.userId);const{data:Z}=await ne.auth.getUser();if(Z.user&&Z.user.id!==z.userId){const te=o();te&&await ke(z.userId,!0,te)}},[o,ke]),fe=_.useCallback(z=>{console.log("[VoiceChannel] User left:",z.userId),a(z.userId),x(z.userId)},[a,x]),H=_.useCallback(async()=>{const z=!u(),Z=o();if(!Z||Z.getTracks().length===0)return console.error("[VoiceChannel] No local stream for mic toggle"),z;console.log(`[VoiceChannel] Toggling microphone: ${z?"ON":"OFF"}`),dt.toggleAudio(Z,z);const te=i(),V=F(te);if(!V)return console.warn("[VoiceChannel] No valid channel for mic toggle signal"),z;const{data:{user:B},error:q}=await ne.auth.getUser();if(q||!B)return console.error("[VoiceChannel] Authentication error for mic toggle:",q),z;try{try{const $="https://ukxddlrmmvpegamjvbfm.supabase.co",W="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVreGRkbHJtbXZwZWdhbWp2YmZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NjgyOTgsImV4cCI6MjA3NzM0NDI5OH0.Pjj3SY7hzob68WLr2k6J6gdPZOCGKN1ixjJsNHRbwGg";if((await fetch(`${$}/functions/v1/voice-channel-manager`,{method:"POST",headers:{Authorization:`Bearer ${W}`,apikey:W,"Content-Type":"application/json"},body:JSON.stringify({action:"update_media_state",channelId:V,userId:B.id,micEnabled:z})})).ok)return console.log("[VoiceChannel]  Media state updated via Voice Channel Manager"),z}catch($){console.warn("[VoiceChannel] Voice Channel Manager media update failed:",$)}const{data:me,error:he}=await ne.from("voice_channel_users").select("user_id").eq("channel_id",String(V)).eq("is_active",!0).neq("user_id",B.id);if(he||!me||me.length===0)return z;const xe={type:"media-toggle",mediaType:"mic",enabled:z,fromUserId:B.id,timestamp:new Date().toISOString(),channelId:V};for(const $ of me)try{await U(V,xe,"media:toggle")}catch(W){console.error("[VoiceChannel] Failed to send mic toggle signal:",W)}}catch(me){console.error("[VoiceChannel] Error sending mic toggle signal:",me)}return z},[u,o,i,F,U]),J=_.useCallback(async z=>{console.log("[VoiceChannel]  Handling user disconnection:",z);try{const Z=i(),te=F(Z);if(te)try{console.log("[VoiceChannel] Calling Voice Channel Manager for user removal during disconnection");const V="https://ukxddlrmmvpegamjvbfm.supabase.co",B="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVreGRkbHJtbXZwZWdhbWp2YmZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3NjgyOTgsImV4cCI6MjA3NzM0NDI5OH0.Pjj3SY7hzob68WLr2k6J6gdPZOCGKN1ixjJsNHRbwGg";if((await fetch(`${V}/functions/v1/voice-channel-manager`,{method:"POST",headers:{Authorization:`Bearer ${B}`,apikey:B,"Content-Type":"application/json"},body:JSON.stringify({action:"leave_channel",channelId:te,userId:z})})).ok)console.log("[VoiceChannel]  User removed via Voice Channel Manager during disconnection");else throw console.warn("[VoiceChannel] Voice Channel Manager failed for disconnection removal, using fallback"),new Error("Voice Channel Manager disconnection removal failed")}catch(V){console.warn("[VoiceChannel] Voice Channel Manager error during disconnection:",V);try{const{error:B}=await ne.from("voice_channel_users").delete().eq("user_id",z).eq("channel_id",String(te));B?console.error("[VoiceChannel] Error removing disconnected user from database:",B):console.log("[VoiceChannel]  User removed from database after disconnection via fallback")}catch(B){console.error("[VoiceChannel] Fallback removal also failed during disconnection:",B)}}else console.log("[VoiceChannel] No active channel for user removal during disconnection")}catch(Z){console.error("[VoiceChannel] Error getting channel info for user removal:",Z)}try{a(z),x(z),console.log("[VoiceChannel]  Cleaned up peer connection and remote stream for disconnected user")}catch(Z){console.error("[VoiceChannel] Error cleaning up after user disconnection:",Z)}},[i,F,a,x]),re=_.useCallback(async()=>{console.log("[VoiceChannel]  Triggering comprehensive manual cleanup");try{O.current&&(clearTimeout(O.current),O.current=null);const z=i(),Z=o(),te=r();if(console.log("[VoiceChannel] Cleanup state:",{hasChannel:!!z,hasStream:!!Z,peerCount:te.size}),te.size>0&&(console.log(`[VoiceChannel] Cleaning up ${te.size} peer connections`),te.forEach((V,B)=>{try{V.peer&&typeof V.peer.close=="function"&&V.peer.close(),a(B),x(B)}catch(q){console.error(`[VoiceChannel] Error cleaning up peer ${B}:`,q)}})),Z)try{dt.stopStream(Z),l(null),console.log("[VoiceChannel]  Local stream stopped and cleared")}catch(V){console.error("[VoiceChannel] Error stopping local stream during cleanup:",V),l(null)}if(z){try{await k()}catch(V){console.error("[VoiceChannel] Error leaving room during cleanup:",V)}d(null),console.log("[VoiceChannel]  Voice channel cleared")}try{await dt.cleanupAudioContext(),console.log("[VoiceChannel]  Audio context cleaned up during manual cleanup")}catch(V){console.warn("[VoiceChannel] Error cleaning up audio context during manual cleanup:",V)}I.current={channelId:null,timestamp:0},console.log("[VoiceChannel]  Manual cleanup completed successfully")}catch(z){const Z=z instanceof Error?z.message:"Unknown error";console.error("[VoiceChannel]  Manual cleanup failed:",Z);try{d(null),l(null),I.current={channelId:null,timestamp:0},r().forEach((V,B)=>{try{a(B),x(B)}catch(q){console.error(`[VoiceChannel] Force cleanup error for user ${B}:`,q)}}),console.log("[VoiceChannel]  Force cleanup completed")}catch(te){console.error("[VoiceChannel] Force cleanup also failed:",te)}}},[i,o,r,a,x,l,d,k]);return _.useEffect(()=>(E("ReceiveVoiceChannelSignal",Ne),E("UserJoinedVoiceChannel",ze),E("UserLeftVoiceChannel",fe),()=>{console.log("[VoiceChannel]  Component unmounting, cleaning up..."),w("ReceiveVoiceChannelSignal",Ne),w("UserJoinedVoiceChannel",ze),w("UserLeftVoiceChannel",fe),O.current&&(clearTimeout(O.current),O.current=null);try{re()}catch(z){console.error("[VoiceChannel] Cleanup during unmount failed:",z);try{d(null),l(null),I.current={channelId:null,timestamp:0}}catch(Z){console.error("[VoiceChannel] Force state cleanup failed:",Z)}}}),[E,w,Ne,ze,fe,re,d,l,k]),{joinVoiceChannel:ce,leaveVoiceChannel:de,toggleMic:H,handleUserDisconnected:J,handleVoiceChannelSignal:Ne,handleUserJoined:ze,handleUserLeft:fe,triggerCleanup:re,createPeerConnectionWithRealtimeSignaling:ke,sendVoiceChannelSignalWithValidation:U,validateAndCacheChannelId:F,createPeerConnection:ke,getState:()=>({isJoining:j.current,currentChannelId:i(),validationCache:I.current,peerCount:r().size,hasLocalStream:!!o()})}};function Yb({channelId:r,channelName:t}){const{user:a}=Tt(),{joinVoiceChannel:o,leaveVoiceChannel:l,toggleMic:i}=Jb(),{getCallActive:d,getMicEnabled:u}=Kn(),[h,x]=_.useState(!1),[C,S]=_.useState(!1),[A,D]=_.useState(!0),y=d(),E=async()=>{try{if(!r||isNaN(r)||r<=0){console.error("Invalid channel ID for joining:",r);return}await o(r)}catch(O){console.error("Failed to join channel:",O)}},w=async()=>{try{await l()}catch(O){console.error("Failed to leave channel:",O)}},b=async()=>{try{await i()}catch(O){console.error("Failed to toggle mic:",O)}},k=()=>{x(!h)},j=()=>{S(!C)},I=()=>{D(!A)};return a?m.jsxs("div",{className:"voice-new-layout flex flex-col bg-gray-900 text-white min-h-0","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:74:4","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"74","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-new-layout%20flex%20flex-col%20bg-gray-900%20text-white%20min-h-0%22%7D",children:[m.jsx("div",{className:"voice-top-empty flex-shrink-0 min-h-[100px] lg:min-h-[150px]","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:77:6","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"77","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-top-empty%20flex-shrink-0%20min-h-%5B100px%5D%20lg%3Amin-h-%5B150px%5D%22%7D"}),m.jsx("div",{className:"flex-1 flex flex-col min-h-0","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:80:6","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"80","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20flex-col%20min-h-0%22%7D",children:y?m.jsx("div",{className:"voice-controls-center flex-1 flex items-center justify-center","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:94:10","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"94","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-controls-center%20flex-1%20flex%20items-center%20justify-center%22%7D",children:m.jsxs("div",{className:"voice-control-buttons-center flex items-center justify-center gap-4 sm:gap-6","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:95:12","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"95","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-control-buttons-center%20flex%20items-center%20justify-center%20gap-4%20sm%3Agap-6%22%7D",children:[m.jsx("button",{onClick:k,className:`voice-button ${h?"active":"inactive"}`,style:{width:"48px",height:"48px"},"aria-label":h?"Yayn kapat":"Yayn a","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:98:14","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"98","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%7D%7D",children:h?m.jsx(Ky,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:108:18","data-matrix-name":"Radio","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"108","data-component-file":"VoiceChannelView.tsx","data-component-name":"Radio","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(Uy,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:110:18","data-matrix-name":"Headphones","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"110","data-component-file":"VoiceChannelView.tsx","data-component-name":"Headphones","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:j,className:`voice-button ${C?"active":"inactive"}`,style:{width:"48px",height:"48px"},"aria-label":C?"Kameray kapat":"Kameray a","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:115:14","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"115","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%7D%7D",children:C?m.jsx(of,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:125:18","data-matrix-name":"VideoOff","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"125","data-component-file":"VoiceChannelView.tsx","data-component-name":"VideoOff","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(un,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:127:18","data-matrix-name":"Video","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"127","data-component-file":"VoiceChannelView.tsx","data-component-name":"Video","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:b,className:`voice-button ${u()?"active":"inactive"}`,style:{width:"48px",height:"48px"},"aria-label":u()?"Mikrofonu kapat":"Mikrofonu a","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:132:14","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"132","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%7D%7D",children:u()?m.jsx(Xh,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:142:18","data-matrix-name":"Mic","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"142","data-component-file":"VoiceChannelView.tsx","data-component-name":"Mic","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(Qh,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:144:18","data-matrix-name":"MicOff","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"144","data-component-file":"VoiceChannelView.tsx","data-component-name":"MicOff","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})}),m.jsx("button",{onClick:I,className:`voice-button ${A?"active":"inactive"}`,style:{width:"48px",height:"48px"},"aria-label":A?"Kulakl kapat":"Kulakl a","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:149:14","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"149","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22width%22%3A%2248px%22%2C%22height%22%3A%2248px%22%7D%7D",children:A?m.jsx(Vr,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:159:18","data-matrix-name":"Volume2","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"159","data-component-file":"VoiceChannelView.tsx","data-component-name":"Volume2","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"}):m.jsx(rf,{size:20,color:"#ffffff","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:161:18","data-matrix-name":"VolumeX","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"161","data-component-file":"VoiceChannelView.tsx","data-component-name":"VolumeX","data-component-content":"%7B%22size%22%3A20%2C%22color%22%3A%22%23ffffff%22%7D"})})]})}):m.jsx("div",{className:"voice-controls-center flex-1 flex items-center justify-center","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:84:10","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"84","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-controls-center%20flex-1%20flex%20items-center%20justify-center%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:85:12","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"85","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 text-gray-500","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:86:14","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"86","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20sm%3Aw-20%20sm%3Ah-20%20mx-auto%20mb-4%20text-gray-500%22%7D",children:m.jsx(bn,{className:"w-full h-full","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:87:16","data-matrix-name":"Phone","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"87","data-component-file":"VoiceChannelView.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%22%7D"})}),m.jsx("p",{className:"text-gray-400 text-lg","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:89:14","data-matrix-name":"p","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"89","data-component-file":"VoiceChannelView.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20text-lg%22%7D",children:"Sesli sohbete katlmak iin tklayn"})]})})}),m.jsx("div",{className:"voice-bottom-controls flex-shrink-0 p-4 sm:p-6","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:170:6","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"170","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22voice-bottom-controls%20flex-shrink-0%20p-4%20sm%3Ap-6%22%7D",children:y?m.jsxs("button",{onClick:w,className:"w-full px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 transform hover:scale-105","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:180:10","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"180","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20px-6%20py-3%20bg-red-600%20hover%3Abg-red-700%20text-white%20font-semibold%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%20transform%20hover%3Ascale-105%22%7D",children:[m.jsx(ef,{className:"w-5 h-5","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:184:12","data-matrix-name":"PhoneOff","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"184","data-component-file":"VoiceChannelView.tsx","data-component-name":"PhoneOff","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Sesli Sohbetten Ayrl"]}):m.jsxs("button",{onClick:E,className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 transform hover:scale-105","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:172:10","data-matrix-name":"button","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"172","data-component-file":"VoiceChannelView.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20px-6%20py-3%20bg-green-600%20hover%3Abg-green-700%20text-white%20font-semibold%20rounded-lg%20transition-colors%20flex%20items-center%20justify-center%20gap-2%20transform%20hover%3Ascale-105%22%7D",children:[m.jsx(bn,{className:"w-5 h-5","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:176:12","data-matrix-name":"Phone","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"176","data-component-file":"VoiceChannelView.tsx","data-component-name":"Phone","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Sesli Sohbete Katl"]})})]}):m.jsx("div",{className:"flex items-center justify-center h-full","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:67:6","data-matrix-name":"div","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"67","data-component-file":"VoiceChannelView.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20h-full%22%7D",children:m.jsx("p",{className:"text-gray-500","data-matrix-id":"src/components/voice/VoiceChannelView.tsx:68:8","data-matrix-name":"p","data-component-path":"src/components/voice/VoiceChannelView.tsx","data-component-line":"68","data-component-file":"VoiceChannelView.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-500%22%7D",children:"Kullanc oturumu gerekli"})})}function Qb(){const{inviteCode:r}=V0(),t=Kp(),{user:a}=Tt(),[o,l]=_.useState(!0),[i,d]=_.useState(!1),[u,h]=_.useState(null),[x,C]=_.useState(null),[S,A]=_.useState(null),[D,y]=_.useState(!1);_.useEffect(()=>{if(!a){t("/");return}r&&E()},[r,a]);async function E(){l(!0),h(null);const{data:b,error:k}=await ne.from("server_invites").select("*").eq("invite_code",r).eq("is_active",!0).maybeSingle();if(k||!b){h("Geersiz veya sresi dolmu davet kodu"),l(!1);return}if(b.expires_at&&new Date(b.expires_at)<new Date){h("Bu davet kodunun sresi dolmu"),l(!1);return}if(b.max_uses&&b.uses>=b.max_uses){h("Bu davet kodu kullanm limitine ulam"),l(!1);return}A(b);const{data:j,error:I}=await ne.from("servers").select("*").eq("id",b.server_id).maybeSingle();if(I||!j){h("Sunucu bilgisi yklenemedi"),l(!1);return}if(C(j),a){const{data:O}=await ne.from("server_users").select("id").eq("server_id",j.id).eq("user_id",a.id).maybeSingle();O&&y(!0)}l(!1)}async function w(){if(!a||!x||!S)return;d(!0),h(null);const{error:b}=await ne.from("server_users").insert({server_id:x.id,user_id:a.id});if(b)if(b.code==="23505")y(!0);else{h("Sunucuya katlrken hata olutu"),d(!1);return}await ne.from("server_invites").update({uses:S.uses+1}).eq("id",S.id),d(!1),setTimeout(()=>{t("/")},2e3)}return a?o?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center","data-matrix-id":"src/pages/JoinServerPage.tsx:140:6","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"140","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-black%20flex%20items-center%20justify-center%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/pages/JoinServerPage.tsx:141:8","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"141","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4","data-matrix-id":"src/pages/JoinServerPage.tsx:142:10","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"142","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20border-4%20border-blue-500%20border-t-transparent%20rounded-full%20animate-spin%20mx-auto%20mb-4%22%7D"}),m.jsx("p",{className:"text-white","data-matrix-id":"src/pages/JoinServerPage.tsx:143:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"143","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:"Davet bilgisi ykleniyor..."})]})}):u?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4","data-matrix-id":"src/pages/JoinServerPage.tsx:151:6","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"151","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-black%20flex%20items-center%20justify-center%20p-4%22%7D",children:m.jsxs("div",{className:"bg-neutral-900 rounded-lg p-8 max-w-md w-full text-center","data-matrix-id":"src/pages/JoinServerPage.tsx:152:8","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"152","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-900%20rounded-lg%20p-8%20max-w-md%20w-full%20text-center%22%7D",children:[m.jsx(Iy,{className:"w-16 h-16 text-red-500 mx-auto mb-4","data-matrix-id":"src/pages/JoinServerPage.tsx:153:10","data-matrix-name":"AlertCircle","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"153","data-component-file":"JoinServerPage.tsx","data-component-name":"AlertCircle","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-red-500%20mx-auto%20mb-4%22%7D"}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-2","data-matrix-id":"src/pages/JoinServerPage.tsx:154:10","data-matrix-name":"h2","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"154","data-component-file":"JoinServerPage.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%20mb-2%22%7D",children:"Hata"}),m.jsx("p",{className:"text-neutral-400 mb-6","data-matrix-id":"src/pages/JoinServerPage.tsx:155:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"155","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-400%20mb-6%22%7D",children:u}),m.jsx("button",{onClick:()=>t("/"),className:"w-full py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition-colors","data-matrix-id":"src/pages/JoinServerPage.tsx:156:10","data-matrix-name":"button","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"156","data-component-file":"JoinServerPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-neutral-800%20hover%3Abg-neutral-700%20text-white%20rounded-lg%20transition-colors%22%7D",children:"Ana Sayfaya Dn"})]})}):D?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4","data-matrix-id":"src/pages/JoinServerPage.tsx:169:6","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"169","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-black%20flex%20items-center%20justify-center%20p-4%22%7D",children:m.jsxs("div",{className:"bg-neutral-900 rounded-lg p-8 max-w-md w-full text-center","data-matrix-id":"src/pages/JoinServerPage.tsx:170:8","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"170","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-900%20rounded-lg%20p-8%20max-w-md%20w-full%20text-center%22%7D",children:[m.jsx(ji,{className:"w-16 h-16 text-green-500 mx-auto mb-4","data-matrix-id":"src/pages/JoinServerPage.tsx:171:10","data-matrix-name":"Check","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"171","data-component-file":"JoinServerPage.tsx","data-component-name":"Check","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-green-500%20mx-auto%20mb-4%22%7D"}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-2","data-matrix-id":"src/pages/JoinServerPage.tsx:172:10","data-matrix-name":"h2","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"172","data-component-file":"JoinServerPage.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%20mb-2%22%7D",children:"Zaten yesiniz"}),m.jsxs("p",{className:"text-neutral-400 mb-2","data-matrix-id":"src/pages/JoinServerPage.tsx:173:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"173","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-400%20mb-2%22%7D",children:[m.jsx("strong",{className:"text-white","data-matrix-id":"src/pages/JoinServerPage.tsx:174:12","data-matrix-name":"strong","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"174","data-component-file":"JoinServerPage.tsx","data-component-name":"strong","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:x==null?void 0:x.name})," sunucusunun zaten bir yesisiniz"]}),m.jsx("p",{className:"text-neutral-500 mb-6","data-matrix-id":"src/pages/JoinServerPage.tsx:176:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"176","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-500%20mb-6%22%7D",children:"Ana sayfaya ynlendiriliyorsunuz..."}),m.jsx("button",{onClick:()=>t("/"),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors","data-matrix-id":"src/pages/JoinServerPage.tsx:177:10","data-matrix-name":"button","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"177","data-component-file":"JoinServerPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-blue-600%20hover%3Abg-blue-700%20text-white%20rounded-lg%20transition-colors%22%7D",children:"Hemen Git"})]})}):m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4","data-matrix-id":"src/pages/JoinServerPage.tsx:189:4","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"189","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-black%20flex%20items-center%20justify-center%20p-4%22%7D",children:m.jsxs("div",{className:"bg-neutral-900 rounded-lg p-8 max-w-md w-full","data-matrix-id":"src/pages/JoinServerPage.tsx:190:6","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"190","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-900%20rounded-lg%20p-8%20max-w-md%20w-full%22%7D",children:[m.jsxs("div",{className:"text-center mb-6","data-matrix-id":"src/pages/JoinServerPage.tsx:191:8","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"191","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-6%22%7D",children:[x!=null&&x.server_image_url?m.jsx("img",{src:x.server_image_url,alt:x.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover","data-matrix-id":"src/pages/JoinServerPage.tsx:193:12","data-matrix-name":"img","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"193","data-component-file":"JoinServerPage.tsx","data-component-name":"img","data-component-content":"%7B%22src%22%3A%22%5BMemberExpression%5D%22%2C%22alt%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22w-24%20h-24%20rounded-full%20mx-auto%20mb-4%20object-cover%22%7D"}):m.jsx("div",{className:"w-24 h-24 bg-blue-600 rounded-full mx-auto mb-4 flex items-center justify-center","data-matrix-id":"src/pages/JoinServerPage.tsx:199:12","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"199","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-blue-600%20rounded-full%20mx-auto%20mb-4%20flex%20items-center%20justify-center%22%7D",children:m.jsx(Cd,{className:"w-12 h-12 text-white","data-matrix-id":"src/pages/JoinServerPage.tsx:200:14","data-matrix-name":"Server","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"200","data-component-file":"JoinServerPage.tsx","data-component-name":"Server","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-white%22%7D"})}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-2","data-matrix-id":"src/pages/JoinServerPage.tsx:203:10","data-matrix-name":"h2","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"203","data-component-file":"JoinServerPage.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%20mb-2%22%7D",children:"Sunucuya Katl"}),m.jsx("p",{className:"text-xl text-white font-semibold mb-1","data-matrix-id":"src/pages/JoinServerPage.tsx:204:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"204","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xl%20text-white%20font-semibold%20mb-1%22%7D",children:x==null?void 0:x.name}),m.jsxs("p",{className:"text-sm text-neutral-400","data-matrix-id":"src/pages/JoinServerPage.tsx:205:10","data-matrix-name":"p","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"205","data-component-file":"JoinServerPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-neutral-400%22%7D",children:[r," davet kodu ile davet edildiniz"]})]}),m.jsxs("div",{className:"bg-neutral-800 rounded-lg p-4 mb-6","data-matrix-id":"src/pages/JoinServerPage.tsx:210:8","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"210","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-800%20rounded-lg%20p-4%20mb-6%22%7D",children:[m.jsxs("div",{className:"flex justify-between items-center text-sm","data-matrix-id":"src/pages/JoinServerPage.tsx:211:10","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"211","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-between%20items-center%20text-sm%22%7D",children:[m.jsx("span",{className:"text-neutral-400","data-matrix-id":"src/pages/JoinServerPage.tsx:212:12","data-matrix-name":"span","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"212","data-component-file":"JoinServerPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-neutral-400%22%7D",children:"Kullanmlar:"}),m.jsxs("span",{className:"text-white","data-matrix-id":"src/pages/JoinServerPage.tsx:213:12","data-matrix-name":"span","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"213","data-component-file":"JoinServerPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:[S==null?void 0:S.uses," / ",(S==null?void 0:S.max_uses)||""]})]}),(S==null?void 0:S.expires_at)&&m.jsxs("div",{className:"flex justify-between items-center text-sm mt-2","data-matrix-id":"src/pages/JoinServerPage.tsx:218:12","data-matrix-name":"div","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"218","data-component-file":"JoinServerPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-between%20items-center%20text-sm%20mt-2%22%7D",children:[m.jsx("span",{className:"text-neutral-400","data-matrix-id":"src/pages/JoinServerPage.tsx:219:14","data-matrix-name":"span","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"219","data-component-file":"JoinServerPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-neutral-400%22%7D",children:"Son Kullanma:"}),m.jsx("span",{className:"text-white","data-matrix-id":"src/pages/JoinServerPage.tsx:220:14","data-matrix-name":"span","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"220","data-component-file":"JoinServerPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-white%22%7D",children:new Date(S.expires_at).toLocaleDateString("tr-TR")})]})]}),m.jsx("button",{onClick:w,disabled:i,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white font-semibold rounded-lg transition-colors mb-3","data-matrix-id":"src/pages/JoinServerPage.tsx:227:8","data-matrix-name":"button","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"227","data-component-file":"JoinServerPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-blue-600%20hover%3Abg-blue-700%20disabled%3Abg-blue-800%20disabled%3Acursor-not-allowed%20text-white%20font-semibold%20rounded-lg%20transition-colors%20mb-3%22%7D",children:i?"Katlnyor...":"Sunucuya Katl"}),m.jsx("button",{onClick:()=>t("/"),className:"w-full py-3 bg-neutral-800 hover:bg-neutral-700 text-white rounded-lg transition-colors","data-matrix-id":"src/pages/JoinServerPage.tsx:235:8","data-matrix-name":"button","data-component-path":"src/pages/JoinServerPage.tsx","data-component-line":"235","data-component-file":"JoinServerPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20py-3%20bg-neutral-800%20hover%3Abg-neutral-700%20text-white%20rounded-lg%20transition-colors%22%7D",children:"ptal"})]})}):null}const an=class an{static async requestMedia(t){try{console.log("[MediaPermission] Requesting media:",t);const a=await navigator.mediaDevices.getUserMedia(t);return t.audio&&(an.permissionState.audio="granted"),t.video&&(an.permissionState.video="granted"),console.log("[MediaPermission] Media access granted"),{stream:a,error:null}}catch(a){if(console.error("[MediaPermission] Media access failed:",a),a instanceof Error){if(a.name==="NotAllowedError"||a.name==="PermissionDeniedError")return t.audio&&(an.permissionState.audio="denied"),t.video&&(an.permissionState.video="denied"),{stream:null,error:"Medya eriim izni reddedildi. Ltfen tarayc ayarlarndan izin verin."};if(a.name==="NotFoundError"||a.name==="DevicesNotFoundError")return{stream:null,error:"Mikrofon veya kamera bulunamad. Ltfen cihaznz kontrol edin."};if(a.name==="NotReadableError"||a.name==="TrackStartError")return{stream:null,error:"Medya cihaz baka bir uygulama tarafndan kullanlyor."};if(a.name==="OverconstrainedError")return{stream:null,error:"stenen medya ayarlar desteklenmiyor."};if(a.name==="TypeError")return{stream:null,error:"Geersiz medya kstlamalar."}}return{stream:null,error:"Medya eriimi baarsz oldu. Ltfen tekrar deneyin."}}}static async requestDisplayMedia(){try{console.log("[MediaPermission] Requesting display media");const t=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});return an.permissionState.screen="granted",console.log("[MediaPermission] Display media access granted"),{stream:t,error:null}}catch(t){if(console.error("[MediaPermission] Display media access failed:",t),t instanceof Error){if(t.name==="NotAllowedError"||t.name==="PermissionDeniedError")return an.permissionState.screen="denied",{stream:null,error:"Ekran paylam izni reddedildi."};if(t.name==="AbortError")return{stream:null,error:"Ekran paylam iptal edildi."}}return{stream:null,error:"Ekran paylam baarsz oldu."}}}static async checkPermissions(){try{if(navigator.permissions){try{const t=await navigator.permissions.query({name:"microphone"});an.permissionState.audio=t.state}catch{}try{const t=await navigator.permissions.query({name:"camera"});an.permissionState.video=t.state}catch{}}}catch(t){console.warn("[MediaPermission] Permission check failed:",t)}return an.permissionState}static getPermissionState(){return{...an.permissionState}}static async hasMediaDevices(){try{const t=await navigator.mediaDevices.enumerateDevices();return{audio:t.some(a=>a.kind==="audioinput"),video:t.some(a=>a.kind==="videoinput")}}catch(t){return console.error("[MediaPermission] Failed to enumerate devices:",t),{audio:!1,video:!1}}}static resetPermissionState(){an.permissionState={audio:"unknown",video:"unknown",screen:"unknown"},console.log("[MediaPermission] Permission state reset")}};lt(an,"permissionState",{audio:"unknown",video:"unknown",screen:"unknown"});let Ei=an;const Ka=class Ka{constructor(){lt(this,"logs",[]);lt(this,"maxLogs",1e3);lt(this,"enabled",!0);console.log("[CallDebugger] Initialized")}static getInstance(){return Ka.instance||(Ka.instance=new Ka),Ka.instance}log(t,a,o){if(!this.enabled)return;const l={timestamp:Date.now(),category:t,message:a,data:o};this.logs.push(l),this.logs.length>this.maxLogs&&this.logs.shift();const i=this.getCategoryColor(t);console.log(`%c[${t}] ${a}`,`color: ${i}; font-weight: bold`,o||"")}getCategoryColor(t){return{CALL_FLOW:"#00ff00",STATE_CHANGE:"#ffff00",WEBRTC:"#00ffff",SIGNAL:"#ff00ff",DATABASE:"#ff9900",ERROR:"#ff0000",SUCCESS:"#00ff00",WARNING:"#ffaa00"}[t]||"#ffffff"}getCallFlowTimeline(){const t=this.logs.filter(l=>l.category==="CALL_FLOW"||l.category==="STATE_CHANGE"||l.category==="WEBRTC");let a=`
=== CALL FLOW TIMELINE ===
`;const o=t.length>0?t[0].timestamp:Date.now();return t.forEach(l=>{const i=((l.timestamp-o)/1e3).toFixed(2);a+=`[+${i}s] [${l.category}] ${l.message}
`,l.data&&(a+=`  Data: ${JSON.stringify(l.data,null,2)}
`)}),a}getStateHistory(){return this.logs.filter(t=>t.category==="STATE_CHANGE").map(t=>({time:new Date(t.timestamp).toISOString(),state:t.data}))}getErrorSummary(){const t=this.logs.filter(o=>o.category==="ERROR");if(t.length===0)return"No errors logged";let a=`
=== ERROR SUMMARY ===
`;return t.forEach((o,l)=>{a+=`${l+1}. ${o.message}
`,o.data&&(a+=`   Details: ${JSON.stringify(o.data)}
`)}),a}exportLogs(){return JSON.stringify(this.logs,null,2)}clear(){this.logs=[],console.log("[CallDebugger] Logs cleared")}setEnabled(t){this.enabled=t,console.log("[CallDebugger] Debugging",t?"enabled":"disabled")}checkStateConsistency(t){const a=[];return t.isCalling&&t.isReceiving&&a.push("CONFLICT: Both isCalling and isReceiving are true"),t.isInCall&&!t.callActive&&a.push("CONFLICT: isInCall true but callActive false"),t.callActive&&t.isCalling&&a.push("CONFLICT: callActive true but still isCalling (should transition)"),t.callActive&&t.isReceiving&&a.push("CONFLICT: callActive true but still isReceiving (should transition)"),{valid:a.length===0,issues:a}}};lt(Ka,"instance",null);let _d=Ka;const cn=_d.getInstance();typeof window<"u"&&(window.callDebugger=cn,window.getCallTimeline=()=>{console.log(cn.getCallFlowTimeline())},window.getCallErrors=()=>{console.log(cn.getErrorSummary())},window.exportCallLogs=()=>{console.log(cn.exportLogs())},console.log("%c[CallDebugger] Helper functions available:","color: cyan; font-weight: bold"),console.log("  - window.getCallTimeline() - View call flow timeline"),console.log("  - window.getCallErrors() - View error summary"),console.log("  - window.exportCallLogs() - Export all logs"),console.log("  - window.callDebugger - Direct access to debugger"));const Xb=()=>{const{getPeerConnections:r,addPeerConnection:t,removePeerConnection:a,getLocalStream:o,setLocalStream:l,getCallActive:i,setCallActive:d,getIsCalling:u,setIsCalling:h,getIsReceivingCall:x,setIsReceivingCall:C,getCallerId:S,setCallerId:A,getCallerName:D,setCallerName:y,getContactId:E,setContactId:w,getContactName:b,setContactName:k,addRemoteStream:j,removeRemoteStream:I,clearAllWebRTC:O,getIceBuffer:F,addIceCandidate:U,clearIceBuffer:ce}=Kn(),{addEventListener:de,removeEventListener:ke,sendSignal:Ne}=$r(),ze=_.useRef("voice"),fe=_.useRef(null),H=_.useRef(!1),J=_.useRef(!1),re=_.useRef(!1),z=_.useRef(new Map),Z=_.useRef(new Map),te=_.useRef(!1),V=_.useRef(null),B=_.useCallback(async(X,we,Me)=>{if(i()||u()){cn.log("WARNING","Already in call, ignoring startCall request"),console.log("[Call] Already in call");return}te.current=!1,V.current&&(clearTimeout(V.current),V.current=null);try{cn.log("CALL_FLOW","Starting outgoing call",{contactId:X,contactName:we,callType:Me}),console.log("[Call] Starting",Me,"call to:",X),await Ne(X,null,"call:outgoing",{callType:Me,requestType:"call:outgoing",fromUsername:"Me"}),h(!0),ze.current=Me,fe.current=X,J.current=!0,re.current=!1,cn.log("STATE_CHANGE","Call state updated",{isCalling:!0,isInitiator:!0,contactId:X,contactName:we}),w(X),k(we);let Ve=null;H.current=!1;const{stream:Pe,error:ot}=await Ei.requestMedia({audio:!0,video:Me==="video"});Pe?(Ve=Pe,Ve.getAudioTracks().forEach((Re,Te)=>{Re.enabled=!0,console.log(`[Call]  Local audio track ${Te} enabled at start:`,Re.id)}),l(Ve),console.log("[Call] Media access granted - microphone enabled"),H.current=!1):(console.warn("[Call] Media access denied:",ot),H.current=!0);const We=await dt.createPeerConnection({initiator:!0,stream:Ve||void 0,userId:X,onSignal:Re=>{console.log("[Call] Sending signal:",Re.type);const Te=Re.type==="offer"?"offer":"answer",qe=z.current.get(X)||new Set,nt=`${Te}-${JSON.stringify(Re)}`;if(qe.has(nt)){console.log("[Call]  Duplicate signal ignored:",Te);return}qe.add(nt),z.current.set(X,qe),Ne(X,Re,Te)},onStream:Re=>{if(console.log("[Call]  Received remote stream from:",X,"stream:",Re.id),console.log("[Call] Stream tracks:",{audioTracks:Re.getAudioTracks().length,videoTracks:Re.getVideoTracks().length,active:Re.active}),!Re||Re.getTracks().length===0){console.error("[Call]  Invalid remote stream received from:",X);return}Re.getAudioTracks().forEach((Te,qe)=>{Te.enabled=!0,console.log(`[Call]  Remote audio track ${qe} enabled:`,Te.id)}),j(X,Re),d(!0),h(!1),console.log("[Call]  Remote stream successfully added and call activated")},onClose:()=>{if(console.log("[Call] Peer connection closed"),te.current){console.log("[Call]  WebRTC hatas sonras peer connection kapand - popup ak kalyor"),te.current=!1;return}console.log("[Call] Normal connection close, ending call"),xe()},onError:Re=>{console.error("[Call] Peer error:",Re),te.current=!0,Re&&Re.toString().includes("not a valid stun or turn URL")?(console.log("[Call]  WebRTC yaplandrma hatas tespit edildi - popup ak kalyor"),setTimeout(()=>{console.log("[Call] WebRTC hata durumu sonras yeniden deerlendirme"),u()&&!te.current&&console.log("[Call] WebRTC hatas zld, normal balant devam ediyor")},2e3)):console.log("[Call] Ignoring peer error during call establishment - likely WebRTC state transition")}});t(X,{peer:We,userId:X,type:Me}),console.log("[Call] Call started (ringing)")}catch(Ve){throw console.error("[Call] Failed to start call:",Ve),h(!1),Ve}},[i,u,h,l,j,d,t,Ne]),q=_.useCallback(async()=>{const X=S(),we=ze.current;if(!X){console.error("[Call] No caller ID");return}try{console.log("[Call] Answering call from:",X,"type:",we),await Ne(X,null,"call:accept",{requestType:"call:accept",callType:ze.current}),C(!1),d(!0),ze.current=we,fe.current=X,J.current=!1,re.current=!1,cn.log("STATE_CHANGE","Answering call - state updated",{isReceivingCall:!1,isCallActive:!0,callerId:X,callType:we}),console.log("[Call]  State updated - Call is now active");let Me=null;const{stream:Ve,error:Pe}=await Ei.requestMedia({audio:!0,video:we==="video"});Ve?(Me=Ve,Me.getAudioTracks().forEach((Re,Te)=>{Re.enabled=!0,console.log(`[Call]  Local audio track ${Te} enabled at answer:`,Re.id)}),l(Me),console.log("[Call] Media access granted for answering - microphone enabled")):console.warn("[Call] Media access denied for answering:",Pe);const ot=await dt.createPeerConnection({initiator:!1,stream:Me||void 0,userId:X,onSignal:Re=>{console.log("[Call] Sending answer signal");const Te=z.current.get(X)||new Set,qe=`answer-${JSON.stringify(Re)}`;if(Te.has(qe)){console.log("[Call]  Duplicate answer signal ignored");return}Te.add(qe),z.current.set(X,Te),Ne(X,Re,"answer")},onStream:Re=>{if(console.log("[Call]  Received remote stream from:",X,"stream:",Re.id),console.log("[Call] Answer call - stream tracks:",{audioTracks:Re.getAudioTracks().length,videoTracks:Re.getVideoTracks().length,active:Re.active}),!Re||Re.getTracks().length===0){console.error("[Call]  Invalid remote stream received from:",X);return}Re.getAudioTracks().forEach((Te,qe)=>{Te.enabled=!0,console.log(`[Call]  Remote audio track ${qe} enabled:`,Te.id)}),j(X,Re),d(!0),console.log("[Call]  Answer call remote stream successfully added")},onClose:()=>{if(console.log("[Call] Peer connection closed"),te.current){console.log("[Call]  WebRTC hatas sonras peer connection kapand - popup ak kalyor"),te.current=!1;return}console.log("[Call] Normal connection close, ending call"),xe()},onError:Re=>{console.error("[Call] Peer error:",Re),te.current=!0,Re&&Re.toString().includes("not a valid stun or turn URL")?(console.log("[Call]  WebRTC yaplandrma hatas tespit edildi - popup ak kalyor"),setTimeout(()=>{console.log("[Call] WebRTC hata durumu sonras yeniden deerlendirme"),u()&&!te.current&&console.log("[Call] WebRTC hatas zld, normal balant devam ediyor")},2e3)):console.log("[Call] Ignoring peer error during call establishment - likely WebRTC state transition")}});t(X,{peer:ot,userId:X,type:we});const We=F(X);if(We.length>0){console.log("[Call] Processing",We.length,"buffered signals");const Re=We.find(Te=>Te.type==="offer");if(Re)try{console.log("[Call] Processing buffered offer signal"),ot.signal(Re),console.log("[Call]  Offer processed, SimplePeer will generate answer automatically")}catch(Te){console.error("[Call] Failed to process offer signal:",Te)}else console.warn("[Call] No offer signal found in buffer");ce(X)}A(null),y(null),console.log("[Call] Call answered (connected) - STATE CHANGED TO CONNECTED")}catch(Me){console.error("[Call] Failed to answer call:",Me),C(!1),d(!1),A(null),y(null)}},[S,C,l,j,d,t,Ne,F,ce,A,y]),me=_.useCallback(async()=>{const X=S();if(!X){console.log("[Call] No caller to reject");return}console.log("[Call] Rejecting call from:",X),await Ne(X,null,"call:reject",{requestType:"call:reject"}),C(!1),A(null),y(null)},[S,C,A,y,Ne]),he=_.useCallback(async()=>{const X=E();if(!X){console.log("[Call] No contact to cancel");return}console.log("[Call] Cancelling call to:",X),await Ne(X,null,"call:cancel",{requestType:"call:cancel"}),r().forEach((Ve,Pe)=>{a(Pe),I(Pe)});const Me=o();dt.stopStream(Me),l(null),h(!1),w(null),k(null),fe.current=null,J.current=!1},[E,Ne,r,a,I,o,l,h,w,k]),xe=_.useCallback(async()=>{console.log("[Call] Ending call");const X=fe.current;if(X)try{await Ne(X,null,"call:end",{requestType:"call:end"})}catch(Ve){console.error("[Call] Failed to send call:end signal:",Ve)}r().forEach((Ve,Pe)=>{a(Pe),I(Pe),z.current.delete(Pe)});const Me=o();dt.stopStream(Me),l(null),d(!1),h(!1),C(!1),A(null),y(null),w(null),k(null),fe.current=null,J.current=!1,re.current=!1},[Ne,r,a,I,o,l,d,h,C,A,y,w,k]),$=_.useCallback(X=>{var Ve,Pe,ot,We,Re;if(console.log("[Call] Received signal from:",X.from,"type:",X.type,"requestType:",X.requestType,"data:",X),X.type==="call:outgoing"||X.requestType==="call:outgoing"){console.log("[Call] Incoming call from:",X.from),C(!0),A(X.from),ze.current=X.callType||"voice",dt.getCallerProfile(X.from).then(Te=>{Te&&(y(Te.username),console.log("[Call] Set caller name:",Te.username))});return}if(X.type==="call:cancel"||X.requestType==="call:cancel"){cn.log("WARNING","Call cancelled by remote user",{from:X.from}),console.log("[Call]  Call was cancelled by:",X.from),C(!1),A(null),y(null);return}if(X.type==="call:reject"||X.requestType==="call:reject"){cn.log("WARNING","Call rejected by remote user",{from:X.from}),console.log("[Call]  Call was rejected by:",X.from),xe();return}if(X.type==="call:accept"||X.requestType==="call:accept"||X.requestType==="call-accepted"||X.type==="call-accepted"){cn.log("SUCCESS","Call accepted by remote user",{from:X.from}),console.log("[Call]  Call was accepted by:",X.from),h(!1),d(!0),console.log("[Call]  STOPPING CALL RINGING - Call accepted"),cn.log("STATE_CHANGE","Transitioned to active call",{isCalling:!1,isCallActive:!0,from:X.from}),console.log("[Call]  Arama durduruldu, ar baland");return}if(X.type==="call:end"||X.requestType==="call:end"){cn.log("INFO","Call ended by remote user",{from:X.from}),console.log("[Call] Call ended by remote user:",X.from),xe();return}if(X.type==="media:toggle"||X.requestType==="media:toggle"){console.log("[Call] Media toggle from remote:",X.mediaType,"enabled:",X.enabled);const Te=X.enabled!==void 0?typeof X.enabled=="boolean"?X.enabled:X.enabled==="true"||X.enabled===!0||X.enabled===1:!1;console.log("[Call] Parsed media toggle - type:",X.mediaType,"parsed enabled:",Te),(((Ve=Z.current)==null?void 0:Ve.get("MediaToggle"))||[]).forEach(nt=>{nt&&nt.callback&&nt.callback({userId:X.from,mediaType:X.mediaType,enabled:Te})});return}if(X.type==="screen:started"||X.requestType==="screen:started"){console.log("[Call] Screen sharing started by:",X.from),(((Pe=Z.current)==null?void 0:Pe.get("ScreenShareStarted"))||[]).forEach(qe=>qe.callback({userId:X.from}));return}if(X.type==="screen:stopped"||X.requestType==="screen:stopped"){console.log("[Call] Screen sharing stopped by:",X.from),(((ot=Z.current)==null?void 0:ot.get("ScreenShareStopped"))||[]).forEach(qe=>qe.callback({userId:X.from}));return}if(X.type==="cam:started"||X.requestType==="cam:started"){console.log("[Call] Camera sharing started by:",X.from),(((We=Z.current)==null?void 0:We.get("CameraShareStarted"))||[]).forEach(qe=>qe.callback({userId:X.from}));return}if(X.type==="cam:stopped"||X.requestType==="cam:stopped"){console.log("[Call] Camera sharing stopped by:",X.from),(((Re=Z.current)==null?void 0:Re.get("CameraShareStopped"))||[]).forEach(qe=>qe.callback({userId:X.from}));return}const Me=r().get(X.from);if(X.type==="offer")console.log("[Call] Incoming offer, showing incoming call UI"),C(!0),A(X.from),ze.current=X.callType||"voice",dt.getCallerProfile(X.from).then(nt=>{nt&&(y(nt.username),console.log("[Call] Set caller name:",nt.username))}),F(X.from).some(nt=>nt.type==="offer")?console.log("[Call] Offer already buffered, ignoring duplicate"):(U(X.from,X.signal),console.log("[Call] Offer buffered, waiting for user to accept"));else if(X.type==="answer"){if(console.log("[Call] Answer received, processing..."),re.current){console.log("[Call] Answer already processed, ignoring duplicate");return}if(Me)try{const Te=Me.peer._pc,qe=Te==null?void 0:Te.signalingState,nt=Te==null?void 0:Te.connectionState,R=Me.peer.destroyed;if(console.log("[Call] Enhanced peer state check:",{signalingState:qe,connectionState:nt,destroyed:R,isInitiator:J.current}),R){console.error("[Call] Peer is destroyed, cannot process answer");return}if(nt==="connected"||nt==="completed"){console.log("[Call] Peer already connected, skipping answer");return}if(qe==="stable"){console.warn("[Call] Peer already stable, skipping answer signal to avoid error");return}if(qe==="have-local-offer"&&nt!=="closed"){if(!J.current){console.warn("[Call] Non-initiator received answer signal, ignoring");return}console.log("[Call] Processing answer in state:",qe),Me.peer.signal(X.signal),re.current=!0,console.log("[Call]  Answer processed successfully")}else qe==="closed"||nt==="closed"?console.log("[Call] Peer connection closed, ignoring answer"):console.warn("[Call] Unexpected peer state for answer:",{signalingState:qe,connectionState:nt})}catch(Te){console.error("[Call] Failed to process answer:",Te)}else console.log("[Call] No peer yet, buffering answer"),U(X.from,X.signal)}else if(X.type==="ice-candidate")if(Me)try{Me.peer.signal(X.signal)}catch(Te){console.error("[Call] Failed to process ICE candidate:",Te)}else U(X.from,X.signal)},[r,x,i,C,h,d,A,y,U,xe]),W=_.useCallback(async()=>{var we;const X=o();if(X){const Me=!((we=X.getAudioTracks()[0])!=null&&we.enabled);dt.toggleAudio(X,Me);const Ve=fe.current;return Ve&&await Ne(Ve,null,"media:toggle",{requestType:"media:toggle",mediaType:"mic",enabled:Me}),Me}return!1},[o,Ne]),ie=_.useCallback(async()=>{var we;const X=o();if(X&&ze.current==="video"){const Me=!((we=X.getVideoTracks()[0])!=null&&we.enabled);dt.toggleVideo(X,Me);const Ve=fe.current;return Ve&&await Ne(Ve,null,"media:toggle",{requestType:"media:toggle",mediaType:"cam",enabled:Me}),Me}return!1},[o,Ne]);_.useEffect(()=>(de("ReceiveSignal",$),()=>{ke("ReceiveSignal",$)}),[de,ke,$]),_.useEffect(()=>()=>{i()&&xe()},[]),_.useEffect(()=>{(()=>{const we=ba.handlePageRefresh();we&&(console.warn("[Call] Detected previous call state after page refresh:",we),(we.isActive||we.isCalling||we.isReceiving)&&(console.log("[Call] Previous call was interrupted by page refresh"),O()))})()},[]);const ye=i(),pe=u(),T=x(),N=S(),ee=D(),ge=E(),Ae=b();return{callState:{isInCall:ye,callType:ze.current,isIncoming:T,contactId:fe.current||ge,contactName:T?ee:Ae,callId:fe.current||ge,mediaPermissionDenied:H.current,isRinging:pe&&!ye,isInitiator:J.current},incomingCall:T?{callerId:N,callerName:ee||"Unknown",callType:ze.current}:null,isCallUIVisible:ye,isInCall:ye,hasIncomingCall:T,startCall:B,answerCall:q,rejectCall:me,cancelCall:he,endCall:xe,toggleMute:W,toggleVideo:ie,setIsCallUIVisible:d}},Zb=_.createContext(void 0),ew=({children:r})=>{const[t,a]=_.useState("online"),[o,l]=_.useState(new Map),[i,d]=_.useState(null),u=_.useRef(null),h=_.useRef(new Map),x=_.useCallback(async k=>{if(i)try{await ne.from("user_presence").upsert({user_id:i,status:k,last_seen:new Date().toISOString()},{onConflict:"user_id"}),console.log("[Presence] Status updated:",k)}catch(j){console.error("[Presence] Failed to update status:",j)}},[i]),C=_.useCallback(async k=>{a(k),await x(k)},[x]),S=_.useCallback(k=>o.get(k)||null,[o]),A=_.useCallback((k,j)=>{const I=h.current.get(k)||new Set;return I.add(j),h.current.set(k,I),()=>{const O=h.current.get(k);O&&(O.delete(j),O.size===0&&h.current.delete(k))}},[]),D=_.useCallback(()=>{u.current||(u.current=setInterval(async()=>{i&&t==="online"&&await x("online")},3e4),console.log("[Presence] Heartbeat started"))},[i,t,x]),y=_.useCallback(()=>{u.current&&(clearInterval(u.current),u.current=null,console.log("[Presence] Heartbeat stopped"))},[]),E=_.useCallback(async()=>{document.hidden?(await C("away"),y()):(await C("online"),D())},[C,D,y]),w=_.useCallback(async()=>{await x("offline")},[x]);_.useEffect(()=>{const k=ne.channel("user-presence-changes").on("postgres_changes",{event:"*",schema:"public",table:"user_presence"},j=>{if(j.eventType==="INSERT"||j.eventType==="UPDATE"){const{user_id:I,status:O}=j.new;l(U=>{const ce=new Map(U);return ce.set(I,O),ce});const F=h.current.get(I);F&&F.forEach(U=>U(O)),console.log("[Presence] User status changed:",I,O)}}).subscribe();return()=>{ne.removeChannel(k)}},[]),_.useEffect(()=>((async()=>{const{data:{user:j}}=await ne.auth.getUser();j&&(d(j.id),await x("online"),D(),document.addEventListener("visibilitychange",E),window.addEventListener("beforeunload",w),console.log("[Presence] Initialized for user:",j.id))})(),()=>{document.removeEventListener("visibilitychange",E),window.removeEventListener("beforeunload",w),y(),i&&x("offline")}),[]);const b={currentStatus:t,setStatus:C,getUserStatus:S,subscribeToUserStatus:A};return m.jsx(Zb.Provider,{value:b,"data-matrix-id":"src/contexts/PresenceContext.tsx:213:9","data-matrix-name":"PresenceContext.Provider","data-component-path":"src/contexts/PresenceContext.tsx","data-component-line":"213","data-component-file":"PresenceContext.tsx","data-component-name":"PresenceContext.Provider","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:r})},tw=_.createContext(void 0),nw=({children:r})=>{const[t,a]=_.useState([]),[o,l]=_.useState(!1),[i,d]=_.useState(null),[u,h]=_.useState(null),x=_.useRef(null),C=_.useCallback(async()=>{if(!("Notification"in window))return console.warn("[Notifications] Browser does not support notifications"),!1;if(Notification.permission==="granted")return l(!0),!0;if(Notification.permission!=="denied"){const F=await Notification.requestPermission()==="granted";return l(F),F}return!1},[]),S=_.useCallback(()=>{try{x.current||(x.current=new(window.AudioContext||window.webkitAudioContext));const O=x.current,F=O.createOscillator(),U=O.createGain();F.connect(U),U.connect(O.destination),F.frequency.setValueAtTime(800,O.currentTime),F.frequency.setValueAtTime(1e3,O.currentTime+.1),U.gain.setValueAtTime(.1,O.currentTime),U.gain.exponentialRampToValueAtTime(.01,O.currentTime+.3),F.start(O.currentTime),F.stop(O.currentTime+.3)}catch(O){console.error("[Notifications] Failed to play sound:",O)}},[]),A=_.useCallback((O,F,U)=>{if(o)try{const ce=new Notification(O,{body:F,icon:"/logo.png",badge:"/logo.png",tag:(U==null?void 0:U.id)||"default",requireInteraction:!1});ce.onclick=()=>{window.focus(),ce.close(),(U==null?void 0:U.type)==="message"&&(U!=null&&U.channelId)&&console.log("[Notifications] Navigate to channel:",U.channelId)}}catch(ce){console.error("[Notifications] Failed to show notification:",ce)}},[o]),D=_.useCallback((O,F,U,ce)=>{const de={id:`${Date.now()}-${Math.random()}`,type:O,title:F,body:U,timestamp:new Date,read:!1,data:ce};a(ke=>[de,...ke].slice(0,100)),S(),A(F,U,ce),console.log("[Notifications] Added:",O,F)},[S,A]),y=_.useCallback(O=>{a(F=>F.map(U=>U.id===O?{...U,read:!0}:U))},[]),E=_.useCallback(()=>{a(O=>O.map(F=>({...F,read:!0})))},[]),w=_.useCallback(O=>{a(F=>F.filter(U=>U.id!==O))},[]),b=_.useCallback(()=>{a([])},[]),k=_.useCallback((O,F)=>u?!(u.type==="channel"&&u.id===O):!0,[u]);_.useEffect(()=>{if(!i)return;const O=ne.channel("notifications-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},F=>{var de;const U=F.new;if(U.user_id===i||!k(U.channel_id))return;((de=U.content)==null?void 0:de.includes(`<@${i}>`))?D("mention","Bahsedildiniz",`${U.username||"Birisi"} sizi bir mesajda bahsetti`,{type:"message",channelId:U.channel_id,messageId:U.id}):D("message","Yeni Mesaj",`${U.username||"Birisi"} bir mesaj gnderdi`,{type:"message",channelId:U.channel_id,messageId:U.id})}).subscribe();return()=>{ne.removeChannel(O)}},[i,k,D]),_.useEffect(()=>{if(!i)return;const O=ne.channel("notifications-dms").on("postgres_changes",{event:"INSERT",schema:"public",table:"direct_messages",filter:`receiver_id=eq.${i}`},F=>{const U=F.new;k(void 0,U.sender_id)&&D("message","Yeni Direkt Mesaj",`${U.sender_username||"Birisi"} size bir mesaj gnderdi`,{type:"dm",senderId:U.sender_id,messageId:U.id})}).subscribe();return()=>{ne.removeChannel(O)}},[i,k,D]),_.useEffect(()=>{(async()=>{const{data:{user:F}}=await ne.auth.getUser();F&&(d(F.id),"Notification"in window&&Notification.permission==="granted"&&l(!0),console.log("[Notifications] Initialized for user:",F.id))})()},[]);const j=t.filter(O=>!O.read).length,I={notifications:t,unreadCount:j,markAsRead:y,markAllAsRead:E,clearNotification:w,clearAll:b,requestPermission:C,hasPermission:o};return m.jsx(tw.Provider,{value:I,"data-matrix-id":"src/contexts/NotificationContext.tsx:316:9","data-matrix-name":"NotificationContext.Provider","data-component-path":"src/contexts/NotificationContext.tsx","data-component-line":"316","data-component-file":"NotificationContext.tsx","data-component-name":"NotificationContext.Provider","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:r})};function aw(){var Te,qe,nt,R;const{user:r,loading:t}=Tt(),[a,o]=_.useState(!1),[l,i]=_.useState("friends"),[d,u]=_.useState(null),[h,x]=_.useState(null),[C,S]=_.useState(null),[A,D]=_.useState(""),[y,E]=_.useState(null),[w,b]=_.useState(null),[k,j]=_.useState(!1),[I,O]=_.useState(!1),[F,U]=_.useState(!1),[ce,de]=_.useState(!1),[ke,Ne]=_.useState(!1),[ze,fe]=_.useState(!0),[H,J]=_.useState(!1),{callState:re,incomingCall:z,startCall:Z,answerCall:te,rejectCall:V,cancelCall:B,endCall:q,hasIncomingCall:me,isInCall:he,toggleMute:xe,toggleVideo:$}=Xb();_.useEffect(()=>{console.log("[App] Call state changed:",{hasIncomingCall:me,isInCall:he,isRinging:re.isRinging,contactId:re.contactId,contactName:re.contactName,isInitiator:re.isInitiator})},[me,he,re]);const{incomingCallRequests:W,acceptCallRequest:ie,rejectCallRequest:ye}=lf(),[pe,T]=_.useState(!1),[N,ee]=_.useState(null);_.useEffect(()=>{if(r)return console.log("[App] Initializing user activity for:",r.id),Tr.initialize(),()=>{console.log("[App] Destroying user activity service"),Tr.destroy()}},[r]),_.useEffect(()=>{if(W.length>0&&!pe){const f=W[0];ee(f),T(!0)}},[W,pe]),_.useEffect(()=>{const f=v=>{v.key==="Escape"&&pe&&X(),(v.ctrlKey||v.metaKey)&&v.key==="k"&&(v.preventDefault(),J(!0),console.log("[App]  GlobalSearch opened with Ctrl+K"))};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[pe,H]),_.useEffect(()=>{h?we():S(null)},[h]),_.useEffect(()=>{d?Me():D("")},[d]);const ge=async()=>{if(N)try{if(console.log("[App] Accepting call request from:",N.from_user_id),await ie(N.id),T(!1),ee(null),N.from_user)try{console.log("[App] Answering call from:",N.from_user.username),await te()}catch(f){console.error("[App] Error answering call:",f)}}catch(f){console.error("[App] Error accepting call request:",f)}},Ae=async()=>{if(N)try{await ye(N.id),T(!1),ee(null)}catch(f){console.error("[App] Error rejecting call request:",f)}},X=()=>{T(!1),ee(null)};async function we(){if(!h)return;const{data:f,error:v}=await ne.from("channels").select("*").eq("id",h).maybeSingle();f&&!v&&S(f)}async function Me(){if(!d)return;const{data:f,error:v}=await ne.from("servers").select("name").eq("id",d).maybeSingle();f&&!v&&D(f.name)}const Ve=f=>{i(f),f!=="servers"&&(u(null),x(null)),f==="servers"&&(E(null),b(null))},Pe=async(f,v,L)=>{try{await Z(f,v,L)}catch(Y){console.error("Failed to start call:",Y)}},ot=(f,v)=>{E(f),b(v)},We=()=>{j(!0)},Re=()=>{d&&O(!0)};return t?m.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center","data-matrix-id":"src/App.tsx:287:6","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"287","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gray-900%20flex%20items-center%20justify-center%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/App.tsx:288:8","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"288","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4","data-matrix-id":"src/App.tsx:289:10","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"289","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20border-4%20border-primary-500%20border-t-transparent%20rounded-full%20animate-spin%20mx-auto%20mb-4%22%7D"}),m.jsx("p",{className:"text-neutral-400","data-matrix-id":"src/App.tsx:290:10","data-matrix-name":"p","data-component-path":"src/App.tsx","data-component-line":"290","data-component-file":"App.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-neutral-400%22%7D",children:"Ykleniyor..."})]})}):r?m.jsxs("div",{className:"h-screen bg-gray-900 flex overflow-hidden relative","data-matrix-id":"src/App.tsx:305:4","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"305","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22h-screen%20bg-gray-900%20flex%20overflow-hidden%20relative%22%7D",children:[m.jsx(eb,{selectedServerId:d,currentView:l,onSelectServer:f=>{u(f),x(null),i("servers")},onViewChange:Ve,onAddAction:We,onSettings:()=>U(!0),onSearch:()=>J(!0),"data-matrix-id":"src/App.tsx:307:6","data-matrix-name":"ServerList","data-component-path":"src/App.tsx","data-component-line":"307","data-component-file":"App.tsx","data-component-name":"ServerList","data-component-content":"%7B%22selectedServerId%22%3A%22%5BIdentifier%5D%22%2C%22currentView%22%3A%22%5BIdentifier%5D%22%2C%22onSelectServer%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onViewChange%22%3A%22%5BIdentifier%5D%22%2C%22onAddAction%22%3A%22%5BIdentifier%5D%22%2C%22onSettings%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onSearch%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),l==="servers"&&m.jsx(tb,{serverId:d,selectedChannelId:h,onSelectChannel:x,onCreateChannel:Re,onInvite:()=>de(!0),onManageRoles:()=>Ne(!0),"data-matrix-id":"src/App.tsx:323:8","data-matrix-name":"ChannelList","data-component-path":"src/App.tsx","data-component-line":"323","data-component-file":"App.tsx","data-component-name":"ChannelList","data-component-content":"%7B%22serverId%22%3A%22%5BIdentifier%5D%22%2C%22selectedChannelId%22%3A%22%5BIdentifier%5D%22%2C%22onSelectChannel%22%3A%22%5BIdentifier%5D%22%2C%22onCreateChannel%22%3A%22%5BIdentifier%5D%22%2C%22onInvite%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onManageRoles%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),l==="friends"&&m.jsx(mb,{onStartDM:ot,onStartCall:Pe,"data-matrix-id":"src/App.tsx:334:8","data-matrix-name":"FriendsList","data-component-path":"src/App.tsx","data-component-line":"334","data-component-file":"App.tsx","data-component-name":"FriendsList","data-component-content":"%7B%22onStartDM%22%3A%22%5BIdentifier%5D%22%2C%22onStartCall%22%3A%22%5BIdentifier%5D%22%7D"}),l==="servers"&&!C&&m.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-900","data-matrix-id":"src/App.tsx:342:8","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"342","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20items-center%20justify-center%20bg-gray-900%22%7D",children:m.jsxs("div",{className:"text-center px-4","data-matrix-id":"src/App.tsx:343:10","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"343","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20px-4%22%7D",children:[m.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full mx-auto mb-6 flex items-center justify-center","data-matrix-id":"src/App.tsx:344:12","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"344","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-20%20h-20%20bg-gray-800%20rounded-full%20mx-auto%20mb-6%20flex%20items-center%20justify-center%22%7D",children:m.jsx(jn,{className:"w-10 h-10 text-gray-600","data-matrix-id":"src/App.tsx:345:14","data-matrix-name":"Hash","data-component-path":"src/App.tsx","data-component-line":"345","data-component-file":"App.tsx","data-component-name":"Hash","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20text-gray-600%22%7D"})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-2","data-matrix-id":"src/App.tsx:347:12","data-matrix-name":"h3","data-component-path":"src/App.tsx","data-component-line":"347","data-component-file":"App.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-white%20mb-2%22%7D",children:"Bir kanala katln"}),m.jsx("p",{className:"text-gray-400 max-w-md","data-matrix-id":"src/App.tsx:350:12","data-matrix-name":"p","data-component-path":"src/App.tsx","data-component-line":"350","data-component-file":"App.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%20max-w-md%22%7D",children:"Sol taraftan bir kanal seerek sohbete balayn"})]})}),l==="servers"&&C&&(C.is_voice?m.jsx(Yb,{channelId:C.id,channelName:C.name,"data-matrix-id":"src/App.tsx:359:10","data-matrix-name":"VoiceChannelView","data-component-path":"src/App.tsx","data-component-line":"359","data-component-file":"App.tsx","data-component-name":"VoiceChannelView","data-component-content":"%7B%22channelId%22%3A%22%5BMemberExpression%5D%22%2C%22channelName%22%3A%22%5BMemberExpression%5D%22%7D"}):m.jsx(nb,{channelId:h,"data-matrix-id":"src/App.tsx:364:10","data-matrix-name":"MessageArea","data-component-path":"src/App.tsx","data-component-line":"364","data-component-file":"App.tsx","data-component-name":"MessageArea","data-component-content":"%7B%22channelId%22%3A%22%5BIdentifier%5D%22%7D"})),l==="friends"&&!y&&m.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-900","data-matrix-id":"src/App.tsx:369:8","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"369","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20items-center%20justify-center%20bg-gray-900%22%7D",children:m.jsxs("div",{className:"text-center","data-matrix-id":"src/App.tsx:370:10","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"370","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[m.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full mx-auto mb-4 flex items-center justify-center","data-matrix-id":"src/App.tsx:371:12","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"371","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20bg-green-600%20rounded-full%20mx-auto%20mb-4%20flex%20items-center%20justify-center%22%7D",children:m.jsx(Po,{className:"w-8 h-8 text-white","data-matrix-id":"src/App.tsx:372:14","data-matrix-name":"Users","data-component-path":"src/App.tsx","data-component-line":"372","data-component-file":"App.tsx","data-component-name":"Users","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-white%22%7D"})}),m.jsx("h3",{className:"text-xl font-semibold text-white mb-2","data-matrix-id":"src/App.tsx:374:12","data-matrix-name":"h3","data-component-path":"src/App.tsx","data-component-line":"374","data-component-file":"App.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-white%20mb-2%22%7D",children:"Arkadalar"}),m.jsx("p",{className:"text-gray-400","data-matrix-id":"src/App.tsx:377:12","data-matrix-name":"p","data-component-path":"src/App.tsx","data-component-line":"377","data-component-file":"App.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-400%22%7D",children:"Arkadanz sein ve sohbet balatn"})]})}),l==="friends"&&y&&w&&m.jsx(db,{contactId:y,contactName:w,onStartCall:Pe,"data-matrix-id":"src/App.tsx:385:8","data-matrix-name":"DirectMessageArea","data-component-path":"src/App.tsx","data-component-line":"385","data-component-file":"App.tsx","data-component-name":"DirectMessageArea","data-component-content":"%7B%22contactId%22%3A%22%5BIdentifier%5D%22%2C%22contactName%22%3A%22%5BIdentifier%5D%22%2C%22onStartCall%22%3A%22%5BIdentifier%5D%22%7D"}),ze&&l==="servers"&&d&&m.jsx(ob,{serverId:d,"data-matrix-id":"src/App.tsx:394:8","data-matrix-name":"MemberList","data-component-path":"src/App.tsx","data-component-line":"394","data-component-file":"App.tsx","data-component-name":"MemberList","data-component-content":"%7B%22serverId%22%3A%22%5BIdentifier%5D%22%7D"}),m.jsx("div",{className:"absolute top-4 right-4 z-30","data-matrix-id":"src/App.tsx:398:6","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"398","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20top-4%20right-4%20z-30%22%7D",children:m.jsx(ub,{"data-matrix-id":"src/App.tsx:399:8","data-matrix-name":"NotificationSystem","data-component-path":"src/App.tsx","data-component-line":"399","data-component-file":"App.tsx","data-component-name":"NotificationSystem"})}),m.jsx(Hb,{callState:re.isIncoming&&!re.isRinging&&!re.isInCall?"incoming":re.isInCall?"connected":re.isRinging?"outgoing":"inactive",callerId:re.isInCall&&re.isInitiator?r==null?void 0:r.id:re.isIncoming?z==null?void 0:z.callerId:void 0,callerName:re.isInCall&&re.isInitiator?((Te=r==null?void 0:r.user_metadata)==null?void 0:Te.username)||((qe=r==null?void 0:r.email)==null?void 0:qe.split("@")[0]):re.isIncoming?z==null?void 0:z.callerName:void 0,calleeId:re.isInCall&&!re.isInitiator?r==null?void 0:r.id:re.contactId||void 0,calleeName:re.isInCall&&!re.isInitiator?((nt=r==null?void 0:r.user_metadata)==null?void 0:nt.username)||((R=r==null?void 0:r.email)==null?void 0:R.split("@")[0]):re.contactName||void 0,onAccept:te,onReject:V,onCancel:B,onEndCall:q,onToggleMute:xe,onToggleVideo:$,callType:re.callType,"data-matrix-id":"src/App.tsx:403:6","data-matrix-name":"NewCallOverlay","data-component-path":"src/App.tsx","data-component-line":"403","data-component-file":"App.tsx","data-component-name":"NewCallOverlay","data-component-content":"%7B%22callState%22%3A%22%5BConditionalExpression%5D%22%2C%22callerId%22%3A%22%5BConditionalExpression%5D%22%2C%22callerName%22%3A%22%5BConditionalExpression%5D%22%2C%22calleeId%22%3A%22%5BConditionalExpression%5D%22%2C%22calleeName%22%3A%22%5BConditionalExpression%5D%22%2C%22onAccept%22%3A%22%5BIdentifier%5D%22%2C%22onReject%22%3A%22%5BIdentifier%5D%22%2C%22onCancel%22%3A%22%5BIdentifier%5D%22%2C%22onEndCall%22%3A%22%5BIdentifier%5D%22%2C%22onToggleMute%22%3A%22%5BIdentifier%5D%22%2C%22onToggleVideo%22%3A%22%5BIdentifier%5D%22%2C%22callType%22%3A%22%5BMemberExpression%5D%22%7D"}),m.jsx(rb,{isOpen:k,onClose:()=>j(!1),onServerCreated:()=>{},"data-matrix-id":"src/App.tsx:439:6","data-matrix-name":"CreateServerModal","data-component-path":"src/App.tsx","data-component-line":"439","data-component-file":"App.tsx","data-component-name":"CreateServerModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onServerCreated%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsx(sb,{isOpen:I,onClose:()=>O(!1),serverId:d||"",onChannelCreated:()=>{},"data-matrix-id":"src/App.tsx:447:6","data-matrix-name":"CreateChannelModal","data-component-path":"src/App.tsx","data-component-line":"447","data-component-file":"App.tsx","data-component-name":"CreateChannelModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22serverId%22%3A%22%5BLogicalExpression%5D%22%2C%22onChannelCreated%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsx(ib,{isOpen:F,onClose:()=>U(!1),"data-matrix-id":"src/App.tsx:456:6","data-matrix-name":"SettingsModal","data-component-path":"src/App.tsx","data-component-line":"456","data-component-file":"App.tsx","data-component-name":"SettingsModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),d&&m.jsxs(m.Fragment,{children:[m.jsx(lb,{isOpen:ce,onClose:()=>de(!1),serverId:d,serverName:A,"data-matrix-id":"src/App.tsx:463:10","data-matrix-name":"ServerInviteModal","data-component-path":"src/App.tsx","data-component-line":"463","data-component-file":"App.tsx","data-component-name":"ServerInviteModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22serverId%22%3A%22%5BIdentifier%5D%22%2C%22serverName%22%3A%22%5BIdentifier%5D%22%7D"}),m.jsx(cb,{isOpen:ke,onClose:()=>Ne(!1),serverId:d,serverName:A,"data-matrix-id":"src/App.tsx:469:10","data-matrix-name":"ServerRolesModal","data-component-path":"src/App.tsx","data-component-line":"469","data-component-file":"App.tsx","data-component-name":"ServerRolesModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22serverId%22%3A%22%5BIdentifier%5D%22%2C%22serverName%22%3A%22%5BIdentifier%5D%22%7D"})]}),m.jsx(yb,{isOpen:H,onClose:()=>J(!1),onSelectServer:f=>{u(f),x(null),i("servers")},onSelectChannel:(f,v)=>{u(v),x(f),i("servers")},onSelectUser:async(f,v)=>{try{console.log("[GlobalSearch] Sending call request to:",v);const{data:{user:L}}=await ne.auth.getUser();L&&(await ne.from("call_requests").insert({from_user_id:L.id,to_user_id:f,status:"pending",created_at:new Date().toISOString()}),console.log("[GlobalSearch] Call request sent successfully"),i("friends"),E(f),b(v))}catch(L){console.error("[GlobalSearch] Failed to send call request:",L)}},onAddFriend:(f,v)=>{alert(`${v} kullancsna arkada istei gnderildi!`),i("friends")},"data-matrix-id":"src/App.tsx:479:6","data-matrix-name":"GlobalSearchModal","data-component-path":"src/App.tsx","data-component-line":"479","data-component-file":"App.tsx","data-component-name":"GlobalSearchModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onSelectServer%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onSelectChannel%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onSelectUser%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onAddFriend%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),m.jsx(Kb,{isOpen:pe,callRequest:N,onAccept:ge,onReject:Ae,onClose:X,"data-matrix-id":"src/App.tsx:532:6","data-matrix-name":"IncomingCallRequestModal","data-component-path":"src/App.tsx","data-component-line":"532","data-component-file":"App.tsx","data-component-name":"IncomingCallRequestModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22callRequest%22%3A%22%5BIdentifier%5D%22%2C%22onAccept%22%3A%22%5BIdentifier%5D%22%2C%22onReject%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BIdentifier%5D%22%7D"})]}):a?m.jsx(Zy,{onToggle:()=>o(!1),"data-matrix-id":"src/App.tsx:298:6","data-matrix-name":"SignUpForm","data-component-path":"src/App.tsx","data-component-line":"298","data-component-file":"App.tsx","data-component-name":"SignUpForm","data-component-content":"%7B%22onToggle%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}):m.jsx(Xy,{onToggle:()=>o(!0),"data-matrix-id":"src/App.tsx:300:6","data-matrix-name":"LoginForm","data-component-path":"src/App.tsx","data-component-line":"300","data-component-file":"App.tsx","data-component-name":"LoginForm","data-component-content":"%7B%22onToggle%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})}function ow(){return _.useEffect(()=>{const r=()=>{try{const a=window.AudioContext||window.webkitAudioContext;if(a){const o=new a;console.log("[App] AudioContext initialized")}}catch{console.log("[App] AudioContext not available")}},t=()=>{r(),document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)};return document.addEventListener("click",t,{once:!0}),document.addEventListener("keydown",t,{once:!0}),document.addEventListener("touchstart",t,{once:!0}),()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}},[]),m.jsx(Ty,{"data-matrix-id":"src/App.tsx:579:4","data-matrix-name":"AuthProvider","data-component-path":"src/App.tsx","data-component-line":"579","data-component-file":"App.tsx","data-component-name":"AuthProvider",children:m.jsx(ew,{"data-matrix-id":"src/App.tsx:580:6","data-matrix-name":"PresenceProvider","data-component-path":"src/App.tsx","data-component-line":"580","data-component-file":"App.tsx","data-component-name":"PresenceProvider",children:m.jsx(nw,{"data-matrix-id":"src/App.tsx:581:8","data-matrix-name":"NotificationProvider","data-component-path":"src/App.tsx","data-component-line":"581","data-component-file":"App.tsx","data-component-name":"NotificationProvider",children:m.jsx(pb,{"data-matrix-id":"src/App.tsx:582:10","data-matrix-name":"SupabaseRealtimeProvider","data-component-path":"src/App.tsx","data-component-line":"582","data-component-file":"App.tsx","data-component-name":"SupabaseRealtimeProvider",children:m.jsx(vb,{"data-matrix-id":"src/App.tsx:583:12","data-matrix-name":"WebRTCProvider","data-component-path":"src/App.tsx","data-component-line":"583","data-component-file":"App.tsx","data-component-name":"WebRTCProvider",children:m.jsxs(ng,{"data-matrix-id":"src/App.tsx:584:14","data-matrix-name":"Routes","data-component-path":"src/App.tsx","data-component-line":"584","data-component-file":"App.tsx","data-component-name":"Routes",children:[m.jsx(id,{path:"/",element:m.jsx(aw,{"data-matrix-id":"src/App.tsx:585:41","data-matrix-name":"AppContent","data-component-path":"src/App.tsx","data-component-line":"585","data-component-file":"App.tsx","data-component-name":"AppContent"}),"data-matrix-id":"src/App.tsx:585:16","data-matrix-name":"Route","data-component-path":"src/App.tsx","data-component-line":"585","data-component-file":"App.tsx","data-component-name":"Route","data-component-content":"%7B%22path%22%3A%22%2F%22%2C%22element%22%3A%22%5BJSXElement%5D%22%7D"}),m.jsx(id,{path:"/invite/:inviteCode",element:m.jsx(Qb,{"data-matrix-id":"src/App.tsx:586:59","data-matrix-name":"JoinServerPage","data-component-path":"src/App.tsx","data-component-line":"586","data-component-file":"App.tsx","data-component-name":"JoinServerPage"}),"data-matrix-id":"src/App.tsx:586:16","data-matrix-name":"Route","data-component-path":"src/App.tsx","data-component-line":"586","data-component-file":"App.tsx","data-component-name":"Route","data-component-content":"%7B%22path%22%3A%22%2Finvite%2F%3AinviteCode%22%2C%22element%22%3A%22%5BJSXElement%5D%22%7D"})]})})})})})})}c0.createRoot(document.getElementById("root")).render(m.jsx(_.StrictMode,{"data-matrix-id":"src/main.tsx:8:2","data-matrix-name":"StrictMode","data-component-path":"src/main.tsx","data-component-line":"8","data-component-file":"main.tsx","data-component-name":"StrictMode",children:m.jsx(rg,{"data-matrix-id":"src/main.tsx:9:4","data-matrix-name":"BrowserRouter","data-component-path":"src/main.tsx","data-component-line":"9","data-component-file":"main.tsx","data-component-name":"BrowserRouter",children:m.jsx(ow,{"data-matrix-id":"src/main.tsx:10:6","data-matrix-name":"App","data-component-path":"src/main.tsx","data-component-line":"10","data-component-file":"main.tsx","data-component-name":"App"})})}));
